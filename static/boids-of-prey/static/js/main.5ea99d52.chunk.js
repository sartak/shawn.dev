(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var a=n(11),i="".concat(a.b,"_").concat("prod","_"),r=!1;function o(){r=!0}function s(e,t){if(r)return!1;try{var n=JSON.stringify(t);localStorage.setItem("".concat(i).concat(e),n)}catch(a){return console.error(a),!1}return!0}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(r)return!1;try{Object.keys(localStorage).forEach(function(t){t.startsWith("".concat(i).concat(e))&&localStorage.removeItem(t)})}catch(t){return console.error(t),!1}return!0}function l(e,t){var n=t;try{var a=localStorage.getItem("".concat(i).concat(e));null!==a&&void 0!==a&&(n=JSON.parse(a))}catch(r){console.error(r)}return"function"===typeof n&&(n=n()),n}},101:function(e,t,n){"use strict";n.d(t,"e",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"b",function(){return _}),n.d(t,"a",function(){return v});var a=n(183),i=n(7),r=n(6),o=n(3),s=n(27),c=n.n(s),l=[];function u(e){return l.find(function(t){return e.startsWith(t)})}var h=!1;function d(e,t){if(e.seed=t,e.rnd=new c.a.Math.RandomDataGenerator([t]),!h){var n=e.delay.__proto__;n.randomStaticValueEmit=function(e,t){var n=Math.floor(e.emitter.rnd.frac()*this.propertyValue.length);return this.propertyValue[n]},n.randomRangedValueEmit=function(e,t){var n=e.emitter.rnd.realInRange(this.start,this.end);return e&&e.data[t]&&(e.data[t].min=n),n},h=!0}}var p=!1;function m(e){return p||!e?p:(e.__proto__.preUpdate=function(e,t){for(var n=this.scene._paused.particles,a=t*this.timeScale,i=this.emitters.list,r=0;r<i.length;r+=1){var o=i[r];(!n||this.ignoresScenePause||o.ignoresScenePause||o.updatesOnceOnPause)&&o.active&&(o.preUpdate(e,a),n&&(o.updatesOnceOnPause=!1))}},p=!0)}var f={image:null,frequency:[0,0,2e4],lifespan:[1e3,0,2e4],accelerationX:[0,-1e3,1e3],accelerationY:[0,-1e3,1e3],alpha:[1,0,1],blendMode:["NORMAL",["NORMAL","ADD","MULTIPLY","SCREEN","ERASE"]],delay:[0,0,2e4],maxParticles:[0,0,1e3],particleBringToTop:[!0],quantity:[1,0,200,1],radial:[!0],rotate:[0,-1080,1080,1],scaleX:[1,0,100],scaleY:[1,0,100],speed:[0,0,1e3],speedX:[0,-1e3,1e3],speedY:[0,-1e3,1e3],tint:[16777215],tint_enabled:[!1],x:[0,-1e3,1e3],y:[0,-1e3,1e3],ignoresScenePause:[!1],updatesOnceOnPause:[!1],visible:[!0],preemit:[!1],preemitOnReload:[!1]};function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["set props/particleImages!"];Object.entries(e).forEach(function(n){var a=Object(o.a)(n,2),s=a[0],c=a[1];if("scene.particles"!==s){if(s.endsWith(".particle"))throw new Error("Found ".concat(s,"; did you mean ").concat(s,"s?"));if(s.endsWith(".particles")){var u=s.substr(0,s.length-".particles".length);if(!Array.isArray(c)||1!==c.length||"object"!==typeof c[0])throw new Error("Expected ".concat(s," prop to have the shape [{\u2026}]; did you mean to end it in .particles?"));delete e[s],l.push(u);var h=Object(o.a)(c,1)[0],d=Object(r.a)({},h);if(Object.entries(f).forEach(function(n){var a=Object(o.a)(n,2),r=a[0],s=a[1],c=r.replace(/^tint/,"tintColor"),l="image"===r?[t[0],t]:s;if(r in h)e["".concat(u,".").concat(c)]=[h[r]].concat(Object(i.a)(l.slice(1))),delete d[r];else if("preemitOnReload"===r&&h.preemit)e["".concat(u,".").concat(c)]=[!0].concat(Object(i.a)(l.slice(1)));else if(r.endsWith("_enabled")){var p=r.substr(0,r.length-"_enabled".length);e["".concat(u,".").concat(c)]=[p in h]}else e["".concat(u,".").concat(c)]=l}),Object.keys(d).length)throw new Error("Got unexpected particle config settings: ".concat(Object.keys(d).join(", ")))}}})}function v(e){var t=Object(a.a)({},e),n=t.massageProps;return delete t.onAdd,delete t.massageProps,delete t.image,t.tintColor_enabled&&(t.tint=t.tintColor,delete t.tintColor_enabled),0===t.speedX&&0===t.speedY?(delete t.speedX,delete t.speedY):0===t.speed&&delete t.speed,t.rotate&&"number"===typeof t.rotate&&(t.rotate*=Math.PI/180),n&&n(t),t}},11:function(e){e.exports={b:"boids-of-prey",c:{embed:!0,displayName:"Boids of Prey",analyticsId:"UA-21253667-5",authorName:"@sartak",authorURL:"https://shawn.dev",authorTwitter:"sartak",authorTwitch:"sartak",eventDescription:"created solo in 48 hours as part of",eventNamePre:"the",eventNameBold:"Ludum Dare 46",eventNamePost:"compo",eventURL:"https://ldjam.com/events/ludum-dare/46/boids-of-prey",themeDescription:"for the theme",themePre:"",themeItalic:'"Keep it alive"',themePost:"",repoURL:"https://github.com/sartak/boids-of-prey"},a:{links:[["https://labs.phaser.io/","labs"],["https://photonstorm.github.io/phaser3-docs/","phaser-docs"],["https://lodash.com/docs/4.17.11","lodash"],["https://sfbgames.com/chiptone/","chiptone"],["https://pernyblom.github.io/abundant-music/index.html","abundant"]]}}},1490:function(e,t,n){},1491:function(e,t,n){},1492:function(e,t,n){},1493:function(e,t,n){},1494:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(548),o=n.n(r),s=(n(593),n(16)),c=n(15),l=n(18),u=n(8),h=n(19),d=n(587),p=n(3),m=(n(594),n(595),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"lds-spinner"},i.a.createElement("div",{className:"lds-spinner"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)))}}]),t}(i.a.Component)),f=(n(596),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onMouseMove,n=e.volume,a=e.onVolumeChange,r=e.disableFullscreen,o=e.isFullscreen,s=e.enterFullscreen,c=e.exitFullscreen;return i.a.createElement("div",{className:"Controls",onMouseMove:t},i.a.createElement("div",{className:"volume"},i.a.createElement("span",{style:{fontSize:20,transform:"scale(".concat(.5+n/2,")")}},"\u266b"),"\xa0\xa0",i.a.createElement("input",{type:"range",min:"0",max:"100",value:100*n,onChange:function(e){return a(e.target.value/100)},onMouseUp:function(e){return e.target.blur()}})),r||i.a.createElement("div",{className:"fullscreen"},o?i.a.createElement("div",{className:"button",onClick:c},i.a.createElement("div",{className:"label exit"},"\u2573")):i.a.createElement("div",{className:"button",onClick:s},i.a.createElement("div",{className:"label enter"},"\u21c6"))))}}]),t}(i.a.Component)),_=n(6),v=n(7),g=n(178),y=n(27),b=n.n(y),O=n(42),E=n(182),w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,{key:t.key()}))}return Object(h.a)(t,e),Object(c.a)(t,null,[{key:"key",value:function(){return"BootScene"}}]),Object(c.a)(t,[{key:"preload",value:function(){var e=this;Object(O.a)(Object(u.a)(t.prototype),"preload",this).call(this),this.game.preloadScenes.forEach(function(t){t.name!==e.name&&(new t).preload.call(e)})}},{key:"create",value:function(){var e=this;Object(O.a)(Object(u.a)(t.prototype),"create",this).call(this),this.game.initializeMainShaders(),setTimeout(function(){e.game.preloadComplete()})}},{key:"saveStateFieldName",value:function(){return null}}]),t}(E.a),k=n(2),S=n(44),j=n(88),C=n(11),T=!1;function R(){if(!T)return function(e,t){var n={event_category:C.b};void 0!==t&&(n.value=t);try{window.gtag("event",e,n)}catch(a){console.error(a)}}.apply(void 0,arguments)}var P=n(61),M=n.n(P),x=n(48),D={LEFT:"_LCLeft",RIGHT:"_LCRight",UP:"_LCTop",DOWN:"_LCBottom",A:"_RCBottom",Y:"_RCTop",X:"_RCLeft",B:"_RCRight",L1:"_FBLeftTop",L2:"_FBLeftBottom",R1:"_FBRightTop",R2:"_FBRightBottom"},L={},I=function(){function e(t){var n=this;Object(s.a)(this,e),this._spec=t,this._scenes=new Map,this.keyboard={},this.gamepad={},this.pointerEvents=[],this.executedProps=[],this._ignoreAlls={},Object.keys(t).forEach(function(e){if(n[e])throw new Error("Conflicting command name ".concat(e));n[e]={held:!1,heldFrames:0,started:!1,continued:!1,heldDuration:0,releasedFrames:0,released:!1,releasedDuration:0}})}return Object(c.a)(e,[{key:"freezeCommandState",value:function(){var e=this,t={inputs:{},ignoreAlls:Object(_.a)({},this._ignoreAlls)};return Object.keys(this._spec).forEach(function(n){t.inputs[n]=Object(_.a)({},e[n])}),t}},{key:"thawCommandState",value:function(e){var t=this;Object.keys(this._spec).forEach(function(n){t[n]=Object(_.a)({},e.inputs[n])}),this._ignoreAlls=Object(_.a)({},e.ignoreAlls)}},{key:"getManager",value:function(e){return this._scenes.get(e)}},{key:"managerList",value:function(){return Object(v.a)(this._scenes.values())}},{key:"attachScene",value:function(e,t){this._scenes.set(e,{scene:e,commands:e.game.debug?[]:null,tickCount:0,suppressRepeatFrames:t})}},{key:"detachScene",value:function(e){this._scenes.delete(e)}},{key:"attachKey",value:function(e,t){var n=this,a=e.input.keyboard;a.on("keydown-".concat(t),function(e){var a=document.activeElement&&document.activeElement.tagName.toLowerCase();"input"!==a&&"select"!==a&&"textarea"!==a&&(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),n.keyboard[t]=!0))}),a.on("keyup-".concat(t),function(e){var a=document.activeElement&&document.activeElement.tagName.toLowerCase();"input"!==a&&"select"!==a&&"textarea"!==a&&(e.preventDefault(),n.keyboard[t]=!1)}),t in this.keyboard||(this.keyboard[t]=!1)}},{key:"detachKey",value:function(e,t){delete this.keyboard[t]}},{key:"attachInputs",value:function(e){var t=this;Object(x.d)(this._spec).forEach(function(n){t.attachKey(e,n)}),e.input.gamepad&&(e.input.gamepad.on("down",function(e,n){var a=L[n.index];a||Object.entries(D).forEach(function(t){var i=Object(p.a)(t,2),r=i[0],o=i[1];n===e[o]&&(a=L[n.index]=r)}),t.gamepad[a]=!0}),e.input.gamepad.on("up",function(e,n){var a=L[n.index];a||Object.entries(D).forEach(function(t){var i=Object(p.a)(t,2),r=i[0],o=i[1];n===e[o]&&(a=L[n.index]=r)}),t.gamepad[a]=!1}));var n=document.querySelector("#engine canvas");["pointerdown","pointerup"].forEach(function(a){e.input.on(a,function(e){document.activeElement&&document.activeElement.contains&&!document.activeElement.contains(n)?setTimeout(function(){document.activeElement.blur()}):t.pointerEvents.push({name:a,x:e.x,y:e.y})})})}},{key:"readRawGamepad",value:function(e){var t=this.gamepad,n=!1;e.forEach(function(e){var a=e.input.gamepad;a.total&&(n||(n=!0,t.total=0,t.LSTICKX=0,t.LSTICKY=0,t.RSTICKX=0,t.RSTICKY=0),t.total<a.total&&(t.total=a.total),a.gamepads.filter(function(e){return e}).forEach(function(e){var n=e.leftStick,a=e.rightStick;Math.abs(n.x)>Math.abs(t.LSTICKX)&&(t.LSTICKX=n.x),Math.abs(n.y)>Math.abs(t.LSTICKY)&&(t.LSTICKY=n.y),Math.abs(a.x)>Math.abs(t.RSTICKX)&&(t.RSTICKX=a.x),Math.abs(a.y)>Math.abs(t.RSTICKY)&&(t.RSTICKY=a.y)}))})}},{key:"heldCommands",value:function(e){var t=this,n=this.gamepad,a=this._spec,i={_repeat:0};return Object.entries(a).forEach(function(a){var r=Object(p.a)(a,2),o=r[0],s=r[1];if(!e||s.unignorable){var c=!1;s.input&&(s.input.forEach(function(e){var a;n.total?"gamepad.LSTICK.RAW"===e&&(Math.abs(n.LSTICKX)>.1||Math.abs(n.LSTICKY)>.1)?c=[n.LSTICKX,n.LSTICKY]:"gamepad.RSTICK.RAW"===e&&(Math.abs(n.RSTICKX)>.1||Math.abs(n.RSTICKY)>.1)?c=[n.RSTICKX,n.RSTICKY]:a="gamepad.LSTICK.UP"===e?n.LSTICKY<-.2:"gamepad.LSTICK.DOWN"===e?n.LSTICKY>.2:"gamepad.LSTICK.LEFT"===e?n.LSTICKX<-.2:"gamepad.LSTICK.RIGHT"===e?n.LSTICKX>.2:"gamepad.RSTICK.UP"===e?n.RSTICKY<-.2:"gamepad.RSTICK.DOWN"===e?n.RSTICKY>.2:"gamepad.RSTICK.LEFT"===e?n.RSTICKX<-.2:"gamepad.RSTICK.RIGHT"===e?n.RSTICKX>.2:M.a.get(t,e):a=M.a.get(t,e),a&&(c=!0)}),t[o].held=c,c&&(i[o]=c))}}),this.pointerEvents.length&&(e||(i._pointer=Object(v.a)(this.pointerEvents)),this.pointerEvents.length=0),this.executedProps.length&&(e||(i._executedProps=Object(v.a)(this.executedProps)),this.executedProps.length=0),i}},{key:"replayFrame",value:function(e){var t=this,n=this._spec;Object.entries(n).forEach(function(n){var a=Object(p.a)(n,2),i=a[0],r=a[1];e[i]&&r.unreplayable?t[i].held=!1:t[i].held=e[i]})}},{key:"mergeUnignorable",value:function(e){var t=this,n=this._spec;Object.entries(n).forEach(function(n){var a=Object(p.a)(n,2),i=a[0],r=a[1];e[i]&&r.unignorable&&!r.unreplayable&&(t[i].held=!0)})}},{key:"addFrameToList",value:function(e,t,n){if(!e&&t.length){var a=t[t.length-1],i=!0;if(n._pointer||a._pointer?i=!1:n._executedProps||a._executedProps?i=!1:Object.keys(this._spec).forEach(function(e){a[e]!==n[e]&&(i=!1)}),i)return t.pop(),void t.push(Object(_.a)({},a,{_repeat:a._repeat+1}))}t.push(n)}},{key:"ignoreAll",value:function(e,t){var n=this._ignoreAlls;if(void 0===e){var a=!1;return Object.values(n).forEach(function(e){e&&(a=!0)}),a}return void 0===t?n[e]:(n[e]=!!t,n[e])}},{key:"processCommands",value:function(e,t,n){var a=this,i=this._spec,r=e.scene,o=this.ignoreAll();Object.entries(i).forEach(function(e){var t=Object(p.a)(e,2),i=t[0],s=t[1],c=a[i];if((!Object(k.b)("command.".concat(i,".enabled"))||o&&!s.unignorable)&&(c.held=!1),c.held?(c.heldFrames+=1,c.heldDuration+=n,c.started=1===c.heldFrames,c.continued=c.heldFrames>1,c.released=!1,c.releasedFrames=0,c.releasedDuration=0):(c.held=!1,c.heldFrames=0,c.heldDuration=0,c.started=!1,c.continued=!1,c.released=1===c.releasedFrames,c.releasedFrames+=1,c.releasedDuration+=n),c.started&&s.execute)if("function"===typeof s.execute)s.execute(r,r.game);else{var l=M.a.get(r,s.execute);if(l)l.call(r);else{var u=M.a.get(r.game,s.execute);if(!u)throw new Error("Invalid execute for command '".concat(i,"'; expected a function or a scene/game method name, got ").concat(s.execute));u.call(r.game)}}}),!o&&t._pointer&&t._pointer.forEach(function(e){r.handlePointerEvent(e)}),this.replay&&t._executedProps&&t._executedProps.forEach(function(e){var t=Object(k.b)(e);"function"===typeof t?t():console.error("Recorded prop ".concat(e," is no longer a function? It's ").concat(t))})}},{key:"injectReplayFrame",value:function(){if(!this.replay)return null;if(this.replayFrameIndex>=this.replay.commands.length||this.replayTicks>=this.replay.postflightCutoff)return this.endedReplay(),null;var e=this.replay.commands[this.replayFrameIndex];return e._repeat?(this.replayRepeatRun+=1,this.replayRepeatRun>e._repeat&&(this.replayRepeatRun=0,this.replayFrameIndex+=1)):this.replayFrameIndex+=1,this.replayTicks+=1,this.replayFrame(e),this.heldCommands(!0),this.mergeUnignorable(e),Object(_.a)({},e,{_repeat:0})}},{key:"processInput",value:function(e,t,n,a){var i=this.getManager(e);if(i.scene.timeSightFrozen){var r=this.heldCommands(a);this.processCommands(i,r,n)}else{var o=this.injectReplayFrame()||this.heldCommands(a);i.commands&&this.addFrameToList(i.suppressRepeatFrames,i.commands,o),this.recording&&this.addFrameToList(i.suppressRepeatFrames,this.recording.commands,o),i.tickCount+=1,this.recording&&(this.recording.tickCount+=1),this.processCommands(i,o,n)}}},{key:"recordPropExecution",value:function(e){this.executedProps.push(e)}},{key:"beginRecording",value:function(e,t){var n=this.getManager(e);this.recording=t,t.commands=Object(v.a)(n.commands),t.originalPreflightCutoff=t.preflightCutoff=t.tickCount=n.tickCount}},{key:"stopRecording",value:function(){var e=this.recording;return delete this.recording,e.postflightCutoff=e.tickCount,e}},{key:"beginReplay",value:function(e,t){this.replay=e,this.replayFrameIndex=0,this.replayRepeatRun=0,this.replayTicks=0,this.replayOptions=t;var n=t.startTick||e.startTick||0;if(n)for(var a=0;a<n;a+=1)this.injectReplayFrame()}},{key:"endedReplay",value:function(){if(this.replay){var e=this.replayOptions.onEnd;delete this.replay,delete this.replayOptions,delete this.replayFrameIndex,delete this.replayRepeatRun,delete this.replayTicks,e&&e()}}},{key:"stopReplay",value:function(){if(this.replay){var e=this.replayOptions.onStop;delete this.replay,delete this.replayOptions,delete this.replayFrameIndex,delete this.replayRepeatRun,delete this.replayTicks,e&&e()}}},{key:"hasPreflight",value:function(){return!!this.replay&&(!(this.replayTicks>=this.replay.postflightCutoff)&&this.replayTicks<(this.replayOptions.preflightCutoff||this.replay.preflightCutoff))}},{key:"updateCommandsFromReload",value:function(e){var t=this._spec;this.updateSpecFromReload(t,e),this.updateInputsFromReload(t,e,!0),this.updateInputsFromReload(t,e,!1)}},{key:"updateSpecFromReload",value:function(e,t){this._spec=t;var n=[],a=[],i=[],r={};if(Object.entries(t).forEach(function(a){var o=Object(p.a)(a,2),s=o[0];o[1];if(e[s]){r[s]=!0;var c={};Object.entries(e[s]).forEach(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];c[n]="function"===typeof a?String(a):a});var l={};Object.entries(t[s]).forEach(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];l[n]="function"===typeof a?String(a):a}),JSON.stringify(c)!==JSON.stringify(l)&&i.push(s)}else n.push(s)}),Object.keys(e).forEach(function(e){r[e]||a.push(e)}),0!==n.length||0!==a.length||0!==i.length){var o=[];n.length&&o.push("+[".concat(n.join(", "),"]")),a.length&&o.push("-[".concat(a.join(", "),"]")),i.length&&o.push("\u0394[".concat(i.join(", "),"]")),console.info("Hot-loading command changes (".concat(o.join(", "),")"))}}},{key:"updateInputsFromReload",value:function(e,t,n){var a=this,i={},r={},o=n?x.d:x.e;o(t).forEach(function(e){i[e]=!0}),o(e,!0).forEach(function(e){r[e]=!0});var s=[];Object.keys(i).forEach(function(e){r[e]?delete r[e]:s.push(e)});var c=Object.keys(r);if(0!==s.length||0!==c.length){n&&this.managerList().forEach(function(e){s.forEach(function(t){a.attachKey(e.scene,t)}),c.forEach(function(t){a.detachKey(e.scene,t)})});var l=[];s.length&&l.push("+[".concat(s.join(", "),"]")),c.length&&l.push("-[".concat(c.join(", "),"]")),console.info("Hot-loading ".concat(n?"keyboard":"gamepad"," input changes (").concat(l.join(", "),")"))}}}]),e}(),A={type:b.a.AUTO,parent:"engine",width:800,height:600,tileWidth:24,tileHeight:24},F=function(e){function t(e,n){var a;Object(s.a)(this,t);var i=Object(_.a)({},A,e);if(a=Object(l.a)(this,Object(u.a)(t).call(this,i)),Object.entries(i).forEach(function(e){var t=Object(p.a)(e,2),n=t[0],i=t[1];n in a.config||(a.config[n]=i)}),a.debug=i.debug,a.scene.add("BootScene",w,!0,{seed:Date.now(),sceneId:String(Math.random())}),a.preloadScenes=n,a.scale.__proto__.onFullScreenChange=function(){},a.prop=k.b,a._replayPreflight=0,a._onDisableDebugUI=[],a._sceneInitCallbacks={},a.assets={},a.command=new I(k.a),a._shaderSource={},a._shaderCoordFragments=k.g,a._shaderColorFragments=k.f,a.shaderFragments=[].concat(Object(v.a)(k.g||[]),Object(v.a)(k.f||[])),a.focused=!0,a._sceneConstructors={},[w].concat(Object(v.a)(n)).forEach(function(e){a._sceneConstructors[e.name]=e}),i.debug){var r=Object(g.a)(a);window.scene=new Proxy({},{get:function(e,t){return r.topScene()[t]}}),window.prop=k.b}return a.events.on("step",function(){var e=a.topScene();if(a.readRawInput(),i.debug){if(a._replayPreflight>0)return;if(a.disableDebug||e._replay&&e._replay.timeSight||Object(S.f)(!1),Object(k.b)("engine.throttle"))for(var t=(new Date).getTime();(new Date).getTime()-t<50;);}}),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"changeVolume",value:function(e){this.volume=e,this.currentMusicPlayer&&this.currentMusicPlayer.setVolume(e*Object(k.b)("scene.musicVolume")),this.scene.scenes.forEach(function(t){t.changeVolume(e)})}},{key:"setFocused",value:function(e){this.focused!==e&&(this.focused=e)}},{key:"topScene",value:function(){var e=this.scene.scenes;return e[e.length-1]}},{key:"preloadComplete",value:function(){var e=document.getElementById("lds-spinner");e&&e.parentNode&&e.parentNode.removeChild(e),this._preloadedAssets=!0,this.tryLaunch()}},{key:"activateGame",value:function(e){this._activatedGame||(this._activatedGame=[]),e&&this._activatedGame.push(e),this.tryLaunch()}},{key:"tryLaunch",value:function(){var e=this;this._preloadedAssets&&this._activatedGame&&(this._launchedGame?this._activatedGame&&(this._activatedGame.forEach(function(e){e()}),delete this._activatedGame):this._launchingGame||(this._launchingGame=!0,R("00 started game"),console.warn("Welcome to ".concat(C.b,"!")),setTimeout(function(){e.renderer.type===b.a.CANVAS&&alert("It looks like this browser will offer a degraded experience. For best results, please use Chrome!");var t=document.getElementById("cover");t&&t.parentNode&&t.parentNode.removeChild(t),e.scene.remove(w.key()),e.launch();var n=e.topScene();n&&(n.willTransitionFrom(),n.timer(function(){return n.didTransitionFrom()}).ignoresScenePause=!0),e._activatedGame.forEach(function(e){e()}),delete e._activatedGame,e._launchedGame=!0})))}},{key:"onDisableDebugUI",value:function(e){this.disableDebug?e():this._onDisableDebugUI.push(e)}},{key:"disableDebugUI",value:function(){if(!this.disableDebug){this.disableDebug=!0,this._onDisableDebugUI.forEach(function(e){return e()});var e=document.querySelector(".development .Manage");e&&e.remove();var t=document.querySelector(".development .Replay");t&&t.remove();var n=document.querySelector(".development .Logging");n&&n.remove()}}},{key:"forceQuit",value:function(){this.stopRecording(),this.stopReplay(),this.destroy(!0,!0);var e=document.querySelector("#engine-container");e&&e.remove(),this.disableDebugUI(),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}},{key:"zeroPrefix",value:function(e,t){for(var n=e,a="",i=1;i<t;i+=1)n<10?a+="0":n/=10;return"".concat(a).concat(e)}},{key:"renderDateTime",value:function(e){var t=this,n=function(e){return t.zeroPrefix(e,2)};return[[e.getFullYear(),n(e.getMonth()+1),n(e.getDate())].join("-"),[e.getHours(),n(e.getMinutes()),n(e.getSeconds())].join(":")].join(" ")}},{key:"renderMillisecondDuration",value:function(e){var t=Math.floor(e/1e3/60);if(t>99)return"99:99.99+";var n=e/1e3-60*t;return"".concat(t,":").concat(this.zeroPrefix(n.toFixed(3),2))}},{key:"beginRecording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.topScene(),n=new Date;this._recording=Object(_.a)({timestamp:n.getTime(),initData:t.scene.settings.data,sceneName:t.constructor.name,name:this.renderDateTime(n),commandState:this.command.freezeCommandState()},e),t.beginRecording(this._recording),this._recording.snapshot?this.stopRecording():this.onRecordBegin&&this.onRecordBegin(this._recording)}},{key:"stopRecording",value:function(){var e=this._recording;if(e)return this.topScene().stopRecording(),delete this._recording,this.onRecordStop&&this.onRecordStop(e),e}},{key:"beginReplay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._replay=e;var a=n.startFromTransition,i=e.sceneTransitions;if(!a&&i)for(var r=0;r<i.length;r+=1)i[r].tickCount<=e.preflightCutoff&&(a=i[r]);var o=Math.max(e.preflightCutoff,a&&a.tickCount||0);this.transitionToSceneToBeginReplay(e,a).then(function(i){i.beginReplay(e,Object(_.a)({},n,{startFromTransition:a,preflightCutoff:o,onEnd:function(){t.endedReplay()},onStop:function(){t.stopReplay(!0)}})),t.onReplayBegin&&t.onReplayBegin(e)})}},{key:"transitionToSceneToBeginReplay",value:function(e,t){var n=this,a=this.topScene(),i="scene-".concat(Math.random()*Date.now()),r=t||e,o=r.sceneSaveState,s=r.sceneName,c=r.initData,l=r.commandState,u=JSON.parse(JSON.stringify(o)),h=(t||e).initData.seed,d=new Promise(function(e,t){n.onSceneInit(i,function(t){n.command.thawCommandState(l),t.willTransitionFrom(null,null),a._sceneTransition(a,t,null),e(t,null)})});return a.scene.add(i,this._sceneConstructors[s],!0,Object(_.a)({},c,{save:u,seed:h,transition:null})),d}},{key:"endedReplay",value:function(){if(this._replay){var e=this._replay;delete this._replay,this.onReplayEnd&&this.onReplayEnd(e)}}},{key:"stopReplay",value:function(e){if(this._replay){var t=this._replay;delete this._replay,e||this.topScene().stopReplay(),this.onReplayStop&&this.onReplayStop(t)}}},{key:"playMusic",value:function(e,t){if((t||this.currentMusicName!==e)&&(this.currentMusicName=e,this.currentMusicPlayer&&this.currentMusicPlayer.key&&this.currentMusicPlayer.destroy(),e)){var n=this.sound.add(e);n.play("",{loop:!0}),n.setVolume(this.volume*Object(k.b)("scene.musicVolume")),this.currentMusicPlayer=n}}},{key:"readRawInput",value:function(){var e=this.scene.scenes.filter(function(e){return e.input.gamepad});e&&this.command.readRawGamepad(e)}},{key:"cutoffTimeSightEnter",value:function(){var e=this.topScene();e&&e.cutoffTimeSightEnter()}},{key:"cutoffTimeSightChanged",value:function(e,t){var n=this.topScene();n&&n.cutoffTimeSightChanged(e,t)}},{key:"cutoffTimeSightLeave",value:function(){var e=this.topScene();e&&e.cutoffTimeSightLeave()}},{key:"shaderInstance",value:function(e){return this.renderer.type!==b.a.WEBGL?null:this.renderer.getPipeline(e)}},{key:"initializeShader",value:function(e,t){if(this.renderer.type===b.a.WEBGL&&(t||!this.renderer.hasPipeline(e))){var n=this.generateShaderSource(e);if(n){var a=new(this.shaderInstantiation(n))(this);if(!a||void 0===a.active)return;t&&this.renderer.removePipeline(e),this.renderer.addPipeline(e,a),a.setFloat2("resolution",this.config.width,this.config.height)}else this.renderer.removePipeline(e);this._shaderSource[e]=n}}},{key:"initializeMainShaders",value:function(){this.initializeShader("main")}},{key:"updateShaderFragments",value:function(e,t){this._shaderCoordFragments=e,this._shaderColorFragments=t,this.shaderFragments=[].concat(Object(v.a)(e||[]),Object(v.a)(t||[])),this.recompileMainShaders()}},{key:"generateShaderSourceInternal",value:function(e){if("main"!==e)throw new Error("Multi-shader support not yet available");var t=[this._shaderCoordFragments,this._shaderColorFragments].map(function(e){return e?e.filter(function(e){var t=Object(p.a)(e,1)[0];return Object(k.b)("shader.".concat(t,".enabled"))}).map(function(e){return Object(p.a)(e,3)[2]}).join("\n"):""}),n=Object(p.a)(t,2),a=n[0],i=n[1];if(a||i)return"\n      void main( void ) {\n        vec2 uv = outTexCoord;\n\n        ".concat(a,"\n\n        vec4 c = texture2D(u_texture, uv);\n\n        ").concat(i,"\n\n        c.r *= c.a;\n        c.g *= c.a;\n        c.b *= c.a;\n\n        gl_FragColor = vec4(c.r, c.g, c.b, 1.0);\n      }\n    ")}},{key:"generateShaderSource",value:function(e){if("main"!==e)throw new Error("Multi-shader support not yet available");var t=[],n=[];this.shaderFragments.forEach(function(e){var a=Object(p.a)(e,2),i=a[0],r=a[1];Object(k.b)("shader.".concat(i,".enabled"))&&Object.entries(r).forEach(function(e){var a=Object(p.a)(e,2),r=a[0],o=Object(p.a)(a[1],1)[0],s="".concat(i,"_").concat(r);t.push(s);var c=Object(p.a)(j.c[o],2)[1];n.push("uniform ".concat(c," ").concat(s,";\n"))})});var a=this.generateShaderSourceInternal(e);return a?(t.forEach(function(e){var t=new RegExp("\\b".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\b"));a.match(t)||console.error("Shader program doesn't appear use uniform '".concat(e,"'. (If this is a false positive, try adding this to your program: // ").concat(e))}),"\n      ".concat("\n      precision mediump float;\n    ","\n      ").concat("\n      uniform sampler2D u_texture;\n      varying vec2      outTexCoord;\n\n      uniform vec2 resolution;\n      uniform vec2 camera_scroll;\n      uniform float scene_time;\n    ","\n      ").concat(n.join(""),"\n      ").concat(a,"\n    ")):a}},{key:"recompileShader",value:function(e){if(this.renderer.type===b.a.WEBGL){var t=this._shaderSource[e],n=this.generateShaderSource(e);if(t!==n){console.info("Hot-loading shader ".concat(e)),this._shaderSource[e]=n,n?this.initializeShader(e,!0):this.renderer.removePipeline(e);var a=this.shaderInstance(e);this.scene.scenes.forEach(function(t){t.shaderName===e&&(t.shader=a,n?(t._shaderInitialize(),t._shaderUpdate(),t.camera.setPipeline(a)):t.camera.clearRenderToTexture())})}}}},{key:"recompileMainShaders",value:function(){this.recompileShader("main")}},{key:"disableShader",value:function(e){if(this.renderer.type===b.a.WEBGL){this._shaderSource[e]=null,this.renderer.removePipeline(e);var t=this.shaderInstance(e);this.scene.scenes.forEach(function(n){n.shaderName===e&&(n.shader=t,n.camera.clearRenderToTexture())})}}},{key:"disableMainShaders",value:function(){this.disableShader("main")}},{key:"shaderInstantiation",value:function(e){try{return new b.a.Class({Extends:b.a.Renderer.WebGL.Pipelines.TextureTintPipeline,initialize:function(t){try{b.a.Renderer.WebGL.Pipelines.TextureTintPipeline.call(this,{game:t,renderer:t.renderer,fragShader:e})}catch(n){console.error(n)}}})}catch(t){console.error(t)}}},{key:"onSceneInit",value:function(e,t){this._sceneInitCallbacks[e]||(this._sceneInitCallbacks[e]=[]),this._sceneInitCallbacks[e].push(t)}},{key:"sceneDidInit",value:function(e){var t=e.scene.key;this._sceneInitCallbacks[t]&&(this._sceneInitCallbacks[t].forEach(function(t){t(e)}),delete this._sceneInitCallbacks[t])}}]),t}(b.a.Game),U=n(89),B=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},W=function(e,t){var n=B(e,t);return[e/n,t/n]},N=function(e,t,n){var a=0,i=0;return e.forEach(function(e){a+=e.x-t,i+=e.y-n}),a/=e.length,i/=e.length,W(a,i)},K=function(e,t,n,a){var i=0,r=0,o=0;return e.forEach(function(e){var s=t-e.x,c=n-e.y,l=B(s,c);l>a||(i+=s/Math.pow(l,2),r+=c/Math.pow(l,2),o+=1)}),0===o?null:W(i/=o,r/=o)},z=function(e,t,n,a){var i=function(e,t){var n=B(e,t);return[e/n,t/n,n]}(t-e.x,n-e.y),r=Object(p.a)(i,3),o=r[0],s=r[1];if(!(r[2]>a))return[o,s]},V=function(e,t,n){var a;return e.forEach(function(e){var i=e.x-t,r=e.y-n,o=B(i,r);(!a||o<a[1])&&(a=[e,o])}),a},G=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this,{input:{gamepad:!0},physics:{arcade:{fps:60}}}))).performanceProps=[],e.mapsAreRectangular=!0,e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"initialSaveState",value:function(){return{createdAt:Date.now(),levelId:"intro",wonLevel:{}}}},{key:"saveStateVersion",value:function(){return 1}},{key:"migrateSaveStateVersion1",value:function(e){}},{key:"init",value:function(e){Object(O.a)(Object(u.a)(t.prototype),"init",this).call(this,e),this.config=e,this.xBorder=this.yBorder=0,void 0===e.levelId&&(e.levelId=this.save.levelId,this.save.levelPlayer&&(e.player=this.save.levelPlayer))}},{key:"preload",value:function(){Object(O.a)(Object(u.a)(t.prototype),"preload",this).call(this)}},{key:"create",value:function(e){Object(O.a)(Object(u.a)(t.prototype),"create",this).call(this,e);var n=e.levelId||"intro";this.loadLevel(n),this.flock_amount=0,this.save.levelId=n,this.save.levelPlayer=e.player,this.saveState(),this.music="musicPeace"}},{key:"getTreasure",value:function(e){this.save[e]=!0,this.saveState()}},{key:"createTreasure",value:function(e){var t=this.level,n=t.treasureGroup||this.physics.add.staticGroup();if(t.treasureGroup=n,!e){var a=t.mapLookups.$||[],i=Object(p.a)(a,1)[0];if(i){this.camera.shake(100,.01),this.playSound("soundCoopHit");var r=this.positionToScreenCoordinate(i.x,i.y),o=Object(p.a)(r,2),s=o[0],c=o[1];t.treasure=n.create(s+12,c+12,"tileTreasureClosed")}}}},{key:"collectTreasure",value:function(e,t){var n=t.x,a=t.y;t.collected||(t.collected=!0,t.setTexture("tileTreasureOpen"),this.playSound("soundTreasure"),this.speak(n-24,a+24,this.level.treasureScript))}},{key:"loadLevel",value:function(e){var n=this.level=Object(O.a)(Object(u.a)(t.prototype),"loadLevel",this).call(this,e);return n.levelId=e,this.level.blockades=[],this.createUnderground(n.underground||"imageBackground"),this.createMap(),this.save.wonLevel[e]||this.closeExits(!1,!0),this.level.player=this.createPlayer(),this.level.followers=this.createFollowers(),this.level.enemies=this.createEnemies(!0),this.level.boundary=this.createBoundary(),this.level.treasure=this.createTreasure(!0),this.setupPhysics(),n.scripts&&(n.scripts=JSON.parse(JSON.stringify(n.scripts)),n.scripts.forEach(function(e){if(null===e[1]){var t=e[2],a=n.mapLookups[t][0];e[1]=a.xCoord+24,e[2]=a.yCoord-24}})),this.night_amount=this.old_night_amount||0,this.flock_amount=this.old_flock_amount||0,this.tweenNightAmount(n.initialNight||0),this.tweenFlockAmount(0),this.oldScene&&(this.oldScene.tweenNightAmount(n.initialNight||0),this.oldScene.tweenFlockAmount(0)),n}},{key:"createTileForGroup",value:function(e,t,n){var a,i=this.level.groups[e];if(i.above&&this.add.image(t,n,i.above),i.image?a=i.group.create(t,n,i.image):(a=this.add.rectangle(t,n,24,24),i.group.add(a)),i.objects.push(a),i.isCircle){a.setCircle(12)}return a}},{key:"cameraColor",value:function(){return 5082170}},{key:"createUnderground",value:function(e){var t=this.level,n=this.add.image(0,0,e),a=n.width,i=n.height;n.setPosition(-.5*a,-.5*i);for(var r=-.5,o=-.5;(r-1)*a<t.width+24;){for(o=-.5;(o-1)*i<t.height+24;)-.5===r&&-.5===o||this.add.image(r*a,o*i,e),o+=1;r+=1}}},{key:"createMap",value:function(){var e=this,t=this.level,n=t.groups={};Object.values(k.h).forEach(function(t){var a;t&&(t.group&&(a=t.isStatic?e.physics.add.staticGroup():e.physics.add.group(),n[t.group]=Object(_.a)({tiles:[],objects:[]},t,{group:a})))});var a={left:[],right:[],up:[],down:[]};t.map.forEach(function(n,i){n.forEach(function(n,r){var o,s,c=e.positionToScreenCoordinate(n.x,n.y),l=Object(p.a)(c,2),u=l[0],h=l[1];(n.xCoord=u,n.yCoord=h,"wall"===n.group)?(0===r?s="left":0===i?s="up":r===t.widthInTiles-1?s="right":i===t.heightInTiles-1&&(s="down"),s?(a[s].push(n),o=e.add.image(u+12,h+12,n.image)):o=e.createTileForGroup(n.group,u+12,h+12)):n.group?o=e.createTileForGroup(n.group,u+12,h+12):n.image&&(o=e.add.image(u+12,h+12,n.image));o&&(o.tile=n,n.object=o)})}),Object.entries(a).forEach(function(t){var a,i=Object(p.a)(t,2),r=i[0],o=i[1];"left"===r||"right"===r?a="y":a="x";var s=Object(v.a)(o);s.sort(function(e,t){return e[a]-t[a]});var c=[],l=[];s.forEach(function(e){if(l.length){var t=l[l.length-1];e[a]===t[a]+1?l.push(e):(c.push(l),l=[e])}else l.push(e)}),l.length&&c.push(l),c.forEach(function(t){var a=t[0],i=t[t.length-1],r=24*a.x,o=24*a.y,s=24*(i.x+1)-r,c=24*(i.y+1)-o,l=e.add.rectangle(r+.5*s,o+.5*c,s,c);n.wall.group.add(l),l.isWall=!0})})}},{key:"createBoundary",value:function(){var e=this,t=this.level,n=t.width,a=t.height,i=this.physics.add.staticGroup(),r=240;return[[-120,a,n+r,240],[-r,-120,r,a+240],[n,-120,r,a+240],[-120,-r,n+r,240]].forEach(function(t){var n=Object(p.a)(t,4),a=n[0],r=n[1],o=n[2],s=n[3],c=e.add.rectangle(a+.5*o,r+.5*s,o,s);i.add(c)}),i}},{key:"createPlayer",value:function(){var e,t,n=this.level;if(this.config.player){var a=[this.config.player.x,this.config.player.y];e=a[0],t=a[1]}else{var i=n.mapLookups["@"][0],r=this.positionToScreenCoordinate(i.x,i.y),o=Object(p.a)(r,2);e=o[0],t=o[1],e+=12,t+=12}"FAR_EDGE"===e&&(e=n.width-48),"FAR_EDGE"===t&&(t=n.height-48),this.config.player&&this.config.player.transitionOffset&&(e+=24*(this.config.player.transitionOffset.x||0),t+=24*(this.config.player.transitionOffset.y||0));var s=this.physics.add.sprite(e,t,"spritePlayer");return s.body.setMass(Object(k.b)("player.mass")),s.setBounce(Object(k.b)("player.bounce")),s.setDrag(Object(k.b)("player.drag")),s.setMaxVelocity(Object(k.b)("player.maxVelocity")),s.setDamping(!0),s.setFriction(Object(k.b)("player.friction")),s.setSize(18,18,!0),s.dash={active:!1,cooldown:!1,ax:0,ay:0},s.stun={active:!1,cooldown:!1},s.children=[],this.cameraFollow(s),s}},{key:"createFollowers",value:function(){var e=this,t=this.level,n=this.physics.add.group(),a=Object(k.b)("follower.mass"),i=Object(k.b)("follower.bounce"),r=Object(k.b)("follower.drag"),o=Object(k.b)("follower.friction"),s=Object(k.b)("follower.maxVelocity"),c=(t.mapLookups["+"]||[]).map(function(t){var c=e.positionToScreenCoordinate(t.x,t.y),l=Object(p.a)(c,2),u=l[0],h=l[1],d=n.create(u+12,h+12,"spriteFollower");return d.body.setMass(a),d.setBounce(i),d.setDrag(r),d.setDamping(!0),d.setFriction(o),d.setMaxVelocity(s),d.targetMaxVelocity=s,d.isFollower=!0,d.setSize(18,18,!0),d});return t.followers=c,t.followerCount=c.length,t.followerGroup=n,c}},{key:"createEnemies",value:function(e){var t=this,n=this.level,a=n.enemyGroup||this.physics.add.group(),i=n.enemies||[];if(!e){var r=Object(k.b)("enemy.mass"),o=Object(k.b)("enemy.bounce"),s=Object(k.b)("enemy.drag"),c=Object(k.b)("enemy.friction"),l=Object(k.b)("enemy.maxVelocity");Object.entries(k.h).forEach(function(e){var u=Object(p.a)(e,2),h=u[0],d=u[1];if(d&&d.enemy){var m=(n.mapLookups[h]||[]).map(function(e){var n=t.positionToScreenCoordinate(e.x,e.y),i=Object(p.a)(n,2),u=i[0],h=i[1],m=a.create(u+12,h+12,d.enemy);return m.body.setMass(r),m.setBounce(o),m.setDrag(s),m.setDamping(!0),m.setFriction(c),m.setMaxVelocity(l),m.targetMaxVelocity=l,m.isEnemy=!0,m.anims.play("spriteEnemyAWalk"),m.setSize(18,18,!0),m});i.push.apply(i,Object(v.a)(m))}})}return n.enemies=i,n.enemyGroup=a,i}},{key:"setupAnimations",value:function(){this.anims.create({key:"spriteEnemyAWalk",frames:[{key:"spriteEnemyA",frame:0},{key:"spriteEnemyA",frame:1}],frameRate:6,repeat:-1})}},{key:"setupPhysics",value:function(){var e=this.level,t=this.physics,n=e.player,a=e.groups,i=e.followerGroup,r=e.enemyGroup,o=e.boundary,s=e.treasureGroup;t.add.overlap(n,a.transition.group,this.enteredTransition,null,this),t.add.collider(n,a.rock.group),t.add.collider(n,a.farmer.group),t.add.collider(n,a.wall.group),t.add.collider(n,a.coop.group,this.playerCollideCoop,null,this),t.add.collider(n,i,this.playerCollideFollower,null,this),t.add.overlap(n,r,this.playerKillEnemy,null,this),t.add.collider(n,s,this.collectTreasure,null,this),t.add.collider(i,a.rock.group,this.justCoolItDown,null,this),t.add.collider(i,a.farmer.group,this.justCoolItDown,null,this),t.add.collider(i,a.wall.group,this.justCoolItDown,null,this),t.add.collider(i,a.coop.group,this.justCoolItDown,null,this),t.add.collider(i,i,this.justCoolItDown,null,this),t.add.collider(i,o,this.justCoolItDown,null,this),t.add.collider(i,s,this.justCoolItDown,null,this),t.add.collider(r,a.rock.group,this.justCoolItDown,null,this),t.add.collider(r,a.wall.group,this.justCoolItDown,null,this),t.add.collider(r,a.coop.group,this.enemyCollideCoop,null,this),t.add.collider(r,r,this.justCoolItDown,null,this),t.add.collider(r,o,this.justCoolItDown,null,this),t.add.collider(r,s,this.justCoolItDown,null,this),t.add.overlap(r,i,this.enemyKillFollower,null,this)}},{key:"damageCoop",value:function(e,t){var n=e.x-t.x,a=e.y-t.y,i=0,r=0;Math.abs(n)>Math.abs(a)?i=n<0?-2:2:r=a<0?-2:2,e.tile.health-=1,e.tile.health<0?(e.destroy(),this.playSound("soundCoopBreak")):this.playSound("soundCoopHit");var o=.5/this.level.groups.coop.health,s=0;this.tweenPercent(100,function(t){e.alpha-=(t-s)*o,e.x+=(t-s)*i,e.y+=(t-s)*r,s=t})}},{key:"enemyCollideCoop",value:function(e,t){this.damageCoop(t,e),e.body.setAcceleration(0,0),e.cooldown=!0,this.timer(function(){e.cooldown=!1},1e3)}},{key:"playerCollideCoop",value:function(e,t){e.dash.active&&this.damageCoop(t,e)}},{key:"playerCollideFollower",value:function(e,t){this.justCoolItDown(e,t),e.dash.active&&(this.stopDash(),this.buttobasu(e,t,!0),this.killFollower(t))}},{key:"sleep",value:function(e){this.timer(function(){},e).ignoresScenePause=!0}},{key:"impact",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;this.timeScale=n,this.camera.zoomTo(1.05,e/2,"Cubic.easeIn",!0),this.timer(function(){t.timeScale=1,t.camera.zoomTo(1,e,"Cubic.easeIn",!0)},e)}},{key:"impactUnlessLosing",value:function(){this.level.zoomForLossCompleted||this.level.zoomedForLoss||this.level.unzoomForLoss||this.impact.apply(this,arguments)}},{key:"buttobasu",value:function(e,t,n){var a=this;t.disableBody();var i=W(t.x-e.x,t.y-e.y),r=Object(p.a)(i,2),o=r[0],s=r[1],c=W(e.dash.ax,e.dash.ay),l=Object(p.a)(c,2),u=(l[0]+o)/2,h=(l[1]+s)/2;(isNaN(u)||isNaN(h))&&(u=o,h=s);this.sleep(40*this.timeScale),this.timer(function(){a.impactUnlessLosing(400,.2)},40).ignoresScenePause=!0,this.camera.shake(100,.005),this.playSound("soundCoopHit"),this.timer(function(){n?a.playSound("soundDashFollower"):a.playSound("soundDashKill")},80),this.tween(null,t,{alpha:0,delay:40,duration:700,dx:600*u,dy:600*h,scaleX:3,scaleY:3,rotation:u<0?-300:300,ease:"Quad.easeOut",onComplete:function(){t.destroy()}})}},{key:"butsu",value:function(e,t){t.disableBody();var n=W(t.x-e.x,t.y-e.y),a=Object(p.a)(n,2),i=a[0],r=a[1];this.tween(null,t,{alpha:0,duration:500,dx:100*i,dy:100*r,ease:"Quad.easeOut",onComplete:function(){t.destroy()}})}},{key:"fakeStun",value:function(e){var t=this;e!==this.level.player&&(e.cooldown=!0,e.body.setAcceleration(0,0),e.stunAlpha=this.tween(null,e,{alpha:.5,duration:200}),e.stunRotate=this.tween(null,e,{delay:200,rotation:360,duration:1e3,onComplete:function(){e.stunRecover=t.tween(null,e,{alpha:1,duration:200}),e.cooldown=!1}}))}},{key:"justCoolItDown",value:function(e,t){e.body&&e.body.setAcceleration&&this.fakeStun(e),t.body&&t.body.setAcceleration&&this.fakeStun(t)}},{key:"killFollower",value:function(e){var t=this,n=this.level;n.followers=n.followers.filter(function(t){return t!==e}),0===n.followers.length&&(n.lastFollower=e);var a=1/n.followerCount,i=0;this.tweenPercent(Object(k.b)("effects.followerDie.duration"),function(e){t.flock_amount+=(e-i)*a,i=e})}},{key:"enemyKillFollower",value:function(e,t){this.butsu(e,t),this.killFollower(t),this.playSound("soundMurder")}},{key:"playerKillEnemy",value:function(e,t){var n=this,a=this.level;a.enemies=a.enemies.filter(function(e){return e!==t}),e.dash.active?(this.stopDash(),this.buttobasu(e,t)):(this.butsu(e,t),this.playSound("soundHit")),0===a.enemies.length&&this.timer(function(){n.playSound("soundWin"),n.winLevel()},1e3)}},{key:"closeExits",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.level,r=t?";":"^",o=Object(v.a)(i.mapLookups[r]||[]);o.sort(function(e,t){return e.x-t.x||e.y-t.y}),this.level.blockades.push(o);var s=e?500:0;return o.forEach(function(t,a){n.timer(function(){var a=t.xCoord,i=t.yCoord;t.object.disableBody?t.object.disableBody():t.object.body.enable=!1;var r=n.createTileForGroup("wall",a+12,i+12);t.block=r,e&&(n.camera.shake(50,.01),n.playSound("soundBorder"))},s*(a+2))}),s&&this.timer(function(){n.command.ignoreAll("blockade",!1)},s*(o.length+2)+a),s*(o.length+2)}},{key:"openExits",value:function(){var e=this;this.level.blockades.forEach(function(t,n){t.forEach(function(t,a){e.timer(function(){t.object.enableBody?t.object.enableBody():t.object.body.enable=!0,t.block.destroy(),0===n&&(e.camera.shake(50,.01),e.playSound("soundBorder"))},1e3+500*a)})})}},{key:"winLevel",value:function(){this.music="musicPeace",this.playMusic(),this.level.glowEmitter&&this.level.glowEmitter.stop(),this.tweenNightAmount(0),this.tweenFlockAmount(0),this.openExits(),this.save.wonLevel[this.level.levelId]=!0,this.saveState()}},{key:"replaceLostLevel",value:function(){this.replacing||(this.replacing=!0,this.timeScale=1,this.playSound("soundLose"),this.replaceWithSelf(!0,null,{name:"effects.loseTransition",onUpdate:function(e,t,n){e<=.5&&(t.flock_amount=1-2*e)}}))}},{key:"enteredTransition",value:function(e,t){if(!this.transitioning){var n=t.tile,a=n.x,i=n.y,r="right",o="pushRight",s={},c=78,l=78;a<=0?(r="left",o="pushRight",s.y=e.y,s.x="FAR_EDGE",l=0,c*=-1):i<=0?(r="up",o="pushDown",s.x=e.x,s.y="FAR_EDGE",c=0,l*=-1):a>=this.level.widthInTiles-1?(r="right",o="pushLeft",s.y=e.y,s.x=48,l=0):i>=this.level.heightInTiles-1&&(r="down",o="pushUp",s.x=e.x,s.y=48,c=0),s.transitionOffset=this.level["".concat(r,"Offset")],this.transitioning={direction:r};var u,h,d,p,m=this.level[r];m||console.error("missing next level for direction",r),e.disableBody(),this.timeScale=1,this.replaceWithSelf(!0,{levelId:m,player:s},{name:"effects.sceneTransition",animation:o,onUpdate:function(e,t,n){void 0===u&&(u=t.level.player.x,h=t.level.player.y,d=n.level.player.x,p=n.level.player.y),t.level.player.x=u+c*e,t.level.player.y=h+l*e,n.level.player.x=d+c*(e-1),n.level.player.y=p+l*(e-1)}})}}},{key:"musicName",value:function(){return this.level&&"last"===this.level.levelId?"musicWin":this.music}},{key:"firstUpdate",value:function(e,n){Object(O.a)(Object(u.a)(t.prototype),"firstUpdate",this).call(this,e,n)}},{key:"stopDash",value:function(){var e=this.level.player,t=Object(k.b)("player.maxVelocity");e.setMaxVelocity(t),e.dash.active=!1,e.dashEmitter&&(e.dashEmitter.stop(),e.dashEmitter=!1),e.dash.cooldown=!0,this.timer(function(){e.dash.cooldown=!1},Object(k.b)("player.dash.cooldown_duration"))}},{key:"dash",value:function(e,t){var n=this,a=this.level,i=a.player;if(this.playSound("soundDash"),a.onDash){var r=a.onDash;delete a.onDash,this.speak(i.x,i.y,r)}i.dash.active=!0,i.dash.ax=e,i.dash.ay=t;var o,s,c=W(e,t),l=Object(p.a)(c,2),u=l[0],h=l[1],d=Object(k.b)("player.maxVelocity"),m=Object(k.b)("player.dash.velocity");this.particleSystem("effects.dashPuff",{scale:{start:.5,end:0},alpha:{start:1,end:0},speedX:-40*e,speedY:-40*t,onAdd:function(e,t){o=t,t.x.propertyValue=i.x+24*h,t.y.propertyValue=i.y+24*h,s=function(e,n){t.x.propertyValue=e+12*-u,t.y.propertyValue=n+12*-h},i.children.push(s)}}),i.dashEmitter=o,this.tweenSustainExclusive("dashTimer",Object(k.b)("player.dash.in_duration"),Object(k.b)("player.dash.sustain_duration"),Object(k.b)("player.dash.out_duration"),function(e){var t=d+e*(m-d);i.setMaxVelocity(t)},null,function(){i.dash.ax=null,i.dash.ay=null,o.stop(),i.children=i.children.filter(function(e){return e!==s})},function(){n.stopDash()},Object(k.b)("player.dash.in_ease"),Object(k.b)("player.dash.out_ease"))}},{key:"stun",value:function(){var e=this,t=this.level,n=t.player;if(this.playSound("soundStun"),t.onStun){var a=t.onStun;delete t.onStun,this.speak(n.x,n.y,a)}n.stun.active=!0;var i=n.x,r=n.y;this.shockwave(i,r),[].concat(Object(v.a)(this.level.enemies),Object(v.a)(this.level.followers)).forEach(function(t){var n=B(t.x-i,t.y-r),a=1-n/300;if(!(a<0)){t.stunAlpha&&t.stunAlpha.stop(),t.stunRotate&&t.stunRotate.stop(),t.stunRecover&&t.stunRecover.stop();var o=.75*n;e.timer(function(){t.cooldown=!0,t.body.setAcceleration(0,0),t.stunAlpha=e.tween(null,t,{alpha:.5,duration:200}),t.stunRotate=e.tween(null,t,{delay:200,rotation:360,duration:2e3*a,onComplete:function(){t.stunRecover=e.tween(null,t,{alpha:1,duration:200}),t.cooldown=!1}})},o)}}),this.timer(function(){n.stun.active=!1,n.stun.cooldown=!0,e.timer(function(){n.stun.cooldown=!1},5e3)},1e3)}},{key:"processInput",value:function(e,t){var n=this.command,a=this.level.player,i=0,r=0,o=!1;if(n.up.held?r=-1:n.down.held&&(r=1),n.right.held?i=1:n.left.held&&(i=-1),n.lstick.held){var s=Object(p.a)(n.lstick.held,2);i=s[0],r=s[1],o=!0}else if(n.rstick.held){var c=Object(p.a)(n.rstick.held,2);i=c[0],r=c[1],o=!0}if(o&&(Math.abs(i)>.9?(i=i<0?-1:1,r=0):Math.abs(r)>.9&&(r=r<0?-1:1,i=0)),(a.dash.ax||a.dash.ay)&&(i=.1*i+.9*a.dash.ax,r=.1*r+.9*a.dash.ay),i||r){var l=W(i,r),u=Object(p.a)(l,2);i=u[0],r=u[1];var h=Object(k.b)("player.acceleration");a.lastAccel=[i,r],a.body.setAcceleration(i*h,r*h)}else a.body.setAcceleration(0,0);if(n.dash.started&&this.save.dash&&!a.dash.active&&!a.dash.cooldown){if(!i&&!r&&a.lastAccel){var d=Object(p.a)(a.lastAccel,2);i=d[0],r=d[1]}i||r||(i=1,r=0),this.dash(i,r)}n.stun.started&&this.save.stun&&!a.stun.active&&!a.stun.cooldown&&this.stun()}},{key:"playDialog",value:function(){var e=this,t=this.level,n=t.scripts,a=t.player;n&&n.forEach(function(t){if(!t.played){var n=Object(p.a)(t,3),i=n[0],r=n[1],o=n[2];B(a.x-r,a.y-o)<i&&(t.played=!0,t.shift(),e.speak.apply(e,Object(v.a)(t)))}})}},{key:"fixedUpdate",value:function(e,t){var n=this;this.processInput(),this.p=((this.p||0)+1)%3,this.flockFollowers(this.p),this.flockEnemies(this.p),this.zoomOnLoss(),this.updateVelocities(e,t),this.moveChildren(),this.playDialog();var a=this.level.player;if(!this.transitioning&&(a.x<0||a.y<0||a.x>this.level.width||a.y>this.level.height)&&(a.x=.5*this.level.width,a.y=.5*this.level.height),!this.spawningEnemies&&this.night_amount>.99&&e>1e3&&!this.suppressShit){this.spawningEnemies=!0,this.particleSystem("effects.glow",{x:{min:0,max:this.level.width},y:{min:0,max:this.level.height},alpha:{start:0,end:1,ease:function(e){return e>.5?2*(1-e):2*e}},onAdd:function(e,t){n.level.glowEmitter=t}});var i=this.closeExits(!0,!1,500);this.save.wonLevel[this.level.levelId]&&(i=Math.max(this.closeExits(!0,!0,500))),this.timer(function(){n.createEnemies(),n.level.enemies.forEach(function(e){e.alpha=0,e.cooldown=!0,n.music="musicWar",n.playMusic(),n.tween(null,e,{alpha:1,duration:500,onComplete:function(){e.cooldown=!1}})})},i)}}},{key:"moveChildren",value:function(){var e=this.level.player;e.children.forEach(function(t){"function"===typeof t?t(e.x,e.y):(t.x=e.x,t.y=e.y)})}},{key:"tweenNightAmount",value:function(e){var t=this,n=this.night_amount;return e>.99&&(this.suppressShit||(this.music=null,this.playMusic(),this.playSound("soundHowl"),this.command.ignoreAll("blockade",!0))),this.tweenPercent(1e3,function(a){t.night_amount=n*(1-a)+a*e})}},{key:"tweenFlockAmount",value:function(e){var t=this,n=this.flock_amount;return this.tweenPercent(1e3,function(a){t.flock_amount=n*(1-a)+a*e})}},{key:"speak",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{inTime:200,outTime:200,duration:1e3,extraDelay:0,dy:-20,noOut:!1},r=0;n.forEach(function(n,o){var s=Object(_.a)({},i,"object"===typeof n?n:{text:n}),c=s.duration,l=s.inTime,u=s.outTime,h=s.text,d=s.extraDelay,p=s.execute,m=s.goof,f=s.dy,g=s.noOut;a.timer(function(){if(p){var n=Object(U.a)(p),r=n[0],o=n.slice(1);a[r].apply(a,Object(v.a)(o))}var s=a.add.text(e,t+f,h,{fontFamily:'"Avenir Next", "Avenir", "Helvetica Neue", "Helvetica", "Arial"',fontSize:"24px",fontWeight:"bold",color:"rgb(0, 0, 0)"});s.alpha=0,a.tweenPercent(l,function(e){s.alpha=e,s.y=t-f*(1-e)},null,0,"Cubic.easeOut"),g||a.timer(function(){m?a.tweenPercent(Math.abs(u*m/i.dy),function(e){s.y=t-m*e},function(){s.destroy()}):a.tweenPercent(u,function(e){s.alpha=1-e,s.y=t-f*e},function(){s.destroy()},0,"Cubic.easeOut")},c)},d+r),r+=d+c+l+u})}},{key:"zoomOnLoss",value:function(){var e=this,t=this.level,n=t.enemies,a=t.followers,i=t.player;if(!(a.length>1)&&(0!==a.length||t.lastFollower)){this.level.zoomForLossCompleted&&0===a.length&&(this.timer(function(){e.replaceLostLevel()},2e3*this.timeScale).ignoresScenePause=!0);var r,o=Object(k.b)("effects.zoomOnLoss.distance"),s=!1;if(0===n.length)s=!0;else if(0===a.length)r=[0,t.lastFollower,null];else for(var c=0;c<a.length;c+=1){var l=a[c],u=V(n,l.x,l.y),h=Object(p.a)(u,2),d=h[0],m=h[1],f=Math.max(.01,m-24);if(this.losing){if(f>2*o){s=!0;break}}else if(f>o){s=!0;break}(!r||f<r[0])&&(r=[f,l,d])}if(!r||s){if(this.level.losing=null,!this.level.zoomedForLoss||this.level.unzoomForLoss)return;this.level.unzoomForLoss=!0,this.level.zoomedForLoss=!1,this.level.zoomForLossCompleted=!1,this.unzoomStartTimer=this.timer(function(){if(!e.level.zoomedForLoss){e.camera.zoomTo(1,Object(k.b)("effects.zoomOnLoss.recover_zoom_duration"),Object(k.b)("effects.zoomOnLoss.recover_zoom_ease"),!0),e.camera.pan(i.x,i.y,Object(k.b)("effects.zoomOnLoss.recover_pan_duration"),Object(k.b)("effects.zoomOnLoss.recover_pan_ease"),!0,function(){e.cameraFollow(i),e.camera.useBounds=!0}).ignoresScenePause=!0;var t=Object(k.b)("effects.zoomOnLoss.time_scale");e.unzoomTimeScaleTween=e.tweenPercent(Object(k.b)("effects.zoomOnLoss.recover_time_scale_duration"),function(n){e.timeScale=n+t*(1-n)},null,0,Object(k.b)("effects.zoomOnLoss.recover_time_scale_ease")),e.unzoomTimeScaleTween.timeScale=1}},Object(k.b)("effects.zoomOnLoss.recover_linger_duration"))}else{var _=r,v=Object(p.a)(_,2)[1];if(this.level.losing=r,this.level.unzoomForLoss=!1,this.unzoomTimeScaleTween&&this.unzoomTimeScaleTween.stop(),!this.level.zoomedForLoss){this.level.zoomForLossCompleted=!1,this.pauseEverythingForTransition(),this.level.zoomedForLoss=!0;var g=Object(k.b)("effects.zoomOnLoss.pan_duration"),y=Object(k.b)("effects.zoomOnLoss.zoom_duration");this.camera.setDeadzone(0,0),this.cameraFollow(),this.camera.useBounds=!1,this.camera.pan(v.x,v.y,g,Object(k.b)("effects.zoomOnLoss.pan_ease"),!0).ignoresScenePause=!0,this.camera.zoomTo(Object(k.b)("effects.zoomOnLoss.zoom_scale"),y,Object(k.b)("effects.zoomOnLoss.zoom_ease"),!0).ignoresScenePause=!0,this.timer(function(){e.timeScale=Object(k.b)("effects.zoomOnLoss.time_scale"),e.unpauseEverythingForTransition(),e.level.zoomForLossCompleted=!0},Math.max(g,y)).ignoresScenePause=!0}}}}},{key:"updateVelocities",value:function(e,t){var n=this.level,a=n.followers,i=n.enemies,r=Object(k.b)("follower.velocityLerp");a.forEach(function(e){var n=e.body.maxVelocity.x,a=e.targetMaxVelocity;e.setMaxVelocity(n+r*(a-n)*(t/16))});var o=Object(k.b)("follower.velocityLerp");i.forEach(function(e){var n=e.body.maxVelocity.x,a=e.targetMaxVelocity;e.setMaxVelocity(n+o*(a-n)*(t/16))})}},{key:"followersNearPoint",value:function(e,t,n){return this.physics.overlapRect(e-n/2,t-n/2,n,n,!0,!1).map(function(e){return e.gameObject}).filter(function(e){return e.isFollower})}},{key:"enemiesNearPoint",value:function(e,t,n){return this.physics.overlapRect(e-n/2,t-n/2,n,n,!0,!1).map(function(e){return e.gameObject}).filter(function(e){return e.isEnemy})}},{key:"obstaclesNearPoint",value:function(e,t,n){return this.physics.overlapRect(e-n/2,t-n/2,n,n,!1,!0).map(function(e){return e.gameObject}).filter(function(e){return e.isWall||e.tile&&e.tile.isObstacle})}},{key:"noncoopObstaclesNearPoint",value:function(e,t,n){return this.physics.overlapRect(e-n/2,t-n/2,n,n,!1,!0).map(function(e){return e.gameObject}).filter(function(e){return e.isWall||e.tile&&e.tile.isObstacle&&!e.tile.isCoop})}},{key:"flockFollowers",value:function(e){var t=this,n=this.level,a=n.followers,i=n.player,r=i.x,o=i.y,s=Object(k.b)("follower.flockAcceleration"),c=Object(k.b)("follower.maxVelocity"),l=Object(k.b)("follower.cohereRadius"),u=Object(k.b)("follower.cohereFactor"),h=Object(k.b)("follower.spreadRadius"),d=Object(k.b)("follower.spreadFactor"),m=Object(k.b)("follower.playerFactor"),f=Object(k.b)("follower.playerRadius"),_=Object(k.b)("follower.obstacleFactor"),g=Object(k.b)("follower.obstacleRadius"),y=Object(k.b)("follower.enemyFactor"),b=Object(k.b)("follower.enemyRadius"),O=Object(k.b)("follower.killerFactor"),E=Object(k.b)("follower.killerRadius"),w=Object(k.b)("follower.killerAcceleration"),S=Object(k.b)("follower.killerVelocity");a.forEach(function(n,a){if(a%3==e&&!n.cooldown){var k=n.x,j=n.y,C=!1,T=0,R=0;if(m>0){var P=r-k,M=o-j,x=B(P,M);x<f&&(T+=P/x*m,R+=M/x*m,C=!0)}if(u>0){var D=t.followersNearPoint(k,j,l);if(D.length>1){var L=N(D,k,j),I=Object(p.a)(L,2),A=I[0],F=I[1];T+=A*u,R+=F*u,C=!0}}if(d>0){var U=t.followersNearPoint(k,j,h),W=[i].concat(Object(v.a)(U.filter(function(e){return e!==n}))),z=K(W,k,j,h);z&&(T+=z[0]*d,R+=z[1]*d,C=!0)}if(_>0){var V=t.obstaclesNearPoint(k,j,g),G=K(V,k,j,g);G&&(T+=G[0]*_,R+=G[1]*_,C=!0)}if(y>0){var q=t.enemiesNearPoint(k,j,b),Y=K(q,k,j,b);Y&&(T+=Y[0]*y,R+=Y[1]*y,C=!0)}if(O>0){var X=t.enemiesNearPoint(k,j,E);if(X.length>0){var H=function(e,t,n){var a;e.forEach(function(e){var i=t-e.x,r=n-e.y,o=B(i,r);(!a||o<a[0])&&(a=[o,i,r])});var i=a,r=Object(p.a)(i,3),o=r[0];return[r[1]/o,r[2]/o]}(X,k,j);H&&(s+=w,c+=S,T+=H[0]*O,R+=H[1]*O,C=!0)}}if(C){var J=Math.atan2(R,T);n.body.setAcceleration(s*Math.cos(J),s*Math.sin(J))}else n.body.setAcceleration(0,0);n.targetMaxVelocity=c}})}},{key:"flockEnemies",value:function(e){var t=this,n=this.level,a=(n.followers,n.enemies),i=n.player,r=i.x,o=i.y,s=Object(k.b)("enemy.flockAcceleration"),c=Object(k.b)("enemy.maxVelocity"),l=Object(k.b)("enemy.cohereRadius"),u=Object(k.b)("enemy.cohereFactor"),h=Object(k.b)("enemy.spreadRadius"),d=Object(k.b)("enemy.spreadFactor"),m=Object(k.b)("enemy.avoidPlayerFactor"),f=Object(k.b)("enemy.avoidPlayerRadius"),_=Object(k.b)("enemy.seekPlayerFactor"),v=Object(k.b)("enemy.seekPlayerRadius"),g=Object(k.b)("enemy.obstacleFactor"),y=Object(k.b)("enemy.obstacleRadius"),b=Object(k.b)("enemy.followerFactor"),O=Object(k.b)("enemy.followerRadius"),E=Object(k.b)("enemy.victimFactor"),w=Object(k.b)("enemy.victimRadius"),S=Object(k.b)("enemy.victimAcceleration"),j=Object(k.b)("enemy.victimVelocity");a.forEach(function(n,a){if(a%3===e&&!n.cooldown){var k=n.x,C=n.y,T=!1,R=0,P=0;if(m>0){var M=z(i,k,C,f);M&&(R+=M[0]*m,P+=M[1]*m,T=!0)}if(_>0){var x=r-k,D=o-C,L=B(x,D);L<v&&(R+=x/L*_,P+=D/L*_,T=!0)}if(u>0){var I=t.enemiesNearPoint(k,C,l);if(I.length>1){var A=N(I,k,C),F=Object(p.a)(A,2),U=F[0],W=F[1];R+=U*u,P+=W*u,T=!0}}if(d>0){var V=t.enemiesNearPoint(k,C,h).filter(function(e){return e!==n});if(V.length){var G=K(V,k,C,h);G&&(R+=G[0]*d,P+=G[1]*d,T=!0)}}if(g>0){var q=t.noncoopObstaclesNearPoint(k,C,y),Y=K(q,k,C,y);Y&&(R+=Y[0]*g,P+=Y[1]*g,T=!0)}if(b>0){var X=t.followersNearPoint(k,C,O);if(X.length){var H=N(X,k,C);H&&(R+=H[0]*b,P+=H[1]*b,T=!0)}}if(E>0){var J=t.followersNearPoint(k,C,w);if(J.length>0){var Q=function(e,t,n){var a;e.forEach(function(e){var i=e.x-t,r=e.y-n,o=B(i,r);(!a||o<a[0])&&(a=[o,i,r])});var i=a,r=Object(p.a)(i,3),o=r[0];return[r[1]/o,r[2]/o]}(J,k,C);Q&&(s+=S,c+=j,R+=Q[0]*E,P+=Q[1]*E,T=!0)}}if(T){var $=Math.atan2(P,R);n.body.setAcceleration(s*Math.cos($),s*Math.sin($))}else n.body.setAcceleration(0,0);n.targetMaxVelocity=c}})}},{key:"willTransitionTo",value:function(e,n){Object(O.a)(Object(u.a)(t.prototype),"willTransitionTo",this).call(this,e,n),this.suppressShit=!0}},{key:"willTransitionFrom",value:function(e,n){Object(O.a)(Object(u.a)(t.prototype),"willTransitionFrom",this).call(this,e,n),this.oldScene=e,this.willTransition=n,e&&e.transitioning&&(this.transitioning=!0),this.old_night_amount=e&&e.night_amount||0,this.old_flock_amount=e&&e.flock_amount||0}},{key:"didTransitionTo",value:function(e,n){Object(O.a)(Object(u.a)(t.prototype),"didTransitionTo",this).call(this,e,n)}},{key:"didTransitionFrom",value:function(e,n){Object(O.a)(Object(u.a)(t.prototype),"didTransitionFrom",this).call(this,e,n),this.transitioning=null,this.command.ignoreAll("blockade",!1),this.playMusic()}},{key:"launchTimeSight",value:function(){Object(O.a)(Object(u.a)(t.prototype),"launchTimeSight",this).call(this)}},{key:"renderTimeSightFrameInto",value:function(e,t,n,a,i){return[]}},{key:"debugHandlePointerdown",value:function(e){var t=e.x,n=e.y,a=this.level.player;t+=this.camera.scrollX,n+=this.camera.scrollY,a.body.setAcceleration(0,0),a.body.setVelocity(0,0),a.x=t,a.y=n}},{key:"_hotReloadCurrentLevel",value:function(){Object(O.a)(Object(u.a)(t.prototype),"_hotReloadCurrentLevel",this).call(this,{},{animation:"crossFade",duration:200,delayNewSceneShader:!0,removeOldSceneShader:!0}).then(function(e){})}},{key:"_hot",value:function(){}}]),t}(E.a),q={tileWidth:24,tileHeight:24},Y=function(e){function t(e){Object(s.a)(this,t);var n=Object(_.a)({},q,e);return Object(l.a)(this,Object(u.a)(t).call(this,n,[G]))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"launch",value:function(){this.scene.add("scene-".concat(Date.now()),G,!0,{seed:Date.now(),sceneId:String(Math.random())})}}]),t}(F),X=n(584),H=n.n(X),J=n(10),Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).didVisibilityChange=function(){var e="hidden"===document.visibilityState;n.setState({focused:!e}),n.game.setFocused(!e)},n.didBlur=function(){n.setState({focused:!1}),n.game.setFocused(!1)},n.didFocus=function(){n.setState({focused:!0}),n.game.setFocused(!0)},n.state={activating:!1,activated:!1,focused:!0,volume:Object(J.b)("volume",.66),scale:null},n.controls=i.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.loadedGame,a=t.debug,i=this.state.volume;window.addEventListener("visibilitychange",this.didVisibilityChange),window.addEventListener("blur",this.didBlur),document.addEventListener("blur",this.didBlur),window.addEventListener("focus",this.didFocus),document.addEventListener("focus",this.didFocus),document.querySelector("body").classList.add("natural"),this.game=new Y({debug:a}),this.game.changeVolume(i),n&&n(this.game,function(t){return e.activateGame(t)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("visibilitychange",this.didVisibilityChange),window.removeEventListener("blur",this.didBlur),document.removeEventListener("blur",this.didBlur),window.removeEventListener("focus",this.didFocus),document.removeEventListener("focus",this.didFocus)}},{key:"onMouseMove",value:function(){var e=this;this.moveTimeout?clearTimeout(this.moveTimeout):document.querySelector("body").classList.add("mouseMoved"),this.moveTimeout=setTimeout(function(){e.clearMove(!1)},3e3)}},{key:"setVolume",value:function(e){this.setState({volume:e}),this.game.changeVolume(e),Object(J.d)("volume",e)}},{key:"activateGame",value:function(e){var t=this;this.state.activated?e&&e():(this.setState({activating:!0}),this.game.activateGame(function(){t.setState({activated:!0}),t.clearMove(!0),e&&e()}))}},{key:"clearMove",value:function(e){var t=this;this.moveTimeout&&(clearTimeout(this.moveTimeout),this.moveTimeout=null,e&&(this.controls.current.style.transition="none",setTimeout(function(){t.controls.current.style.transition=""})),document.querySelector("body").classList.remove("mouseMoved"))}},{key:"enterFullscreen",value:function(){var e=this,t=document.querySelector("body"),n=document.querySelector("#engine");t&&n&&(t.classList.add("scaled"),t.classList.remove("natural"),n.style.overflow="",this.resizeHandler=function(){var t=e.game.config,n=t.width,a=t.height,i=.95*Math.min(window.innerWidth/n,window.innerHeight/a);e.setState({scale:i})},this.resizeHandler(),window.addEventListener("resize",this.resizeHandler),this.fullscreenHandler||(this.fullscreenHandler=function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||e.exitFullscreen(!0)},document.addEventListener("webkitfullscreenchange",this.fullscreenHandler,!1),document.addEventListener("mozfullscreenchange",this.fullscreenHandler,!1),document.addEventListener("fullscreenchange",this.fullscreenHandler,!1),document.addEventListener("MSFullscreenChange",this.fullscreenHandler,!1)),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen())}},{key:"exitFullscreen",value:function(e){var t=document.querySelector("body"),n=document.querySelector("#engine");t&&n&&(t.classList.add("natural"),t.classList.remove("scaled"),n.style.overflow="hidden",this.setState({scale:null}),this.moveTimeout&&(clearTimeout(this.moveTimeout),this.moveTimeout=null),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("mousemove",this.moveHandler)),e||(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}},{key:"render",value:function(){var e=this,t=this.state,n=t.activating,a=t.scale,r=t.volume,o=t.focused,s=this.props.disableFullscreen,c=[];return c.push(n?"activated":"activate"),c.push(o?"focused":"blurred"),i.a.createElement("div",{className:c.join(" "),id:"engine-container"},i.a.createElement("div",{id:"engine",onMouseMove:function(){return e.onMouseMove()},onClick:function(){return e.activateGame()},style:a?{transform:"scale(".concat(a,")")}:{},ref:function(t){e.gameContainerRef||(e.gameContainerRef=t)}},i.a.createElement("div",{style:{backgroundImage:"url(".concat(H.a,")")},id:"cover"}),i.a.createElement(m,null)),i.a.createElement(f,{ref:this.controls,onMouseMove:function(){return e.onMouseMove()},volume:r,onVolumeChange:function(t){return e.setVolume(t)},disableFullscreen:s,isFullscreen:a,enterFullscreen:function(){return e.enterFullscreen()},exitFullscreen:function(){return e.exitFullscreen()}}))}}]),t}(i.a.Component),$=(n(1490),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={search:Object(J.b)("search","")},n.ref=i.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.search,t=Object(S.a)();this.ref.current.append(t.domElement),""!==e&&Object(S.g)(e,!0)}},{key:"copyChangedProps",value:function(){var e=document.createElement("textarea");e.value=Object(S.e)(),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"render",value:function(){var e=this,t=this.state.search;return i.a.createElement("div",{className:"Manage"},i.a.createElement("input",{type:"search",className:"search",placeholder:"Filter props\u2026",value:t,onChange:function(t){var n=""===e.state.search;e.setState({search:t.target.value}),Object(S.g)(t.target.value,n),Object(J.d)("search",t.target.value)}}),i.a.createElement("input",{type:"button",className:"copy",value:"Copy changes",onClick:function(){return e.copyChangedProps()}}),i.a.createElement("input",{type:"button",className:"reset",value:"Reset to saved",onClick:function(){return Object(S.d)()}}),i.a.createElement("div",{className:""===t?"":"searching",ref:this.ref}))}}]),t}(i.a.Component)),Z=n(52),ee=(n(1491),n(1492),function(e){return Math.floor(2*e)/2}),te=function(e){return Math.ceil(2*e)/2},ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).didResize=function(){n.forceUpdate()},n.state={dragging:null,lastDrag:null},n.trackRef=i.a.createRef(),n.cursorRef=i.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({refreshDimensions:!0}),window.addEventListener("resize",this.didResize),window.game.updateReplayCursor=function(t,n){e.updateCursor(t,n)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.didResize),delete window.game.updateReplayCursor}},{key:"updateCursor",value:function(e,t){var n=this.props.replayTimestamp;if(this.cursorRef.current&&this.trackRef.current)if(e&&t&&t.timestamp===n){var a=this.props,i=a.min,r=a.max,o=this.trackRef.current.getBoundingClientRect().width,s=Math.max(0,Math.min(1,(e-i)/(r-i)));this.cursorRef.current.style.left="".concat(ee(s*o),"px"),this.cursorRef.current.style.display="block"}else this.cursorRef.current.style.display="none"}},{key:"render",value:function(){var e=this,t=this.props,n=t.min,a=t.max,r=t.value1,o=t.value2,s=t.onChange1,c=t.onChange2,l=t.onMouseUp,u=t.onMouseEnter,h=t.onMouseMove,d=t.onMouseLeave,p=t.onBeginChange,m=t.onEndChange,f=t.notches,_=t.highlight1,v=t.highlight2,g=t.cursor,y=this.state,b=y.dragging,O=y.lastDrag,E=this.trackRef.current&&this.trackRef.current.getBoundingClientRect(),w=E?E.left:0,k=E?E.width:100,S=Math.max(0,Math.min(1,(r-n)/(a-n))),j=Math.max(0,Math.min(1,(o-n)/(a-n))),C=Math.max(0,Math.min(1,(_-n)/(a-n))),T=Math.max(0,Math.min(1,(v-n)/(a-n))),R=Math.max(0,Math.min(1,(g-n)/(a-n)));return i.a.createElement("div",{className:"DoubleEnder",onMouseUp:l,onMouseEnter:u,onMouseMove:h,onMouseLeave:d},i.a.createElement("div",{className:"track",ref:this.trackRef}),i.a.createElement("div",{style:{left:"".concat(ee(S*k),"px"),right:"".concat(te(k-j*k),"px")},className:"track selected"}),i.a.createElement("div",{style:{left:"".concat(ee(C*k),"px"),right:"".concat(te(k-T*k),"px")},className:"track highlighted"}),i.a.createElement("div",{style:{left:"".concat(ee(R*k),"px"),display:null===g?"none":"block"},className:"cursor highlighted",ref:this.cursorRef}),f.map(function(e){var t=e.value,s=e.title,c=t>=r&&t<=o||t>=o&&t<=r,l=t>=_&&t<=v||t>=v&&t<=_,u=Math.max(0,Math.min(1,(t-n)/(a-n))),h=["notch"];return l?h.push("highlighted"):c&&h.push("selected"),i.a.createElement("div",{key:t,title:s,className:h.join(" "),style:{left:"".concat(ee(u*k),"px")}}," ")}),[1,2].map(function(t){var l=t,u=1===l?r:o,h=1===l?2:1,d=1===h?r:o,f=Math.max(0,Math.min(1,(u-n)/(a-n)));return i.a.createElement("div",{key:l,style:{left:"".concat(ee(f*(k-16)),"px"),zIndex:l===O?5:4},className:"slider slider".concat(l," ").concat(b===l?"dragging":""),onMouseDown:function(t){var i=t.clientX-t.target.getBoundingClientRect().left;p&&p();var r=1===l?s:c;e._dragListener=function(t){var o=t.clientX,u=n+(o-w-i)/(k-16)*(a-n),p=Math.min(a,Math.max(n,u));1===l&&p>d||2===l&&p<d?(r&&r(d),h=1===(l=h)?2:1,r=1===l?s:c,e.setState({dragging:l,lastDrag:l})):r&&r(p)},e._upListener=function(t){e._dragListener(t),window.removeEventListener("mousemove",e._dragListener),delete e._dragListener,window.removeEventListener("mouseup",e._upListener),delete e._upListener,e.setState({dragging:null}),m&&m()},window.addEventListener("mousemove",e._dragListener),window.addEventListener("mouseup",e._upListener),e.setState({dragging:l,lastDrag:l})}})}))}}]),t}(i.a.Component),ae=["metadata","commands","sceneSaveState","sceneTransitions"],ie=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e));var a=Object(J.b)("replays",[]);return a.forEach(function(e){e.preflight&&(e.commands=[].concat(Object(v.a)(e.preflight),Object(v.a)(e.commands||[])),e.preflightCutoff=e.preflight.reduce(function(e,t){return e+(t._repeat||1)},0),delete e.preflight),"tickCount"in e||(e.tickCount=e.commands.reduce(function(e,t){return e+(t._repeat||1)},0)),"originalPreflightCutoff"in e||(e.originalPreflightCutoff=e.preflightCutoff),"postflightCutoff"in e||(e.postflightCutoff=e.tickCount)}),n.state={replays:a,activeRecording:null,activeReplay:Object(J.b)("activeReplay",null),tweaking:Object(J.b)("tweaking",null),editing:Object(J.b)("editing",null),repeat:Object(J.b)("repeat",!0)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.beginAutoReplay(),this.installGameCallbacks()}},{key:"componentDidUpdate",value:function(e){this.props.activateGame!==e.activateGame&&(this.installGameCallbacks(),this.beginAutoReplay())}},{key:"installGameCallbacks",value:function(){var e=this,t=window.game;t&&!t.onRecordBegin&&(t.onRecordBegin=function(t){e.setState({activeRecording:t})},t.onRecordStop=function(t){e.setState({activeRecording:null}),e._trashNextRecording?delete e._trashNextRecording:e.setState(function(n){var a=n.replays,i=[t].concat(Object(v.a)(a));return setTimeout(function(){Object(J.d)("replays",i),t.snapshot||e.beginReplay(t)}),{replays:i}})},t.onReplayBegin=function(t){t.snapshot||e.setActiveReplay(t)},t.onReplayEnd=function(t){e.state.repeat&&!t.snapshot?setTimeout(function(){e.beginReplay(e.state.activeReplay)}):e.setActiveReplay(null)},t.onReplayStop=function(t){e.setActiveReplay(null)})}},{key:"beginAutoReplay",value:function(){var e=this.props.activateGame,t=this.state.activeReplay;e&&t&&this.beginReplay(t)}},{key:"beginReplay",value:function(e,t){var n=this,a=this.props.activateGame,i=this.state.editing;a(function(){var a,r=n.state.activeReplay;r&&(r.timestamp===e.timestamp&&!r.timeSight&&e.timeSight&&(a=window.game.topScene()._replayLatestTransition),window.game.stopReplay()),t&&i!==e.timestamp&&n.setEditing(null),window.game.beginReplay(e,{startFromTransition:a})})}},{key:"stopReplay",value:function(){(0,this.props.activateGame)(function(){window.game.stopReplay()})}},{key:"beginRecording",value:function(e){var t=this.props.activateGame;this.setEditing(null),t(function(){window.game.beginRecording(e)})}},{key:"stopRecording",value:function(){(0,this.props.activateGame)(function(){window.game.stopRecording()})}},{key:"trashRecording",value:function(){this._trashNextRecording=!0,this.stopRecording()}},{key:"toggleTimeSight",value:function(){var e=this.state.activeReplay;this.beginReplay(Object(_.a)({},e,{timeSight:!e.timeSight}),!0)}},{key:"toggleRepeat",value:function(){this.setState(function(e){var t=e.repeat;return setTimeout(function(){Object(J.d)("repeat",!t)}),{repeat:!t}})}},{key:"saveReplays",value:function(){var e=this;setTimeout(function(){var t=e.state,n=t.replays,a=t.activeReplay,i=t.editing;Object(J.d)("replays",n),Object(J.d)("editing",i),Object(J.d)("activeReplay",a)})}},{key:"finishEdit",value:function(e,t){this.setEditing(null),this.saveReplays()}},{key:"setEditing",value:function(e){this.setState({editing:e}),Object(J.d)("editing",e)}},{key:"setActiveReplay",value:function(e){this.setState({activeReplay:e}),Object(J.d)("activeReplay",e)}},{key:"updateReplay",value:function(e,t,n){var a=this,i=e.timestamp;this.setState(function(e){var r,o=e.activeReplay,s={replays:e.replays.map(function(e){return e.timestamp===i?r=Object(_.a)({},e,t):e})};return o&&o.timestamp===i&&(s.activeReplay=Object(_.a)({},o,t)),r&&n&&setTimeout(function(){a.beginReplay(Object(_.a)({},r,{timeSight:o&&o.timeSight}))}),s})}},{key:"editName",value:function(e,t,n){this.updateReplay(e,{name:t},n)}},{key:"editPreflightCutoff",value:function(e,t,n){var a=t>.99*e.postflightCutoff;this.updateReplay(e,{preflightCutoff:t,snapshot:a},n)}},{key:"editPostflightCutoff",value:function(e,t,n){var a=e.preflightCutoff>.99*t;this.updateReplay(e,{postflightCutoff:t,snapshot:a},n)}},{key:"editCutoffs",value:function(e,t,n,a){var i=t>.99*n;this.updateReplay(e,{preflightCutoff:t,postflightCutoff:n,snapshot:i},a)}},{key:"deleteReplay",value:function(e){var t=this,n=e.timestamp;this.setState(function(e){var a=e.activeReplay,i=e.replays.filter(function(e){return e.timestamp!==n});return setTimeout(function(){Object(J.d)("replays",i)}),a&&a.timestamp===n&&setTimeout(function(){return t.stopReplay()}),{replays:i}})}},{key:"copyReplay",value:function(e){var t=Object(_.a)({},e,{timestamp:Date.now(),name:"Copy of ".concat(e.name)});this.setState(function(e){var n=e.replays,a=[t].concat(Object(v.a)(n));return setTimeout(function(){Object(J.d)("replays",a)}),{replays:a}})}},{key:"cutoffTimeSightEnter",value:function(){window.game.cutoffTimeSightEnter()}},{key:"cutoffTimeSightChanged",value:function(e,t){window.game.cutoffTimeSightChanged(e,t)}},{key:"cutoffTimeSightLeave",value:function(){window.game.cutoffTimeSightLeave()}},{key:"renderEditReplay",value:function(e){var t=this,n=this.state.activeReplay,a=null,r=null,o=window.game,s=o&&o.topScene(),c=s&&s.command?s.command.replayTicks:null;if(n&&n.timestamp!==e.timestamp&&(c=null),n&&n.timestamp===e.timestamp&&n.timeSight){c=null;var l=e.sceneTransitions;if(l&&0!==l.length){var u=s&&s._replayLatestTransition;if(s)if(u){var h=u&&u.tickCount||0,d=e.postflightCutoff;a=Math.max(h,e.preflightCutoff);for(var p=0;p<l.length;p+=1)if(l[p].tickCount>=h){p+1<l.length&&(d=l[p+1].tickCount);break}r=Math.min(d,e.postflightCutoff)}else a=e.preflightCutoff,r=Math.min(e.postflightCutoff,l[0].tickCount);else{a=e.preflightCutoff;for(var m=0;m<l.length;m+=1)if(l[m].tickCount>a){r=Math.min(e.postflightCutoff,l[m].tickCount);break}}}else a=e.preflightCutoff,r=e.postflightCutoff;a>r&&(a=r=null)}return i.a.createElement("form",{onSubmit:function(n){n.preventDefault(),t.finishEdit(e)}},i.a.createElement("input",{type:"text",autoFocus:!0,value:e.name,onChange:function(n){return t.editName(e,n.target.value)}}),i.a.createElement("span",{className:"play button",title:"Load snapshot (load state)",onClick:function(){return t.beginReplay(Object(_.a)({},e,{snapshot:!0,commands:[]}))}},"\ud83c\udf86"),i.a.createElement("span",{className:"tweak button",title:"Tweak replay",onClick:function(){return t.tweakReplay(e)}},"\u2139"),i.a.createElement("span",{className:"copy button",title:"Copy replay",onClick:function(){return t.copyReplay(e)}},"\ud83d\udd03"),i.a.createElement("span",{className:"delete button",title:"Delete replay",onClick:function(){return t.deleteReplay(e)}},"\ud83d\udeae"),i.a.createElement("span",{className:"detail"},e.preflightCutoff,"-",e.postflightCutoff,e.postflightCutoff!==e.tickCount&&" / ".concat(e.tickCount)),i.a.createElement("br",null),i.a.createElement(ne,{min:0,max:e.tickCount,value1:e.preflightCutoff,value2:e.postflightCutoff,highlight1:a,highlight2:r,cursor:c,notches:(e.sceneTransitions||[]).map(function(e){return{value:e.tickCount,title:"Scene transition"}}),replayTimestamp:e.timestamp,onMouseEnter:function(a){t._inCutoffs=!0,n&&n.timeSight&&n.timestamp===e.timestamp&&t.cutoffTimeSightEnter()},onMouseLeave:function(a){t._inCutoffs=!1,n&&n.timeSight&&n.timestamp===e.timestamp&&(t._changingCutoffs||t.cutoffTimeSightLeave(),t.saveReplays())},onBeginChange:function(e){t._changingCutoffs=!0},onEndChange:function(a){t._changingCutoffs=!1,n&&n.timeSight&&n.timestamp===e.timestamp?(t._inCutoffs||t.cutoffTimeSightLeave(),t.saveReplays()):setTimeout(function(){var n=t.state.replays.find(function(t){return t.timestamp===e.timestamp});t.beginReplay(n),t.saveReplays()})},onChange1:function(a){t.editPreflightCutoff(e,Math.floor(a)),n&&n.timeSight&&n.timestamp===e.timestamp&&setTimeout(function(){t.cutoffTimeSightChanged(Math.floor(a),t.state.activeReplay.postflightCutoff)})},onChange2:function(a){t.editPostflightCutoff(e,Math.floor(a)),n&&n.timeSight&&n.timestamp===e.timestamp&&setTimeout(function(){t.cutoffTimeSightChanged(t.state.activeReplay.preflightCutoff,Math.floor(a))})}}),(e.preflightCutoff!==e.originalPreflightCutoff||e.postflightCutoff!==e.tickCount)&&i.a.createElement("input",{type:"button",onClick:function(n){n.preventDefault(),t.editCutoffs(e,e.originalPreflightCutoff,e.tickCount,!0)},value:"\u293a"}))}},{key:"tweakReplay",value:function(e){var t=Object(_.a)({},e),n={replay:e};ae.forEach(function(e){"metadata"!==e&&(n[e]=JSON.stringify(t[e],null,2),delete t[e])}),n.metadata=JSON.stringify(t,null,2),ae.forEach(function(e){n["".concat(e,"_original")]=n[e]}),this.setState({tweaking:n}),Object(J.d)("tweaking",n)}},{key:"updateTweak",value:function(e,t){this.setState(function(n){var a,i=n.tweaking,r=Object(_.a)({},i,(a={},Object(Z.a)(a,e,t),Object(Z.a)(a,"".concat(e,"_error"),null),Object(Z.a)(a,"".concat(e,"_changed"),t!==i["".concat(e,"_original")]),a));return setTimeout(function(){return Object(J.d)("tweaking",r)}),{tweaking:r}})}},{key:"revertTweak",value:function(e){this.updateTweak(e,this.state.tweaking["".concat(e,"_original")])}},{key:"discardTweaks",value:function(){setTimeout(function(){Object(J.d)("tweaking",null)}),this.setState({tweaking:null})}},{key:"saveTweaks",value:function(){var e=this;this.setState(function(t){var n,a=t.tweaking,i=!1,r=Object(_.a)({},a);return ae.forEach(function(e){try{var t=JSON.parse(a[e]);"metadata"===e?n=t:n&&(n[e]=t),r["".concat(e,"_error")]=null}catch(o){console.error(o),i=!0,r["".concat(e,"_error")]=o.toString()}}),i?(setTimeout(function(){Object(J.d)("tweaking",r)}),{tweaking:r}):(setTimeout(function(){e.updateReplay(a.replay,n,!1),setTimeout(function(){Object(J.d)("tweaking",null)})}),{tweaking:null})})}},{key:"renderTweaking",value:function(){var e=this,t=this.state.tweaking;return i.a.createElement("div",{className:"Replay tweaking"},i.a.createElement("div",{className:"controls tweaking"},i.a.createElement("span",{className:"button",title:"Cancel tweaks",onClick:function(){return e.discardTweaks()}},"\ud83d\udeae"),i.a.createElement("span",{className:"button",title:"Save tweaks",onClick:function(){return e.saveTweaks()}},"\ud83c\udd99")),i.a.createElement("div",{className:"fields"},ae.map(function(n){return i.a.createElement("div",{key:n,className:"field ".concat(t["".concat(n,"_error")]?"error":""," ").concat(t["".concat(n,"_changed")]?"changed":"")},i.a.createElement("label",null,n," ",i.a.createElement("span",{style:{visibility:t["".concat(n,"_changed")]?"visible":"hidden"},className:"button",title:"Discard these tweaks",onClick:function(){return e.revertTweak(n)}},"\ud83d\udeae")),t["".concat(n,"_error")]&&i.a.createElement("span",{className:"info"},t["".concat(n,"_error")]),i.a.createElement("textarea",{value:t[n],onChange:function(t){return e.updateTweak(n,t.target.value)}}))})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.replays,a=t.activeRecording,r=t.activeReplay,o=t.editing,s=t.repeat;return t.tweaking?this.renderTweaking():i.a.createElement("div",{className:"Replay"},i.a.createElement("div",{className:"controls ".concat(r?"active-replay":""," ").concat(r&&r.timeSight?"timeSight":"")},r&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"button repeat ".concat(s?"repeat-on":"repeat-off"),title:s?"Disable automatic repeat":"Enable automatic repeat",onClick:function(){return e.toggleRepeat()}},"\ud83d\udd01"),i.a.createElement("span",{className:"button",title:"Stop replay",onClick:function(){return e.stopReplay()}},"\u23f9"),r.timeSight&&i.a.createElement("span",{className:"button",title:"Disable timeSight",onClick:function(){return e.toggleTimeSight()}},"\ud83d\udcfa"),!r.timeSight&&i.a.createElement("span",{className:"button",title:"Enable timeSight",onClick:function(){return e.toggleTimeSight()}},"\u269b")),!r&&(a?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"recording button",title:"Stop recording",onClick:function(){return e.stopRecording()}},"\u23fa\ufe0f"),i.a.createElement("span",{className:"button",title:"Discard recording",onClick:function(){return e.trashRecording()}},"\ud83d\udeae")):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"record button",title:"Start recording replay",onClick:function(){return e.beginRecording()}},"\ud83c\udfa6"),i.a.createElement("span",{className:"snapshot button",title:"Take snapshot (save state)",onClick:function(){return e.beginRecording({snapshot:!0})}},"\ud83c\udf86")))),i.a.createElement("ul",{className:"replays"},n.map(function(t){return i.a.createElement("li",{className:"\n                replay\n                ".concat(r&&r.timestamp===t.timestamp?"active":"","\n                ").concat(o===t.timestamp?"editing":"","\n              "),key:t.timestamp},i.a.createElement("span",{className:"drag"},"\u22ee\u22ee"),r&&r.timeSight&&r.timestamp===t.timestamp&&i.a.createElement("span",{className:"play button",title:"Restart timeSight",onClick:function(){return e.beginReplay(Object(_.a)({},t,{timeSight:!0}),!0)}},"\u269b"),r&&!r.timeSight&&r.timestamp===t.timestamp&&i.a.createElement("span",{className:"play button",title:"Restart replay",onClick:function(){return e.beginReplay(t,!0)}},"\ud83d\udcfa"),(!r||r.timestamp!==t.timestamp)&&!t.snapshot&&i.a.createElement("span",{className:"play button",title:"Start replay",onClick:function(){return e.beginReplay(t,!0)}},"\u25b6\ufe0f"),(!r||r.timestamp!==t.timestamp)&&t.snapshot&&i.a.createElement("span",{className:"play button",title:"Load snapshot (load state)",onClick:function(){return e.beginReplay(t,!0)}},"\ud83c\udf86"),o===t.timestamp&&e.renderEditReplay(t),i.a.createElement("span",{className:"name",onClick:function(){return e.beginReplay(t,!0)}},t.name),i.a.createElement("span",{className:"edit button",title:"Edit replay",onClick:function(){return e.setEditing(t.timestamp)}},"\u2139"))})))}}]),t}(i.a.Component),re=(n(1493),function(e){function t(e){var n;Object(s.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e));var a=Object(J.b)("log",[]).map(function(e){return Object(_.a)({},e,{recent:!1,old:!0})});return n.state={log:a},n.logId=1+Number(a.map(function(e){return e.id}).reduce(function(e,t){return e>t?e:t},0)),n.timers=[],n.ref=i.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.original={};var t=this;["trace","debug","log","info","warn","error"].forEach(function(n){var a=e.original[n]=console[n];console[n]=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var o=t.extractContext.apply(t,i);return t.prependLog(i.join(" "),n,o),a.apply(void 0,i)}})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.game;!e.game&&n&&n.onDisableDebugUI(function(){t.removeLogging()})}},{key:"componentWillUnmount",value:function(){this.removeLogging()}},{key:"removeLogging",value:function(){this.timers.forEach(function(e){clearTimeout(e)}),Object.entries(this.original).forEach(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];console[n]=a})}},{key:"extractContext",value:function(e){if(e instanceof Error){var t=e.stack.match(/ at (\w+) \(http/);if(t)return t[1]}return null}},{key:"prependLog",value:function(e,t,n){var a=this,i=e.replace(/^Error: /,"");if(!i.match(/https:\/\/phaser\.io/)){var r=this.logId+=1,o=setTimeout(function(){a.setState(function(e){return{log:e.log.map(function(e){return e.id===r?Object(_.a)({},e,{recent:!0}):e})}})},500);this.timers.push(o);var s=setTimeout(function(){a.setState(function(e){return{log:e.log.map(function(e){return e.id===r?Object(_.a)({},e,{recent:!1,old:!0}):e})}})},5e3);this.timers.push(s),this.ref.current.scrollTop=0,this.setState(function(e){var a=e.log,o=[{msg:i,level:t,id:r,context:n}].concat(Object(v.a)(a.filter(function(e,t){return t<19})));return setTimeout(function(){Object(J.d)("log",o)}),{log:o}})}}},{key:"render",value:function(){var e=this.state.log;return i.a.createElement("div",{className:"Logging",ref:this.ref},i.a.createElement("ol",null,e.map(function(e){var t=e.msg,n=e.level,a=e.id,r=e.recent,o=e.old,s=e.context;return i.a.createElement("li",{key:a,className:"".concat(n," ").concat(r?"recent":""," ").concat(o?"old":"")},i.a.createElement("span",{className:"level"},n),i.a.createElement("span",{className:"msg"},t),s&&i.a.createElement("span",{className:"context"},s))})))}}]),t}(i.a.Component)),oe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).loadedGame=function(e,t){window.game=e,n.setState({game:e,activateGame:t})},n.state={game:null,activateGame:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.game,n=e.activateGame;return i.a.createElement("div",{className:"development"},i.a.createElement(Q,{debug:!0,loadedGame:this.loadedGame}),i.a.createElement(re,{game:t}),i.a.createElement("div",{className:"sidebar"},i.a.createElement("ul",{className:"links"},C.a.links.map(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];return i.a.createElement("li",{key:n},i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},a))})),i.a.createElement($,null),i.a.createElement(ie,{activateGame:n})))}}]),t}(i.a.Component),se=(n(547),n(585)),ce=n.n(se),le=n(586),ue=n.n(le),he=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"production"},i.a.createElement(Q,null),i.a.createElement("div",{className:"game-metadata"},i.a.createElement("h1",null,C.c.displayName),C.c.authorName&&i.a.createElement("h3",null,"by",i.a.createElement("br",null),C.c.authorURL?i.a.createElement("a",{href:C.c.authorURL},C.c.authorName):C.c.authorName,i.a.createElement("br",null),C.c.authorTwitter&&i.a.createElement("a",{href:"https://twitter.com/".concat(C.c.authorTwitter)},i.a.createElement("img",{src:ue.a,alt:"@".concat(C.c.authorTwitter," on Twitter")})),C.c.authorTwitch&&i.a.createElement("a",{href:"https://twitch.tv/".concat(C.c.authorTwitch)},i.a.createElement("img",{src:ce.a,alt:"".concat(C.c.authorTwitch," on Twitch")}))),i.a.createElement("p",null,C.c.eventDescription&&i.a.createElement(i.a.Fragment,null,C.c.eventDescription,i.a.createElement("br",null)),C.c.eventNamePre," ",i.a.createElement("strong",null,C.c.eventNameBold)," ",C.c.eventNamePost),C.c.eventURL&&i.a.createElement("p",null,i.a.createElement("a",{href:C.c.eventURL},C.c.eventURL)),i.a.createElement("p",null,C.c.themeDescription&&i.a.createElement(i.a.Fragment,null,C.c.themeDescription,i.a.createElement("br",null)),C.c.themePre," ",i.a.createElement("em",null,C.c.themeItalic)," ",C.c.themePost),C.c.repoURL&&i.a.createElement("p",null,"code at",i.a.createElement("br",null),i.a.createElement("a",{className:"url",href:C.c.repoURL},C.c.repoURL))))}}]),t}(i.a.Component),de=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"production embed"},i.a.createElement(Q,{disableFullscreen:!0}))}}]),t}(i.a.Component),pe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.debug;return C.c.embed?i.a.createElement(de,null):e?i.a.createElement(oe,null):i.a.createElement(he,null)}}]),t}(i.a.Component),me=Object(d.hot)(pe);o.a.render(i.a.createElement(me,{debug:!1}),document.getElementById("root"))},182:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return SuperScene});var _Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8),_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19),phaser__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(27),phaser__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_8__),deep_equal__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(277),deep_equal__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(deep_equal__WEBPACK_IMPORTED_MODULE_9__),_props__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2),_lib_manage_gui__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(44),_lib_particles__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(101),_lib_transitions__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(60),_lib_sprites__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(550),_lib_anims__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(551),_lib_tweens__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(41),_lib_shaders__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(88),_lib_store__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10),_lib_level_parser__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(184),_assets_maps_txt__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(552),_assets_maps_txt__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_assets_maps_txt__WEBPACK_IMPORTED_MODULE_20__),_assets_index__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(553),_lib_assets__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(583),baseConfig={},SuperScene=function(_Phaser$Scene){function SuperScene(e){var t;Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,SuperScene);var n=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},baseConfig,e);return(t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__.a)(this,Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.a)(SuperScene).call(this,n))).rnd={},t.timeScale=1,t.sounds=[],t.timers=[],t.performanceFrames=0,t.performanceAcceptable=!0,t.scene_time=0,t.shockwave_time=0,t._paused={physics:!1,particles:!1,timers:!1,tweens:!1,anims:!1},t}return Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__.a)(SuperScene,_Phaser$Scene),Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(SuperScene,[{key:"init",value:function(e){var t=this;if(!e.seed)throw new Error('You must provide a "seed" (e.g. Date.now()) to '.concat(this.constructor.name));if(!e.sceneId)throw new Error('You must provide a "sceneId" (e.g. Date.now()) to '.concat(this.constructor.name));if(this.sceneId=e.sceneId,this.command=this.game.command,this.command.attachScene(this,e._timeSightTarget),this.camera=this.cameras.main,this.camera.setBackgroundColor(this.cameraColor()),e.save?this.save=e.save:!this.save&&this.saveStateFieldName()&&(this.save=Object(_lib_store__WEBPACK_IMPORTED_MODULE_18__.b)(this.saveStateFieldName(),function(){var e=t.initialSaveState();return e.version=t.saveStateVersion(),e})),this.save&&(this.save=this.migrateSaveState(this.save)),this.save||(this.save={}),this._initialSave=JSON.parse(JSON.stringify(this.save)),this.physics&&this.physics.world&&(Object(_lib_sprites__WEBPACK_IMPORTED_MODULE_14__.a)(this),Object(_lib_tweens__WEBPACK_IMPORTED_MODULE_16__.c)(this.tweens),Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.debugDraw")&&this.physics.world.createDebugGraphic(),this.fixedUpdate)){var n=this.scene.systems.tweens;n.systems.events.off("update",n.update,n);var a=this.physics,i=a.world,r=i.step,o=0;a.time=a.dt=0,i.step=function(e){var n=e*i.timeScale*i.timeScale,s=1e3*n;if(o+=s,a.dt=s,a.time=o,t.scene_time=o,!(t.game._stepExceptions>100))try{var c=t.isTopScene();if(t.timeSightFrozen)return c&&t.command.processInput(t,o,s,!0),t.updateTweens(o,s),void t.timeSightMouseDrag();t._paused.physics||r.call(i,n),c&&t.command.processInput(t,o,s),t.game.updateReplayCursor&&t.game.updateReplayCursor(t.command.replayTicks,t._replay),t._paused.physics||t.fixedUpdate(o,s),t.updateTimers(o,s),t.performanceProps&&t.performanceProps.length&&t.recoverPerformance(),t.updateTweens(o,s),t.game._stepExceptions=0}catch(l){console.error(l),t.game._stepExceptions=(t.game._stepExceptions||0)+1,t.game._stepExceptions>100&&console.error("Too many errors; pausing update cycle until hot reload")}}}if(this.sound.pauseOnBlur=!1,this.particleSystems=[],this.sys.events.on("destroy",this.destroy,this),["_recording","_replay","_replayOptions"].forEach(function(n){t[n]=e[n],delete e[n]}),this._recording&&this._recording.sceneTransitions.push({tickCount:this._recording.tickCount,timestamp:Date.now(),seed:e.seed,sceneName:this.constructor.name,initData:this.scene.settings.data,sceneSaveState:JSON.parse(JSON.stringify(this._initialSave)),parentSceneId:e.parentSceneId,sceneId:this.sceneId,commandState:this.command.freezeCommandState()}),this._replay)for(var s=this._replay.sceneTransitions,c=this.command.replayTicks,l=0;l<s.length&&s[l].tickCount<=c;l+=1)this._replayLatestTransition=s[l];var u=this.game.config,h=u.width,d=u.height,p=u.tileWidth,m=u.tileHeight,f=Math.floor(h/(p+2)),_=Math.floor(d/(m+3));this.xBorder=(h-f*p)/2,this.yBorder=(d-_*m)/2,this.game.sceneDidInit(this)}},{key:"saveStateFieldName",value:function(){return"game_".concat(this.constructor.name)}},{key:"saveStateVersion",value:function(){return 0}},{key:"migrateSaveState",value:function(e){var t=this.saveStateVersion();if(e.version===t)return e;var n=JSON.parse(JSON.stringify(e));for(n.version||(n.version=0);n.version<t;){var a="migrateSaveStateVersion".concat(n.version);if(console.debug(a),!this[a])throw new Error("Missing migration method ".concat(a));this[a](n),n.version+=1}return n}},{key:"initialSaveState",value:function(){return{}}},{key:"saveState",value:function(){Object(_lib_store__WEBPACK_IMPORTED_MODULE_18__.d)(this.saveStateFieldName(),this.save)}},{key:"isTopScene",value:function(){return this.game.topScene()===this}},{key:"vendRNG",value:function(e){if(!e)throw new Error("You must provide a name for each RNG sequence");if(!this.rnd[e]){var t=this.scene.settings.data.seed;this.rnd[e]=new phaser__WEBPACK_IMPORTED_MODULE_8___default.a.Math.RandomDataGenerator([t,e])}return this.rnd[e]}},{key:"randFloat",value:function(e){return this.vendRNG(e).frac()}},{key:"randBetween",value:function(e,t,n){return this.randFloat(e)*(n-t)+t}},{key:"randElement",value:function(e,t){return t[Math.floor(this.randBetween(e,0,t.length))]}},{key:"create",value:function(){this.command.attachInputs(this),this.startedAt=new Date,this.setupAnimations&&this.setupAnimations();var e=this.scene.settings.data.transition;e&&e.delayNewSceneShader||this._setupShader()}},{key:"_setupShader",value:function(){"shaderName"in this||(this.shaderName="main"),this.shaderName&&(this.game.initializeShader(this.shaderName),this.shader=this.game.shaderInstance(this.shaderName),this.shader&&(this._shaderInitialize(!0),this._shaderUpdate(),this.camera.setRenderToTexture(this.shader)))}},{key:"preload",value:function(){this.load.text("_mapsFile",_assets_maps_txt__WEBPACK_IMPORTED_MODULE_20___default.a),Object(_lib_assets__WEBPACK_IMPORTED_MODULE_22__.a)(this,_assets_index__WEBPACK_IMPORTED_MODULE_21__)}},{key:"levelIds",value:function(){return this.game._ldMapFiles||(this.game._ldMapFiles=Object(_lib_level_parser__WEBPACK_IMPORTED_MODULE_19__.b)(this.cache.text.get("_mapsFile"))),this.game._ldMapFiles.map(function(e){return Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(e,2)[1].id})}},{key:"loadLevel",value:function(e){this.game._ldMapFiles||(this.game._ldMapFiles=Object(_lib_level_parser__WEBPACK_IMPORTED_MODULE_19__.b)(this.cache.text.get("_mapsFile")));var t,n=this.game._ldMapFiles,a=n[e];if(a?t=e:(t=n.findIndex(function(t){return t[1].id===e}),a=n[t]),!a)throw new Error("Cannot find level with id ".concat(e));var i=a,r=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(i,2),o=r[0],s=r[1],c=Object(_lib_level_parser__WEBPACK_IMPORTED_MODULE_19__.a)(o,this.mapsAreRectangular),l=c.map,u=c.mapText,h=c.lookups,d=this.game.config,p=d.tileWidth,m=d.tileHeight,f=l.length,_=m*f,v=Math.max.apply(Math,Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(l.map(function(e){return e.length}))),g=p*v,y=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},s,{heightInTiles:f,widthInTiles:v,height:_,width:g,map:l,mapText:u,mapLookups:h,index:t});return y.background&&(y.background=this.add.sprite(0,0,y.background),y.background.setPosition(.5*y.background.width,.5*y.background.height)),y}},{key:"setCameraBounds",value:function(){var e=this.level;if(Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.camera.hasBounds")){if(e&&e.width&&e.height){var t=e.width,n=e.height;this.xBorder&&(t+=2*this.xBorder),this.yBorder&&(n+=2*this.yBorder),this.camera.setBounds(0,0,t,n)}}else this.camera.removeBounds()}},{key:"setCameraDeadzone",value:function(){this.camera.setDeadzone(Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.camera.deadzoneX"),Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.camera.deadzoneY"))}},{key:"setCameraLerp",value:function(){this.camera.setLerp(Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.camera.lerp"))}},{key:"firstUpdate",value:function(e,t){this.setCameraBounds(),this.setCameraDeadzone(),this.setCameraLerp()}},{key:"update",value:function(e,t){this._firstUpdated||(this.firstUpdate(e,t),this._firstUpdated=!0),this.physics&&this.physics.world.isPaused&&!this.timeSightFrozen&&this.isTopScene()&&this.command.processInput(this,e,t,!0),this.renderUpdate&&this.renderUpdate(e,t),this.shader&&this._shaderUpdate(),this.positionBackground()}},{key:"positionBackground",value:function(){var e=this.level,t=this.game,n=this.xBorder,a=this.yBorder,i=this.camera;if(e){var r=e.background,o=e.width,s=e.height;if(r){var c=t.config,l=c.width,u=c.height,h=r.width,d=r.height,p=i.scrollX,m=i.scrollY,f=o-l+2*n;if(0===f)r.x=.5*h;else{var _=p/f;r.x=n+.5*h+_*(o-h)}var v=s-u+2*a;if(0===v)r.y=.5*d;else{var g=m/v;r.y=a+.5*d+g*(s-d)}}}}},{key:"_shaderInitialize",value:function _shaderInitialize(initializeListeners){var _this3=this;this.game.shaderFragments.forEach(function(e){var t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(e,2),n=t[0],a=t[1];Object.entries(a).forEach(function(e){var t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(e,2),a=t[0],i=t[1],r="".concat(n,"_").concat(a),o=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(i,3),s=o[0],c=o[1];if(null===o[2])!initializeListeners&&r in _this3||(_this3[r]=c);else{var l,u=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_lib_shaders__WEBPACK_IMPORTED_MODULE_17__.c[s],3)[2],h=Object(_lib_shaders__WEBPACK_IMPORTED_MODULE_17__.a)(n,a,i);1===h.length?l=Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)(h[0]):(l=[],h.forEach(function(e){var t,n=Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)(e);Array.isArray(n)?(t=l).push.apply(t,Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(n)):l.push(n)})),"rgb"!==s&&"rgba"!==s||(l=l.map(function(e,t){return t<3?e/255:e})),_this3.shader[u](r,l)}})});var shader=this.shader,camera=this.camera;shader||(this._shaderUpdate=function(){});var shaderUpdate=["(function () {","  shader.setFloat2('camera_scroll', camera.scrollX / ".concat(this.game.config.width,", camera.scrollY / ").concat(this.game.config.height,");"),"  shader.setFloat1('scene_time', this.scene_time);"];this.game.shaderFragments.forEach(function(e){var t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(e,2),n=t[0],a=t[1];Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("shader.".concat(n,".enabled"))&&Object.entries(a).forEach(function(e){var t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(e,2),a=t[0],i=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(t[1],3),r=i[0],o=i[2],s="".concat(n,"_").concat(a);if(null===o){var c=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_lib_shaders__WEBPACK_IMPORTED_MODULE_17__.c[r],3)[2];"bool"===r?shaderUpdate.push("  shader.".concat(c,"('").concat(s,"', this['").concat(s,"'] ? 1.0 : 0.0);")):shaderUpdate.push("  shader.".concat(c,"('").concat(s,"', this['").concat(s,"']);"))}})}),shaderUpdate.push("})"),this._shaderUpdate=eval(shaderUpdate.join("\n"))}},{key:"replaceWithSceneNamed",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.game;if(this.scene.settings)if(this.scene.settings.data._timeSightTarget)this.endedReplay();else{var o,s=this.scene.settings.data.seed;!0===t?s=this.randFloat("replaceWithSceneNamed"):t&&(s=t),this._replay&&(this._replay.sceneTransitions||[]).forEach(function(e){e.parentSceneId===n.sceneId&&(o=e.sceneId)}),o||(o=String(this.randFloat("sceneId")));var c="scene-".concat(this.randFloat("sceneId")*Date.now());if(!this._isTransitioning){this._isTransitioning=!0;var l=this,u=this._replay,h=this._replayOptions,d=this._recording,p=this._transitionProps(i),m=new Promise(function(e,t){n.game.onSceneInit(c,function(t){n.willTransitionTo(t,p),t.willTransitionFrom(l,p),n._sceneTransition(l,t,p),e(t,p)})});return this.scene.add(c,r._sceneConstructors[e],!0,Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},this.scene.settings.data,{_replay:u,_replayOptions:h,_recording:d,sceneId:o,parentSceneId:this.sceneId},a,{transition:p,seed:s})),m}console.error("replaceWithSceneName called again even though this scene is already transitioning. Ignoring.")}}},{key:"replaceWithSelf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.replaceWithSceneNamed(this.constructor.name,e,t,n)}},{key:"_sceneTransition",value:function(e,t,n){var a=this,i=n||{},r=i.animation,o=i.ease,s=i.duration,c=i.onUpdate,l=i.oldPauseTime,u=i.newUnpauseTime,h=function(){console.error("Transition did not instantiate newUnpauseFn")},d=!0,p=!1,m=function(a){p||(p=!0,void 0!==a&&(d=a),n&&n.onCutover&&n.onCutover(e,t,n),"cutover"===l&&Object(_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.a)(e,n,n.oldPause),"cutover"===u&&h(),t.playMusicIfSet(),d&&t.game.scene.bringToTop(t.scene.key))},f=!1,_=function(){f||(p||(console.error("completeTransition called, but cutoverPrimary hasn't been yet"),m()),n&&n.onComplete&&n.onComplete(e,t,n),"complete"===l&&Object(_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.a)(e,n,n.oldPause),"complete"===u&&h(),f=!0,t.timer(function(){e.didTransitionTo(t,n),t.didTransitionFrom(e,n),e.scene.remove()}).ignoresScenePause=!0,n&&(t.timer(function(){n&&n.onWaitEnd&&n.onWaitEnd(e,t,n),"waitEnd"===u&&h()},n.wait).ignoresScenePause=!0))};if(n){var v;if(n.removeOldSceneShader&&(e.shader=null,e.camera.clearRenderToTexture()),"function"===typeof r)v=function(){return r(e,t,m,_,n)};else if("fadeInOut"===r)d=!0,t.camera.setBackgroundColor(0),e.camera.setBackgroundColor(0),t.camera.alpha=0,e.camera.alpha=1,v=function(){a.tweenInOut(s/2,s/2,function(a,i){(i?e.camera.alpha=1-a:t.camera.alpha=1-a,c)&&c(i?a/2:1-a/2,e,t,n)},function(e){e.ignoresScenePause=!0,m()},function(){t.camera.alpha=1,e.camera.alpha=0,_()},0,o).ignoresScenePause=!0};else if("crossFade"===r)!e.shader&&t.shader?(e.game.scene.bringToTop(e.scene.key),d=!1):e.shader&&!t.shader?(t.game.scene.bringToTop(t.scene.key),d=!1):d=!0,t.camera.alpha=0,e.camera.alpha=1,v=function(){a.tweenPercent(s,function(a){t.camera.alpha=a,e.camera.alpha=1-a,a>=.5&&m(),c&&c(a,e,t,n)},function(){t.camera.alpha=1,e.camera.alpha=0,!n.suppressShaderCheck&&!n.delayNewSceneShader&&e.shader&&t.shader&&console.error("crossFade transitions do not render correctly if the both scenes have a shader; provide delayNewSceneShader, removeOldSceneShader, or suppressShaderCheck to the transition, or use fadeInOut animation"),_()},0,o).ignoresScenePause=!0};else if("pushRight"===r||"pushLeft"===r||"pushUp"===r||"pushDown"===r){var g=this.game.config,y=g.height,b=g.width;d=!0,e.camera.x=0,e.camera.y=0;var O=0,E=0;"pushRight"===r?(t.camera.x=-b,O=1):"pushLeft"===r?(t.camera.x=b,O=-1):"pushUp"===r?(t.camera.y=-y,E=-1):"pushDown"===r&&(t.camera.y=y,E=1),v=function(){a.tweenPercent(s,function(a){t.camera.x=O*(a-1)*b,e.camera.x=O*a*b,t.camera.y=E*(a-1)*y,e.camera.y=E*a*y,a>=.5&&m(),c&&c(a,e,t,n)},function(){t.camera.x=0,t.camera.y=0,_()},0,o).ignoresScenePause=!0}}else{if("wipeRight"!==r&&"wipeLeft"!==r&&"wipeUp"!==r&&"wipeDown"!==r)return console.error("Invalid transition animation '".concat(r,"'")),m(),void _();var w,k,S=this.game.config,j=S.height,C=S.width;d=!1,"wipeRight"===r||"wipeDown"===r?(t.camera.alpha=0,(w=t.cameras.add(0,0,C,j)).setBackgroundColor(t.cameraColor()),w.scrollX=t.camera.scrollX,w.scrollY=t.camera.scrollY,"wipeRight"===r?w.width=1:w.height=1):(e.game.scene.bringToTop(e.scene.key),e.camera.alpha=0,(k=e.cameras.add(0,0,C,j)).setBackgroundColor(e.cameraColor()),k.scrollX=e.camera.scrollX,k.scrollY=e.camera.scrollY,e.shader&&k.setRenderToTexture(e.shader));var T=!0;v=function(){a.tweenPercent(s,function(a){w&&T&&(t.shader&&w.setRenderToTexture(t.shader),T=!1),"wipeRight"===r?w.setSize(Math.max(1,a*C),j):"wipeLeft"===r?k.setSize(Math.max(1,(1-a)*C),j):"wipeUp"===r?k.setSize(C,Math.max(1,(1-a)*j)):"wipeDown"===r&&w.setSize(C,Math.max(1,a*j)),a>=.5&&m(),c&&c(a,e,t,n)},function(){w&&(t.cameras.main.alpha=1,t.camera.scrollX=w.scrollX,t.camera.scrollY=w.scrollY,t.cameras.remove(w)),n.suppressShaderCheck||(!n.delayNewSceneShader&&t.shader&&w&&console.error("".concat(r," transitions do not render correctly if the new scene has a shader; provide delayNewSceneShader or suppressShaderCheck to the transition, or use a different animation")),e.shader&&k&&console.error("".concat(r," transitions do not render correctly if the old scene has a shader; provide removeOldSceneShader or suppressShaderCheck to the transition, or use a different animation"))),_()},0,o).ignoresScenePause=!0}}d&&e.game.scene.bringToTop(e.scene.key),"begin"===l&&Object(_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.a)(e,n,n.oldPause),"begin"!==u&&(h=Object(_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.a)(t,n,n.newPause));var R=v;if(v=function(){n&&n.onDelayEnd&&n.onDelayEnd(e,t,n),"delayEnd"===l&&Object(_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.a)(e,n,n.oldPause),"delayEnd"===u&&h(),R()},n.delay)this.timer(v,n.delay).ignoresScenePause=!0;else v()}else m(),_()}},{key:"preemitEmitter",value:function(e){for(var t=e.lifespan.staticValueEmit(),n=e.quantity.staticValueEmit(),a=e.frequency,i=t;i>0;i-=a)for(var r=0;r<n;r+=1){e.emitParticle(1).update(i,i/1e3,[])}}},{key:"beginReplay",value:function(e,t){var n=this,a=this.command,i=this.game,r=i.loop;this._replay=e,this._replayOptions=t,this._replayLatestTransition=t.startFromTransition;var o=t.startTick||this._replayLatestTransition&&this._replayLatestTransition.tickCount||0;a.beginReplay(e,Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},t,{startTick:o,onEnd:function(){n.game.topScene().endedReplay()},onStop:function(){n.game.topScene().stopReplay(!0)}}));var s=window.performance.now(),c=1e3/this.physics.world.fps;i._replayPreflight+=1;var l=this.command.getManager(this);for(r.sleep(),this.scene.setVisible(!1);a.hasPreflight();)if(e.timeSightFrameCallback&&e.timeSightFrameCallback(this,s,c,l,!0,!1,!1),s+=c,r.step(s),i._stepExceptions>100)return void console.error("Too many errors in preflight; bailing out\u2026");r.resetDelta(),i._replayPreflight-=1;var u=i.topScene();if(e.timeSight)u.calculateTimeSight();else if(e.timeSightFrameCallback){var h;i._replayPreflight+=1,u._timeSightTargetEnded=function(){e.timeSightFrameCallback(u,s,c,l,!1,!0,!0)},"postflightCutoff"in e&&(h=e.postflightCutoff,delete e.postflightCutoff);for(;!u._timeSightTargetDone;){var d=void 0!==h&&this.command.replayTicks>=h;if(e.timeSightFrameCallback(u,s,c,l,!1,d,!1),s+=c,r.step(s),i._stepExceptions>100)return void console.error("Too many errors in timeSight; bailing out\u2026")}u.scene.remove(),i._replayPreflight-=1}else u.scene.setVisible(!0),r.wake()}},{key:"calculateTimeSight",value:function(){var e=this;console.info("Calculating timeSight"),this._timeSightFrames=[],this.scene.setActive(!1),this.scene.setVisible(!1),this.launchTimeSight();var t="scene-".concat(Math.random()*Date.now()),n=this.game.scene.add(t,this.constructor,!0,Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},this.scene.settings.data,{_timeSightTarget:!0}));this.game.scene.bringToTop(t);var a=0;n.beginReplay(Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},this._replay,{timeSight:!1,startTick:(this._replayLatestTransition?this._replayLatestTransition.tickCount:0)||0,timeSightFrameCallback:function(t,n,i,r,o,s,c){a+=i,e.timeSightTargetStep(t,a,n,i,r,o,s,c)&&(a=0)}}),{onEnd:function(){n._timeSightTargetDone=!0,e.scene.setVisible(!0),e.scene.setActive(!0),e.game.loop.wake(),e.beginTimeSightAlphaAnimation()}})}},{key:"timeSightTargetStep",value:function(e,t,n,a,i,r,o,s){var c=this,l=e.renderTimeSightFrameInto(this,t,n,a,s);if(l&&l.length){Object(_lib_manage_gui__WEBPACK_IMPORTED_MODULE_11__.f)(!0);var u={objects:l,props:Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},_props__WEBPACK_IMPORTED_MODULE_10__.c),commands:Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(i.commands),tickCount:i.tickCount,isPreflight:r,isPostflight:o};return l.forEach(function(e){e.scene!==c&&console.error("renderTimeSightFrameInto rendered this object into the wrong scene: ".concat(JSON.stringify(e))),e._timeSightAlpha=e.alpha,e._timeSightFrame=u,(r||o)&&(e.alpha=0)}),this._timeSightFrames.push(u),u}}},{key:"beginTimeSightAlphaAnimation",value:function(){var e,t=this,n=this._timeSightFrames.filter(function(e){return!e.isPreflight&&!e.isPostflight});n.length&&(Object(_lib_manage_gui__WEBPACK_IMPORTED_MODULE_11__.b)(n[0].props),this.game.updateReplayCursor&&this.game.updateReplayCursor(),e=function(a,i){var r=a.objects,o=a.props;Object(_lib_manage_gui__WEBPACK_IMPORTED_MODULE_11__.b)(o),r.forEach(function(r,o){r._timeSightAlphaTween=t.tweens.add({targets:r,alpha:.7,duration:200,onComplete:function(){r._timeSightAlphaTween=t.tweens.add({targets:r,alpha:r._timeSightAlpha,duration:200,onComplete:function(){0===o&&(a.timer=t.time.addEvent({delay:100*n.length+1e3,callback:function(){return e(a,i)}}))}})}})})},n.forEach(function(n,a){n.timer=t.time.addEvent({delay:100*a+1e3,callback:function(){e(n,a)}})}),this._timeSightMouseInput?n.forEach(function(e){e.objects.forEach(function(e){e.alpha=e._timeSightAlpha})}):(this._timeSightMouseInput=!0,this.input.topOnly=!0,n.forEach(function(e){e.objects.forEach(function(e){e.setInteractive()})}),this.input.on("gameobjectover",function(e,a){var i;t._timeSightRemoveFocusTimer&&t._timeSightRemoveFocusTimer.destroy(),t.game.canvas.style.cursor="pointer",n.forEach(function(e){e.timer&&e.timer.destroy(),e.objects.forEach(function(t){t._timeSightAlphaTween&&t._timeSightAlphaTween.stop(),t.alpha=t._timeSightAlpha,t===a&&(i=e,t.alpha=1)})}),i&&(Object(_lib_manage_gui__WEBPACK_IMPORTED_MODULE_11__.b)(i.props),t.game.updateReplayCursor&&t.game.updateReplayCursor(i.tickCount,t._replay))}),this.input.on("gameobjectout",function(e,n){t._timeSightRemoveFocusTimer&&t._timeSightRemoveFocusTimer.destroy(),t._timeSightRemoveFocusTimer=t.time.addEvent({delay:100,callback:function(){t.game.canvas.style.cursor="",t.beginTimeSightAlphaAnimation()}})}),this.input.on("gameobjectdown",function(e,n){t._timeSightRemoveFocusTimer&&t._timeSightRemoveFocusTimer.destroy(),t.game.canvas.style.cursor="";var a=t._replay,i=n._timeSightFrame.commands,r=i.reduce(function(e,t){return e+(t._repeat||1)},0);t.game.stopReplay(),t.game.beginReplay(Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},a,t._replayLatestTransition||{},{timeSight:!1,snapshot:!0,commands:i,preflightCutoff:r}),{startFromTransition:t._replayLatestTransition,startTick:-1})})))}},{key:"endedReplay",value:function(){if(this._replay){var e=this._replayOptions.onEnd,t=this._replay;delete this._replay,delete this._replayOptions,t.timeSight?this.replaceWithSelf(!1):(this._timeSightTargetEnded&&this._timeSightTargetEnded(),e&&e())}}},{key:"stopReplay",value:function(e){if(this._replay){var t=this._replayOptions.onStop,n=this._replay;delete this._replay,delete this._replayOptions,n.timeSight?this.replaceWithSelf(!1):(e||this.command.stopReplay(),t&&t())}}},{key:"launchTimeSight",value:function(){this.timeSightFrozen=!0,[].concat(Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(this.tweens._active),Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(this.tweens._add)).forEach(function(e){return e._skipFreezeTimeSight||e.stop()}),this.add.displayList.list.filter(function(e){return"Sprite"===e.type}).map(function(e){return e._skipFreezeTimeSight||e.anims.stop()});var e=this.add.displayList.list.filter(function(e){return"ParticleEmitterManager"===e.type});this.time.addEvent({callback:function(){e.forEach(function(e){e._skipFreezeTimeSight||e.pause()})}})}},{key:"cutoffTimeSightEnter",value:function(){var e=this._timeSightFrames;e&&(this._timeSightRemoveFocusTimer&&this._timeSightRemoveFocusTimer.destroy(),e.forEach(function(e){e.timer&&e.timer.destroy(),e.objects.forEach(function(e){e._timeSightAlphaTween&&e._timeSightAlphaTween.stop(),e.alpha=e._timeSightAlpha})}),this.cutoffTimeSightChanged(this._replay.preflightCutoff,this._replay.postflightCutoff))}},{key:"cutoffTimeSightChanged",value:function(e,t){var n=this,a=this._timeSightFrames;a&&(this._replay.preflightCutoff=e,this._replay.postflightCutoff=t,a.forEach(function(a,i){var r=a.tickCount+((n._replayLatestTransition?n._replayLatestTransition.tickCount:0)||0);a.isPreflight=r<e,a.isPostflight=r>t,a.objects.forEach(function(e){e.alpha=a.isPreflight||a.isPostflight?e._timeSightAlpha:1})}))}},{key:"cutoffTimeSightLeave",value:function(){var e=this._timeSightFrames;e&&(e.forEach(function(e){e.objects.forEach(function(t){t.alpha=e.isPreflight||e.isPostflight?0:t._timeSightAlpha})}),this.beginTimeSightAlphaAnimation())}},{key:"propDidChange",value:function(e,t){this.replayParticleSystems(e)}},{key:"propDidFinishChange",value:function(e,t){if(this._replay&&this._replay.timeSight){var n=this._replay;this.game.stopReplay(),this.game.beginReplay(n,{startFromTransition:this._replayLatestTransition})}}},{key:"beginRecording",value:function(e){this._recording=e,e.sceneSaveState=JSON.parse(JSON.stringify(this._initialSave)),e.sceneTransitions=[],e.sceneId=this.sceneId,this.command.beginRecording(this,e)}},{key:"stopRecording",value:function(){var e=this._recording;return delete this._recording,this.command.stopRecording(),e}},{key:"replayParticleSystems",value:function(e){var t=this,n=this.particleSystems;this.particleSystems=[],n.forEach(function(n){var a=n.particles,i=n.emitter,r=n.name,o=n.options;if(a.active&&!a.moribund)if(!e||e.startsWith(r)){var s=i.seed;i.killAll(),i.stop(),a.destroy(),t.particleSystem(r,o,s)}else t.particleSystems.push(n)})}},{key:"_builtinHot",value:function(){if(console.info("Hot-loading ".concat(this.constructor.name)),this.game._stepExceptions>100)return console.info("Resetting after recovering from errors"),void(this.game._stepExceptions=0);if(this._replay&&this._replay.timeSight){var e=this._replay;this.game.stopReplay(),this.game.beginReplay(e,{startFromTransition:this._replayLatestTransition})}else this.replayParticleSystems();this.setupAnimations?this.reloadAnimations():this.removeAnimations(),this.game.recompileMainShaders(),this.playMusic()}},{key:"_hotReloadCurrentLevel",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.replaceWithSelf.apply(this,[!1].concat(t))}},{key:"removeAnimations",value:function(){var e=this;this.physics&&this.physics.world&&this.physics.world.bodies&&this.physics.world.bodies.entries&&this.physics.world.bodies.entries.forEach(function(e){e.gameObject&&e.gameObject.anims&&(e.gameObject.anims.pause(),e.gameObject.anims.stop(),e.gameObject.anims.remove())}),Object.keys(this.anims.anims.entries).forEach(function(t){e.anims.remove(t)})}},{key:"reloadAnimations",value:function(){var e=this;Object.keys(this.anims.anims.entries).forEach(function(t){e.anims.remove(t)}),this.setupAnimations(),this.physics&&this.physics.world&&this.physics.world.bodies&&this.physics.world.bodies.entries&&this.physics.world.bodies.entries.forEach(function(t){if(t.gameObject&&t.gameObject.anims&&t.gameObject.anims.currentAnim){var n=t.gameObject.anims.currentAnim.key;t.gameObject.anims.stop(),t.gameObject.anims.currentAnim=null,e.timer(function(){return t.gameObject.anims.play(n)}).ignoresScenePause=!0}})}},{key:"particleSystem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("".concat(e,".image"));var a=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},Object(_props__WEBPACK_IMPORTED_MODULE_10__.e)("".concat(e,".")),t),i=a.onAdd,r=a.image,o=this.add.particles(r),s=Object(_lib_particles__WEBPACK_IMPORTED_MODULE_12__.a)(a),c=o.createEmitter(s);o.timeScale=this.timeScale,Object(_lib_particles__WEBPACK_IMPORTED_MODULE_12__.c)(c,n||this.randFloat("particles")),i&&i(o,c),(a.preemit||n&&a.preemitOnReload)&&this.preemitEmitter(c),c.ignoresScenePause=s.ignoresScenePause,c.updatesOnceOnPause=s.updatesOnceOnPause,this.particleSystems.push({particles:o,emitter:c,name:e,options:t})}},{key:"tween",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!==e&&Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("".concat(e,".duration"));var a=null===e?Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},n):Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},Object(_props__WEBPACK_IMPORTED_MODULE_10__.e)("".concat(e,".")),n),i=Object(_lib_tweens__WEBPACK_IMPORTED_MODULE_16__.a)(t,a,n);return this.tweens.add(i)}},{key:"_transitionProps",value:function(e){if(!e)return e;var t,n="object"===typeof e?e.name:e,a="object"===typeof e?e:{};return n?(Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("".concat(n,".animation")),t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},Object(_props__WEBPACK_IMPORTED_MODULE_10__.e)("".concat(n,".")),a)):t=Object(_Users_shawn_devel_boids_of_prey_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.b,a),Object(_lib_transitions__WEBPACK_IMPORTED_MODULE_13__.c)(t,a)}},{key:"tweenPercent",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Linear",r=this.tweens.addCounter({from:a,to:100,ease:i,duration:e,onUpdate:function(){var e=r.getValue()/100;t(e)},onComplete:n});return r}},{key:"tweenPercentExclusive",value:function(e,t,n,a){var i=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Linear",o=0;return this[e]&&(o=this[e].getValue(),this[e].stop()),this[e]=this.tweenPercent(t*(1-o/100),n,function(){a&&a.apply(void 0,arguments),delete i[e]},o,r),this[e]}},{key:"tweenInOut",value:function(e,t,n,a,i){var r,o=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Linear",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c;return r=this.tweens.addCounter({from:s,to:100,ease:c,duration:e,onUpdate:function(){var e=r.getValue()/100;n(e,!0)},onComplete:function(){r=o.tweens.addCounter({from:100,to:0,ease:l,duration:t,onUpdate:function(){var e=r.getValue()/100;n(e,!1)},onComplete:i}),a&&a(r)}})}},{key:"tweenInOutExclusive",value:function(e,t,n,a,i,r){var o=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Linear",c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:s,l=0;return this[e]&&(l=this[e].getValue(),this[e].stop()),this[e]=this.tweenInOut(t*(1-l/100),n,a,function(t){if(i){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];i.apply(void 0,[t].concat(a))}o[e]=t},function(){r&&r.apply(void 0,arguments),delete o[e]},l,s,c),this[e]}},{key:"tweenSustain",value:function(e,t,n,a,i,r,o){var s,c=this,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"Linear",h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:u;return s=this.tweens.addCounter({from:l,to:100,ease:u,duration:e,onUpdate:function(){var e=s.getValue()/100;a(e,"in")},onComplete:function(){s=c.tweens.addCounter({from:0,to:100,duration:t,onUpdate:function(){var e=s.getValue()/100;a(1,"sustain",e)},onComplete:function(){s=c.tweens.addCounter({from:100,to:0,ease:h,duration:n,onUpdate:function(){var e=s.getValue()/100;a(e,"out")},onComplete:o}),r&&r(s)}}),i&&i(s)}})}},{key:"tweenSustainExclusive",value:function(e,t,n,a,i,r,o,s){var c=this,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"Linear",u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:l,h=0;return this[e]&&(h=this[e].getValue(),this[e].stop()),this[e]=this.tweenSustain(t*(1-h/100),n,a,i,function(t){if(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];r.apply(void 0,[t].concat(a))}c[e]=t},function(t){if(o){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];o.apply(void 0,[t].concat(a))}c[e]=t},function(){s&&s.apply(void 0,arguments),delete c[e]},h,l,u),this[e]}},{key:"playSound",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.scene.isVisible()&&!this.game._replayPreflight){var i=e;t&&(i+=1+Math.floor(this.randBetween("sound/".concat(i),0,t)));var r=this.sound.add(i);r.timeScale=1,r.requestedVolume=a,r.setVolume(a*this.game.volume*Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.soundVolume")),this.sounds.push(r),r.on("complete",function(){n.sounds=n.sounds.filter(function(e){return e!==r})}),r.play()}}},{key:"changeVolume",value:function(e){var t=this.sounds,n=e*Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.soundVolume");t.forEach(function(e){return e.setVolume(e.requestedVolume*n)})}},{key:"playMusic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.musicName(),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.game.playMusic(e,t)}},{key:"playMusicIfSet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.musicName(),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.playMusic(e,t)}},{key:"musicName",value:function(){return null}},{key:"timer",value:function(e,t){var n={callback:e,time:t};return this.timers.push(n),n}},{key:"updateTimers",value:function(e,t){var n=this.timers,a=this.timers=[],i=this._paused.timers;n.forEach(function(e){!i||e.ignoresScenePause?e.time&&(e.time-=t,e.time>0)?a.push(e):e.callback():a.push(e)})}},{key:"updateTweens",value:function(e,t){var n=this.scene.systems.tweens,a=this._paused.tweens,i=t*n.timeScale;n._active.forEach(function(t){a&&!t.ignoresScenePause||t.update(e,i)&&(n._destroy.push(t),n._toProcess+=1)})}},{key:"recoverPerformance",value:function(){var e=this;if(this.performanceFrames+=1,this.performanceAcceptable||(this.performanceAcceptable=this.game.loop.actualFps>50),!(this.performanceFrames<300))if(this.performanceFrames=0,this.performanceAcceptable)this.performanceAcceptable=!1;else if(this.performanceProps.length){var t=this.performanceProps.shift();Array.isArray(t)||(t=[t]);var n=function(t){t.length&&(e.game.debug&&Object(_lib_manage_gui__WEBPACK_IMPORTED_MODULE_11__.c)(),t.forEach(function(t){var n=Object(_lib_particles__WEBPACK_IMPORTED_MODULE_12__.e)(t);n&&(Object(_props__WEBPACK_IMPORTED_MODULE_10__.e)("".concat(n,"."),!0),e.replayParticleSystems(n))}))},a=!0,i=[],r=function(t,r){i.push(t);var o=_props__WEBPACK_IMPORTED_MODULE_10__.d[t];(e.game.debug?_props__WEBPACK_IMPORTED_MODULE_10__.c[t]=r:_props__WEBPACK_IMPORTED_MODULE_10__.d[t][0]=r,o.length>1&&null!==o[1])&&("function"===typeof o[o.length-1]&&(0,o[o.length-1])(r,e,e.game));a||n([t])};t.forEach(function(t){"string"===typeof t?"disableMainShaders"===t?e.game.disableMainShaders():r(t,!Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)(t)):"function"===typeof t&&t(r)}),a=!1,console.log("Performance seems iffy; applying ".concat(t.join(", "))),n(i)}}},{key:"handlePointerEvent",value:function(e){var t=e.name.charAt(0).toUpperCase()+e.name.slice(1),n="handle".concat(t);if(this[n])this[n](e);else if(Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("config.debug")){var a="debugHandle".concat(t);this[a]&&this[a](e)}}},{key:"cameraFollow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e){var a=Object(_props__WEBPACK_IMPORTED_MODULE_10__.b)("scene.camera.lerp");this.camera.startFollow(e,!0,a,a,t,n)}else this.camera.stopFollow()}},{key:"shockwave",value:function(e,t){this.shockwave_time=this.scene_time,this.shockwave_center=[e/this.game.config.width,t/this.game.config.height]}},{key:"positionToScreenCoordinate",value:function(e,t){var n=this.game.config,a=n.tileWidth,i=n.tileHeight;return[e*a+this.xBorder,t*i+this.yBorder]}},{key:"timeSightMouseDrag",value:function(){var e=this.game.input.activePointer;e.isDown?(this.cameraFollow(),this._timeSightMouseDragX&&(this.camera.scrollX+=this._timeSightMouseDragX-e.position.x),this._timeSightMouseDragY&&(this.camera.scrollY+=this._timeSightMouseDragY-e.position.y),this._timeSightMouseDragX=e.position.x,this._timeSightMouseDragY=e.position.y):(delete this._timeSightMouseDragX,delete this._timeSightMouseDragY)}},{key:"willTransitionTo",value:function(e,t){}},{key:"willTransitionFrom",value:function(e,t){}},{key:"didTransitionTo",value:function(e,t){}},{key:"didTransitionFrom",value:function(e,t){t&&t.delayNewSceneShader&&this._setupShader(),this.playMusic()}},{key:"pauseInputForTransition",value:function(e){this.command.ignoreAll("_transition",!0)}},{key:"unpauseInputForTransition",value:function(e){this.command.ignoreAll("_transition",!1)}},{key:"pausePhysicsForTransition",value:function(e){this.pauseInputForTransition(e),this._paused.physics=!0,this.pauseAllAnimations()}},{key:"unpausePhysicsForTransition",value:function(e){this.unpauseInputForTransition(e),this._paused.physics=!1,this.resumeAllAnimations()}},{key:"pauseEverythingForTransition",value:function(e){this.pausePhysicsForTransition(e),this._paused.timers=!0,this.pauseAllParticleSystems(),this.pauseAllTweens()}},{key:"unpauseEverythingForTransition",value:function(e){this.unpausePhysicsForTransition(e),this._paused.timers=!1,this.resumeAllParticleSystems(),this.resumeAllTweens()}},{key:"pauseAllParticleSystems",value:function(){this._paused.particles=!0,this.particleSystems.length&&Object(_lib_particles__WEBPACK_IMPORTED_MODULE_12__.d)(this.particleSystems[0].particles)}},{key:"pauseAllTweens",value:function(){this._paused.tweens=!0}},{key:"pauseAllAnimations",value:function(){var e=this;this._paused.anims=!0,this._injectedAnimsUpdate||this.physics&&this.physics.world&&this.physics.world.bodies&&this.physics.world.bodies.entries&&this.physics.world.bodies.entries.forEach(function(t){t.gameObject&&t.gameObject.anims&&Object(_lib_anims__WEBPACK_IMPORTED_MODULE_15__.a)(t.gameObject.anims)&&(e._injectedAnimsUpdate=!0)})}},{key:"resumeAllParticleSystems",value:function(){this._paused.particles=!1,this.particleSystems.forEach(function(e){e.particles.resume()})}},{key:"resumeAllTweens",value:function(){this._paused.tweens=!1}},{key:"resumeAllAnimations",value:function(){this._paused.anims=!1}},{key:"cameraColor",value:function(){return 0}},{key:"destroy",value:function(){this.command.detachScene(this)}},{key:"timeScale",get:function(){return this._timeScale},set:function(e){this._timeScale=e,this.particleSystems&&this.particleSystems.forEach(function(t){t.particles.timeScale=e}),this.physics&&(this.physics.world.timeScale=e,this.physics.world.bodies.entries.forEach(function(t){t.gameObject&&t.gameObject.anims&&t.gameObject.anims.setTimeScale(e)}))}}]),SuperScene}(phaser__WEBPACK_IMPORTED_MODULE_8___default.a.Scene)},184:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return h});var a,i=n(6),r=n(52),o=n(3),s=n(7),c=n(277),l=n.n(c);function u(e){var t=[],n=e.split("\n");if(0===n.length)return t;n.push("");var a=[],i=[],r=!0,o=!1;return n.forEach(function(e,n){if(""===e){if(r)return;if(r=!0,a.length&&i.length){var c=JSON.parse(i.join("\n"));c.id||console.warn("Config line ".concat(n,": level is missing an 'id'")),t.push([Object(s.a)(a),c]),a=[],i=[],o=!1}else a.length&&(o=!0)}else r=!1,o?i.push(e):a.push(e)}),t}function h(e,t){var n={},r=[];e.forEach(function(e,t){var o=[];e.split("").forEach(function(e,r){if(!(e in a))throw new Error("Unknown glyph at (".concat(r,", ").concat(t,"): ").concat(e));var s=Object(i.a)({x:r,y:t,glyph:e},a[e]);o.push(s),n[e]||(n[e]=[]),n[e].push(s)}),r.push(o)}),t&&r.forEach(function(e,t){if(t!==r.length-1&&e.length!==r[t+1].length)throw new Error("Inconsistent row width at ".concat(t+1,". Expected ").concat(e.length,", got ").concat(r[t+1].length))});var o=e.join("\n");return{map:r,mapText:o,lookups:n}}!function(e){var t=a;if(a=function(e){return Object.entries(e).forEach(function(t){var n=Object(o.a)(t,2),a=n[0],c=n[1];if(c&&c._inherit){var l=Object(r.a)({},a,!0),u=[Object(i.a)({},c)],h=c._inherit;if(!(h in e))throw new Error("Inherited from nonexistent parent: ".concat(a," \u2192 ").concat(h));for(;e[h];){if(l[h])throw new Error("Loop detected in tileDefinitions _inherit: ".concat([].concat(Object(s.a)(Object.keys(l)),[a]).join(" \u2192 ")));l[h]=!0,u.unshift(e[h]),h=e[h]._inherit}Object.assign.apply(Object,[c].concat(u))}}),e}(e),!t)return null;var n=[],c={};Object.keys(t).forEach(function(e){c[e]=!0}),Object.keys(a).forEach(function(e){var i=t[e],r=a[e];e in t&&delete c[e],l()(i,r)||n.push(e)}),n.push.apply(n,Object(s.a)(Object.keys(c)))}(n(2).h)},2:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"h",function(){return u}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return d});var a=n(6),i=n(48),r=n(41),o={dash:{input:["keyboard.Z","gamepad.A"]},stun:{input:["keyboard.X","gamepad.X"]},up:{input:["keyboard.UP","gamepad.UP"]},down:{input:["keyboard.DOWN","gamepad.DOWN"]},left:{input:["keyboard.LEFT","gamepad.LEFT"]},right:{input:["keyboard.RIGHT","gamepad.RIGHT"]},lstick:{input:["gamepad.LSTICK.RAW"],joystick:!0},rstick:{input:["gamepad.RSTICK.RAW"],joystick:!0},restart:{input:["keyboard.R"],execute:function(e){return e.replaceWithSelf()},debug:!0,unignorable:!0,unreplayable:!0},quit:{input:["keyboard.Q"],execute:"forceQuit",debug:!0,unignorable:!0,unreplayable:!0},recordCycle:{input:["gamepad.R1"],unreplayable:!0,debug:!0,unignorable:!0,execute:function(e,t){var n=t._replay,i=t._recording;n&&n.timeSight?t.stopReplay():n?setTimeout(function(){t.stopReplay(),t.beginReplay(Object(a.a)({},n,{timeSight:!0}))}):i?t.stopRecording():t.beginRecording()}}},s=["shockwave"],c=["blur",["night",{color:["rgb",[205/255,67/255,67/255]],alpha_factor:["float",.31,0,1,.01],tint_factor:["float",.36,0,1,.01],amount:["float",0,null]},"\n      c.r = c.r * (1.0 - night_alpha_factor) + c.r * night_alpha_factor * (1.0 - night_amount);\n      c.g = c.g * (1.0 - night_alpha_factor) + c.g * night_alpha_factor * (1.0 - night_amount);\n      c.b = c.b * (1.0 - night_alpha_factor) + c.b * night_alpha_factor * (1.0 - night_amount);\n\n      c.r = c.r + night_amount * night_tint_factor * night_color.r;\n      c.g = c.g + night_amount * night_tint_factor * night_color.g;\n      c.b = c.b + night_amount * night_tint_factor * night_color.b;\n  "],["flock",{color:["rgb",[1,1,1]],alpha_factor:["float",.11,0,1,.01],tint_factor:["float",.15,0,1,.01],amount:["float",0,null]},"\n      c.r = c.r * (1.0 - flock_alpha_factor) + c.r * flock_alpha_factor * (1.0 - flock_amount);\n      c.g = c.g * (1.0 - flock_alpha_factor) + c.g * flock_alpha_factor * (1.0 - flock_amount);\n      c.b = c.b * (1.0 - flock_alpha_factor) + c.b * flock_alpha_factor * (1.0 - flock_amount);\n\n      c.r = c.r + flock_amount * flock_tint_factor * flock_color.r;\n      c.g = c.g - flock_amount * flock_tint_factor * flock_color.g;\n      c.b = c.b - flock_amount * flock_tint_factor * flock_color.b;\n  "]],l=Object(a.a)({},Object(i.c)(o,s,c),{"command.ignore_all.blockade":[!1,null,function(e){return e.command.ignoreAll("blockade")}],"level.id":["",null],"level.width":[0,null],"level.height":[0,null],"player.x":[.1,null,"level.player.x"],"player.y":[.1,null,"level.player.y"],"player.velocity_x":[.1,null,"level.player.body.velocity.x"],"player.velocity_y":[.1,null,"level.player.body.velocity.y"],"player.acceleration_x":[.1,null,"level.player.body.acceleration.x"],"player.acceleration_y":[.1,null,"level.player.body.acceleration.y"],"player.acceleration":[3e3,0,5e3],"player.mass":[1,0,100,function(e,t){return t.level.player.body.setMass(e)}],"player.drag":[.8,0,1,function(e,t){return t.level.player.setDrag(e)}],"player.friction":[1,0,100,function(e,t){return t.level.player.setFriction(e)}],"player.bounce":[1,0,100,function(e,t){return t.level.player.setBounce(e)}],"player.maxVelocity":[200,0,1e3,function(e,t){return t.level.player.setMaxVelocity(e)}],"player.dash.active":[!1,null,"level.player.dash.active"],"player.dash.cooldown":[!1,null,"level.player.dash.cooldown"],"player.dash.velocity":[500,0,1e3],"player.dash.in_duration":[100,0,1e3],"player.dash.sustain_duration":[200,0,1e3],"player.dash.out_duration":[100,0,1e3],"player.dash.in_ease":["Cubic.easeIn",r.d],"player.dash.out_ease":["Cubic.easeOut",r.d],"player.dash.cooldown_duration":[300,0,1e3],"player.stun.active":[!1,null,"level.player.stun.active"],"player.stun.cooldown":[!1,null,"level.player.stun.cooldown"],"follower.mass":[1,0,100,function(e,t){return t.level.followers.forEach(function(t){return t.body.setMass(e)})}],"follower.drag":[.95,0,1,function(e,t){return t.level.followers.forEach(function(t){return t.setDrag(e)})}],"follower.friction":[1,0,100,function(e,t){return t.level.followers.forEach(function(t){return t.setFriction(e)})}],"follower.bounce":[1,0,100,function(e,t){return t.level.followers.forEach(function(t){return t.setBounce(e)})}],"follower.maxVelocity":[50,0,1e3,function(e,t){return t.level.followers.forEach(function(t){return t.setMaxVelocity(e)})}],"follower.velocityLerp":[.2,0,1],"follower.flockAcceleration":[75,0,1e3],"follower.cohereRadius":[1e3,0,1e3],"follower.cohereFactor":[1,0,100],"follower.spreadRadius":[100,0,1e3],"follower.spreadFactor":[15,0,100],"follower.playerRadius":[300,0,1e3],"follower.playerFactor":[4,0,100],"follower.obstacleRadius":[100,0,1e3],"follower.obstacleFactor":[1e3,0,1e3],"follower.enemyRadius":[200,0,1e3],"follower.enemyFactor":[4,0,100],"follower.killerRadius":[200,0,1e3],"follower.killerFactor":[200,0,1e3],"follower.killerAcceleration":[1e3,0,1e3],"follower.killerVelocity":[20,0,1e3],"enemy.mass":[1,0,100,function(e,t){return t.level.enemies.forEach(function(t){return t.body.setMass(e)})}],"enemy.drag":[.95,0,1,function(e,t){return t.level.enemies.forEach(function(t){return t.setDrag(e)})}],"enemy.friction":[1,0,100,function(e,t){return t.level.enemies.forEach(function(t){return t.setFriction(e)})}],"enemy.bounce":[4,0,100,function(e,t){return t.level.enemies.forEach(function(t){return t.setBounce(e)})}],"enemy.maxVelocity":[100,0,1e3,function(e,t){return t.level.enemies.forEach(function(t){return t.setMaxVelocity(e)})}],"enemy.velocityLerp":[.2,0,1],"enemy.flockAcceleration":[200,0,1e4],"enemy.cohereRadius":[1e3,0,1e3],"enemy.cohereFactor":[20,0,100],"enemy.spreadRadius":[100,0,1e3],"enemy.spreadFactor":[1e3,0,1e3],"enemy.avoidPlayerRadius":[100,0,1e3],"enemy.avoidPlayerFactor":[500,0,100],"enemy.seekPlayerRadius":[1e3,0,1e3],"enemy.seekPlayerFactor":[1,0,100],"enemy.obstacleRadius":[80,0,1e3],"enemy.obstacleFactor":[1e3,0,1e3],"enemy.followerRadius":[1e3,0,1e3],"enemy.followerFactor":[25,0,1e3],"enemy.victimRadius":[300,0,1e3],"enemy.victimFactor":[700,0,1e3],"enemy.victimAcceleration":[1e3,0,1e3],"enemy.victimVelocity":[10,0,1e3],"effects.sceneTransition.transition":[{animation:"pushLeft",ease:"Cubic.easeInOut"}],"effects.zoomOnLoss.distance":[15,0,1e3],"effects.zoomOnLoss.pan_duration":[1e3,0,1e3],"effects.zoomOnLoss.pan_ease":["Cubic.easeInOut",r.d],"effects.zoomOnLoss.zoom_duration":[1e3,0,1e3],"effects.zoomOnLoss.zoom_ease":["Cubic.easeInOut",r.d],"effects.zoomOnLoss.zoom_scale":[1.2,0,10],"effects.zoomOnLoss.time_scale":[.1,0,1],"effects.zoomOnLoss.recover_linger_duration":[100,0,1e4],"effects.zoomOnLoss.recover_zoom_duration":[500,0,1e4],"effects.zoomOnLoss.recover_zoom_ease":["Cubic.easeInOut",r.d],"effects.zoomOnLoss.recover_pan_duration":[500,0,1e4],"effects.zoomOnLoss.recover_pan_ease":["Cubic.easeInOut",r.d],"effects.zoomOnLoss.recover_time_scale_duration":[100,0,1e4],"effects.zoomOnLoss.recover_time_scale_ease":["Cubic.easeInOut",r.d],"effects.followerDie.duration":[100,0,1e4],"effects.dashPuff.particles":[{frequency:50,lifespan:500}],"effects.glow.particles":[{scaleX:.1,scaleY:.1,speedY:-10,lifespan:5e3,frequency:100}],"effects.loseTransition.transition":[{animation:"fadeInOut",oldPause:"everything",delay:1e3}]});l["scene.camera.lerp"][0]=.05,l["scene.camera.deadzoneX"][0]=200,l["scene.camera.deadzoneY"][0]=200;var u={".":null,"@":null,"+":null,$:null,F:{image:"spriteFarmer",group:"farmer",isStatic:!0,isObstacle:!0},"*":{image:"tileWall",group:"wall",isStatic:!0,isObstacle:!0},0:{image:"tileGrassRock",group:"rock",isStatic:!0,isCircle:!0,isObstacle:!0},";":{image:null,group:"transition",isStatic:!0,isObstacle:!0},"^":{_inherit:";"},"[":{image:"tileCoop",group:"coop",isStatic:!0,isObstacle:!0,isCoop:!0,health:4},"]":{_inherit:"["},A:{enemy:"spriteEnemyA"}};Object(i.g)(l,["imageCloud"]);var h=new i.a(l),d=Object(i.f)(l,h);t.b=Object(i.b)(l,h)},41:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var a=n(183),i=n(7),r=n(6),o=n(3),s=["Linear","Quad.easeIn","Quad.easeOut","Quad.easeInOut","Cubic.easeIn","Cubic.easeOut","Cubic.easeInOut","Quart.easeIn","Quart.easeOut","Quart.easeInOut","Quint.easeIn","Quint.easeOut","Quint.easeInOut","Sine.easeIn","Sine.easeOut","Sine.easeInOut","Expo.easeIn","Expo.easeOut","Expo.easeInOut","Circ.easeIn","Circ.easeOut","Circ.easeInOut","Back.easeIn","Back.easeOut","Back.easeInOut","Bounce.easeIn","Bounce.easeOut","Bounce.easeInOut"],c={delay_enabled:[!0],delay:[0,0,1e4],duration:[0,0,1e4],ease:["Linear",s],dx_enabled:[!1],dx:[0,-1e3,1e3],dy_enabled:[!1],dy:[0,-1e3,1e3],alpha_enabled:[!1],alpha:[1,0,1,.01],rotation_enabled:[!1],rotation:[0,-1080,1080,1],scaleX_enabled:[!1],scaleX:[1,0,10,.1],scaleY_enabled:[!1],scaleY:[1,0,10,.1],yoyo:[!1],loop:[0,-1,100,1],ignoresScenePause:[!1],refreshPhysics:[!1],destroyOnComplete:[!1],animated:[!0]};function l(e){Object.entries(e).forEach(function(t){var n=Object(o.a)(t,2),a=n[0],s=n[1];if(a.endsWith(".tween")){var l=a.substr(0,a.length-".tween".length);if(!Array.isArray(s)||1!==s.length||"object"!==typeof s[0])throw new Error("Expected ".concat(a," prop to have the shape [{\u2026}]; did you mean to end it in .tween?"));delete e[a];var u=Object(o.a)(s,1)[0],h=Object(r.a)({},u);if(Object.entries(c).forEach(function(t){var n=Object(o.a)(t,2),a=n[0],r=n[1];if(a in u)e["".concat(l,".").concat(a)]=[u[a]].concat(Object(i.a)(r.slice(1))),delete h[a];else if(a.endsWith("_enabled")){var s=a.substr(0,a.length-"_enabled".length);e["".concat(l,".").concat(a)]=[s in u]}else e["".concat(l,".").concat(a)]=r}),Object.keys(h).length)throw new Error("Got unexpected tween config settings: ".concat(Object.keys(h).join(", ")))}})}function u(e,t,n){var i=Object(a.a)({},t),r=i.massageProps;if(delete i.massageProps,Object.entries(i).forEach(function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1];if(a.endsWith("_enabled")){var s=a.substr(0,a.length-"_enabled".length);r||n[s]||delete i[s],delete i[a]}}),i.targets=e,i.destroyOnComplete){delete i.destroyOnComplete;var s=i.onComplete;i.onComplete=s?function(){s.apply(void 0,arguments),e.destroy()}:function(){e.destroy()}}if("dx"in i){var c=i.dx;i.x=e.x+c}if("dy"in i){var l=i.dy;i.y=e.y+l}var u=i.x,h=i.y;if(i.refreshPhysics){delete i.refreshPhysics;var d=i.onUpdate;i.onUpdate=d?function(){d.apply(void 0,arguments),e.body&&e.refreshBody()}:function(){e.body&&e.refreshBody()}}if(r&&r(i),"dx"in i&&(!("x"in i)||i.x===u)){var p=i.dx;i.x=e.x+p}if(delete i.dx,"dy"in i&&(!("y"in i)||i.y===h)){var m=i.dy;i.y=e.y+m}return delete i.dy,i.rotation&&(i.rotation*=Math.PI/180),"animated"in i&&!i.animated&&(i.duration=0,delete i.loop,i.yoyo&&(delete i.x,delete i.y,delete i.dx,delete i.dy,delete i.rotation,delete i.scaleX,delete i.scaleY,delete i.yoyo,i.alpha=e.alpha)),delete i.animated,i}var h=!1;function d(e){if(!h){var t=e.__proto__,n=t.add;t.add=function(e){var t=n.call(this,e);return t.ignoresScenePause=e.ignoresScenePause,t},h=!0}}},44:function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"c",function(){return C}),n.d(t,"f",function(){return P}),n.d(t,"b",function(){return M}),n.d(t,"g",function(){return x}),n.d(t,"e",function(){return D}),n.d(t,"d",function(){return L});var a,i=n(7),r=n(89),o=n(3),s=n(61),c=n.n(s),l=n(549),u=n(2),h=n(10),d=n(48),p={},m={},f=new Map,_={},v=(u.b,u.c),g=new Proxy({},{get:function(e,t){return v[t]},set:function(e,t,n){return v[t]=n,!0}});function y(){return a||(a=new l.a({autoPlace:!1}),Object.keys(u.d).forEach(function(e){return O(e)}),Object.keys(u.d).forEach(function(e){return j(e,u.d[e],!1,e in d.h||"".concat(e,"_enabled")in d.h)})),a}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function O(e){for(var t=e.split("."),n="",i=a;t.length>1;){var r=t.shift();if(n+=".".concat(r),!p[n])p[n]=i.addFolder(r.split(/[-_ ]/).map(b).join(" ")),f.set(p[n],i),p[n].domElement.querySelector("li.title").addEventListener("click",function(){R()});i=p[n]}return i}var E=0;function w(){E||Object(h.d)("changedProps",_)}function k(e){_[e]=[u.c[e],u.d[e][0]],document.body.classList.add("changed-props")}function S(e){delete _[e],Object.keys(_).length||document.body.classList.remove("changed-props")}function j(e,t,n,a){var o=Object(r.a)(u.d[e]),s=o[0],c=o.slice(1),l=O(e);if(null===g[e])throw new Error("Prop ".concat(e," must not be initialized to null"));if(!e.endsWith("_enabled")){var h,d="".concat(e,"_enabled");if(c.length>=1&&null===c[0])(h=e.match(/color$/i)?l.addColor(g,e).listen():l.add(g,e).listen()).domElement.closest(".cr").classList.add("listen"),h.domElement.querySelectorAll("input, select").forEach(function(e){e.tabIndex=-1,e.onclick=function(e){e.preventDefault()}}),c.length>1&&"function"===typeof c[c.length-1]&&(h.__ldListenCallback=c[c.length-1]);else{var p;c.length>=1&&"function"===typeof c[c.length-1]&&(p=c.pop()),h=e.match(/color$/i)?l.addColor.apply(l,[g,e].concat(Object(i.a)(c))):l.add.apply(l,[g,e].concat(Object(i.a)(c))),p&&(h.__ldChangeCallback=p),"function"===typeof s&&(h.__ldActionCallback=s);var _,v,y=h.domElement.closest(".cr"),b=d in u.d?u.d[d][0]:null;if(d in u.c){v=u.c[d];var E=document.createElement("div");E.classList.add("toggle"),(_=document.createElement("input")).setAttribute("type","checkbox"),v&&(_.setAttribute("checked","checked"),_.checked=!0),E.appendChild(_),y.classList.add("disableable"),h.domElement.parentNode.appendChild(E),h.__ldEnabledSpec=u.d[d],_.onchange=function(t){t.preventDefault();var n=t.target.checked;u.c[d]=n,_.__suppressChange=!0;try{h.__onChange(u.c[e]),h.__onFinishChange(u.c[e])}catch(a){throw _.__suppressChange=!1,a}_.__suppressChange=!1}}if("function"!==typeof s){var j=document.createElement("div");j.classList.add("reset");var C=document.createElement("input");C.setAttribute("type","button"),C.value="\u293a",j.appendChild(C),h.domElement.parentNode.appendChild(j),C.onclick=function(t){t&&(t.preventDefault(),t.stopPropagation()),u.c[e]=s,_&&(_.__suppressChange=!0,u.c[d]=b,b?(_.setAttribute("checked","checked"),_.checked=!0):(_.removeAttribute("checked"),_.checked=!1)),h.updateDisplay();try{h.__onChange(u.c[e]),h.__onFinishChange(u.c[e])}catch(n){throw _&&(_.__suppressChange=!1),n}_&&(_.__suppressChange=!1)}}"function"!==typeof s&&(h.onFinishChange(function(t){try{window.game.topScene().propDidFinishChange(e,t),w()}catch(n){console.error(n)}}),h.onChange(function(t){var n;try{_&&!_.__suppressChange&&(u.c[d]=!0,_.setAttribute("checked","checked"),_.checked=!0);var a=window.game,i=a.topScene();i.propDidChange(e,t);var r=!1;_&&(u.c[d]!==b?(r=!0,k(d)):S(d)),t!==s?(r=!0,k(e)):S(e),w(),r?y.classList.add("changed"):y.classList.remove("changed"),h.__ldChangeCallback&&(n=h.__ldChangeCallback(t,i,a))}catch(o){console.error(o)}return n}),a&&(k(e),y.classList.add("changed")))}var T=h.domElement.closest(".cr");if(T.title=e,T.dataset.prop=e,m[e]=h,h.__ldSpec=t,n)for(var R=l;R;)R.open(),R=f.get(R);return h}var P=e.substr(0,e.length-"_enabled".length);if(!(P in u.d))throw new Error("Prop ".concat(e," does not have corresponding ").concat(P))}function C(){a.updateDisplay(),Object.values(p).forEach(function(e){return e.updateDisplay()})}var T=[];function R(){T.length=0,document.querySelectorAll(".Manage ul:not(.closed) > li.listen:not(.filtered)").forEach(function(e){var t=e.dataset.prop,n=u.d[t];T.push([t,n])})}function P(e){var t=window.game,n=t.topScene(),a=function(e){var a=Object(o.a)(e,2),i=a[0],r=a[1];if(null===r[1])if(r[2]){if("string"===typeof r[2])u.c[i]=c.a.get(t,r[2])||c.a.get(n,r[2]);else if("function"===typeof r[2])try{u.c[i]=r[2](t.topScene(),t)}catch(s){console.error(s)}}else u.c[i]=c.a.get(t,i)||c.a.get(n,i)};e?Object.entries(u.d).forEach(a):T.forEach(a)}function M(e){Object.entries(u.d).forEach(function(t){var n=Object(o.a)(t,2),a=n[0];null===n[1][1]&&(u.c[a]=e[a])})}function x(e,t){e;var n=function(e){var t=e.split(""),n=!1,a=t.map(function(e){return e!==e.toLowerCase()&&(n=!0),".*+?^${}()|[]\\".includes(e)?"\\".concat(e):e}).join(".*");if(e.startsWith("/")){try{return new RegExp(e.substring(1),n?"":"i")}catch(i){console.error(i)}return new RegExp("(?!)")}return new RegExp(a,n?"":"i")}(e),a=document.querySelector(".Manage .dg.main");""===e?(Object.values(p).forEach(function(e){return e.close()}),a.querySelectorAll(".filtered").forEach(function(e){e.classList.remove("filtered")})):(Object.values(p).forEach(function(e){t&&e.open(),e.domElement.classList.add("filtered")}),a.querySelectorAll("li[data-prop]").forEach(function(t){var a=!0;"change"===e.toLowerCase()?t.classList.contains("changed")&&(a=!1):t.dataset.prop.match(n)&&(a=!1);if(a)t.classList.add("filtered");else for(var i=t;i;)i.classList.remove("filtered"),i=i.parentNode.closest(".filtered")})),R()}function D(){return Object.entries(_).map(function(e){var t=Object(o.a)(e,2),n=t[0],a=Object(o.a)(t[1],1)[0];return"propSpecs['".concat(n,"'][0] = ").concat(JSON.stringify(a),";")}).join("\n")}function L(){E+=1,document.querySelectorAll(".Manage .cr.changed .reset input").forEach(function(e){e.onclick()}),E-=1,w()}},48:function(e,t,n){"use strict";n.d(t,"h",function(){return f}),n.d(t,"c",function(){return g}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return E}),n.d(t,"g",function(){return w}),n.d(t,"a",function(){return k}),n.d(t,"f",function(){return S}),n.d(t,"b",function(){return j});var a,i=n(7),r=n(3),o=n(6),s=n(52),c=n(27),l=n.n(c),u=n(101),h=n(41),d=n(60),p=n(10),m=n(88),f=Object(p.b)("changedProps",{}),_=(a={},Object(s.a)(a,l.a.AUTO,"auto"),Object(s.a)(a,l.a.CANVAS,"canvas"),Object(s.a)(a,l.a.WEBGL,"webgl"),a),v=!1;function g(e,t,n){return v||Object.keys(e).forEach(function(t){e[t].debug&&delete e[t]}),Object(o.a)({"engine.time":[.01,null,"loop.time"],"engine.frameTime":[.01,null,"loop.delta"],"engine.actualFps":[.01,null,"loop.actualFps"],"engine.targetFps":[.01,null,"loop.targetFps"],"engine.renderer":[_[l.a.AUTO],null,function(e,t){return _[t.renderer.type]}],"engine.focused":[!1,null,"scene.game.focused"],"engine.throttle":[!1],"engine.stepping":[!1,function(e,t,n){return e?n.loop.sleep():n.loop.wake()}],"engine.step":[function(e,t){return t.prop("engine.stepping")&&t.loop.tick()}],"engine.clearLocalStorage":[function(){Object(p.c)(),Object(p.a)(),window.location=window.location}],"engine.clearGameState":[function(){Object(p.c)("game_"),Object(p.a)(),window.location=window.location}],"engine.disableDebugUI":[function(e,t){return t.disableDebugUI()}],"config.debug":[v,null,function(){return v}],"config.width":[0,null,function(e,t){return t.config.width}],"config.height":[0,null,function(e,t){return t.config.height}],"config.tileWidth":[0,null,function(e,t){return t.config.tileWidth}],"config.tileHeight":[0,null,function(e,t){return t.config.tileHeight}],"config.xBorder":[0,null,function(e,t){return e.xBorder}],"config.yBorder":[0,null,function(e,t){return e.xBorder}],"scene.count":["",null,"scene.scenes.length"],"scene.commandScenes":["",null,function(e){return e.command._scenes.size}],"scene.class":["",null,function(e){return e.constructor.name}],"scene.sceneId":["",null,"sceneId"],"scene.parentSceneId":["",null,"scene.settings.data.parentSceneId"],"scene.key":["",null,"scene.key"],"scene.seed":["",null,"scene.settings.data.seed"],"scene.scene_time":[.01,null,"scene_time"],"scene.music":["",null,"currentMusicName"],"scene.timeScale":[.01,null,"timeScale"],"scene.physicsFps":[.01,null,"physics.world.fps"],"scene.images":[0,null,function(e){return e.add.displayList.list.filter(function(e){return"Image"===e.type}).length}],"scene.sprites":[0,null,function(e){return e.add.displayList.list.filter(function(e){return"Sprite"===e.type}).length}],"scene.particles":[0,null,function(e){return e.add.displayList.list.filter(function(e){return"ParticleEmitterManager"===e.type}).length}],"scene.text":[0,null,function(e){return e.add.displayList.list.filter(function(e){return"Text"===e.type}).length}],"scene.sounds":[0,null,"sounds.length"],"scene.timers":[0,null,"timers.length"],"scene.physicsColliders":[0,null,"physics.world.colliders._active.length"],"scene.musicVolume":[1,0,1,function(e,t,n){n.changeVolume(n.volume)}],"scene.soundVolume":[1,0,1,function(e,t,n){n.changeVolume(n.volume)}],"scene.debugDraw":[!1,function(e,t){e?t.physics.world.createDebugGraphic():t.physics.world.debugGraphic.destroy()}],"scene.replaceWithSelf":[function(e){return e.replaceWithSelf(!1)}],"scene.camera.width":[0,null,"camera.width"],"scene.camera.height":[0,null,"camera.height"],"scene.camera.alpha":[.1,null,"camera.alpha"],"scene.camera.zoom":[.1,null,"camera.zoom"],"scene.camera.rotation":[.1,null,"camera.rotation"],"scene.camera.x":[0,null,"camera.x"],"scene.camera.y":[0,null,"camera.y"],"scene.camera.scrollX":[0,null,"camera.scrollX"],"scene.camera.scrollY":[0,null,"camera.scrollY"],"scene.camera.centerX":[0,null,"camera.centerX"],"scene.camera.centerY":[0,null,"camera.centerY"],"scene.camera.boundsX":[0,null,"camera._bounds.x"],"scene.camera.boundsY":[0,null,"camera._bounds.y"],"scene.camera.boundsWidth":[0,null,"camera._bounds.width"],"scene.camera.boundsHeight":[0,null,"camera._bounds.height"],"scene.camera.useBounds":[!0,null,"camera.useBounds"],"scene.camera.follow":["",null,C(function(e){return e.level},function(e){return e.camera._follow})],"scene.camera.followOffsetX":[0,null,"camera.followOffset.x"],"scene.camera.followOffsetY":[0,null,"camera.followOffset.y"],"scene.camera.lerp":[1,0,1,function(e,t){t.setCameraLerp()}],"scene.camera.deadzoneX":[0,0,1e3,function(e,t){t.setCameraDeadzone()}],"scene.camera.deadzoneY":[0,0,1e3,function(e,t){t.setCameraDeadzone()}],"scene.camera.hasBounds":[!0,function(e,t){t.setCameraBounds()}]},function(e){var t={};return O(e).sort().forEach(function(e){t["command.keyboard.".concat(e)]=[!1,null]}),t}(e),{"command.gamepad.total":[0,null],"command.gamepad.A":[!1,null],"command.gamepad.B":[!1,null],"command.gamepad.X":[!1,null],"command.gamepad.Y":[!1,null],"command.gamepad.L1":[!1,null],"command.gamepad.L2":[!1,null],"command.gamepad.R1":[!1,null],"command.gamepad.R2":[!1,null],"command.gamepad.UP":[!1,null],"command.gamepad.DOWN":[!1,null],"command.gamepad.LEFT":[!1,null],"command.gamepad.RIGHT":[!1,null],"command.gamepad.LSTICKX":[.01,null],"command.gamepad.LSTICKY":[.01,null],"command.gamepad.RSTICKX":[.01,null],"command.gamepad.RSTICKY":[.01,null],"command.ignore_all.any":[!1,null,function(e){return e.command.ignoreAll()}],"command.ignore_all._transition":[!1,null,function(e){return e.command.ignoreAll("_transition")}]},function(e){var t={};return Object.entries(e).forEach(function(e){var n=Object(r.a)(e,2),a=n[0],i=n[1];if(i.joystick?(t["command.".concat(a,".x")]=[.1,null,"command.".concat(a,".held[0]")],t["command.".concat(a,".y")]=[.1,null,"command.".concat(a,".held[1]")]):t["command.".concat(a,".held")]=[!1,null],t["command.".concat(a,".started")]=[!1,null],t["command.".concat(a,".continued")]=[!1,null],t["command.".concat(a,".released")]=[!1,null],t["command.".concat(a,".heldFrames")]=[0,null],t["command.".concat(a,".releasedFrames")]=[0,null],t["command.".concat(a,".heldDuration")]=[0,null],t["command.".concat(a,".releasedDuration")]=[0,null],t["command.".concat(a,".enabled")]=[!0],!i.joystick&&i.execute){var o="function"===typeof i.execute?function(e,t){return i.execute(e,t)}:function(e,t){return e[i.execute](e,t)};t["command.".concat(a,".execute")]=[o]}}),t}(e),Object(m.b)(t,n))}var y=["gamepad.A","gamepad.B","gamepad.X","gamepad.Y","gamepad.L1","gamepad.L2","gamepad.R1","gamepad.R2","gamepad.UP","gamepad.DOWN","gamepad.LEFT","gamepad.RIGHT","gamepad.LSTICK.UP","gamepad.LSTICK.DOWN","gamepad.LSTICK.LEFT","gamepad.LSTICK.RIGHT","gamepad.RSTICK.UP","gamepad.RSTICK.DOWN","gamepad.RSTICK.LEFT","gamepad.RSTICK.RIGHT","gamepad.LSTICK.RAW","gamepad.RSTICK.RAW"].concat(Object(i.a)(Object.keys(l.a.Input.Keyboard.KeyCodes).map(function(e){return"keyboard.".concat(e)}))).reduce(function(e,t){return e[t]=!0,e},{});function b(e,t,n){var a=[];return Object.entries(e).forEach(function(e){var i=Object(r.a)(e,2),o=i[0],s=i[1];s.input&&s.input.forEach(function(e){y[e]?e.startsWith(t)&&a.push(e.substr(t.length)):n||console.error("Unknown input path ".concat(e," for command ").concat(o))})}),a}function O(e,t){return b(e,"keyboard.",t)}function E(e,t){return b(e,"gamepad.",t)}function w(e,t){Object(u.b)(e,t),Object(h.b)(e,t),Object(d.d)(e,t)}function k(e){var t=this;Object.entries(e).forEach(function(e){var n=Object(r.a)(e,2),a=n[0],i=n[1];if(!Array.isArray(i))throw new Error("Invalid spec for prop ".concat(a,"; expected array, got ").concat(i));var o=Object(r.a)(i,1)[0];if("function"===typeof o){var s=o;o=function(){try{var e=window.game,t=e.topScene();t.command.recordPropExecution(a),s(t,e)}catch(n){console.error(n)}}}if(a in f){var c=Object(r.a)(f[a],2),l=c[0],u=c[1];JSON.stringify(o)===JSON.stringify(u)?o=l:delete f[a]}t[a]=o})}function S(e,t){if(v)return function(e){var n={};return Object.entries(t).forEach(function(t){var a=Object(r.a)(t,2),i=a[0],o=a[1];if(i.startsWith(e)){var s=i.substr(e.length);n[s]=o}}),n};var n={};return function(t,a){if(a&&(t?delete n[t]:Object.keys(n).forEach(function(e){return delete n[e]})),!n[t]){var i={};Object.entries(e).forEach(function(e){var n=Object(r.a)(e,2),a=n[0],o=n[1];if(a.startsWith(t)){var s=Object(r.a)(o,1)[0],c=a.substr(t.length);i[c]=s}}),n[t]=i}return n[t]}}function j(e,t){if(v){var n=t;return function(e,t){if(!t){if(!(e in n))throw new Error("Invalid prop named ".concat(e));return n[e]}n=t}}return function(t){return e[t][0]}}function C(e,t){var n,a;return function(){var i=t.apply(void 0,arguments);if(i===n)return a;if(n=i,!i)return a=i;if("object"===typeof i&&i.name)return a=i.name;var r=e.apply(void 0,arguments);if(r&&"object"===typeof r)for(var o in r){if(r[o]===i)return a=o}return a="object"===typeof i&&i.texture&&i.texture.key?i.texture.key:void 0}}},547:function(e,t,n){},550:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=!1;function i(e){if(!a){var t=e.physics.add.__proto__,n=t.sprite;t.sprite=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=n.call.apply(n,[this].concat(t));return i&&i.anims&&(i.anims.setTimeScale(i.scene.timeScale),i.anims.ignoresScenePause=!1),i},a=!0}}},551:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=!1;function i(e){if(a||!e)return a;var t=e.__proto__,n=t.update;return t.update=function(){if(!this.parent.scene._paused.anims||this.ignoresScenePause||this.currentAnim&&this.currentAnim.ignoresScenePause){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.call.apply(n,[this].concat(t))}},a=!0}},552:function(e,t,n){e.exports=n.p+"static/media/maps.02d396d1.txt"},553:function(e,t,n){"use strict";n.r(t),n.d(t,"imageAssets",function(){return se}),n.d(t,"spriteAssets",function(){return ce}),n.d(t,"musicAssets",function(){return le}),n.d(t,"soundAssets",function(){return ue});var a=n(554),i=n.n(a),r=n(555),o=n.n(r),s=n(556),c=n.n(s),l=n(557),u=n.n(l),h=n(558),d=n.n(h),p=n(559),m=n.n(p),f=n(560),_=n.n(f),v=n(561),g=n.n(v),y=n(562),b=n.n(y),O=n(563),E=n.n(O),w=n(564),k=n.n(w),S=n(565),j=n.n(S),C=n(566),T=n.n(C),R=n(567),P=n.n(R),M=n(568),x=n.n(M),D=n(569),L=n.n(D),I=n(570),A=n.n(I),F=n(571),U=n.n(F),B=n(572),W=n.n(B),N=n(573),K=n.n(N),z=n(574),V=n.n(z),G=n(575),q=n.n(G),Y=n(576),X=n.n(Y),H=n(577),J=n.n(H),Q=n(578),$=n.n(Q),Z=n(579),ee=n.n(Z),te=n(580),ne=n.n(te),ae=n(581),ie=n.n(ae),re=n(582),oe=n.n(re),se={imageBackground:i.a,imageCloud:o.a,tileGrass:$.a,tileGrassRock:ee.a,tileWall:oe.a},ce={spriteEnemyA:{file:K.a,frameWidth:26,frameHeight:24},spriteFarmer:V.a,spriteFollower:q.a,spritePlayer:X.a,tileCoop:J.a,tileTreasureClosed:ne.a,tileTreasureOpen:ie.a},le={musicPeace:c.a,musicWar:u.a,musicWin:d.a},ue={soundBorder:m.a,soundCoopBreak:_.a,soundCoopHit:g.a,soundDash:b.a,soundDashFollower:E.a,soundDashKill:k.a,soundHit:j.a,soundHowl:T.a,soundKill:P.a,soundLose:x.a,soundMurder:L.a,soundStun:A.a,soundTreasure:U.a,soundWin:W.a}},554:function(e,t,n){e.exports=n.p+"static/media/background.63b601c6.png"},555:function(e,t,n){e.exports=n.p+"static/media/cloud.e621469f.png"},556:function(e,t,n){e.exports=n.p+"static/media/peace.978f1992.mp3"},557:function(e,t,n){e.exports=n.p+"static/media/war.d9d74241.mp3"},558:function(e,t,n){e.exports=n.p+"static/media/win.65db3627.mp3"},559:function(e,t,n){e.exports=n.p+"static/media/border.1bb3750e.wav"},560:function(e,t,n){e.exports=n.p+"static/media/coopbreak.5cd1729e.wav"},561:function(e,t,n){e.exports=n.p+"static/media/coop.a57beb4f.wav"},562:function(e,t,n){e.exports=n.p+"static/media/dash.dae9c2df.wav"},563:function(e,t,n){e.exports=n.p+"static/media/dashfollower.eb8a51d1.wav"},564:function(e,t,n){e.exports=n.p+"static/media/dashkill.4a6f45be.wav"},565:function(e,t,n){e.exports=n.p+"static/media/hit.a20d0d9f.wav"},566:function(e,t,n){e.exports=n.p+"static/media/howl.74a2cf92.wav"},567:function(e,t,n){e.exports=n.p+"static/media/kill.45919452.wav"},568:function(e,t,n){e.exports=n.p+"static/media/lose.c87553f5.wav"},569:function(e,t,n){e.exports=n.p+"static/media/murder.4836a129.wav"},570:function(e,t,n){e.exports=n.p+"static/media/stun.f8f18331.wav"},571:function(e,t,n){e.exports=n.p+"static/media/treasure.295b29e7.wav"},572:function(e,t,n){e.exports=n.p+"static/media/win.8232f32e.wav"},573:function(e,t,n){e.exports=n.p+"static/media/enemyA.67ff470f.png"},574:function(e,t,n){e.exports=n.p+"static/media/farmer.4200b1fe.png"},575:function(e,t,n){e.exports=n.p+"static/media/follower.b3ca7148.png"},576:function(e,t,n){e.exports=n.p+"static/media/player.8603b7b5.png"},577:function(e,t,n){e.exports=n.p+"static/media/coop.b3e202cd.png"},578:function(e,t,n){e.exports=n.p+"static/media/grass.00597678.png"},579:function(e,t,n){e.exports=n.p+"static/media/grassrock.525b8daa.png"},580:function(e,t,n){e.exports=n.p+"static/media/treasure-closed.3278bd56.png"},581:function(e,t,n){e.exports=n.p+"static/media/treasure-open.ea7f909d.png"},582:function(e,t,n){e.exports=n.p+"static/media/wall.1c9c0e9d.png"},583:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(6);var a=n(3),i=n(7),r={imageAssets:"image",spriteAssets:"spritesheet",musicAssets:"audio",soundAssets:"audio"},o={imageAssets:function(e,t){e.load.textureManager.remove(t)},musicAssets:function(e,t){e.cache.audio.remove(t)}};function s(e,t,n,a){var o,s=e.game,c=r[t],l=function(e,t,n){if("spriteAssets"===e){if("string"===typeof n){var a=t.config,i=a.spriteWidth,r=a.spriteHeight;if(i&&r)return[n,{frameWidth:i,frameHeight:r}];var o=t.config;return[n,{frameWidth:o.tileWidth,frameHeight:o.tileHeight}]}return[n.file,n]}return[n]}(t,s,a);(o=e.load)[c].apply(o,[n].concat(Object(i.a)(l))),s.assets[t][n]=a}function c(e,t){var n=e.game;Object.entries(t).forEach(function(t){var i=Object(a.a)(t,2),o=i[0],c=i[1];r[o]?(n.assets[o]||(n.assets[o]={}),Object.entries(c).forEach(function(t){var n=Object(a.a)(t,2),i=n[0],r=n[1];s(e,o,i,r)})):console.error("No loader for assets of type ".concat(o))})}o.spriteAssets=o.imageAssets,o.soundAssets=o.musicAssets},584:function(e,t,n){e.exports=n.p+"static/media/cover.a5c04f29.png"},585:function(e,t,n){e.exports=n.p+"static/media/twitchLogo.754c9f3b.png"},586:function(e,t,n){e.exports=n.p+"static/media/twitterLogo.5ee804a1.png"},588:function(e,t,n){e.exports=n(1494)},593:function(e,t,n){},594:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){},60:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return d});var a=n(7),i=n(6),r=n(3),o=["nothing","input","physics","everything"],s=["begin","delayEnd","cutover","complete","waitEnd"],c={animation:["fadeInOut",["fadeInOut","crossFade","pushLeft","pushRight","pushUp","pushDown","wipeLeft","wipeRight","wipeUp","wipeDown"]],delay_enabled:[!0],delay:[0,0,1e4],duration:[1e3,0,1e4],ease:["Linear",n(41).d],wait_enabled:[!0],wait:[0,0,1e4],oldPause:["input",o],oldPauseTime:["begin",s.filter(function(e){return"waitEnd"!==e})],newPause:["input",o],newUnpauseTime:["waitEnd",s],delayNewSceneShader:[!1],removeOldSceneShader:[!1],suppressShaderCheck:[!1],animated:[!0]},l={};function u(e){Object.entries(e).forEach(function(t){var n=Object(r.a)(t,2),o=n[0],s=n[1];if(o.endsWith(".transition")){var l=o.substr(0,o.length-".transition".length);if(!Array.isArray(s)||1!==s.length||"object"!==typeof s[0])throw new Error("Expected ".concat(o," prop to have the shape [{\u2026}]; did you mean to end it in .transition?"));delete e[o];var u=Object(r.a)(s,1)[0],h=Object(i.a)({},u);if(Object.entries(c).forEach(function(t){var n=Object(r.a)(t,2),i=n[0],o=n[1];if(i in u)e["".concat(l,".").concat(i)]=[u[i]].concat(Object(a.a)(o.slice(1))),delete h[i];else if(i.endsWith("_enabled")){var s=i.substr(0,i.length-"_enabled".length);e["".concat(l,".").concat(i)]=[s in u]}else e["".concat(l,".").concat(i)]=o}),e["".concat(l,".execute")]=[function(e,t){e.replaceWithSelf(!1,null,l)}],Object.keys(h).length)throw new Error("Got unexpected transition config settings: ".concat(Object.keys(h).join(", ")))}})}function h(e,t){var n=e.massageProps;return delete e.massageProps,Object.entries(e).forEach(function(n){var a=Object(r.a)(n,2),i=a[0],o=a[1];if(i.endsWith("_enabled")){var s=i.substr(0,i.length-"_enabled".length);o||t[s]||delete e[s],delete e[i]}}),n&&n(e),"animated"in e&&!e.animated&&(e.duration=0),delete e.animated,e}function d(e,t,n){return"nothing"===n?function(){}:"input"===n?(e.pauseInputForTransition(t),function(){e.unpauseInputForTransition(t)}):"physics"===n?(e.pausePhysicsForTransition(t),function(){e.unpausePhysicsForTransition(t)}):"everything"===n?(e.pauseEverythingForTransition(t),function(){e.unpauseEverythingForTransition(t)}):(console.error("Invalid transition pause '".concat(n,"'")),function(){})}Object.entries(c).forEach(function(e){var t=Object(r.a)(e,2),n=t[0],a=Object(r.a)(t[1],1)[0];l[n]=a})},88:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h});var a=n(7),i=n(89),r=n(3),o=[["shockwave",{time:["float",0,null],center:["vec2",[.5,.5],null],scale:["float",10,0,500],range:["float",.8,0,10],thickness:["float",.1,0,10],speed:["float",3,0,50],inner:["float",.09,0,1],dropoff:["float",40,0,500]},"\n      float shockwave_dt = (scene_time - shockwave_time) / 3333.0;\n      if (shockwave_time > 0.0 && shockwave_dt < 10.0) {\n        float dist = distance(uv, shockwave_center - camera_scroll);\n        float t = shockwave_dt * shockwave_speed;\n        if (dist <= t + shockwave_thickness && dist >= t - shockwave_thickness && dist >= shockwave_inner) {\n          float diff = dist - t;\n          float scaleDiff = 1.0 - pow(abs(diff * shockwave_scale), shockwave_range);\n          float diffTime = diff * scaleDiff;\n          vec2 diffTexCoord = normalize(uv - (shockwave_center - camera_scroll));\n          uv += (diffTexCoord * diffTime) / (t * dist * shockwave_dropoff);\n        }\n      }\n  "]],s=[["blur",{amount:["float",0,null]},"\n      if (blur_amount > 0.0) {\n        float b = blur_amount / resolution.x;\n        c *= 0.2270270270;\n        c += texture2D(u_texture, vec2(uv.x - 4.0*b, uv.y - 4.0*b)) * 0.0162162162;\n        c += texture2D(u_texture, vec2(uv.x - 3.0*b, uv.y - 3.0*b)) * 0.0540540541;\n        c += texture2D(u_texture, vec2(uv.x - 2.0*b, uv.y - 2.0*b)) * 0.1216216216;\n        c += texture2D(u_texture, vec2(uv.x - 1.0*b, uv.y - 1.0*b)) * 0.1945945946;\n        c += texture2D(u_texture, vec2(uv.x + 1.0*b, uv.y + 1.0*b)) * 0.1945945946;\n        c += texture2D(u_texture, vec2(uv.x + 2.0*b, uv.y + 2.0*b)) * 0.1216216216;\n        c += texture2D(u_texture, vec2(uv.x + 3.0*b, uv.y + 3.0*b)) * 0.0540540541;\n        c += texture2D(u_texture, vec2(uv.x + 4.0*b, uv.y + 4.0*b)) * 0.0162162162;\n      }\n  "],["aberration",{red:["vec2",[0,0],null],green:["vec2",[0,0],null],blue:["vec2",[0,0],null]},"\n    c.r += texture2D(u_texture, vec2(uv.x - aberration_red.x, uv.y - aberration_red.y)).r;\n    c.r -= texture2D(u_texture, vec2(uv.x + aberration_red.x, uv.y + aberration_red.y)).r;\n\n    c.g += texture2D(u_texture, vec2(uv.x - aberration_green.x, uv.y - aberration_green.y)).g;\n    c.g -= texture2D(u_texture, vec2(uv.x + aberration_green.x, uv.y + aberration_green.y)).g;\n\n    c.b += texture2D(u_texture, vec2(uv.x - aberration_blue.x, uv.y - aberration_blue.y)).b;\n    c.b -= texture2D(u_texture, vec2(uv.x + aberration_blue.x, uv.y + aberration_blue.y)).b;\n  "],["tint",{color:["rgba",[1,1,1,1]]},"\n      c.r *= tint_color.r * tint_color.a;\n      c.g *= tint_color.g * tint_color.a;\n      c.b *= tint_color.b * tint_color.a;\n  "]],c={float:[1,"float","setFloat1"],bool:[1,"float","setFloat1"],vec2:[2,"vec2","setFloat2v","x","y"],vec3:[3,"vec3","setFloat3v","x","y","z"],vec4:[4,"vec4","setFloat4v","x","y","z","w"],rgb:[3,"vec3","setFloat3v","r","g","b"],rgba:[4,"vec4","setFloat4v","r","g","b","a"]};function l(e,t,n){var a=Object(r.a)(n,1)[0];a||(a="float");var o=Object(i.a)(c[a]),s=o[0],l=o.slice(3);if("rgb"===a){var u="";return t.match(/color$/i)||(u="_color"),["shader.".concat(e,".").concat(t).concat(u)]}return"rgba"===a?["shader.".concat(e,".").concat(t,"_color"),"shader.".concat(e,".").concat(t,"_alpha")]:1===s?["shader.".concat(e,".").concat(t)]:l.map(function(n,a){return"shader.".concat(e,".").concat(t,"_").concat(n)})}function u(e,t){var n=s,i=o,c="shaderColorFragments",l="shaderCoordFragments";if(!e)return[];if(t){var u=[i,n];n=u[0],i=u[1];var h=[l,c];c=h[0],l=h[1]}if(0!==e.length)for(var d=0;d<e.length;d+=1)"string"===typeof e[d]&&function(){var t=e[d],a=n.find(function(e){var n=Object(r.a)(e,1)[0];return t===n});a?e[d]=a:(console.error("Unable to find builtin ".concat(c," '").concat(t,"'; available are: ").concat(n.map(function(e){return Object(r.a)(e,1)[0]}).join(", "))),i.find(function(e){var n=Object(r.a)(e,1)[0];return t===n})&&console.error("Perhaps you meant the builtin ".concat(l," '").concat(t,"'?")),e.splice(d,1),d-=1)}();else e.push.apply(e,Object(a.a)(n))}function h(e,t){var n={};return u(e,!0),u(t,!1),[].concat(Object(a.a)(e||[]),Object(a.a)(t||[])).forEach(function(e){var t=Object(r.a)(e,2),o=t[0],s=t[1];n["shader.".concat(o,".enabled")]=[!0,function(e,t,n){return n.recompileMainShaders()}],Object.entries(s).forEach(function(e){var t=Object(r.a)(e,2),s=t[0],l=t[1],u=Object(i.a)(l),h=u[0],d=u.slice(1),p="".concat(o,"_").concat(s);if(h||(h="float"),!c[h])throw new Error("Unknown type ".concat(h," for shader ").concat(p));var m=Object(i.a)(c[h]),f=m[0],_=m[2],v=m.slice(3);if(s.match(/color$/i)&&"rgb"!==h&&"rgba"!==h)throw new Error("Shader uniform ".concat(p," ends with /color$/i but it isn't using type rgb or rgba"));if("rgb"===h){if(d.length>2||0===d.length||!Array.isArray(d[0])||3!==d[0].length||2===d.length&&null!==d[1])throw new Error("Expected rgb shader uniform ".concat(p," to have shape ['rgb', [0.95, 0.25, 0.5]] or ['rgb', [0.95, 0.25, 0.5], null]"));var g="";s.match(/color$/i)||(g="_color"),null===d[1]?d.push(function(e){return e[p]?e[p].map(function(e){return 255*e}):void 0}):d.push(function(e,t,n){if(t.shader){var a=n.prop("shader.".concat(o,".").concat(s).concat(g)).map(function(e){return e/255});t.shader[_](p,a)}}),d[0]=d[0].map(function(e){return 255*e}),n["shader.".concat(o,".").concat(s).concat(g)]=d}else if("rgba"===h){if(d.length>2||0===d.length||!Array.isArray(d[0])||4!==d[0].length||2===d.length&&null!==d[1])throw new Error("Expected rgbs shader uniform ".concat(p," to have shape ['rgba', [0.95, 0.25, 0.5, 1]] or ['rgb', [0.95, 0.25, 0.5, 1], null]"));var y=[d[0].filter(function(e,t){return t<3})],b=[d[0][3]];if(null===d[1])y.push(null),b.push(null),y.push(function(e){return e[p]?e[p].filter(function(e,t){return t<3}).map(function(e){return 255*e}):void 0}),b.push(function(e){return e[p]?e[p][3]:void 0});else{b.push(0,1);var O=function(e,t,n){t.shader&&t.shader[_](p,[].concat(Object(a.a)(n.prop("shader.".concat(o,".").concat(s,"_color")).map(function(e){return e/255})),[n.prop("shader.".concat(o,".").concat(s,"_alpha"))]))};y.push(O),b.push(O)}y[0]=y[0].map(function(e){return 255*e}),n["shader.".concat(o,".").concat(s,"_color")]=y,n["shader.".concat(o,".").concat(s,"_alpha")]=b}else"bool"===h?(null===d[1]?d.push(function(e){return e[p]}):"function"!==typeof d[d.length-1]&&d.push(function(e,t){return t.shader&&t.shader[_](p,e?1:0)}),n["shader.".concat(o,".").concat(s)]=d):1===f?(null===d[1]?d.push(function(e){return e[p]}):"function"!==typeof d[d.length-1]&&d.push(function(e,t){return t.shader&&t.shader[_](p,e)}),0===d[0]&&null===d[1]&&(d[0]=.1),n["shader.".concat(o,".").concat(s)]=d):v.forEach(function(e,t){var i=Object(a.a)(d);i[0]=i[0][t],null===i[1]?i.push(function(e){return e[p]?e[p][t]:void 0}):"function"!==typeof i[i.length-1]&&i.push(function(e,t,n){if(t.shader){var a=v.map(function(e){return n.prop("shader.".concat(o,".").concat(s,"_").concat(e))});t.shader[_](p,a)}}),0===i[0]&&null===i[1]&&(i[0]=.1),n["shader.".concat(o,".").concat(s,"_").concat(e)]=i})})}),n}}},[[588,1,2]]]);
//# sourceMappingURL=main.5ea99d52.chunk.js.map
