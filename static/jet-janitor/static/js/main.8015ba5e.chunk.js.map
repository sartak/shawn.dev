{"version":3,"sources":["scaffolding/lib/store.js","scaffolding/lib/tweens.js","scaffolding/lib/particles.js","scaffolding/Spinner.jsx","scaffolding/Controls.jsx","scaffolding/boot-scene.js","scaffolding/lib/analytics.js","scaffolding/CommandManager.js","scaffolding/SuperGame.js","play-scene.js","game.js","scaffolding/Engine.jsx","scaffolding/Manage.jsx","scaffolding/DoubleEnder.jsx","scaffolding/Replay.jsx","scaffolding/Logging.jsx","scaffolding/Development.jsx","scaffolding/Production.jsx","scaffolding/Embed.jsx","scaffolding/App.jsx","scaffolding/index.jsx","scaffolding/SuperScene.js","scaffolding/lib/level-parser.js","props.js","scaffolding/lib/manage-gui.js","scaffolding/lib/props.js","scaffolding/lib/sprites.js","scaffolding/lib/anims.js","scaffolding/lib/camera.js","assets/maps.txt","assets/index.js","assets/audio/afterburner.wav","assets/sprites/booster.png","assets/sprites/bullet0.png","assets/audio/clink.wav","assets/sprites/cloud.png","assets/sprites/cloud2.png","assets/images/effectImageCircle.png","assets/sprites/enemyA.png","assets/audio/explode.wav","assets/audio/finale.mp3","assets/audio/goal.wav","assets/sprites/goal.png","assets/audio/hitPlane1.wav","scaffolding/lib/transitions.js","assets/audio/hitPlane2.wav","assets/audio/hitPlane3.wav","assets/audio/hitTurret.wav","assets/audio/intro.mp3","assets/audio/main.mp3","assets/sprites/mine.png","assets/sprites/planeB.png","assets/sprites/planeC.png","assets/sprites/planeD.png","assets/sprites/planeE.png","assets/sprites/planeF.png","assets/sprites/player.png","assets/audio/score.wav","assets/audio/select.wav","assets/audio/shoot1.wav","assets/audio/shoot2.wav","assets/audio/shoot3.wav","assets/sprites/signature.png","assets/audio/thrust.wav","assets/sprites/title.png","assets/sprites/turret.png","assets/sprites/turretV.png","assets/sprites/vault.png","assets/sprites/vaultB.png","assets/sprites/vaultR.png","assets/audio/victory.mp3","assets/images/wall.png","assets/images/wallBL.png","assets/images/wallBR.png","assets/images/wallBottom.png","assets/images/wallTL.png","assets/images/wallTR.png","assets/images/wallTop.png","assets/images/wallVertical.png","assets/sprites/wreck.png","scaffolding/lib/assets.js","assets/cover.png","scaffolding/twitchLogo.png","scaffolding/twitterLogo.png","scaffolding/lib/shaders.js"],"names":["__webpack_require__","d","__webpack_exports__","freezeStorage","saveField","removeAllFields","loadField","_package_json__WEBPACK_IMPORTED_MODULE_0__","prefix","concat","project","frozen","name","value","payload","JSON","stringify","localStorage","setItem","e","console","error","subprefix","arguments","length","undefined","Object","keys","forEach","key","startsWith","removeItem","defaultValue","getItem","parse","tweenEases","defaultTweenProps","delay_enabled","delay","duration","ease","dx_enabled","dx","dy_enabled","dy","alpha_enabled","alpha","rotation_enabled","rotation","scaleX_enabled","scaleX","scaleY_enabled","scaleY","yoyo","loop","ignoresScenePause","refreshPhysics","destroyOnComplete","animated","expandTweenProps","props","entries","_ref","_ref2","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","spec","endsWith","substr","Array","isArray","Error","config","seen","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_ref3","_ref4","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","slice","targetKey","join","massageTweenProps","target","_ref5","options","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__","massageProps","_ref6","_ref7","main","targets","onComplete","apply","destroy","x","y","originalX","originalY","onUpdate","body","refreshBody","Math","PI","injected","injectTweenManagerAdd","tweens","proto","__proto__","origAdd","add","tween","call","this","ParticleProps","particlePropFromProp","prop","find","p","injectedEmitterOpSeededRandom","injectEmitterOpSeededRandom","emitter","seed","rnd","Phaser","RandomDataGenerator","randomStaticValueEmit","particle","randomIndex","floor","frac","propertyValue","randomRangedValueEmit","realInRange","start","end","data","min","injectedParticleEmitterManagerPreUpdate","injectParticleEmitterManagerPreUpdate","manager","preUpdate","time","origDelta","isPaused","scene","_paused","particles","delta","timeScale","emitters","list","i","updatesOnceOnPause","active","defaultParticleProps","image","frequency","lifespan","accelerationX","accelerationY","blendMode","maxParticles","particleBringToTop","quantity","radial","rotate","speed","speedX","speedY","tint","tint_enabled","visible","preemit","preemitOnReload","expandParticleProps","particleImages","push","propKey","replace","massageParticleProps","onAdd","tintColor_enabled","tintColor","Spinner","react_default","a","createElement","id","className","React","Component","Controls","_this$props","onMouseMove","volume","onVolumeChange","disableFullscreen","isFullscreen","enterFullscreen","exitFullscreen","style","fontSize","transform","type","max","onChange","onMouseUp","blur","onClick","BootScene","classCallCheck","possibleConstructorReturn","getPrototypeOf","_this","get","prototype","game","preloadScenes","sceneClass","preload","_this2","initializeShaders","setTimeout","preloadComplete","SuperScene","debug","process","analytics","event","event_category","window","gtag","GamepadButtons","LEFT","RIGHT","UP","DOWN","A","Y","X","B","L1","L2","R1","R2","ButtonName","CommandManager","_spec","_scenes","Map","keyboard","gamepad","pointerEvents","executedProps","_ignoreAlls","held","heldFrames","started","continued","heldDuration","releasedFrames","released","releasedDuration","cooldown","coolingDown","coolingDownTime","state","inputs","ignoreAlls","objectSpread","_this3","toConsumableArray","values","suppressRepeatFrames","set","commands","tickCount","delete","code","_this4","input","on","tag","document","activeElement","tagName","toLowerCase","altKey","ctrlKey","metaKey","shiftKey","preventDefault","_this5","commandKeys","attachKey","button","buttonName","index","slicedToArray","method","canvas","querySelector","pointer","contains","scenes","seenGamepad","rawGamepad","total","LSTICKX","LSTICKY","RSTICKX","RSTICKY","gamepads","filter","pad","rawPad","leftStick","rightStick","abs","onlyUnignorable","_this6","frame","_repeat","unignorable","path","keyHeld","_","_pointer","_executedProps","_this7","_ref8","unreplayable","_this8","_ref9","_ref10","prevFrame","isSame","pop","newValue","ignoreAny","ignore","dt","_this9","ignoreAll","_ref11","_ref12","command","execute","scenePath","gamePath","handlePointerEvent","replay","propName","fn","replayFrameIndex","replayTicks","postflightCutoff","endedReplay","replayRepeatRun","replayFrame","heldCommands","mergeUnignorable","getManager","timeSightFrozen","processCommands","injectReplayFrame","addFrameToList","recording","originalPreflightCutoff","preflightCutoff","replayOptions","startTick","onEnd","onStop","next","prev","updateSpecFromReload","updateInputsFromReload","addCommands","removeCommands","updateCommands","_ref13","_ref14","prevJson","_ref15","_ref16","String","nextJson","_ref17","_ref18","changes","info","isKeyboard","_this10","nextKeys","prevKeys","keyLister","gamepadKeys","addKeys","removeKeys","managerList","detachKey","baseConfig","AUTO","parent","width","height","tileWidth","tileHeight","SuperGame","subConfig","Date","now","sceneId","random","scale","onFullScreenChange","_replayPreflight","_onDisableDebugUI","_sceneInitCallbacks","assets","_initializeShaderStructures","shaderCoordFragments","shaderColorFragments","shaderPipelines","focused","_sceneConstructors","assertThisInitialized","Proxy","topScene","events","readRawInput","disableDebug","_replay","timeSight","updatePropsFromStep","begin","getTime","pipelineName","bothFragmentTypes","_shaderPipelines","coordFragments","colorFragments","pipelines","_shaderSource","allFragments","out","setupPipeline","fragmentNames","coords","colors","fragmentName","coordFragment","colorFragment","map","newVolume","currentMusicPlayer","setVolume","changeVolume","isFocused","spinner","getElementById","parentNode","removeChild","_preloadedAssets","tryLaunch","callback","_activatedGame","_launchedGame","_launchingGame","warn","renderer","CANVAS","alert","cover","remove","launch","willTransitionFrom","timer","didTransitionFrom","manage","log","stopRecording","stopReplay","engine","disableDebugUI","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","number","zeros","n","o","date","zero","zeroPrefix","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","m","s","toFixed","_recording","timestamp","initData","settings","sceneName","constructor","renderDateTime","commandState","freezeCommandState","beginRecording","snapshot","onRecordBegin","onRecordStop","startFromTransition","sceneTransitions","transitionToSceneToBeginReplay","then","newScene","beginReplay","onReplayBegin","oldScene","sceneKey","sceneSaveState","save","returnPromise","Promise","resolve","reject","onSceneInit","thawCommandState","_sceneTransition","transition","onReplayEnd","skipDownward","onReplayStop","forceRestart","currentMusicName","music","sound","play","readRawGamepad","cutoffTimeSightEnter","cutoffTimeSightChanged","cutoffTimeSightLeave","shaderName","WEBGL","getPipeline","hasPipeline","source","generateShaderSource","shader","shaderInstantiation","removePipeline","addPipeline","setFloat2","initializeShader","nextCoord","nextColor","nextPipelines","recompileShaders","_bothFragmentTypes$ma","fragments","_bothFragmentTypes$ma2","shaderCoordSource","shaderColorSource","uniformNames","uniformDeclarations","_ref19","uniforms","_ref20","_ref21","uniformName","uniformType","shaderTypeMeta","userShaderBody","generateShaderSourceInternal","regex","RegExp","match","oldSource","newSource","shaderInstance","_shaderInitialize","_shaderUpdate","camera","setPipeline","clearRenderToTexture","recompileShader","disableShader","fragShader","Class","Extends","Renderer","WebGL","Pipelines","TextureTintPipeline","initialize","cb","Game","Angle2Theta","angle","whiteColor","r","g","b","redColor","PlayScene","physics","arcade","fps","performanceProps","mapsAreRectangular","createdAt","level","createLevel","levelIndex","depth","shallowerPlanes","shallowerWrecks","hud","createHud","setupPhysics","changePlanes","levelIds","planeGroup","groups","plane","wreckGroup","wreck","bullets","group","planes","objects","planeIndex","currentPlane","turrets","turret","loopedSounds","wrecks","textureKey","damage","perfect","create","winning","inert","addWinLabel","anims","texture","goal","mapLookups","$","_this$positionToScree","positionToScreenCoordinate","goalY","goalDepth","cooldowns","createBooster","afterburnerCooldown","currentGun","thrust","roll","planeCollideDebounce","gunCooldowns","theta","setDepth","c","randBetween","tile","tiles","rotateRight","rotateLeft","setupWreck","t","amount","parseInt","glyph","pregoal","_this2$positionToScre","_this2$positionToScre2","particleSystem","shallower","planeHealth","healthMultiplier","score","pow","trunc","newScore","shownScore","oldScore","scoreChangeAt","change","prevChange","scoreSteady","scoreUp","scoreDown","_this$calculateScore","calculateScore","_this$calculateScore2","text","hideContract","nextClinkTime","playSound","winningLabel","useForcedX","speak","_this$calculateScore3","scoreText","color","setScrollFactor","force","noAfterburner","_this$boosterPosition","boosterPosition","_this$boosterPosition2","shockwave","booster","isAfterburner","noShooting","shoot","blastoff","afterburn","_cameraFollow","shooter","bullet","Theta2Angle","vx","cos","vy","sin","setVelocity","object","variance","isTurret","changingPlanes","setTint","tweenSustain","factor","setScale","createBullet","recoil","setVelocityX","velocity","setVelocityY","dTheta","availablePlanes","selectingPlane","cameraFollow","setPosition","pos","cameraPosition","_pos","scrollX","scrollY","originX","originY","_pos2","lerp","sprite","wall","mine","collider","overlapPlaneWall","overlapPlanePlane","overlapPlaneTurret","overlap","overlapPlaneBullet","overlapPlaneGoal","overlapPlanePregoal","overlapTurretBullet","overlapBulletGoal","overlapPlaneMine","overlapMineBullet","overlapPlaneWreck","overlapMineWreck","overlapWreckGoal","damagePlane","explode","stop","suction","tutorialText","children","child","skipLevel","chuck","hideTutorialText","signature","setCrop","tweenPercent","finishedChuck","isCurrent","damageTween","Display","Color","Interpolate","ColorWithColor","ObjectToColor","noDamage","trauma","destroyPlane","plane1","plane2","atan2","frames","frameRate","repeat","stickInput","up","right","left","lstick","_command$lstick$held","rstick","_command$rstick$held","dIdx","selectedPlane","_command$lstick$held2","_command$rstick$held2","debouncePlaneSelect","complete","autopilot","zoom","updateScore","selectInput","nan","isNaN","processInput","winner","thrusters","tradeoff","ailerons","gravity","setAccelerationX","setAccelerationY","relativity","drag","jelly","shmup","sqrt","acceleration","done","sort","completeLevel","increased","ids","count","replaceWithSelf","goToLevel","afterburnerThrust","squish","squishFactor","setMaxVelocity","setAngularVelocity","ay","ax","bonus","heldTime","distFactor","desiredBonus","currentBonus","_this$boosterPosition3","_this$boosterPosition4","phantomDt","isLast","background","levelWidth","levelHeight","_game$config","gameWidth","gameHeight","backgroundWidth","backgroundHeight","xFactor","yFactor","background2","_game$config2","animation","delayNewSceneShader","removeOldSceneShader","spriteWidth","spriteHeight","Engine","didVisibilityChange","hidden","visibilityState","setState","setFocused","didBlur","didFocus","activating","activated","controls","createRef","loadedGame","addEventListener","classList","activateGame","removeEventListener","moveTimeout","clearTimeout","clearMove","instant","current","overflow","resizeHandler","_this6$game$config","innerWidth","innerHeight","fullscreenHandler","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","skipBrowserFullscreen","moveHandler","_this$state","classes","ref","container","gameContainerRef","backgroundImage","Spinner_Spinner","Controls_Controls","v","Manage","search","gui","initializeManage","append","domElement","updateSearch","tempNode","serializeChangedProps","appendChild","select","execCommand","placeholder","isStarted","copyChangedProps","resetChangedProps","semiFloor","semiCeil","ceil","DoubleEnder","didResize","forceUpdate","dragging","lastDrag","trackRef","cursorRef","refreshDimensions","updateReplayCursor","updateCursor","replayTimestamp","trackWidth","getBoundingClientRect","cursorPercent","display","_this$props2","value1","value2","onChange1","onChange2","onMouseEnter","onMouseLeave","onBeginChange","onEndChange","notches","highlight1","highlight2","cursor","trackDimensions","trackLeft","percent1","percent2","highlightPercent1","highlightPercent2","title","isSelected","isHighlighted","percent","opposite","oppositeValue","zIndex","onMouseDown","clientX","_dragListener","rawValue","_upListener","ReplayEditFields","Replay","replays","preflight","reduce","cutoff","activeRecording","activeReplay","tweaking","editing","beginAutoReplay","installGameCallbacks","prevProps","clearOtherEditing","_replayLatestTransition","setEditing","_trashNextRecording","_this3$state","skipFocus","saveReplays","newReplays","setActiveReplay","newReplay","newState","updateReplay","metadata","field","_objectSpread2","defineProperty","updateTweak","sawError","toString","latestTransition","firstTick","lastTick","onSubmit","finishEdit","autoFocus","editName","tweakReplay","copyReplay","deleteReplay","DoubleEnder_DoubleEnder","_inCutoffs","_changingCutoffs","editPreflightCutoff","postflight","editPostflightCutoff","editCutoffs","discardTweaks","saveTweaks","visibility","revertTweak","renderTweaking","Fragment","toggleRepeat","toggleTimeSight","trashRecording","renderEditReplay","Logging","line","recent","old","logId","Number","timers","original","component","_len","args","_key","context","extractContext","prependLog","onDisableDebugUI","removeLogging","msg","stack","originalMsg","scrollTop","newLog","Development","Engine_Engine","Logging_Logging","developmentDisplay","links","href","label","rel","Manage_Manage","Replay_Replay","Production","productionDisplay","displayName","authorName","authorURL","authorTwitter","src","twitterLogo","alt","authorTwitch","twitchLogo","eventDescription","eventNamePre","eventNameBold","eventNamePost","eventURL","themeDescription","themePre","themeItalic","themePost","repoURL","Embed","App","embed","Embed_Embed","Development_Development","Production_Production","hot","ReactDOM","render","scaffolding_App","subconfig","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","sounds","performanceFrames","performanceAcceptable","scene_time","shockwave_time","_trauma","_traumaShake","_this$game$config","halfWidth","halfHeight","attachScene","_timeSightTarget","cameras","setBackgroundColor","cameraColor","injectCameraShake","saveStateFieldName","initialSaveState","version","saveStateVersion","migrateSaveState","_initialSave","world","injectAddSpriteTimeScale","createDebugGraphic","fixedUpdate","systems","off","update","originalStep","step","originalDelta","_stepExceptions","isTopScene","updateTweens","timeSightMouseDrag","updateTimers","recoverPerformance","pauseOnBlur","particleSystems","sys","parentSceneId","mapWidth","mapHeight","xBorder","yBorder","sceneDidInit","originalSave","vendRNG","randFloat","attachInputs","startedAt","setupAnimations","_setupShader","setRenderToTexture","load","mapsFile","preloadAssets","_ldMapFiles","parseMaps","cache","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","mapFiles","findIndex","_spec2","lines","_parseLevelLines","parseLevelLines","mapText","lookups","heightInTiles","widthInTiles","underground","createUnderground","template","isPowerOfTwo","_this$game$config2","w","h","tileSprite","tilePositionX","tilePositionY","script","executeScript","_execute","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0__","fontFamily","fontWeight","textSize","textColor","stroke","setStroke","strokeColor","strokeWidth","yc","xc","shift","isInteger","xCoord","yCoord","_inTime$outTime$durat","inTime","outTime","extraDelay","ox","oy","tweenProp","noOut","follow","dx1","dy1","xl","yl","xo","yo","lx","ly","loadLevel","addMap","groupName","rectangle","isCircle","radius","setCircle","tileDefinitions","isStatic","staticGroup","combine","row","_this5$positionToScre","_this5$positionToScre2","combiner","createTileForGroup","preferCombineVertical","dxPrimary","dyPrimary","dxSecondary","dySecondary","chains","combineWith","dxNext","dyNext","primary","secondary","chainTiles","first","last","_this5$positionToScre3","_this5$positionToScre4","x0","y0","_this5$positionToScre5","_this5$positionToScre6","x1","y1","boundsWidth","boundsHeight","setBounds","removeBounds","setDeadzone","setLerp","setCameraBounds","setCameraDeadzone","setCameraLerp","scripts","_firstUpdated","firstUpdate","renderUpdate","positionBackground","positionBackground2","positionUnderground","xDivisor","yDivisor","initializeListeners","shaderInitialize","shaderFragments","_spec3","listenerInitial","initialValue","setter","propNames","propNamesForUniform","_initialValue","shaderUpdate","_ref12$","listenerIfNull","eval","reseed","originalTransition","_isTransitioning","_replayOptions","_transitionProps","willTransitionTo","replaceWithSceneNamed","oldPauseTime","newUnpauseTime","newUnpauseFn","swapScenes","_hasCutover","cutoverPrimary","overrideSwapScenes","onCutover","applyPause","oldPause","playMusicIfSet","bringToTop","_hasCompleted","completeTransition","didTransitionTo","onWaitEnd","wait","animate","tweenInOut","firstHalf","followupTween","suppressShaderCheck","_this$game$config3","newCamera","oldCamera","_this$game$config4","firstCall","setSize","newPause","oldAnimate","onDelayEnd","maxLifespan","staticValueEmit","j","emitParticle","ignoreTimeScale","pauseEverythingForSleep","unpauseEverythingForSleep","ignoresTimeScale","_this11","performance","sleep","setVisible","hasPreflight","timeSightFrameCallback","resetDelta","calculateTimeSight","_timeSightTargetEnded","_timeSightTargetDone","isPostflight","wake","_this12","_timeSightFrames","setActive","launchTimeSight","targetScene","objectDt","frameTime","frameDt","isPreflight","timeSightTargetStep","beginTimeSightAlphaAnimation","_this13","renderTimeSightFrameInto","manageableProps","_timeSightAlpha","_timeSightFrame","loopAlpha","_this14","activeFrames","overrideProps","_timeSightAlphaTween","addEvent","_timeSightMouseInput","topOnly","setInteractive","activeObject","matchedFrame","_timeSightRemoveFocusTimer","_active","_add","_skipFreezeTimeSight","displayList","node","pause","_this15","f","tick","replayParticleSystems","changedKey","_this16","moribund","killAll","reloadAnimations","removeAnimations","playMusic","_len2","_key2","_this17","bodies","gameObject","_this18","currentAnim","reloadSeed","propsWithPrefix","emitterProps","createEmitter","preemitEmitter","params","baseTransitionProps","massageTransitionProps","startPoint","addCounter","from","to","getValue","fieldName","_this19","inDuration","outDuration","onMidpoint","_this20","inEase","outEase","_this21","_len3","_key3","sustainDuration","onSustain","onOut","_this22","_this23","_len4","_key4","_len5","_key5","_traumaStart","newTrauma","shake","_this$game$config5","intensity","Vector2","baseName","variants","_this24","isVisible","requestedVolume","multiplier","musicName","_this25","newTimers","origDt","_destroy","_toProcess","_this26","actualFps","applyPropChanges","refreshUI","particleProp","batch","changedProps","setProp","propSpecs","changeCallback","disableShaders","camelName","charAt","toUpperCase","debugMethod","offsetX","offsetY","startFollow","stopFollow","shockwave_center","activePointer","isDown","_timeSightMouseDragX","position","_timeSightMouseDragY","pauseInputForTransition","pauseAllAnimations","pauseInputForSleep","unpauseInputForTransition","resumeAllAnimations","unpauseInputForSleep","pausePhysicsForTransition","pauseAllParticleSystems","pauseAllTweens","unpausePhysicsForTransition","resumeAllParticleSystems","resumeAllTweens","pausePhysicsForSleep","unpausePhysicsForSleep","_this27","_injectedAnimsUpdate","injectAnimationUpdate","resume","detachScene","_timeScale","setTimeScale","Scene","tileSpecs","content","maps","allLines","split","mapLines","configLines","prevLineIsEmpty","parsingConfig","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__","isRectangular","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","newDefinitions","previousTileSpecs","specs","_inherit","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","nodes","unshift","assign","flattenInheritance","leftoverKeys","oldValue","deepEqual","updateTileDefinitions","afterburner","down","joystick","restart","quit","recordCycle","builtinPropSpecs","physics.goalDrag","physics.drag","physics.timeThrust","physics.zoomThrust","level.goalDepth","plane.boostRollThrustFactor","plane.rollThrustFactor","plane.thrustRollFactor","plane.droll","plane.gravity","plane.thrustGravity","plane.power","plane.maxVelocity","plane.squish","plane.wallBounce","plane.planeBounce","plane.bounceTime","plane.health","plane.healthMultiplier","plane.bulletDamage","plane.collideDamage","currentPlane.x","currentPlane.y","currentPlane.vx","currentPlane.vy","currentPlane.thrust","currentPlane.roll","currentPlane.angle","currentPlane.theta","currentPlane.accelerationX","currentPlane.accelerationY","currentPlane.afterburnerThrust","currentPlane.destroy","booster.x","booster.y","booster.angle","booster.bounce","booster.distance","booster.bonus","booster.shockOffset","afterburner.currentCooldown","afterburner.cooldown","afterburner.thrustBoost","afterburner.thrustMax","gun.current","gun.next","nextGun","gun.prev","prevGun","gun.0.speed","gun.0.cooldown","gun.0.recoil","goal.wait","goal.planeIndex","goal.planeDebounce","goal.depthExponent","goal.depthMultiplier","effects.hint.attract.tween","effects.winTransition.transition","effects.chuck.titleIn.tween","effects.chuck.signatureIn.tween","effects.chuck.nameIn.tween","effects.explode.particles","effects.pregoal.particles",".","<",">","^","[","]","-","|","l","1","2","3","4","5","6","7","8","9","&","@","C","D","E","F","T","V","L","R","M","preprocessPropSpecs","ManageableProps","makePropsWithPrefix","PropLoader","folders","controllers","parentOfFolder","proxiedManageableProps","manageablePropsProxy","dat","autoPlace","addNestedFolder","addController","savedChangedProps","upcase","word","sections","folderKey","folder","section","addFolder","regenerateListenPropsCache","batchSaveChangedProps","saveChangedProps","setChangedProp","setUnchangedProp","open","saved","_propSpecs$key","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_1__","originalValue","controller","enabledKey","addColor","listen","closest","querySelectorAll","tabIndex","onclick","__ldListenCallback","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","__ldChangeCallback","__ldActionCallback","enabledCheckbox","enabledValue","crNode","originalEnabled","setAttribute","checked","__ldEnabledSpec","onchange","__suppressChange","__onChange","__onFinishChange","err","resetButton","stopPropagation","removeAttribute","updateDisplay","onFinishChange","propDidFinishChange","ret","propDidChange","isChanged","dataset","__ldSpec","listenPropsCache","skipCache","updateProp","newProps","query","queryRegex","characters","hasUppercase","subsequence","character","includes","substring","queryize","close","isFiltered","rendererName","_rendererName","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__","engine.time","engine.frameTime","engine.actualFps","engine.targetFps","engine.renderer","engine.focused","engine.throttle","engine.stepping","engine.step","engine.clearLocalStorage","location","engine.clearGameState","engine.disableDebugUI","config.debug","config.width","config.height","config.tileWidth","config.tileHeight","config.xBorder","config.yBorder","scene.count","scene.commandScenes","size","scene.class","scene.sceneId","scene.parentSceneId","scene.key","scene.seed","scene.scene_time","scene.music","scene.timeScale","scene.shaderName","scene.physicsFps","scene.images","scene.sprites","scene.particles","scene.text","scene.sounds","scene.timers","scene.physicsColliders","scene.musicVolume","scene.soundVolume","scene.debugDraw","debugGraphic","scene.replaceWithSelf","scene.camera.width","scene.camera.height","scene.camera.alpha","scene.camera.zoom","scene.camera.rotation","scene.camera.x","scene.camera.y","scene.camera.scrollX","scene.camera.scrollY","scene.camera.centerX","scene.camera.centerY","scene.camera.boundsX","scene.camera.boundsY","scene.camera.boundsWidth","scene.camera.boundsHeight","scene.camera.useBounds","scene.camera.follow","objectIdentifier","_follow","scene.camera.followOffsetX","scene.camera.followOffsetY","scene.camera.lerp","scene.camera.deadzoneX","scene.camera.deadzoneY","scene.camera.hasBounds","scene.trauma.amount","scene.trauma.shakeAmount","scene.trauma.decay","scene.trauma.exponent","scene.trauma.dx","scene.trauma.dy","scene.trauma.dt","scene.trauma.speed","scene.trauma.easeIn","scene.trauma.legacy","scene.trauma.mild","scene.trauma.minor","scene.trauma.major","scene.trauma.max","scene.trauma.enabled","commandKeyProps","command.gamepad.total","command.gamepad.A","command.gamepad.B","command.gamepad.X","command.gamepad.Y","command.gamepad.L1","command.gamepad.L2","command.gamepad.R1","command.gamepad.R2","command.gamepad.UP","command.gamepad.DOWN","command.gamepad.LEFT","command.gamepad.RIGHT","command.gamepad.LSTICKX","command.gamepad.LSTICKY","command.gamepad.RSTICKX","command.gamepad.RSTICKY","command.ignore_all.any","command.ignore_all._transition","command.ignore_all._sleep","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","commandProps","shaderProps","knownInputs","Input","Keyboard","KeyCodes","keysWithPrefix","skipWarning","inputPath","expandTransitionProps","recordPropExecution","_savedChangedProps$ke","clearCache","getContainer","getObject","cacheInput","cacheOutput","origUpdate","simplex_noise__WEBPACK_IMPORTED_MODULE_0__","simplex_noise__WEBPACK_IMPORTED_MODULE_0___default","_props__WEBPACK_IMPORTED_MODULE_1__","noiseX","SimplexNoise","noiseY","noiseT","origPreRender","preRender","easeIn","noise2D","matrix","translate","module","exports","imageAssets","spriteAssets","musicAssets","soundAssets","_audio_afterburner_wav__WEBPACK_IMPORTED_MODULE_0__","_audio_afterburner_wav__WEBPACK_IMPORTED_MODULE_0___default","_sprites_booster_png__WEBPACK_IMPORTED_MODULE_1__","_sprites_booster_png__WEBPACK_IMPORTED_MODULE_1___default","_sprites_bullet0_png__WEBPACK_IMPORTED_MODULE_2__","_sprites_bullet0_png__WEBPACK_IMPORTED_MODULE_2___default","_audio_clink_wav__WEBPACK_IMPORTED_MODULE_3__","_audio_clink_wav__WEBPACK_IMPORTED_MODULE_3___default","_sprites_cloud_png__WEBPACK_IMPORTED_MODULE_4__","_sprites_cloud_png__WEBPACK_IMPORTED_MODULE_4___default","_sprites_cloud2_png__WEBPACK_IMPORTED_MODULE_5__","_sprites_cloud2_png__WEBPACK_IMPORTED_MODULE_5___default","_images_effectImageCircle_png__WEBPACK_IMPORTED_MODULE_6__","_images_effectImageCircle_png__WEBPACK_IMPORTED_MODULE_6___default","_sprites_enemyA_png__WEBPACK_IMPORTED_MODULE_7__","_sprites_enemyA_png__WEBPACK_IMPORTED_MODULE_7___default","_audio_explode_wav__WEBPACK_IMPORTED_MODULE_8__","_audio_explode_wav__WEBPACK_IMPORTED_MODULE_8___default","_audio_finale_mp3__WEBPACK_IMPORTED_MODULE_9__","_audio_finale_mp3__WEBPACK_IMPORTED_MODULE_9___default","_audio_goal_wav__WEBPACK_IMPORTED_MODULE_10__","_audio_goal_wav__WEBPACK_IMPORTED_MODULE_10___default","_sprites_goal_png__WEBPACK_IMPORTED_MODULE_11__","_sprites_goal_png__WEBPACK_IMPORTED_MODULE_11___default","_audio_hitPlane1_wav__WEBPACK_IMPORTED_MODULE_12__","_audio_hitPlane1_wav__WEBPACK_IMPORTED_MODULE_12___default","_audio_hitPlane2_wav__WEBPACK_IMPORTED_MODULE_13__","_audio_hitPlane2_wav__WEBPACK_IMPORTED_MODULE_13___default","_audio_hitPlane3_wav__WEBPACK_IMPORTED_MODULE_14__","_audio_hitPlane3_wav__WEBPACK_IMPORTED_MODULE_14___default","_audio_hitTurret_wav__WEBPACK_IMPORTED_MODULE_15__","_audio_hitTurret_wav__WEBPACK_IMPORTED_MODULE_15___default","_audio_intro_mp3__WEBPACK_IMPORTED_MODULE_16__","_audio_intro_mp3__WEBPACK_IMPORTED_MODULE_16___default","_audio_main_mp3__WEBPACK_IMPORTED_MODULE_17__","_audio_main_mp3__WEBPACK_IMPORTED_MODULE_17___default","_sprites_mine_png__WEBPACK_IMPORTED_MODULE_18__","_sprites_mine_png__WEBPACK_IMPORTED_MODULE_18___default","_sprites_planeB_png__WEBPACK_IMPORTED_MODULE_19__","_sprites_planeB_png__WEBPACK_IMPORTED_MODULE_19___default","_sprites_planeC_png__WEBPACK_IMPORTED_MODULE_20__","_sprites_planeC_png__WEBPACK_IMPORTED_MODULE_20___default","_sprites_planeD_png__WEBPACK_IMPORTED_MODULE_21__","_sprites_planeD_png__WEBPACK_IMPORTED_MODULE_21___default","_sprites_planeE_png__WEBPACK_IMPORTED_MODULE_22__","_sprites_planeE_png__WEBPACK_IMPORTED_MODULE_22___default","_sprites_planeF_png__WEBPACK_IMPORTED_MODULE_23__","_sprites_planeF_png__WEBPACK_IMPORTED_MODULE_23___default","_sprites_player_png__WEBPACK_IMPORTED_MODULE_24__","_sprites_player_png__WEBPACK_IMPORTED_MODULE_24___default","_audio_score_wav__WEBPACK_IMPORTED_MODULE_25__","_audio_score_wav__WEBPACK_IMPORTED_MODULE_25___default","_audio_select_wav__WEBPACK_IMPORTED_MODULE_26__","_audio_select_wav__WEBPACK_IMPORTED_MODULE_26___default","_audio_shoot1_wav__WEBPACK_IMPORTED_MODULE_27__","_audio_shoot1_wav__WEBPACK_IMPORTED_MODULE_27___default","_audio_shoot2_wav__WEBPACK_IMPORTED_MODULE_28__","_audio_shoot2_wav__WEBPACK_IMPORTED_MODULE_28___default","_audio_shoot3_wav__WEBPACK_IMPORTED_MODULE_29__","_audio_shoot3_wav__WEBPACK_IMPORTED_MODULE_29___default","_sprites_signature_png__WEBPACK_IMPORTED_MODULE_30__","_sprites_signature_png__WEBPACK_IMPORTED_MODULE_30___default","_audio_thrust_wav__WEBPACK_IMPORTED_MODULE_31__","_audio_thrust_wav__WEBPACK_IMPORTED_MODULE_31___default","_sprites_title_png__WEBPACK_IMPORTED_MODULE_32__","_sprites_title_png__WEBPACK_IMPORTED_MODULE_32___default","_sprites_turret_png__WEBPACK_IMPORTED_MODULE_33__","_sprites_turret_png__WEBPACK_IMPORTED_MODULE_33___default","_sprites_turretV_png__WEBPACK_IMPORTED_MODULE_34__","_sprites_turretV_png__WEBPACK_IMPORTED_MODULE_34___default","_sprites_vault_png__WEBPACK_IMPORTED_MODULE_35__","_sprites_vault_png__WEBPACK_IMPORTED_MODULE_35___default","_sprites_vaultB_png__WEBPACK_IMPORTED_MODULE_36__","_sprites_vaultB_png__WEBPACK_IMPORTED_MODULE_36___default","_sprites_vaultR_png__WEBPACK_IMPORTED_MODULE_37__","_sprites_vaultR_png__WEBPACK_IMPORTED_MODULE_37___default","_audio_victory_mp3__WEBPACK_IMPORTED_MODULE_38__","_audio_victory_mp3__WEBPACK_IMPORTED_MODULE_38___default","_images_wall_png__WEBPACK_IMPORTED_MODULE_39__","_images_wall_png__WEBPACK_IMPORTED_MODULE_39___default","_images_wallBL_png__WEBPACK_IMPORTED_MODULE_40__","_images_wallBL_png__WEBPACK_IMPORTED_MODULE_40___default","_images_wallBR_png__WEBPACK_IMPORTED_MODULE_41__","_images_wallBR_png__WEBPACK_IMPORTED_MODULE_41___default","_images_wallBottom_png__WEBPACK_IMPORTED_MODULE_42__","_images_wallBottom_png__WEBPACK_IMPORTED_MODULE_42___default","_images_wallTL_png__WEBPACK_IMPORTED_MODULE_43__","_images_wallTL_png__WEBPACK_IMPORTED_MODULE_43___default","_images_wallTR_png__WEBPACK_IMPORTED_MODULE_44__","_images_wallTR_png__WEBPACK_IMPORTED_MODULE_44___default","_images_wallTop_png__WEBPACK_IMPORTED_MODULE_45__","_images_wallTop_png__WEBPACK_IMPORTED_MODULE_45___default","_images_wallVertical_png__WEBPACK_IMPORTED_MODULE_46__","_images_wallVertical_png__WEBPACK_IMPORTED_MODULE_46___default","_sprites_wreck_png__WEBPACK_IMPORTED_MODULE_47__","_sprites_wreck_png__WEBPACK_IMPORTED_MODULE_47___default","cloud","cloud2","effectImageCircle","goalTile","vault","wallBL","wallBR","wallBottom","wallTL","wallTR","wallTop","wallVertical","bullet0","enemyA","planeB","planeC","planeD","planeE","planeF","player","turretV","vaultB","vaultR","finale","intro","victory","clink","hitPlane1","hitPlane2","hitPlane3","hitTurret","shoot1","shoot2","shoot3","transitionPauses","transitionPauseTimes","defaultTransitionProps","wait_enabled","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","pauseEverythingForTransition","unpauseEverythingForTransition","loaderMethod","unloadFunction","textureManager","audio","loadAsset","_scene$load","frameWidth","frameHeight","file","massageInput","_Users_shawn_devel_jet_janitor_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","builtinCoordFragments","center","range","thickness","inner","dropoff","builtinColorFragments","red","green","blue","float","bool","vec2","vec3","vec4","rgb","rgba","_shaderTypeMeta$type","subvariables","sub","injectBuiltinFragment","isCoord","primaryName","secondaryName","replacement","splice","_shaderTypeMeta$type2","colorConfig","alphaConfig"],"mappings":"yFAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAA,IAAAC,EAAAP,EAAA,IAGMQ,EAAM,GAAAC,OAAMC,IAAN,KAAAD,OAAmC,OAAnC,KAERE,GAAS,EACN,SAASR,IACdQ,GAAS,EAGJ,SAASP,EAAUQ,EAAMC,GAC9B,GAAIF,EACF,OAAO,EAGT,IACE,IAAMG,EAAUC,KAAKC,UAAUH,GAC/BI,aAAaC,QAAb,GAAAT,OAAwBD,GAAxBC,OAAiCG,GAAQE,GACzC,MAAOK,GAGP,OADAC,QAAQC,MAAMF,IACP,EAGT,OAAO,EAmBF,SAASd,IAAgC,IAAhBiB,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAC1C,GAAIZ,EACF,OAAO,EAGT,IACEe,OAAOC,KAAKV,cAAcW,QAAQ,SAACC,GAC7BA,EAAIC,WAAJ,GAAArB,OAAkBD,GAAlBC,OAA2Ba,KAC7BL,aAAac,WAAWF,KAG5B,MAAOV,GAGP,OADAC,QAAQC,MAAMF,IACP,EAGT,OAAO,EAGF,SAASb,EAAUM,EAAMoB,GAC9B,IAAInB,EAAQmB,EAEZ,IACE,IAAMlB,EAAUG,aAAagB,QAAb,GAAAxB,OAAwBD,GAAxBC,OAAiCG,IACjC,OAAZE,QAAgCW,IAAZX,IACtBD,EAAQE,KAAKmB,MAAMpB,IAErB,MAAOK,GAEPC,QAAQC,MAAMF,GAOhB,MAJqB,oBAAVN,IACTA,EAAQA,KAGHA,uMChFIsB,EAAa,CACxB,SACA,cACA,eACA,iBACA,eACA,gBACA,kBACA,eACA,gBACA,kBACA,eACA,gBACA,kBACA,cACA,eACA,iBACA,cACA,eACA,iBACA,cACA,eACA,iBACA,cACA,eACA,iBACA,gBACA,iBACA,oBAGIC,EAAoB,CACxBC,cAAe,EAAC,GAChBC,MAAO,CAAC,EAAG,EAAG,KACdC,SAAU,CAAC,EAAG,EAAG,KACjBC,KAAM,CAAC,SAAUL,GAEjBM,WAAY,EAAC,GACbC,GAAI,CAAC,GAAI,IAAM,KACfC,WAAY,EAAC,GACbC,GAAI,CAAC,GAAI,IAAM,KACfC,cAAe,EAAC,GAChBC,MAAO,CAAC,EAAK,EAAG,EAAG,KACnBC,iBAAkB,EAAC,GACnBC,SAAU,CAAC,GAAI,KAAM,KAAM,GAC3BC,eAAgB,EAAC,GACjBC,OAAQ,CAAC,EAAK,EAAG,GAAI,IACrBC,eAAgB,EAAC,GACjBC,OAAQ,CAAC,EAAK,EAAG,GAAI,IAErBC,KAAM,EAAC,GACPC,KAAM,CAAC,GAAI,EAAG,IAAK,GACnBC,kBAAmB,EAAC,GACpBC,eAAgB,EAAC,GACjBC,kBAAmB,EAAC,GACpBC,SAAU,EAAC,IAGN,SAASC,EAAiBC,GAC/BlC,OAAOmC,QAAQD,GAAOhC,QAAQ,SAAAkC,GAAkB,IAAAC,EAAArC,OAAAsC,EAAA,EAAAtC,CAAAoC,EAAA,GAAhBlD,EAAgBmD,EAAA,GAAVE,EAAUF,EAAA,GAC9C,GAAKnD,EAAKsD,SAAS,UAAnB,CAIA,IAAM1D,EAASI,EAAKuD,OAAO,EAAGvD,EAAKY,OAAS,SAASA,QAErD,IAAK4C,MAAMC,QAAQJ,IAAyB,IAAhBA,EAAKzC,QAAmC,kBAAZyC,EAAK,GAC3D,MAAM,IAAIK,MAAJ,YAAA7D,OAAsBG,EAAtB,iFAGDgD,EAAMhD,GAXiC,IAavC2D,EAbuC7C,OAAAsC,EAAA,EAAAtC,CAa7BuC,EAb6B,MAexCO,EAAI9C,OAAA+C,EAAA,EAAA/C,CAAA,GAAO6C,GAcjB,GAZA7C,OAAOmC,QAAQzB,GAAmBR,QAAQ,SAAA8C,GAAkB,IAAAC,EAAAjD,OAAAsC,EAAA,EAAAtC,CAAAgD,EAAA,GAAhB7C,EAAgB8C,EAAA,GAAX9D,EAAW8D,EAAA,GAC1D,GAAI9C,KAAO0C,EACTX,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcoB,IAAnB,CAA6B0C,EAAO1C,IAApCpB,OAAAiB,OAAAkD,EAAA,EAAAlD,CAA6Cb,EAAMgE,MAAM,YAClDL,EAAK3C,QACP,GAAIA,EAAIqC,SAAS,YAAa,CACnC,IAAMY,EAAYjD,EAAIsC,OAAO,EAAGtC,EAAIL,OAAS,WAAWA,QACxDoC,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcoB,IAAS,CAACiD,KAAaP,QAE1CX,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcoB,IAAShB,IAI5Ba,OAAOC,KAAK6C,GAAMhD,OACpB,MAAM,IAAI8C,MAAJ,yCAAA7D,OAAmDiB,OAAOC,KAAK6C,GAAMO,KAAK,WAKvE,SAASC,EAAkBC,EAA3BC,EAA+CC,GAAS,IAAjBvB,EAAiBlC,OAAA0D,EAAA,EAAA1D,CAAA,GAAAwD,GAC9DG,EAAgBzB,EAAhByB,aAgBP,UAdOzB,EAAMyB,aAEb3D,OAAOmC,QAAQD,GAAOhC,QAAQ,SAAA0D,GAAmB,IAAAC,EAAA7D,OAAAsC,EAAA,EAAAtC,CAAA4D,EAAA,GAAjBzD,EAAiB0D,EAAA,GAAZhB,EAAYgB,EAAA,GAC/C,GAAI1D,EAAIqC,SAAS,YAAa,CAC5B,IAAMsB,EAAO3D,EAAIsC,OAAO,EAAGtC,EAAIL,OAAS,WAAWA,QAC9C+C,GAAWY,EAAQK,WACf5B,EAAM4B,UAER5B,EAAM/B,MAIjB+B,EAAM6B,QAAUR,EAEZrB,EAAMH,kBAAmB,QACpBG,EAAMH,kBADc,IAEpBiC,EAAc9B,EAAd8B,WAEL9B,EAAM8B,WADJA,EACiB,WACjBA,EAAUC,WAAV,EAAApE,WACA0D,EAAOW,WAGU,WACjBX,EAAOW,WAKb,GAAI,OAAQhC,EAAO,KACVlB,EAAMkB,EAANlB,GACPkB,EAAMiC,EAAIZ,EAAOY,EAAInD,EAGvB,GAAI,OAAQkB,EAAO,KACVhB,EAAMgB,EAANhB,GACPgB,EAAMkC,EAAIb,EAAOa,EAAIlD,EAGvB,IAAMmD,EAAYnC,EAAMiC,EAClBG,EAAYpC,EAAMkC,EAExB,GAAIlC,EAAMJ,eAAgB,QACjBI,EAAMJ,eADW,IAEjByC,EAAYrC,EAAZqC,SAELrC,EAAMqC,SADJA,EACe,WACfA,EAAQN,WAAR,EAAApE,WACI0D,EAAOiB,MACTjB,EAAOkB,eAIM,WACXlB,EAAOiB,MACTjB,EAAOkB,eAUf,GAJId,GACFA,EAAazB,GAGX,OAAQA,MAAY,MAAOA,IAAUA,EAAMiC,IAAME,GAAY,KACxDrD,EAAMkB,EAANlB,GACPkB,EAAMiC,EAAIZ,EAAOY,EAAInD,EAIvB,UAFOkB,EAAMlB,GAET,OAAQkB,MAAY,MAAOA,IAAUA,EAAMkC,IAAME,GAAY,KACxDpD,EAAMgB,EAANhB,GACPgB,EAAMkC,EAAIb,EAAOa,EAAIlD,EA+BvB,cA7BOgB,EAAMhB,GAGTgB,EAAMZ,WACRY,EAAMZ,UAAYoD,KAAKC,GAAK,KAG1B,aAAczC,IAAUA,EAAMF,WAChCE,EAAMrB,SAAW,SACVqB,EAAMN,KAGTM,EAAMP,cACDO,EAAMiC,SACNjC,EAAMkC,SACNlC,EAAMlB,UACNkB,EAAMhB,UACNgB,EAAMZ,gBACNY,EAAMV,cACNU,EAAMR,cAENQ,EAAMP,KAGbO,EAAMd,MAAQmC,EAAOnC,eAGlBc,EAAMF,SAENE,EAGT,IAAI0C,GAAW,EACR,SAASC,EAAsBC,GACpC,IAAIF,EAAJ,CAKA,IAAMG,EAAQD,EAAOE,UAEfC,EAAUF,EAAMG,IACtBH,EAAMG,IAAM,SAASrC,GACnB,IAAMsC,EAAQF,EAAQG,KAAKC,KAAMxC,GAEjC,OADAsC,EAAMtD,kBAAoBgB,EAAOhB,kBAC1BsD,GAGTP,GAAW,yPC1NPU,EAAgB,GACf,SAASC,EAAqBC,GACnC,OAAOF,EAAcG,KAAK,SAACC,GAAD,OAAOF,EAAKpF,WAAWsF,KAGnD,IAAIC,GAAgC,EAC7B,SAASC,EAA4BC,EAASC,GAInD,GAHAD,EAAQC,KAAOA,EACfD,EAAQE,IAAM,IAAIC,IAAOtB,KAAKuB,oBAAoB,CAACH,KAE/CH,EAAJ,CAKA,IAAMZ,EAAQc,EAAQjF,MAAMoE,UAE5BD,EAAMmB,sBAAwB,SAASC,EAAUhG,GAC/C,IAAMiG,EAAc1B,KAAK2B,MAAMF,EAASN,QAAQE,IAAIO,OAASjB,KAAKkB,cAAczG,QAChF,OAAOuF,KAAKkB,cAAcH,IAG5BrB,EAAMyB,sBAAwB,SAASL,EAAUhG,GAC/C,IAAMhB,EAAQgH,EAASN,QAAQE,IAAIU,YAAYpB,KAAKqB,MAAOrB,KAAKsB,KAMhE,OAJIR,GAAYA,EAASS,KAAKzG,KAC5BgG,EAASS,KAAKzG,GAAK0G,IAAM1H,GAGpBA,GAITwG,GAAgC,GAGlC,IAAImB,GAA0C,EACvC,SAASC,EAAsCC,GACpD,OAAIF,IAA4CE,EACvCF,GAIKE,EAAQhC,UAEhBiC,UAAY,SAASC,EAAMC,GAS/B,IAT0C,IAEpCC,EADU/B,KAATgC,MACgBC,QAAQC,UAGzBC,EAAQL,EAAY9B,KAAKoC,UAEzBC,EAAWrC,KAAKqC,SAASC,KAEtBC,EAAI,EAAGA,EAAIF,EAAS5H,OAAQ8H,GAAK,EAAG,CAC3C,IAAM/B,EAAU6B,EAASE,KACnBR,GAAY/B,KAAKxD,mBAAqBgE,EAAQhE,mBAAqBgE,EAAQgC,qBAAuBhC,EAAQiC,SAC9GjC,EAAQoB,UAAUC,EAAMM,GACpBJ,IACFvB,EAAQgC,oBAAqB,MAMrCf,GAA0C,GAK5C,IAAMiB,EAAuB,CAC3BC,MAAO,KAsCPC,UAAW,CAAC,EAAG,EAAG,KAClBC,SAAU,CAAC,IAAM,EAAG,KAEpBC,cAAe,CAAC,GAAI,IAAM,KAC1BC,cAAe,CAAC,GAAI,IAAM,KAC1BhH,MAAO,CAAC,EAAG,EAAG,GACdiH,UAAW,CAAC,SAAU,CAAC,SAAU,MAAO,WAAY,SAAU,UAC9DzH,MAAO,CAAC,EAAG,EAAG,KACd0H,aAAc,CAAC,EAAG,EAAG,KACrBC,mBAAoB,EAAC,GACrBC,SAAU,CAAC,EAAG,EAAG,IAAK,GACtBC,OAAQ,EAAC,GACTC,OAAQ,CAAC,GAAI,KAAM,KAAM,GACzBlH,OAAQ,CAAC,EAAG,EAAG,KACfE,OAAQ,CAAC,EAAG,EAAG,KACfiH,MAAO,CAAC,EAAG,EAAG,KACdC,OAAQ,CAAC,GAAI,IAAM,KACnBC,OAAQ,CAAC,GAAI,IAAM,KACnBC,KAAM,CAAC,UACPC,aAAc,EAAC,GACf5E,EAAG,CAAC,GAAI,IAAM,KACdC,EAAG,CAAC,GAAI,IAAM,KACdvC,kBAAmB,EAAC,GACpBgG,mBAAoB,EAAC,GACrBmB,QAAS,EAAC,GAEVC,QAAS,EAAC,GACVC,gBAAiB,EAAC,IAGb,SAASC,EAAoBjH,GAAuD,IAAhDkH,EAAgDvJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA/B,CAAC,6BAC3DG,OAAOmC,QAAQD,GAAOhC,QAAQ,SAAAkC,GAAkB,IAAAC,EAAArC,OAAAsC,EAAA,EAAAtC,CAAAoC,EAAA,GAAhBlD,EAAgBmD,EAAA,GAAVE,EAAUF,EAAA,GAC9C,GAAa,oBAATnD,EAAJ,CAIA,GAAIA,EAAKsD,SAAS,aAChB,MAAM,IAAII,MAAJ,SAAA7D,OAAmBG,EAAnB,mBAAAH,OAAyCG,EAAzC,OAGR,GAAKA,EAAKsD,SAAS,cAAnB,CAIA,IAAM1D,EAASI,EAAKuD,OAAO,EAAGvD,EAAKY,OAAS,aAAaA,QAEzD,IAAK4C,MAAMC,QAAQJ,IAAyB,IAAhBA,EAAKzC,QAAmC,kBAAZyC,EAAK,GAC3D,MAAM,IAAIK,MAAJ,YAAA7D,OAAsBG,EAAtB,qFAGDgD,EAAMhD,GAEboG,EAAc+D,KAAKvK,GArB2B,IAuBvC+D,EAvBuC7C,OAAAsC,EAAA,EAAAtC,CAuB7BuC,EAvB6B,MAyBxCO,EAAI9C,OAAA+C,EAAA,EAAA/C,CAAA,GAAO6C,GAmBjB,GAjBA7C,OAAOmC,QAAQ4F,GAAsB7H,QAAQ,SAAA8C,GAAkB,IAAAC,EAAAjD,OAAAsC,EAAA,EAAAtC,CAAAgD,EAAA,GAAhB7C,EAAgB8C,EAAA,GAAX9D,EAAW8D,EAAA,GACvDqG,EAAUnJ,EAAIoJ,QAAQ,QAAS,aAC/B9F,EAAkB,UAARtD,EAAkB,CAACiJ,EAAe,GAAIA,GAAkBjK,EAExE,GAAIgB,KAAO0C,EACTX,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcuK,IAAnB,CAAiCzG,EAAO1C,IAAxCpB,OAAAiB,OAAAkD,EAAA,EAAAlD,CAAiDyD,EAAQN,MAAM,YACxDL,EAAK3C,QACP,GAAY,oBAARA,GAA6B0C,EAAOoG,QAC7C/G,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcuK,IAAnB,EAAiC,GAAjCvK,OAAAiB,OAAAkD,EAAA,EAAAlD,CAA0CyD,EAAQN,MAAM,UACnD,GAAIhD,EAAIqC,SAAS,YAAa,CACnC,IAAMY,EAAYjD,EAAIsC,OAAO,EAAGtC,EAAIL,OAAS,WAAWA,QACxDoC,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcuK,IAAa,CAAClG,KAAaP,QAE9CX,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcuK,IAAa7F,IAIhCzD,OAAOC,KAAK6C,GAAMhD,OACpB,MAAM,IAAI8C,MAAJ,4CAAA7D,OAAsDiB,OAAOC,KAAK6C,GAAMO,KAAK,YAK1E,SAASmG,EAAThG,GAA0C,IAARtB,EAAQlC,OAAA0D,EAAA,EAAA1D,CAAA,GAAAwD,GAChDG,EAAgBzB,EAAhByB,aA+BP,cA7BOzB,EAAMuH,aACNvH,EAAMyB,oBACNzB,EAAM8F,MAET9F,EAAMwH,oBACRxH,EAAM4G,KAAO5G,EAAMyH,iBACZzH,EAAMwH,mBAIM,IAAjBxH,EAAM0G,QAAiC,IAAjB1G,EAAM2G,eACvB3G,EAAM0G,cACN1G,EAAM2G,QACY,IAAhB3G,EAAMyG,cACRzG,EAAMyG,MAIXzG,EAAMwG,QACoB,kBAAjBxG,EAAMwG,SACfxG,EAAMwG,QAAUhE,KAAKC,GAAK,KAK1BhB,GACFA,EAAazB,GAGRA,mjCC9NY0H,kMAEjB,OACEC,EAAAC,EAAAC,cAAA,OAAKC,GAAG,eACNH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,qBAhB2BG,IAAMC,YCCtBC,2LACV,IAAAC,EAGHhF,KAAKnD,MADPoI,EAFKD,EAELC,YAAaC,EAFRF,EAEQE,OAAQC,EAFhBH,EAEgBG,eAAgBC,EAFhCJ,EAEgCI,kBAAmBC,EAFnDL,EAEmDK,aAAcC,EAFjEN,EAEiEM,gBAAiBC,EAFlFP,EAEkFO,eAEzF,OACEf,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WAAWK,YAAaA,GACrCT,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,QAAMc,MAAO,CAACC,SAAU,GAAIC,UAAS,SAAAhM,OAAW,GAAMwL,EAAS,EAA1B,OAArC,UADF,WAGEV,EAAAC,EAAAC,cAAA,SACEiB,KAAK,QACLnE,IAAI,IACJoE,IAAI,MACJ9L,MAAgB,IAAToL,EACPW,SAAU,SAACzL,GAAD,OAAO+K,EAAe/K,EAAE8D,OAAOpE,MAAQ,MACjDgM,UAAW,SAAC1L,GAAD,OAAOA,EAAE8D,OAAO6H,WAG9BX,GACCZ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACZS,EACCb,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SAASoB,QAAST,GAC/Bf,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAAf,WAGFJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SAASoB,QAASV,GAC/Bd,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eAAf,oBA3BsBC,IAAMC,qECDvBmB,cAKnB,SAAAA,IAAe,OAAAtL,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAiG,GAAAtL,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAAsL,GAAAlG,KAAAC,KACP,CAAClF,IAAKmL,EAAUnL,iFAJtB,MAAO,+DAOC,IAAAuL,EAAArG,KACRrF,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAAsL,EAAAM,WAAA,UAAAvG,MAAAD,KAAAC,MAEAA,KAAKwG,KAAKC,cAAc5L,QAAQ,SAAC6L,GAC3BA,EAAW7M,OAASwM,EAAKxM,OAIf,IAAI6M,GACZC,QAAQ5G,KAAKsG,sCAId,IAAAO,EAAA5G,KACPrF,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAAsL,EAAAM,WAAA,SAAAvG,MAAAD,KAAAC,MAEAA,KAAKwG,KAAKK,oBAEVC,WAAW,WACTF,EAAKJ,KAAKO,iEAKZ,OAAO,YAjC4BC,oCCAjCC,GAAiCC,EAqBxB,SAASC,IACtB,IAAIF,EAIJ,OAxBK,SAAsBG,EAAOtN,GAClC,IAAMsE,EAAU,CAACiJ,eAAgB1N,UAEnBe,IAAVZ,IACFsE,EAAQtE,MAAQA,GAGlB,IACEwN,OAAOC,KACL,QACAH,EACAhJ,GAEF,MAAOhE,GAEPC,QAAQC,MAAMF,KASGwE,WAAZ,EAAApE,wCCxBHgN,EAAiB,CACrBC,KAAM,UACNC,MAAO,WACPC,GAAI,SACJC,KAAM,YACNC,EAAG,YACHC,EAAG,SACHC,EAAG,UACHC,EAAG,WACHC,GAAI,aACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,kBAGAC,EAAa,GAEEC,aACnB,SAAAA,EAAYpL,GAAM,IAAAmJ,EAAArG,KAAArF,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAsI,GAChBtI,KAAKuI,MAAQrL,EACb8C,KAAKwI,QAAU,IAAIC,IAEnBzI,KAAK0I,SAAW,GAChB1I,KAAK2I,QAAU,GACf3I,KAAK4I,cAAgB,GACrB5I,KAAK6I,cAAgB,GACrB7I,KAAK8I,YAAc,GAEnBnO,OAAOC,KAAKsC,GAAMrC,QAAQ,SAAChB,GACzB,GAAIwM,EAAKxM,GACP,MAAM,IAAI0D,MAAJ,4BAAA7D,OAAsCG,IAG9CwM,EAAKxM,GAAQ,CACXkP,MAAM,EACNC,WAAY,EACZC,SAAS,EACTC,WAAW,EACXC,aAAc,EACdC,eAAgB,EAChBC,UAAU,EACVC,iBAAkB,EAElBC,SAAU,EACVC,aAAa,EACbC,gBAAiB,yEAKF,IAAA7C,EAAA5G,KACb0J,EAAQ,CACZC,OAAQ,GACRC,WAAWjP,OAAAkP,EAAA,EAAAlP,CAAA,GAAKqF,KAAK8I,cAOvB,OAJAnO,OAAOC,KAAKoF,KAAKuI,OAAO1N,QAAQ,SAAChB,GAC/B6P,EAAMC,OAAO9P,GAAbc,OAAAkP,EAAA,EAAAlP,CAAA,GAAyBiM,EAAK/M,MAGzB6P,2CAGQA,GAAO,IAAAI,EAAA9J,KACtBrF,OAAOC,KAAKoF,KAAKuI,OAAO1N,QAAQ,SAAChB,GAC/BiQ,EAAKjQ,GAALc,OAAAkP,EAAA,EAAAlP,CAAA,GAAiB+O,EAAMC,OAAO9P,MAEhCmG,KAAK8I,YAALnO,OAAAkP,EAAA,EAAAlP,CAAA,GAAuB+O,EAAME,+CAGpB5H,GACT,OAAOhC,KAAKwI,QAAQlC,IAAItE,yCAIxB,OAAOrH,OAAAoP,EAAA,EAAApP,CAAIqF,KAAKwI,QAAQwB,8CAGdhI,EAAOiI,GACjBjK,KAAKwI,QAAQ0B,IAAIlI,EAAO,CACtBA,QACAmI,SAAUnI,EAAMwE,KAAKS,MAAQ,GAAK,KAClCmD,UAAW,EACXH,6DAIQjI,GACVhC,KAAKwI,QAAQ6B,OAAOrI,qCAGZA,EAAOsI,GAAM,IAAAC,EAAAvK,KACd0I,EAAY1G,EAAMwI,MAAlB9B,SAEPA,EAAS+B,GAAT,WAAA/Q,OAAuB4Q,GAAQ,SAAClQ,GAC9B,IAAMsQ,EAAMC,SAASC,eAAiBD,SAASC,cAAcC,QAAQC,cACzD,UAARJ,GAA2B,WAARA,GAA4B,aAARA,IAIvCtQ,EAAE2Q,QAAU3Q,EAAE4Q,SAAW5Q,EAAE6Q,SAAW7Q,EAAE8Q,WAI5C9Q,EAAE+Q,iBACFZ,EAAK7B,SAAS4B,IAAQ,MAGxB5B,EAAS+B,GAAT,SAAA/Q,OAAqB4Q,GAAQ,SAAClQ,GAC5B,IAAMsQ,EAAMC,SAASC,eAAiBD,SAASC,cAAcC,QAAQC,cACzD,UAARJ,GAA2B,WAARA,GAA4B,aAARA,IAI3CtQ,EAAE+Q,iBACFZ,EAAK7B,SAAS4B,IAAQ,KAGlBA,KAAQtK,KAAK0I,WACjB1I,KAAK0I,SAAS4B,IAAQ,qCAIhBtI,EAAOsI,UACRtK,KAAK0I,SAAS4B,wCAGVtI,GAAO,IAAAoJ,EAAApL,KAClBqL,YAAYrL,KAAKuI,OAAO1N,QAAQ,SAACyP,GAC/Bc,EAAKE,UAAUtJ,EAAOsI,KAGpBtI,EAAMwI,MAAM7B,UACd3G,EAAMwI,MAAM7B,QAAQ8B,GAAG,OAAQ,SAAC9B,EAAS4C,GACvC,IAAIC,EAAanD,EAAWkD,EAAOE,OAC9BD,GACH7Q,OAAOmC,QAAQ0K,GAAgB3M,QAAQ,SAAAkC,GAAoB,IAAAC,EAAArC,OAAA+Q,EAAA,EAAA/Q,CAAAoC,EAAA,GAAlBlD,EAAkBmD,EAAA,GAAZ2O,EAAY3O,EAAA,GACrDuO,IAAW5C,EAAQgD,KACrBH,EAAanD,EAAWkD,EAAOE,OAAS5R,KAK9CuR,EAAKzC,QAAQ6C,IAAc,IAG7BxJ,EAAMwI,MAAM7B,QAAQ8B,GAAG,KAAM,SAAC9B,EAAS4C,GACrC,IAAIC,EAAanD,EAAWkD,EAAOE,OAC9BD,GACH7Q,OAAOmC,QAAQ0K,GAAgB3M,QAAQ,SAAA8C,GAAoB,IAAAC,EAAAjD,OAAA+Q,EAAA,EAAA/Q,CAAAgD,EAAA,GAAlB9D,EAAkB+D,EAAA,GAAZ+N,EAAY/N,EAAA,GACrD2N,IAAW5C,EAAQgD,KACrBH,EAAanD,EAAWkD,EAAOE,OAAS5R,KAK9CuR,EAAKzC,QAAQ6C,IAAc,KAI/B,IAAMI,EAASjB,SAASkB,cAAc,kBAEtC,CAAC,cAAe,aAAahR,QAAQ,SAAChB,GACpCmI,EAAMwI,MAAMC,GAAG5Q,EAAM,SAACiS,GAEfnB,SAASC,eAAkBD,SAASC,cAAcmB,WAAYpB,SAASC,cAAcmB,SAASH,GAQjG9E,WAAW,WACT6D,SAASC,cAAc7E,SARzBqF,EAAKxC,cAAc5E,KAAK,CACtBnK,OACAiF,EAAGgN,EAAQhN,EACXC,EAAG+M,EAAQ/M,+CAYNiN,GAAQ,IACdrD,EAAW3I,KAAX2I,QACHsD,GAAc,EAElBD,EAAOnR,QAAQ,SAACmH,GACd,IAAMkK,EAAalK,EAAMwI,MAAM7B,QAC1BuD,EAAWC,QAIXF,IACHA,GAAc,EAEdtD,EAAQwD,MAAQ,EAChBxD,EAAQyD,QAAU,EAClBzD,EAAQ0D,QAAU,EAClB1D,EAAQ2D,QAAU,EAClB3D,EAAQ4D,QAAU,GAGhB5D,EAAQwD,MAAQD,EAAWC,QAC7BxD,EAAQwD,MAAQD,EAAWC,OAG7BD,EAAWM,SAASC,OAAO,SAACC,GAAD,OAASA,IAAK7R,QAAQ,SAAC8R,GAAW,IACpDC,EAAyBD,EAAzBC,UAAWC,EAAcF,EAAdE,WACdxN,KAAKyN,IAAIF,EAAU9N,GAAKO,KAAKyN,IAAInE,EAAQyD,WAC3CzD,EAAQyD,QAAUQ,EAAU9N,GAG1BO,KAAKyN,IAAIF,EAAU7N,GAAKM,KAAKyN,IAAInE,EAAQ0D,WAC3C1D,EAAQ0D,QAAUO,EAAU7N,GAG1BM,KAAKyN,IAAID,EAAW/N,GAAKO,KAAKyN,IAAInE,EAAQ2D,WAC5C3D,EAAQ2D,QAAUO,EAAW/N,GAG3BO,KAAKyN,IAAID,EAAW9N,GAAKM,KAAKyN,IAAInE,EAAQ4D,WAC5C5D,EAAQ4D,QAAUM,EAAW9N,6CAMxBgO,GAAiB,IAAAC,EAAAhN,KACrB2I,EAAW3I,KAAX2I,QACDzL,EAAO8C,KAAKuI,MACZ0E,EAAQ,CAACC,QAAS,GAmExB,OAjEAvS,OAAOmC,QAAQI,GAAMrC,QAAQ,SAAAsD,GAAoB,IAAAI,EAAA5D,OAAA+Q,EAAA,EAAA/Q,CAAAwD,EAAA,GAAlBtE,EAAkB0E,EAAA,GAAZf,EAAYe,EAAA,GAC/C,IAAIwO,GAAoBvP,EAAO2P,YAA/B,CAIA,IAAIpE,GAAO,EACPvL,EAAOgN,QACThN,EAAOgN,MAAM3P,QAAQ,SAACuS,GACpB,IAAIC,EAEA1E,EAAQwD,MACG,uBAATiB,IAAkC/N,KAAKyN,IAAInE,EAAQyD,SAAW,IAAO/M,KAAKyN,IAAInE,EAAQ0D,SAAW,IACnGtD,EAAO,CAACJ,EAAQyD,QAASzD,EAAQ0D,SACf,uBAATe,IAAkC/N,KAAKyN,IAAInE,EAAQ2D,SAAW,IAAOjN,KAAKyN,IAAInE,EAAQ4D,SAAW,IAC1GxD,EAAO,CAACJ,EAAQ2D,QAAS3D,EAAQ4D,SAEjCc,EADkB,sBAATD,EACCzE,EAAQ0D,SAAW,GACX,wBAATe,EACCzE,EAAQ0D,QAAU,GACV,wBAATe,EACCzE,EAAQyD,SAAW,GACX,yBAATgB,EACCzE,EAAQyD,QAAU,GACV,sBAATgB,EACCzE,EAAQ4D,SAAW,GACX,wBAATa,EACCzE,EAAQ4D,QAAU,GACV,wBAATa,EACCzE,EAAQ2D,SAAW,GACX,yBAATc,EACCzE,EAAQ2D,QAAU,GAElBgB,IAAEhH,IAAI0G,EAAMI,GAGxBC,EAAUC,IAAEhH,IAAI0G,EAAMI,GAGpBC,IACFtE,GAAO,KAIXiE,EAAKnT,GAAMkP,KAAOA,EAEdA,IACFkE,EAAMpT,GAAQkP,OAKhB/I,KAAK4I,cAAcnO,SAChBsS,IACHE,EAAMM,SAAN5S,OAAAoP,EAAA,EAAApP,CAAqBqF,KAAK4I,gBAE5B5I,KAAK4I,cAAcnO,OAAS,GAG1BuF,KAAK6I,cAAcpO,SAChBsS,IACHE,EAAMO,eAAN7S,OAAAoP,EAAA,EAAApP,CAA2BqF,KAAK6I,gBAElC7I,KAAK6I,cAAcpO,OAAS,GAGvBwS,sCAGGA,GAAO,IAAAQ,EAAAzN,KACX9C,EAAO8C,KAAKuI,MAElB5N,OAAOmC,QAAQI,GAAMrC,QAAQ,SAAA2D,GAAoB,IAAAkP,EAAA/S,OAAA+Q,EAAA,EAAA/Q,CAAA6D,EAAA,GAAlB3E,EAAkB6T,EAAA,GAAZlQ,EAAYkQ,EAAA,GAC3CT,EAAMpT,IAAS2D,EAAOmQ,aACxBF,EAAK5T,GAAMkP,MAAO,EAElB0E,EAAK5T,GAAMkP,KAAOkE,EAAMpT,8CAKboT,GAAO,IAAAW,EAAA5N,KAChB9C,EAAO8C,KAAKuI,MAElB5N,OAAOmC,QAAQI,GAAMrC,QAAQ,SAAAgT,GAAoB,IAAAC,EAAAnT,OAAA+Q,EAAA,EAAA/Q,CAAAkT,EAAA,GAAlBhU,EAAkBiU,EAAA,GAAZtQ,EAAYsQ,EAAA,GAC3Cb,EAAMpT,IAAS2D,EAAO2P,cAAgB3P,EAAOmQ,eAC/CC,EAAK/T,GAAMkP,MAAO,4CAKTkB,EAAsB3H,EAAM2K,GACzC,IAAKhD,GAAwB3H,EAAK7H,OAAQ,CACxC,IAAMsT,EAAYzL,EAAKA,EAAK7H,OAAS,GACjCuT,GAAS,EAab,GAZIf,EAAMM,UAAYQ,EAAUR,SAC9BS,GAAS,EACAf,EAAMO,gBAAkBO,EAAUP,eAC3CQ,GAAS,EAETrT,OAAOC,KAAKoF,KAAKuI,OAAO1N,QAAQ,SAACC,GAC3BiT,EAAUjT,KAASmS,EAAMnS,KAC3BkT,GAAS,KAKXA,EAGF,OAFA1L,EAAK2L,WACL3L,EAAK0B,KAALrJ,OAAAkP,EAAA,EAAAlP,CAAA,GAAcoT,EAAd,CAAyBb,QAASa,EAAUb,QAAU,KAK1D5K,EAAK0B,KAAKiJ,qCAGFtH,EAAMuI,GAAU,IACjBpF,EAAe9I,KAAf8I,YAEP,QAAapO,IAATiL,EAAoB,CACtB,IAAIwI,GAAY,EAMhB,OALAxT,OAAOqP,OAAOlB,GAAajO,QAAQ,SAACuT,GAC9BA,IACFD,GAAY,KAGTA,EAGT,YAAiBzT,IAAbwT,EACKpF,EAAYnD,IAGrBmD,EAAYnD,KAAUuI,EACfpF,EAAYnD,8CAGH,IACTmD,EAAe9I,KAAf8I,YACPnO,OAAOC,KAAKkO,GAAajO,QAAQ,SAACC,GAChCgO,EAAYhO,IAAO,4CAIP6G,EAASsL,EAAOoB,GAAI,IAAAC,EAAAtO,KAC5B9C,EAAO8C,KAAKuI,MACXvG,EAASL,EAATK,MAEDuM,EAAYvO,KAAKuO,YAEvB5T,OAAOmC,QAAQI,GAAMrC,QAAQ,SAAA2T,GAAoB,IAAAC,EAAA9T,OAAA+Q,EAAA,EAAA/Q,CAAA6T,EAAA,GAAlB3U,EAAkB4U,EAAA,GAAZjR,EAAYiR,EAAA,GACzCC,EAAUJ,EAAKzU,GAoCrB,KAlCKsG,YAAI,WAAAzG,OAAYG,EAAZ,cAAgC0U,IAAc/Q,EAAO2P,eAC5DuB,EAAQ3F,MAAO,GAGbvL,EAAO+L,WACTmF,EAAQjF,gBAAkBpK,KAAKuG,IAAI,EAAG8I,EAAQjF,gBAAkB4E,GAChEK,EAAQlF,YAAckF,EAAQjF,gBAAkB,EAC5CiF,EAAQlF,cACVkF,EAAQ3F,MAAO,GAEb2F,EAAQ3F,OACV2F,EAAQjF,gBAAkBtJ,YAAI,WAAAzG,OAAYG,EAAZ,gBAI9B6U,EAAQ3F,MACV2F,EAAQ1F,YAAc,EACtB0F,EAAQvF,cAAgBkF,EACxBK,EAAQzF,QAAiC,IAAvByF,EAAQ1F,WAC1B0F,EAAQxF,UAAYwF,EAAQ1F,WAAa,EACzC0F,EAAQrF,UAAW,EACnBqF,EAAQtF,eAAiB,EACzBsF,EAAQpF,iBAAmB,IAE3BoF,EAAQ3F,MAAO,EACf2F,EAAQ1F,WAAa,EACrB0F,EAAQvF,aAAe,EACvBuF,EAAQzF,SAAU,EAClByF,EAAQxF,WAAY,EACpBwF,EAAQrF,SAAsC,IAA3BqF,EAAQtF,eAC3BsF,EAAQtF,gBAAkB,EAC1BsF,EAAQpF,kBAAoB+E,GAG1BK,EAAQzF,SAAWzL,EAAOmR,QAC5B,GAA8B,oBAAnBnR,EAAOmR,QAChBnR,EAAOmR,QAAQ3M,EAAOA,EAAMwE,UACvB,CACL,IAAMoI,EAAYtB,IAAEhH,IAAItE,EAAOxE,EAAOmR,SACtC,GAAIC,EACFA,EAAU7O,KAAKiC,OACV,CACL,IAAM6M,EAAWvB,IAAEhH,IAAItE,EAAMwE,KAAMhJ,EAAOmR,SAC1C,IAAIE,EAGF,MAAM,IAAItR,MAAJ,gCAAA7D,OAA0CG,EAA1C,4DAAAH,OAAyG8D,EAAOmR,UAFtHE,EAAS9O,KAAKiC,EAAMwE,WASzB+H,GAAatB,EAAMM,UACtBN,EAAMM,SAAS1S,QAAQ,SAACuM,GACtBpF,EAAM8M,mBAAmB1H,KAIzBpH,KAAK+O,QAAU9B,EAAMO,gBACvBP,EAAMO,eAAe3S,QAAQ,SAACmU,GAC5B,IAAMC,EAAK9O,YAAK6O,GACE,oBAAPC,EACTA,IAGA5U,QAAQC,MAAR,iBAAAZ,OAA+BsV,EAA/B,mCAAAtV,OAAyEuV,kDAO/E,IAAKjP,KAAK+O,OACR,OAAO,KAGT,GAAI/O,KAAKkP,kBAAoBlP,KAAK+O,OAAO5E,SAAS1P,QAAUuF,KAAKmP,aAAenP,KAAK+O,OAAOK,iBAE1F,OADApP,KAAKqP,cACE,KAGT,IAAMpC,EAAQjN,KAAK+O,OAAO5E,SAASnK,KAAKkP,kBAmBxC,OAjBIjC,EAAMC,SACRlN,KAAKsP,iBAAmB,EAEpBtP,KAAKsP,gBAAkBrC,EAAMC,UAC/BlN,KAAKsP,gBAAkB,EACvBtP,KAAKkP,kBAAoB,IAG3BlP,KAAKkP,kBAAoB,EAG3BlP,KAAKmP,aAAe,EAEpBnP,KAAKuP,YAAYtC,GACjBjN,KAAKwP,cAAa,GAClBxP,KAAKyP,iBAAiBxC,GAEftS,OAAAkP,EAAA,EAAAlP,CAAA,GAAIsS,EAAX,CAAkBC,QAAS,yCAGhBlL,EAAOH,EAAMwM,EAAItB,GAC5B,IAAMpL,EAAU3B,KAAK0P,WAAW1N,GAEhC,GAAIL,EAAQK,MAAM2N,gBAAlB,CACE,IAAM1C,EAAQjN,KAAKwP,aAAazC,GAChC/M,KAAK4P,gBAAgBjO,EAASsL,EAAOoB,OAFvC,CAMA,IAAMpB,EAAQjN,KAAK6P,qBACd7P,KAAKwP,aAAazC,GAEnBpL,EAAQwI,UACVnK,KAAK8P,eAAenO,EAAQsI,qBAAsBtI,EAAQwI,SAAU8C,GAElEjN,KAAK+P,WACP/P,KAAK8P,eAAenO,EAAQsI,qBAAsBjK,KAAK+P,UAAU5F,SAAU8C,GAG7EtL,EAAQyI,WAAa,EAEjBpK,KAAK+P,YACP/P,KAAK+P,UAAU3F,WAAa,GAG9BpK,KAAK4P,gBAAgBjO,EAASsL,EAAOoB,gDAGnBW,GAClBhP,KAAK6I,cAAc7E,KAAKgL,0CAGXhN,EAAO+N,GACpB,IAAMpO,EAAU3B,KAAK0P,WAAW1N,GAChChC,KAAK+P,UAAYA,EACjBA,EAAU5F,SAAVxP,OAAAoP,EAAA,EAAApP,CAAyBgH,EAAQwI,UACjC4F,EAAUC,wBAA0BD,EAAUE,gBAAkBF,EAAU3F,UAAYzI,EAAQyI,kDAGhF,IACP2F,EAAa/P,KAAb+P,UAGP,cAFO/P,KAAK+P,UACZA,EAAUX,iBAAmBW,EAAU3F,UAChC2F,sCAGGhB,EAAQmB,GAClBlQ,KAAK+O,OAASA,EACd/O,KAAKkP,iBAAmB,EACxBlP,KAAKsP,gBAAkB,EACvBtP,KAAKmP,YAAc,EACnBnP,KAAKkQ,cAAgBA,EAErB,IAAMC,EAAYD,EAAcC,WAAapB,EAAOoB,WAAa,EACjE,GAAIA,EACF,IAAK,IAAI5N,EAAI,EAAGA,EAAI4N,EAAW5N,GAAK,EAClCvC,KAAK6P,0DAMT,GAAK7P,KAAK+O,OAAV,CADY,IAKLqB,EAASpQ,KAAKkQ,cAAdE,aAEApQ,KAAK+O,cACL/O,KAAKkQ,qBACLlQ,KAAKkP,wBACLlP,KAAKsP,uBACLtP,KAAKmP,YAERiB,GACFA,0CAKF,GAAKpQ,KAAK+O,OAAV,CADW,IAKJsB,EAAUrQ,KAAKkQ,cAAfG,cAEArQ,KAAK+O,cACL/O,KAAKkQ,qBACLlQ,KAAKkP,wBACLlP,KAAKsP,uBACLtP,KAAKmP,YAERkB,GACFA,4CAKF,QAAKrQ,KAAK+O,WAIN/O,KAAKmP,aAAenP,KAAK+O,OAAOK,mBAI7BpP,KAAKmP,aAAenP,KAAKkQ,cAAcD,iBAAmBjQ,KAAK+O,OAAOkB,mEAGtDK,GACvB,IAAMC,EAAOvQ,KAAKuI,MAElBvI,KAAKwQ,qBAAqBD,EAAMD,GAChCtQ,KAAKyQ,uBAAuBF,EAAMD,GAAM,GACxCtQ,KAAKyQ,uBAAuBF,EAAMD,GAAM,gDAGrBC,EAAMD,GACzBtQ,KAAKuI,MAAQ+H,EACb,IAAMI,EAAc,GACdC,EAAiB,GACjBC,EAAiB,GAEjBnT,EAAO,GAsCb,GApCA9C,OAAOmC,QAAQwT,GAAMzV,QAAQ,SAAAgW,GAAoB,IAAAC,EAAAnW,OAAA+Q,EAAA,EAAA/Q,CAAAkW,EAAA,GAAlBhX,EAAkBiX,EAAA,GAAAA,EAAA,GAC/C,GAAKP,EAAK1W,GAEH,CACL4D,EAAK5D,IAAQ,EAEb,IAAMkX,EAAW,GACjBpW,OAAOmC,QAAQyT,EAAK1W,IAAOgB,QAAQ,SAAAmW,GAAkB,IAAAC,EAAAtW,OAAA+Q,EAAA,EAAA/Q,CAAAqW,EAAA,GAAhBlW,EAAgBmW,EAAA,GAAXnX,EAAWmX,EAAA,GAEjDF,EAASjW,GADU,oBAAVhB,EACOoX,OAAOpX,GAEPA,IAIpB,IAAMqX,EAAW,GACjBxW,OAAOmC,QAAQwT,EAAKzW,IAAOgB,QAAQ,SAAAuW,GAAkB,IAAAC,EAAA1W,OAAA+Q,EAAA,EAAA/Q,CAAAyW,EAAA,GAAhBtW,EAAgBuW,EAAA,GAAXvX,EAAWuX,EAAA,GAEjDF,EAASrW,GADU,oBAAVhB,EACOoX,OAAOpX,GAEPA,IAIhBE,KAAKC,UAAU8W,KAAc/W,KAAKC,UAAUkX,IAC9CP,EAAe5M,KAAKnK,QAvBtB6W,EAAY1M,KAAKnK,KA4BrBc,OAAOC,KAAK2V,GAAM1V,QAAQ,SAAChB,GACpB4D,EAAK5D,IACR8W,EAAe3M,KAAKnK,KAIG,IAAvB6W,EAAYjW,QAA0C,IAA1BkW,EAAelW,QAA0C,IAA1BmW,EAAenW,OAA9E,CAIA,IAAM6W,EAAU,GACZZ,EAAYjW,QACd6W,EAAQtN,KAAR,KAAAtK,OAAkBgX,EAAY1S,KAAK,MAAnC,MAEE2S,EAAelW,QACjB6W,EAAQtN,KAAR,KAAAtK,OAAkBiX,EAAe3S,KAAK,MAAtC,MAEE4S,EAAenW,QACjB6W,EAAQtN,KAAR,UAAAtK,OAAkBkX,EAAe5S,KAAK,MAAtC,MAIF3D,QAAQkX,KAAR,gCAAA7X,OAA6C4X,EAAQtT,KAAK,MAA1D,sDAGqBuS,EAAMD,EAAMkB,GAAY,IAAAC,EAAAzR,KACvC0R,EAAW,GACXC,EAAW,GAEXC,EAAYJ,EAAanG,IAAcwG,IAE7CD,EAAUtB,GAAMzV,QAAQ,SAACyP,GACvBoH,EAASpH,IAAQ,IAGnBsH,EAAUrB,GAAM,GAAM1V,QAAQ,SAACyP,GAC7BqH,EAASrH,IAAQ,IAGnB,IAAMwH,EAAU,GAChBnX,OAAOC,KAAK8W,GAAU7W,QAAQ,SAACyP,GACzBqH,EAASrH,UACJqH,EAASrH,GAEhBwH,EAAQ9N,KAAKsG,KAGjB,IAAMyH,EAAapX,OAAOC,KAAK+W,GAE/B,GAAuB,IAAnBG,EAAQrX,QAAsC,IAAtBsX,EAAWtX,OAAvC,CAII+W,GACFxR,KAAKgS,cAAcnX,QAAQ,SAAC8G,GAC1BmQ,EAAQjX,QAAQ,SAACyP,GACfmH,EAAKnG,UAAU3J,EAAQK,MAAOsI,KAEhCyH,EAAWlX,QAAQ,SAACyP,GAClBmH,EAAKQ,UAAUtQ,EAAQK,MAAOsI,OAKpC,IAAMgH,EAAU,GACZQ,EAAQrX,QACV6W,EAAQtN,KAAR,KAAAtK,OAAkBoY,EAAQ9T,KAAK,MAA/B,MAEE+T,EAAWtX,QACb6W,EAAQtN,KAAR,KAAAtK,OAAkBqY,EAAW/T,KAAK,MAAlC,MAIF3D,QAAQkX,KAAR,eAAA7X,OAA4B8X,EAAa,WAAa,UAAtD,oBAAA9X,OAAkF4X,EAAQtT,KAAK,MAA/F,gBCrsBEkU,EAAa,CACjBvM,KAAMhF,IAAOwR,KACbC,OAAQ,SACRC,MAAO,IACPC,OAAQ,IACRC,UAAW,GACXC,WAAY,IAGOC,cACnB,SAAAA,EAAYC,EAAWjM,GAAe,IAAAJ,EAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAyS,GACpC,IAAMjV,EAAM7C,OAAAkP,EAAA,EAAAlP,CAAA,GACPuX,EACAQ,GA6CL,GA1CArM,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAA8X,GAAA1S,KAAAC,KAAMxC,IAEN7C,OAAOmC,QAAQU,GAAQ3C,QAAQ,SAAAkC,GAAkB,IAAAC,EAAArC,OAAA+Q,EAAA,EAAA/Q,CAAAoC,EAAA,GAAhBjC,EAAgBkC,EAAA,GAAXlD,EAAWkD,EAAA,GACzClC,KAAOuL,EAAK7I,SAChB6I,EAAK7I,OAAO1C,GAAOhB,KAIvBuM,EAAKY,MAAQzJ,EAAOyJ,MAEpBZ,EAAKrE,MAAMnC,IAAI,YAAaoG,GAAW,EAAM,CAACxF,KAAMkS,KAAKC,MAAOC,QAAS3B,OAAO7R,KAAKyT,YAErFzM,EAAKI,cAAgBA,EAIrBJ,EAAK0M,MAAMpT,UAAUqT,mBAAqB,aAE1C3M,EAAKlG,KAAOA,IAEZkG,EAAK4M,iBAAmB,EAExB5M,EAAK6M,kBAAoB,GAEzB7M,EAAK8M,oBAAsB,GAE3B9M,EAAK+M,OAAS,GAEd/M,EAAKqI,QAAU,IAAIpG,EAAe6B,KAElC9D,EAAKgN,4BAA4BC,IAAsBC,IAAsBC,KAE7EnN,EAAKoN,SAAU,EAEfpN,EAAKqN,mBAAqB,GAC1B,CACEzN,GADFvM,OAAAiB,OAAAoP,EAAA,EAAApP,CAEK8L,IACH5L,QAAQ,SAAC6L,GACTL,EAAKqN,mBAAmBhN,EAAW7M,MAAQ6M,IAGzClJ,EAAOyJ,MAAO,CAChB,IAAMT,EAAI7L,OAAAgZ,EAAA,EAAAhZ,CAAA0L,GACViB,OAAOtF,MAAQ,IAAI4R,MAAM,GAAI,CAC3BtN,IAD2B,SACvBpI,EAAQpD,GACV,OAAO0L,EAAKqN,WAAW/Y,MAG3BwM,OAAOnH,KAAOA,IAvDoB,OA0DpCkG,EAAKyN,OAAOrJ,GAAG,OAAQ,WACrB,IAAMoJ,EAAWxN,EAAKwN,WAItB,GAFAxN,EAAK0N,eAEDvW,EAAOyJ,MAAO,CAChB,GAAIZ,EAAK4M,iBAAmB,EAC1B,OAOF,GAJK5M,EAAK2N,cAAkBH,EAASI,SAAYJ,EAASI,QAAQC,WAChEC,aAAoB,GAGlBhU,YAAK,mBAGP,IAFA,IAAMiU,GAAQ,IAAIzB,MAAO0B,WAEjB,IAAI1B,MAAQ0B,UAAYD,EAAQ,SA3EV/N,+EAkFtBiO,GACd,IAAMC,EAAoBvU,KAAKwU,iBAAiBF,GAChD,OAAKC,EAIL,GAAA7a,OAAAiB,OAAAoP,EAAA,EAAApP,CAAW4Z,EAAkB,IAA7B5Z,OAAAoP,EAAA,EAAApP,CAAoC4Z,EAAkB,KAH7C,yDAMiBE,EAAgBC,EAAgBC,GACrD3U,KAAK4U,gBACR5U,KAAK4U,cAAgB,IAGvB,IAAMC,EAAY,GAAAnb,OAAAiB,OAAAoP,EAAA,EAAApP,CACZ8Z,GAAkB,IADN9Z,OAAAoP,EAAA,EAAApP,CAEZ+Z,GAAkB,KAGlBI,EAAM,GACNC,EAAgB,SAACT,EAAcU,GACnC,IAAMC,EAAS,GACTC,EAAS,GAEfF,EAAcna,QAAQ,SAACsa,GACrB,IAAMC,EAAgBX,EAAerU,KAAK,SAAAzC,GAAA,OAAAhD,OAAA+Q,EAAA,EAAA/Q,CAAAgD,EAAA,QAAewX,IACzD,GAAIC,EACFH,EAAOjR,KAAKoR,OADd,CAKA,IAAMC,EAAgBX,EAAetU,KAAK,SAAAjC,GAAA,OAAAxD,OAAA+Q,EAAA,EAAA/Q,CAAAwD,EAAA,QAAegX,IACzD,IAAIE,EAKJ,MAAM,IAAI9X,MAAJ,2BAAA7D,OAAqCyb,EAArC,0BAAAzb,OAA0E4a,EAA1E,MAJJY,EAAOlR,KAAKqR,MAOhBP,EAAIR,GAAgB,CAACW,EAAQC,IAG/Bva,OAAOmC,QAAQ6X,GAAW9Z,QAAQ,SAAA2D,GAAmC,IAAAkP,EAAA/S,OAAA+Q,EAAA,EAAA/Q,CAAA6D,EAAA,GAAjC8V,EAAiC5G,EAAA,GAAnBsH,EAAmBtH,EAAA,GACnEqH,EAAcT,EAAcU,KAG9BH,EAAaha,QAAQ,SAAAgT,GAAY,IAAVhU,EAAUc,OAAA+Q,EAAA,EAAA/Q,CAAAkT,EAAA,MAC1BiH,EAAIjb,IACPkb,EAAclb,EAAM,CAACA,MAIpBib,EAAIrW,MACPsW,EAAc,OAAQF,EAAaS,IAAI,SAAA9G,GAAA,OAAA7T,OAAA+Q,EAAA,EAAA/Q,CAAA6T,EAAA,SAGzCxO,KAAKwU,iBAAmBM,uCAGbS,GACXvV,KAAKkF,OAASqQ,EAEVvV,KAAKwV,oBACPxV,KAAKwV,mBAAmBC,UAAUF,EAAYpV,YAAK,sBAGrDH,KAAKgC,MAAMgK,OAAOnR,QAAQ,SAACmH,GACzBA,EAAM0T,aAAaH,wCAIZI,GACL3V,KAAKyT,UAAYkC,IAIrB3V,KAAKyT,QAAUkC,sCAGN,IACF3J,EAAUhM,KAAKgC,MAAfgK,OACP,OAAOA,EAAOA,EAAOvR,OAAS,6CAI9B,IAAMmb,EAAUjL,SAASkL,eAAe,eACpCD,GAAWA,EAAQE,YACrBF,EAAQE,WAAWC,YAAYH,GAGjC5V,KAAKgW,kBAAmB,EACxBhW,KAAKiW,iDAGMC,GACNlW,KAAKmW,iBACRnW,KAAKmW,eAAiB,IAGpBD,GACFlW,KAAKmW,eAAenS,KAAKkS,GAG3BlW,KAAKiW,gDAGK,IAAArP,EAAA5G,KACLA,KAAKgW,kBAAqBhW,KAAKmW,iBAIhCnW,KAAKoW,cACHpW,KAAKmW,iBACPnW,KAAKmW,eAAetb,QAAQ,SAACqb,GAC3BA,aAEKlW,KAAKmW,gBAKZnW,KAAKqW,iBAITrW,KAAKqW,gBAAiB,EAEtBlP,EAAU,mBAGV9M,QAAQic,KAAR,cAAA5c,OAA2BC,IAA3B,MAIAmN,WAAW,WACLF,EAAK2P,SAAS5Q,OAAShF,IAAO6V,QAEhCC,MAAM,qGAGR,IAAMC,EAAQ/L,SAASkL,eAAe,SAClCa,GAASA,EAAMZ,YACjBY,EAAMZ,WAAWC,YAAYW,GAG/B9P,EAAK5E,MAAM2U,OAAO1Q,EAAUnL,OAC5B8L,EAAKgQ,SAEL,IAAM5U,EAAQ4E,EAAKiN,WACf7R,IACFA,EAAM6U,qBACN7U,EAAM8U,MAAM,kBAAM9U,EAAM+U,sBAAqBva,mBAAoB,GAGnEoK,EAAKuP,eAAetb,QAAQ,SAACqb,GAC3BA,aAEKtP,EAAKuP,eACZvP,EAAKwP,eAAgB,+CAIRF,GACXlW,KAAKgU,aACPkC,IAEAlW,KAAKkT,kBAAkBlP,KAAKkS,4CAK9B,IAAIlW,KAAKgU,aAAT,CAIAhU,KAAKgU,cAAe,EAEpBhU,KAAKkT,kBAAkBrY,QAAQ,SAACqb,GAAD,OAAcA,MAE7C,IAAMc,EAASrM,SAASkB,cAAc,wBAClCmL,GACFA,EAAOL,SAGT,IAAM5H,EAASpE,SAASkB,cAAc,wBAClCkD,GACFA,EAAO4H,SAGT,IAAMM,EAAMtM,SAASkB,cAAc,yBAC/BoL,GACFA,EAAIN,8CAKN3W,KAAKkX,gBACLlX,KAAKmX,aAELnX,KAAKnB,SAAQ,GAAM,GAEnB,IAAMuY,EAASzM,SAASkB,cAAc,qBAClCuL,GACFA,EAAOT,SAGT3W,KAAKqX,kBAEkB1M,SAAS2M,mBAC3B3M,SAAS4M,yBACT5M,SAAS6M,sBACT7M,SAAS8M,uBAGR9M,SAASpF,eACXoF,SAASpF,iBACAoF,SAAS+M,qBAClB/M,SAAS+M,uBACA/M,SAASgN,oBAClBhN,SAASgN,sBACAhN,SAASiN,kBAClBjN,SAASiN,uDAKJC,EAAQC,GAGjB,IAFA,IAAIC,EAAIF,EACJG,EAAI,GACCzV,EAAI,EAAGA,EAAIuV,EAAOvV,GAAK,EAC1BwV,EAAI,GACNC,GAAK,IAELD,GAAK,GAIT,SAAAre,OAAUse,GAAVte,OAAcme,0CAGDI,GAAM,IAAAnO,EAAA9J,KACbkY,EAAO,SAACH,GAAD,OAAOjO,EAAKqO,WAAWJ,EAAG,IACvC,MAAO,CACL,CAACE,EAAKG,cAAeF,EAAKD,EAAKI,WAAa,GAAIH,EAAKD,EAAKK,YAAYta,KAAK,KAC3E,CAACia,EAAKM,WAAYL,EAAKD,EAAKO,cAAeN,EAAKD,EAAKQ,eAAeza,KAAK,MACzEA,KAAK,uDAGiBxC,GACxB,IAAMkd,EAAIrZ,KAAK2B,MAAMxF,EAAW,IAAO,IACvC,GAAIkd,EAAI,GAAI,MAAO,YACnB,IAAMC,EAAInd,EAAW,IAAW,GAAJkd,EAC5B,SAAAhf,OAAUgf,EAAV,KAAAhf,OAAesG,KAAKmY,WAAWQ,EAAEC,QAAQ,GAAI,6CAGlB,IAAdxa,EAAc5D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACjBwH,EAAQhC,KAAK6T,WAEbjB,EAAM,IAAID,KAEhB3S,KAAK6Y,WAALle,OAAAkP,EAAA,EAAAlP,CAAA,CACEme,UAAWlG,EAAIyB,UACf0E,SAAU/W,EAAMA,MAAMgX,SAASzX,KAC/B0X,UAAWjX,EAAMkX,YAAYrf,KAC7BA,KAAMmG,KAAKmZ,eAAevG,GAC1BwG,aAAcpZ,KAAK0O,QAAQ2K,sBACxBjb,GAGL4D,EAAMsX,eAAetZ,KAAK6Y,YAEtB7Y,KAAK6Y,WAAWU,SAClBvZ,KAAKkX,gBACIlX,KAAKwZ,eACdxZ,KAAKwZ,cAAcxZ,KAAK6Y,oDAK1B,IAAM9I,EAAY/P,KAAK6Y,WACvB,GAAK9I,EAWL,OAPA/P,KAAK6T,WAAWqD,uBACTlX,KAAK6Y,WAER7Y,KAAKyZ,cACPzZ,KAAKyZ,aAAa1J,GAGbA,sCAGGhB,GAAsB,IAAAxE,EAAAvK,KAAd5B,EAAc5D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAC5BwF,KAAKiU,QAAUlF,EADiB,IAG3B2K,EAAuBtb,EAAvBsb,oBACEC,EAAoB5K,EAApB4K,iBACP,IAAKD,GAAuBC,EAC1B,IAAK,IAAIpX,EAAI,EAAGA,EAAIoX,EAAiBlf,OAAQ8H,GAAK,EAC5CoX,EAAiBpX,GAAG6H,WAAa2E,EAAOkB,kBAC1CyJ,EAAsBC,EAAiBpX,IAK7C,IAAM0N,EAAkB5Q,KAAKuG,IAC3BmJ,EAAOkB,gBACPyJ,GAAuBA,EAAoBtP,WAAkB,GAG/DpK,KAAK4Z,+BAA+B7K,EAAQ2K,GAAqBG,KAAK,SAACC,GACrEA,EAASC,YAAYhL,EAArBpU,OAAAkP,EAAA,EAAAlP,CAAA,GACKyD,EADL,CAEEsb,sBACAzJ,kBACAG,MAAO,WACL7F,EAAK8E,eAEPgB,OAAQ,WACN9F,EAAK4M,YAAW,OAIhB5M,EAAKyP,eACPzP,EAAKyP,cAAcjL,4DAKMA,EAAQ2K,GAAqB,IAAAtO,EAAApL,KACpDia,EAAWja,KAAK6T,WAChBqG,EAAQ,SAAAxgB,OAAY2F,KAAKyT,SAAWH,KAAKC,OAFW/B,EAMtD6I,GAAuB3K,EADzBoL,EALwDtJ,EAKxDsJ,eAAgBlB,EALwCpI,EAKxCoI,UAAWF,EAL6BlI,EAK7BkI,SAAUK,EALmBvI,EAKnBuI,aAEjCgB,EAAOpgB,KAAKmB,MAAMnB,KAAKC,UAAUkgB,IAChC1Z,GAASiZ,GAAuB3K,GAAQgK,SAAxCtY,KAED4Z,EAAgB,IAAIC,QAAQ,SAACC,EAASC,GAC1CpP,EAAKqP,YAAYP,EAAU,SAACJ,GAC1B1O,EAAKsD,QAAQgM,iBAAiBtB,GAC9BU,EAASjD,mBAAmB,KAAM,MAClCoD,EAASU,iBAAiBV,EAAUH,EAAU,MAC9CS,EAAQT,EAAU,UAgBtB,OAZAG,EAASjY,MAAMnC,IACbqa,EACAla,KAAK0T,mBAAmBuF,IACxB,EAHFte,OAAAkP,EAAA,EAAAlP,CAAA,GAKOoe,EALP,CAMIqB,OACA3Z,OACAma,WAAY,QAITP,wCAIP,GAAKra,KAAKiU,QAAV,CAIA,IAAMlF,EAAS/O,KAAKiU,eACbjU,KAAKiU,QAERjU,KAAK6a,aACP7a,KAAK6a,YAAY9L,uCAIV+L,GACT,GAAK9a,KAAKiU,QAAV,CAIA,IAAMlF,EAAS/O,KAAKiU,eACbjU,KAAKiU,QAEP6G,GACH9a,KAAK6T,WAAWsD,aAGdnX,KAAK+a,cACP/a,KAAK+a,aAAahM,sCAIZlV,EAAMmhB,GACd,GAAIA,GAAgBhb,KAAKib,mBAAqBphB,EAK5C,GAJImG,KAAKwV,oBAAsBxV,KAAKwV,mBAAmB1a,KACrDkF,KAAKwV,mBAAmB3W,UAGtBhF,EACF,IACE,IAAMqhB,EAAQlb,KAAKmb,MAAMtb,IAAIhG,GAC7B,IAAKqhB,IAAUA,EAAMpgB,IAGnB,YADAT,QAAQic,KAAR,wBAAA5c,OAAqCG,IAIvCqhB,EAAME,KAAK,GAAI,CAAC7e,MAAM,IACtB2e,EAAMzF,UAAUzV,KAAKkF,OAAS/E,YAAK,sBACnCH,KAAKwV,mBAAqB0F,EAC1Blb,KAAKib,iBAAmBphB,EACxB,MAAOO,GAEPC,QAAQ4c,IAAR,wBAAAvd,OAAoCG,EAApC,MAAAH,OAA6CU,SAG/C4F,KAAKib,iBAAmBphB,yCAM5B,IAAMmS,EAAShM,KAAKgC,MAAMgK,OAAOS,OAAO,SAACzK,GAAD,OAAWA,EAAMwI,MAAM7B,UAC3DqD,GACFhM,KAAK0O,QAAQ2M,eAAerP,kDAK9B,IAAMhK,EAAQhC,KAAK6T,WACf7R,GACFA,EAAMsZ,sEAIaja,EAAOC,GAC5B,IAAMU,EAAQhC,KAAK6T,WACf7R,GACFA,EAAMuZ,uBAAuBla,EAAOC,kDAKtC,IAAMU,EAAQhC,KAAK6T,WACf7R,GACFA,EAAMwZ,8DAIKC,GACb,OAAIzb,KAAKuW,SAAS5Q,OAAShF,IAAO+a,MACzB,KAGF1b,KAAKuW,SAASoF,YAAYF,4CAGlBA,EAAYvX,GAC3B,GAAIlE,KAAKuW,SAAS5Q,OAAShF,IAAO+a,QAI7BxX,IAAWlE,KAAKuW,SAASqF,YAAYH,IAA1C,CAIA,IAAMI,EAAS7b,KAAK8b,qBAAqBL,GAEzC,GAAII,EAAQ,CACV,IACME,EAAS,IADK/b,KAAKgc,oBAAoBH,GAC9B,CAAgB7b,MAI/B,IAAK+b,QAA4BrhB,IAAlBqhB,EAAOtZ,OACpB,OAGEyB,GACFlE,KAAKuW,SAAS0F,eAAeR,GAG/Bzb,KAAKuW,SAAS2F,YAAYT,EAAYM,GAEtCA,EAAOI,UAAU,aAAcnc,KAAKxC,OAAO6U,MAAOrS,KAAKxC,OAAO8U,aAE9DtS,KAAKuW,SAAS0F,eAAeR,GAG/Bzb,KAAK4U,cAAc6G,GAAcI,+CAGf,IAAA7O,EAAAhN,KAClBrF,OAAOC,KAAKoF,KAAKwU,kBAAkB3Z,QAAQ,SAAChB,GAC1CmT,EAAKoP,iBAAiBviB,mDAIJwiB,EAAWC,EAAWC,GAC1Cvc,KAAKqT,4BAA4BgJ,EAAWC,EAAWC,GACvDvc,KAAKwc,wEAGsBf,GAC3B,IAAMlH,EAAoBvU,KAAKwU,iBAAiBiH,GAChD,IAAKlH,EACH,MAAM,IAAIhX,MAAJ,2CAAA7D,OAAqD+hB,EAArD,4DAH+B,IAAAgB,EAMQlI,EAAkBe,IAAI,SAACoH,GACpE,OAAKA,EAIEA,EAAUjQ,OAAO,SAAAqE,GAAA,IAAEjX,EAAFc,OAAA+Q,EAAA,EAAA/Q,CAAAmW,EAAA,aAAY3Q,YAAI,UAAAzG,OAAWG,EAAX,eAA4Byb,IAAI,SAAArE,GAAA,OAAAtW,OAAA+Q,EAAA,EAAA/Q,CAAAsW,EAAA,QAA0BjT,KAAK,MAH9F,KAR4B2e,EAAAhiB,OAAA+Q,EAAA,EAAA/Q,CAAA8hB,EAAA,GAMhCG,EANgCD,EAAA,GAMbE,EANaF,EAAA,GAcvC,GAAKC,GAAsBC,EAI3B,gFAAAnjB,OAIMkjB,EAJN,iEAAAljB,OAQMmjB,EARN,kHAemBpB,GACnB,IAAMlH,EAAoBvU,KAAKwU,iBAAiBiH,GAChD,IAAKlH,EACH,MAAM,IAAIhX,MAAJ,2CAAA7D,OAAqD+hB,EAArD,4DAGR,IAaMqB,EAAe,GACfC,EAAsB,GAE5B,GAAArjB,OAAAiB,OAAAoP,EAAA,EAAApP,CAAI4Z,EAAkB,IAAtB5Z,OAAAoP,EAAA,EAAApP,CAA6B4Z,EAAkB,KAAI1Z,QAAQ,SAAAwW,GAA8B,IAAA2L,EAAAriB,OAAA+Q,EAAA,EAAA/Q,CAAA0W,EAAA,GAA5B8D,EAA4B6H,EAAA,GAAdC,EAAcD,EAAA,GAClF7c,YAAI,UAAAzG,OAAWyb,EAAX,cAITxa,OAAOmC,QAAQmgB,GAAUpiB,QAAQ,SAAAqiB,GAA2B,IAAAC,EAAAxiB,OAAA+Q,EAAA,EAAA/Q,CAAAuiB,EAAA,GAAzBE,EAAyBD,EAAA,GAAXxX,EAAWhL,OAAA+Q,EAAA,EAAA/Q,CAAAwiB,EAAA,SACpDtjB,EAAI,GAAAH,OAAMyb,EAAN,KAAAzb,OAAsB0jB,GAChCN,EAAa9Y,KAAKnK,GAFwC,IAGjDwjB,EAHiD1iB,OAAA+Q,EAAA,EAAA/Q,CAGlC2iB,IAAe3X,GAHmB,MAI1DoX,EAAoB/Y,KAApB,WAAAtK,OAAoC2jB,EAApC,KAAA3jB,OAAmDG,EAAnD,YAIJ,IAAM0jB,EAAiBvd,KAAKwd,6BAA6B/B,GACzD,OAAK8B,GAILT,EAAajiB,QAAQ,SAAChB,GACpB,IAAM4jB,EAAQ,IAAIC,OAAJ,MAAAhkB,OAAiBG,EAAKqK,QAAQ,sBAAuB,QAArD,QAETqZ,EAAeI,MAAMF,IAExBpjB,QAAQC,MAAR,kBAAAZ,OAAgC+hB,EAAhC,iCAAA/hB,OAA0EG,EAA1E,yEAAAH,OAAsJG,MAI1J,WAAAH,OA3CyB,yCA2CzB,YAAAA,OAvCqB,4LAuCrB,YAAAA,OAGIqjB,EAAoB/e,KAAK,IAH7B,YAAAtE,OAII6jB,EAJJ,WAZSA,0CAoBK9B,GACd,GAAIzb,KAAKuW,SAAS5Q,OAAShF,IAAO+a,MAAlC,CAIA,IAAMkC,EAAY5d,KAAK4U,cAAc6G,GAC/BoC,EAAY7d,KAAK8b,qBAAqBL,GAE5C,GAAImC,IAAcC,EAAlB,CAKAxjB,QAAQkX,KAAR,sBAAA7X,OAAmC+hB,IAEnCzb,KAAK4U,cAAc6G,GAAcoC,EAE7BA,EACF7d,KAAKoc,iBAAiBX,GAAY,GAElCzb,KAAKuW,SAAS0F,eAAeR,GAG/B,IAAMM,EAAS/b,KAAK8d,eAAerC,GAEnCzb,KAAKgC,MAAMgK,OAAOnR,QAAQ,SAACmH,GACrBA,EAAMyZ,aAAeA,IAIzBzZ,EAAM+Z,OAASA,EACX8B,GACF7b,EAAM+b,oBACN/b,EAAMgc,gBACNhc,EAAMic,OAAOC,YAAYnC,IAEzB/Z,EAAMic,OAAOE,uEAKA,IAAA1Q,EAAAzN,KACjBrF,OAAOC,KAAKoF,KAAKwU,kBAAkB3Z,QAAQ,SAAChB,GAC1C4T,EAAK2Q,gBAAgBvkB,2CAIX4hB,GACZ,GAAIzb,KAAKuW,SAAS5Q,OAAShF,IAAO+a,MAAlC,CAIA1b,KAAK4U,cAAc6G,GAAc,KAEjCzb,KAAKuW,SAAS0F,eAAeR,GAE7B,IAAMM,EAAS/b,KAAK8d,eAAerC,GAEnCzb,KAAKgC,MAAMgK,OAAOnR,QAAQ,SAACmH,GACrBA,EAAMyZ,aAAeA,IAIzBzZ,EAAM+Z,OAASA,EACf/Z,EAAMic,OAAOE,oEAIA,IAAAvQ,EAAA5N,KACfrF,OAAOC,KAAKoF,KAAKwU,kBAAkB3Z,QAAQ,SAAChB,GAC1C+T,EAAKyQ,cAAcxkB,iDAIHykB,GAClB,IACE,OAAO,IAAI3d,IAAO4d,MAAM,CACtBC,QAAS7d,IAAO8d,SAASC,MAAMC,UAAUC,oBACzCC,WAAY,SAAgBrY,GAC1B,IACE7F,IAAO8d,SAASC,MAAMC,UAAUC,oBAAoB7e,KAAKC,KAAM,CAC7DwG,OACA+P,SAAU/P,EAAK+P,SACf+H,eAEF,MAAOlkB,GAEPC,QAAQC,MAAMF,OAIpB,MAAOA,GAEPC,QAAQC,MAAMF,wCAINU,EAAKgkB,GACV9e,KAAKmT,oBAAoBrY,KAC5BkF,KAAKmT,oBAAoBrY,GAAO,IAGlCkF,KAAKmT,oBAAoBrY,GAAKkJ,KAAK8a,wCAGxB9c,GAAO,IACXlH,EAAOkH,EAAMA,MAAblH,IACFkF,KAAKmT,oBAAoBrY,KAI9BkF,KAAKmT,oBAAoBrY,GAAKD,QAAQ,SAACikB,GACrCA,EAAG9c,YAGEhC,KAAKmT,oBAAoBrY,WA3xBG6F,IAAOoe,MCXxCC,EAAc,SAACC,GAAD,OAAWA,EAAQ,IAAM5f,KAAKC,IAG5C4f,EAAa,CACjBC,EAAG,IACHC,EAAG,IACHC,EAAG,KAECC,EAAW,CACfH,EAAG,IACHC,EAAG,EACHC,EAAG,GAGgBE,cACnB,SAAAA,IAAc,IAAAlZ,EAAA,OAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAuf,IACZlZ,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAA4kB,GAAAxf,KAAAC,KAAM,CACJwK,MAAO,CACL7B,SAAS,GAEX6W,QAAS,CACPC,OAAQ,CACNC,IAAK,SAKNC,iBAAmB,GACxBtZ,EAAKuZ,oBAAqB,EAbdvZ,0EAiBZ,MAAO,CAAC,gBAAiB,iBAAkB,gBAAiB,mBAAoB,sBAAuB,QAAS,YAAa,SAAU,SAAU,qDAIjJ,MAAO,CACLwZ,UAAWlN,KAAKC,kDAKlB,OAAO,mDAGgBwH,iCAGpB5c,GACH7C,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAA4kB,EAAAhZ,WAAA,OAAAvG,MAAAD,KAAAC,KAAWxC,qCAIX7C,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAA4kB,EAAAhZ,WAAA,UAAAvG,MAAAD,KAAAC,qCAGKxC,GACL7C,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAA4kB,EAAAhZ,WAAA,SAAAvG,MAAAD,KAAAC,KAAaxC,GACbwC,KAAK8f,MAAQ9f,KAAK+f,YAAYviB,EAAOwiB,YAAc,EAAGxiB,EAAOyiB,OAAS,EAAGziB,EAAO0iB,iBAAmB,GAAI1iB,EAAO2iB,iBAAmB,IACjIngB,KAAKogB,IAAMpgB,KAAKqgB,YAEhBrgB,KAAKsgB,eAELtgB,KAAKugB,mDAIL,OAAOvgB,KAAK8f,OAAS9f,KAAK8f,MAAM5E,0CAGtBzP,EAAOwU,EAAOC,EAAiBC,GAAiB,IAAAvZ,EAAA5G,KACtD2E,EAAK3E,KAAKwgB,WAAW/U,GACX,IAAVA,GAAewU,IACjBtb,GAAM,KAGR,IAAMmb,EAAKnlB,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAA4kB,EAAAhZ,WAAA,cAAAvG,MAAAD,KAAAC,KAAqB2E,GAE1B8b,EAAaX,EAAMY,OAAOC,MAC1BC,EAAad,EAAMY,OAAOG,MAChCf,EAAME,WAAavU,EACnBqU,EAAMG,MAAQA,EACdH,EAAMgB,QAAU9gB,KAAKwf,QAAQ3f,IAAIkhB,QACjCjB,EAAMkB,OAANrmB,OAAAoP,EAAA,EAAApP,CAAmB8lB,EAAWQ,SAC9BnB,EAAMoB,WAAa,EACnBpB,EAAMqB,aAAerB,EAAMkB,OAAOlB,EAAMoB,YACxCpB,EAAMsB,QAANzmB,OAAAoP,EAAA,EAAApP,CAAoBmlB,EAAMY,OAAOW,OAAOJ,SACxCnB,EAAMwB,aAAe,GACrBxB,EAAMyB,OAAS,GACfzB,EAAMI,gBAAkBA,EACxBJ,EAAMK,gBAAkBA,GAEvBD,EAAgBzU,IAAU,IAAI5Q,QAAQ,SAAAkC,GAEjC,IADJ+B,EACI/B,EADJ+B,EAAGC,EACChC,EADDgC,EAAGkgB,EACFliB,EADEkiB,MAAOuC,EACTzkB,EADSykB,WAAYC,EACrB1kB,EADqB0kB,OAAQC,EAC7B3kB,EAD6B2kB,QAE3Bf,EAAQF,EAAWM,MAAMY,OAAO7iB,EAAGC,EAAGyiB,GAC5Cb,EAAM1B,MAAQA,EACd0B,EAAMc,OAASA,EACfd,EAAMiB,QAAUjB,EAAMkB,OAAQ,EAC9BlB,EAAMe,QAAUA,EAChB9a,EAAKkb,YAAYnB,GACjBb,EAAMkB,OAAOhd,KAAK2c,GAClBA,EAAMoB,MAAM3G,KAAZ,GAAA1hB,OAAoBinB,EAAMqB,QAAQlnB,IAAlC,WAGDqlB,EAAgB1U,IAAU,IAAI5Q,QAAQ,SAAAmC,GAEjC,IADJ8B,EACI9B,EADJ8B,EAAGC,EACC/B,EADD+B,EAAGkgB,EACFjiB,EADEiiB,MAAOuC,EACTxkB,EADSwkB,WAAYI,EACrB5kB,EADqB4kB,QAEnBf,EAAQD,EAAWG,MAAMY,OAAO7iB,EAAGC,EAAGyiB,GAC5CX,EAAM5B,MAAQA,EACd4B,EAAMe,QAAUA,EAChB9B,EAAMyB,OAAOvd,KAAK6c,KAGpB,IAAMoB,EAAOnC,EAAMoC,WAAWC,EAAE,GA5C0BC,EA6CxCpiB,KAAKqiB,2BAA2BJ,EAAKnjB,EAAGmjB,EAAKljB,GAAtDujB,EA7CiD3nB,OAAA+Q,EAAA,EAAA/Q,CAAAynB,EAAA,MA8C1DtC,EAAMyC,UAAYD,EAGlB,IADA,IAAME,EAAY,GACTjgB,EAAI,EAAGA,EAzHP,EAyHiBA,GAAK,EAC7BigB,EAAUxe,MAAM,KAGlB8b,EAAMkB,OAAOnmB,QAAQ,SAAC8lB,GACpB/Z,EAAK6b,cAAc9B,GACnBA,EAAM+B,qBAAuB,IAC7B/B,EAAMgC,WAAa,EACnBhC,EAAMiC,OAAS,EACfjC,EAAMkC,KAAO,EACblC,EAAMc,OAASd,EAAMc,QAAU,EAC/Bd,EAAMmC,qBAAuB,GAC7BnC,EAAMoC,aAAN,GAAArpB,OAAyB8oB,GACzB7B,EAAMqC,MAAQhE,EAAY2B,EAAM1B,MAAQ,KACxC0B,EAAMsC,SAAS,MAGjBnD,EAAMsB,QAAQvmB,QAAQ,SAACwmB,GAErBA,EAAOqB,qBAAuB,IAE9BrB,EAAOsB,WAAa,EACpBtB,EAAO0B,aAAeP,EAAUlN,IAAI,SAAC4N,GAAD,OAAOtc,EAAKuc,YAAY,WAAY,IAAM,OAE9E,IAAMC,EAAO/B,EAAOgC,MAAM,GACtBD,EAAKE,cACPjC,EAAOpC,OAAS,IAEdmE,EAAKG,aACPlC,EAAOpC,OAAS,IAElBoC,EAAO4B,SAAS,KAGlBnD,EAAMyB,OAAO1mB,QAAQ,SAACgmB,GACpBja,EAAK4c,WAAW3C,GAAO,GACvBA,EAAMoC,SAAS,KAGjBnD,EAAMY,OAAOuB,KAAKhB,QAAQpmB,QAAQ,SAAA8C,GAAa,IAAX0lB,EAAW1lB,EAAX0lB,MAC3BI,EADsC9oB,OAAA+Q,EAAA,EAAA/Q,CACjC0oB,EADiC,MAEvCK,EAAS,GAAMC,SAASF,EAAEG,MAAO,IAAM,GAC7CP,EAAMxoB,QAAQ,SAACuoB,GACbA,EAAKzgB,MAAM5G,MAAQ2nB,EACnBN,EAAKzgB,MAAMsgB,SAAS,SA7FkC,IAiGnD1Q,EAAyBvS,KAAzBuS,UAAWC,EAAcxS,KAAdwS,WAoBlB,OAlBAsN,EAAMY,OAAOmD,QAAQ5C,QAAQpmB,QAAQ,SAAA+C,GAAaA,EAAXylB,MAC/BxoB,QAAQ,SAACuoB,GAAS,IAAAU,EACPld,EAAKyb,2BAA2Be,EAAKtkB,EAAGskB,EAAKrkB,GADtCglB,EAAAppB,OAAA+Q,EAAA,EAAA/Q,CAAAmpB,EAAA,GACfhlB,EADeilB,EAAA,GACZhlB,EADYglB,EAAA,GAEtBnd,EAAKod,eACH,kBACA,CACExgB,OAAQ,CAAChC,KAAM,GAAIoE,KAAM,IACzB9G,EAAG,CAAC0C,IAAK1C,EAAG8G,IAAK9G,EAAIyT,GACrBxT,EAAGA,EAAIyT,EACPzP,cAAe,GACfU,KAAM,CAAC,SACPW,MAAO,SAAClC,EAAW1B,GACjB0B,EAAU+gB,SAAS,WAMtBnD,qCAGEe,EAAOoD,GAChBpD,EAAMiC,qBAAuB,4CAGd,IACRhD,EAAe9f,KAAf8f,MAAOje,EAAQ7B,KAAR6B,KACP0gB,EAAazC,EAAbyC,UACA3P,EAAO/Q,EAAP+Q,IAEDsR,EAAc/jB,YAAK,gBACnBgkB,EAAmBhkB,YAAK,0BAC1BikB,EAAQ,EACZtE,EAAMkB,OAAOnmB,QAAQ,SAAC8lB,GAIpB,GAHAA,EAAMyD,MAAQ/kB,KAAKuG,IAAI,EAAGue,GAAoBD,EAAcvD,EAAMc,SAG9Dd,EAAMiB,QAAS,CACjB,IAAM3B,EAAK5gB,KAAAglB,IAAGhlB,KAAKuG,IAAI,EAAG+a,EAAM5hB,EAAIwjB,GAAcpiB,YAAK,uBACvDwgB,EAAMyD,OAASjkB,YAAK,wBAA0B8f,EAE1CU,EAAMe,UACRf,EAAMyD,OAAS,GAInBzD,EAAMyD,MAAQ/kB,KAAKilB,MAAM3D,EAAMyD,OAE/BA,GAASzD,EAAMyD,QAGjBA,EAAQ/kB,KAAKuG,IAAI,EAAGwe,GAEpB,IAAMG,EAAyC,IAA7BzE,EAAM0E,YAAcJ,GAAuB,GAARA,EAC/CK,EAAW3E,EAAM0E,WAEnBnlB,KAAKilB,MAAMC,KAAcllB,KAAKilB,MAAMG,KACtC3E,EAAM4E,cAAgB9R,GAGxB,IAAI+R,EAAS,KAcb,OAbI/R,EAAMkN,EAAM4E,cAAgB,IAC9BC,EAAS,KACAJ,EAAWE,GACpBE,GAAS,EACT7E,EAAM8E,YAAa,GACVL,EAAWE,GACpBE,GAAS,EACT7E,EAAM8E,YAAa,GAEnBD,EAAS7E,EAAM8E,WAGjB9E,EAAM0E,WAAaD,EACZ,eAAA7qB,OAAe6qB,EAAS3L,QAAQ,IAAM+L,EAAQtlB,KAAKilB,MAAMF,0CAGpD,IACLhE,EAAyBpgB,KAAzBogB,IAAKN,EAAoB9f,KAApB8f,MACL+E,GADyB7kB,KAAbuS,UACuB6N,EAAnCyE,aAAaC,EAAsB1E,EAAtB0E,QAASC,EAAa3E,EAAb2E,UAFjBC,EAIWhlB,KAAKilB,iBAJhBC,EAAAvqB,OAAA+Q,EAAA,EAAA/Q,CAAAqqB,EAAA,GAILG,EAJKD,EAAA,GAICP,EAJDO,EAAA,GASZ,GAJAL,EAAYM,KAAOL,EAAQK,KAAOJ,EAAUI,KAAOA,EAEnDN,EAAY9oB,MAAQ+oB,EAAQ/oB,MAAQgpB,EAAUhpB,MAAQ,GAElDiE,KAAK8f,MAAMsF,aAAf,CAIA,IAAe,IAAXT,EAAiB,CACnBG,EAAQ/oB,MAAQ,EADG,IAGZ6W,EAAO5S,KAAK6B,KAAZ+Q,MACFkN,EAAMuF,eAAiBzS,EAAMkN,EAAMuF,iBACtCvF,EAAMuF,cAAgBzS,EAAM5S,KAAKmjB,YAAY,QAAS,IAAK,KAC3DnjB,KAAKslB,UAAU,eAEG,IAAXX,EACTI,EAAUhpB,MAAQ,EAElB8oB,EAAY9oB,MAAQ,EAGtB+jB,EAAMkB,OAAOnmB,QAAQ,SAAAsD,GAEf,IADJonB,EACIpnB,EADJonB,aAAczmB,EACVX,EADUW,EAAGC,EACbZ,EADaY,EAAGqlB,EAChBjmB,EADgBimB,MAEhBmB,IACFA,EAAaJ,KAAb,IAAAzrB,OAAwB0qB,GACxBmB,EAAazmB,EAAIA,EAAIymB,EAAalT,MAAQ,EAC1CkT,EAAaxmB,EAAIA,uCAKdomB,GAAgC,IAA1B/mB,EAA0B5D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAhB,GAAIgrB,EAAYhrB,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACvCsF,KAAKylB,MAAMD,GAAcxlB,KAAK8f,MAAMqB,aAAariB,EAAGkB,KAAK8f,MAAMqB,aAAapiB,EAAsB,EAAlBiB,KAAKwS,WAAgB2S,EAArGxqB,OAAAkP,EAAA,EAAAlP,CAAA,GACKyD,wCAKL,IAAMgiB,EAAM,GADFsF,EAGU1lB,KAAKilB,iBAAlBU,EAHGhrB,OAAA+Q,EAAA,EAAA/Q,CAAA+qB,EAAA,MAQJb,EAAczE,EAAIyE,YAAc7kB,KAAKmlB,KAH5B,GACA,GAEiDQ,EAAW,CAACC,MAAO,uBACnFf,EAAYgB,gBAAgB,GAC5BhB,EAAY5B,SAAS,KAErB,IAAM6B,EAAU1E,EAAI0E,QAAU9kB,KAAKmlB,KAPpB,GACA,GAMyCQ,EAAW,CAACC,MAAO,mBAC3Ed,EAAQe,gBAAgB,GACxBf,EAAQ7B,SAAS,KAEjB,IAAM8B,EAAY3E,EAAI2E,UAAY/kB,KAAKmlB,KAXxB,GACA,GAU6CQ,EAAW,CAACC,MAAO,mBAI/E,OAHAb,EAAUc,gBAAgB,GAC1Bd,EAAU9B,SAAS,KAEZ7C,sCAGiD,IAAhDO,EAAgDnmB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxCwF,KAAK8f,MAAMqB,aAAc2E,EAAetrB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACjDslB,EAAe9f,KAAf8f,MAAOje,EAAQ7B,KAAR6B,KACPkkB,EAAiBjG,EAAjBiG,cACAnT,EAAO/Q,EAAP+Q,IAEP,GAAK+N,EAAL,CAIA,IAAKmF,EAAO,CACV,GAAIC,EACF,OAGF,GAAIpF,EAAMiB,QACR,OAGF,GAAIjB,EAAM+B,oBAAsB9P,EAC9B,OAIJ5S,KAAKslB,UAAU,eAEf3E,EAAM+B,oBAAsB9P,EAAMzS,YAAK,wBAzBiB,IAAA6lB,EA0BzChmB,KAAKimB,gBAAgBtF,EAAOxgB,YAAK,wBA1BQ+lB,EAAAvrB,OAAA+Q,EAAA,EAAA/Q,CAAAqrB,EAAA,GA0BjDlnB,EA1BiDonB,EAAA,GA0B9CnnB,EA1B8CmnB,EAAA,GA2BxDlmB,KAAKmmB,UAAUrnB,EAAI6hB,EAAMyF,QAAQ/T,MAAQ,EAAGtT,EAAI4hB,EAAMyF,QAAQ9T,OAAS,GACvEqO,EAAMyF,QAAQrE,MAAM3G,KAAK,0BAA0B,GACnDuF,EAAMyF,QAAQC,eAAgB,yCAI1BrmB,KAAK8f,MAAMwG,YAIftmB,KAAKumB,MAAMvmB,KAAK8f,MAAMqB,aAAc,KAAM9hB,KAAKC,GAAK,GAAG,sCAG9C,IAEF6hB,EADSnhB,KAAT8f,MACAqB,aAEPnhB,KAAK8f,MAAM0G,UAAW,EACtBxmB,KAAKymB,UAAUtF,GAAc,GAC7BnhB,KAAK0mB,cAAgB,0CAGVC,EAAShhB,EAAMqd,GAAO,IAC1BlD,EAAS9f,KAAT8f,MACAhhB,EAAQ6nB,EAAR7nB,EAAGC,EAAK4nB,EAAL5nB,EAEJ6nB,EAAS9G,EAAMgB,QAAQa,OAAO7iB,EAAGC,EAAxB,SAAArF,OAAoCiM,IACnDihB,EAAOD,QAAUA,EACjB,IAAMrjB,EAAQnD,YAAI,OAAAzG,OAAQiM,EAAR,WAElBihB,EAAO3H,MAjXS,SAAC+D,GAAD,OAAWA,EAAQ3jB,KAAKC,GAAK,IAiX9BunB,CAAY7D,GAAS,GACpC,IAAM8D,EAAKxjB,EAAQjE,KAAK0nB,IAAI/D,GACtBgE,EAAK1jB,EAAQjE,KAAK4nB,IAAIjE,GAU5B,OARA4D,EAAOM,YAAYJ,EAAIE,GAEvBJ,EAAO7E,MAAM3G,KAAK,WAElBpb,KAAK8W,MAAM,WACT8P,EAAO/nB,WACN,KAEI+nB,gCAGHO,EAAQnE,EAAOoE,EAAUC,GAAU,IAAAvd,EAAA9J,KAChC8f,EAAe9f,KAAf8f,MACAlN,EADe5S,KAAR6B,KACP+Q,IAEP,GAAKuU,IAIDrH,EAAMwH,iBAINH,EAAOvF,QAAX,CAZuC,IAgBhCe,EAA4BwE,EAA5BxE,WAAYI,EAAgBoE,EAAhBpE,aAEnB,KAAIA,EAAaJ,GAAc/P,GAA/B,CAIA,IAAM6Q,EAAc,OAAVT,EAAiBmE,EAAOnE,MAAQ3jB,KAAKC,GAAK,EAAI0jB,EACpDzZ,EAAWpJ,YAAI,OAAAzG,OAAQipB,EAAR,cACnB,GAAI0E,EACFF,EAAOI,QAAQ,UACfhe,GAAYvJ,KAAKmjB,YAAY,kBAAmB,EAAG,GACnDnjB,KAAKwnB,aAAa,IAAK,IAAK,IAAK,SAACC,GAChCN,EAAOO,SAAS,EAAKD,EAAS,EAAI,EAAKA,EAAS,IAC/C,WACD3d,EAAK6d,aAAaR,EAAQA,EAAOxE,WAAYc,EAAI3Z,EAAKqZ,YAAY,kBAAmBiE,EAAW,EAAGA,EAAW,KAC7G,aAAU,aAAU,EAAG,eAAgB,qBACrC,CACL,IAAMQ,EAASznB,YAAI,OAAAzG,OAAQipB,EAAR,YACnBwE,EAAOU,aAAaV,EAAOhoB,KAAK2oB,SAAShpB,EAAI8oB,GAAUvoB,KAAK0nB,IAAItD,IAChE0D,EAAOY,aAAaZ,EAAOhoB,KAAK2oB,SAAS/oB,EAAI6oB,GAAUvoB,KAAK4nB,IAAIxD,IAChEzjB,KAAKslB,UAAU,QAAS,GAExB,EAAE,EAAG,EAAG,GAAGzqB,QAAQ,SAACmtB,GAClBle,EAAK6d,aAAaR,EAAQA,EAAOxE,WAAYc,EAAIuE,EAASZ,KAI9DrE,EAAaJ,GAAc/P,EAAMrJ,4CAGnB,IACPuW,EAAS9f,KAAT8f,MACAoB,EAA+BpB,EAA/BoB,WAAY+G,EAAmBnI,EAAnBmI,gBAEnBjoB,KAAKslB,UAAU,UACfxF,EAAMoI,eAAiB,KACvBpI,EAAMwH,gBAAiB,EACvBxH,EAAMqB,aAAe8G,EAAgB/G,GAErCpB,EAAMqB,aAAaY,MAAM3G,KAAzB,GAAA1hB,OAAiComB,EAAMqB,aAAaa,QAAQlnB,IAA5D,YAEAkF,KAAKmoB,aAAarI,EAAMqB,mDAGbgG,GAAQ,IACZlJ,EAAUje,KAAVie,OAEHmK,GAAc,EAOlB,GANKpoB,KAAK0mB,gBACR0B,GAAc,GAGhBpoB,KAAK0mB,cAAgBS,EAEjBiB,EAAa,CACf,IAAMC,EAAMroB,KAAKsoB,iBACjB,IAAKD,EACH,OAHa,IAAAE,EAAA5tB,OAAA+Q,EAAA,EAAA/Q,CAMoB0tB,EANpB,GAMdpK,EAAOuK,QANOD,EAAA,GAMEtK,EAAOwK,QANTF,EAAA,6CAUF,IACRtK,EAAyBje,KAAzBie,OAAQyI,EAAiB1mB,KAAjB0mB,cAEf,IAAKA,EACH,OAAO,KAGT,IAAMgC,EAAUzK,EAAO5L,MAAQ,EACzBsW,EAAU1K,EAAO3L,OAAS,EAK5B3W,EAHO+qB,EAAc5nB,EAGX4pB,EACV7sB,EAHO6qB,EAAc3nB,EAGX4pB,EAOd,OALIjC,EAAc1D,QAChBrnB,GAAM+sB,EAAU,GAAKrpB,KAAK4nB,IAAIP,EAAc1D,OAC5CnnB,GAAM8sB,EAAU,EAAItpB,KAAK0nB,IAAIL,EAAc1D,QAGtC,CAACrnB,EAAIE,wCAGDgG,EAAMwM,GAAI,IACd4P,EAAUje,KAAVie,OACDoK,EAAMroB,KAAKsoB,iBACjB,GAAY,OAARD,EAAJ,CAHqB,IAAAO,EAAAjuB,OAAA+Q,EAAA,EAAA/Q,CAON0tB,EAPM,GAOdvpB,EAPc8pB,EAAA,GAOX7pB,EAPW6pB,EAAA,GAQfC,EAAO1oB,YAAK,qBAClB8d,EAAOuK,QAAUvK,EAAOuK,SAAW,EAAIK,GAAQ/pB,EAAI+pB,EACnD5K,EAAOwK,QAAUxK,EAAOwK,SAAW,EAAII,GAAQ9pB,EAAI8pB,yCAGvClI,GACZ,IAAMyF,EAAUzF,EAAMyF,QAAUpmB,KAAKwf,QAAQ3f,IAAIipB,OAAOnI,EAAM7hB,EAAG6hB,EAAM5hB,EAAG,WAE1E,OADAqnB,EAAQrqB,MAAQ,EACTqqB,yCAGM,IAAA7b,EAAAvK,KACN8f,EAAkB9f,KAAlB8f,MAAON,EAAWxf,KAAXwf,QACPkB,EAAmBZ,EAAnBY,OAAQI,EAAWhB,EAAXgB,QAEbiI,EACErI,EADFqI,KAAM9G,EACJvB,EADIuB,KAAMtB,EACVD,EADUC,MAAOkD,EACjBnD,EADiBmD,QAASxC,EAC1BX,EAD0BW,OAAQ2H,EAClCtI,EADkCsI,KAAMnI,EACxCH,EADwCG,MAG5CrB,EAAQ3f,IAAIopB,SAAStI,EAAMI,MAAOgI,EAAKhI,MAAO,KAAM,kBAAaxW,EAAK2e,iBAALtqB,MAAA2L,EAAI/P,aACrEglB,EAAQ3f,IAAIopB,SAAStI,EAAMI,MAAOJ,EAAMI,MAAO,KAAM,kBAAaxW,EAAK4e,kBAALvqB,MAAA2L,EAAI/P,aACtEglB,EAAQ3f,IAAIopB,SAAStI,EAAMI,MAAOM,EAAON,MAAO,KAAM,kBAAaxW,EAAK6e,mBAALxqB,MAAA2L,EAAI/P,aACvEglB,EAAQ3f,IAAIwpB,QAAQ1I,EAAMI,MAAOD,EAAS,KAAM,kBAAavW,EAAK+e,mBAAL1qB,MAAA2L,EAAI/P,aACjEglB,EAAQ3f,IAAIwpB,QAAQ1I,EAAMI,MAAOkB,EAAKlB,MAAO,KAAM,kBAAaxW,EAAKgf,iBAAL3qB,MAAA2L,EAAI/P,aACpEglB,EAAQ3f,IAAIwpB,QAAQ1I,EAAMI,MAAO8C,EAAQ9C,MAAO,KAAM,kBAAaxW,EAAKif,oBAAL5qB,MAAA2L,EAAI/P,aACvEglB,EAAQ3f,IAAIwpB,QAAQhI,EAAON,MAAOD,EAAS,KAAM,kBAAavW,EAAKkf,oBAAL7qB,MAAA2L,EAAI/P,aAClEglB,EAAQ3f,IAAIwpB,QAAQvI,EAASmB,EAAKlB,MAAO,KAAM,kBAAaxW,EAAKmf,kBAAL9qB,MAAA2L,EAAI/P,aAEhEglB,EAAQ3f,IAAIwpB,QAAQ1I,EAAMI,MAAOiI,EAAKjI,MAAO,KAAM,kBAAaxW,EAAKof,iBAAL/qB,MAAA2L,EAAI/P,aACpEglB,EAAQ3f,IAAIwpB,QAAQL,EAAKjI,MAAOD,EAAS,KAAM,kBAAavW,EAAKqf,kBAALhrB,MAAA2L,EAAI/P,aAEhEglB,EAAQ3f,IAAIopB,SAASpI,EAAME,MAAOF,EAAME,OACxCvB,EAAQ3f,IAAIopB,SAASpI,EAAME,MAAOgI,EAAKhI,OACvCvB,EAAQ3f,IAAIopB,SAAStI,EAAMI,MAAOF,EAAME,MAAO,KAAM,kBAAaxW,EAAKsf,kBAALjrB,MAAA2L,EAAI/P,aACtEglB,EAAQ3f,IAAIopB,SAASD,EAAKjI,MAAOF,EAAME,MAAO,KAAM,kBAAaxW,EAAKuf,iBAALlrB,MAAA2L,EAAI/P,aACrEglB,EAAQ3f,IAAIopB,SAASpI,EAAME,MAAOM,EAAON,OACzCvB,EAAQ3f,IAAIwpB,QAAQxI,EAAME,MAAOkB,EAAKlB,MAAO,KAAM,kBAAaxW,EAAKwf,iBAALnrB,MAAA2L,EAAI/P,sDAGrDmmB,EAAOqI,GACjBhpB,KAAKgqB,YAAYrJ,EAAOxgB,YAAK,kBAChCH,KAAKslB,UAAU,WAEjBtlB,KAAKiqB,QAAQjB,EAAKlqB,EAAGkqB,EAAKjqB,GAC1BiqB,EAAKnqB,0CAGCC,EAAGC,GAAG,IAAAqM,EAAApL,KACZA,KAAKmmB,UAAUrnB,EAAGC,GAClBiB,KAAKgkB,eACH,kBACA,CACEllB,IACAC,IACA5C,OAAQ,CAACqF,IAAK,IAAMoE,IAAK,IACzBvJ,OAAQ,CAACmF,IAAK,IAAMoE,IAAK,IACzB5C,UAAW,SACXjH,MAAO,CAACsF,MAAO,EAAGC,IAAK,GACvBgC,MAAO,CAAC9B,IAAK,GAAIoE,IAAK,KACtB7C,cAAe,CAACvB,IAAK,IAAKoE,IAAK,KAC/BnC,KAAM,CAAC,SAAU,SAAU,UAC3BN,SAAU,GACVN,SAAU,IACVuB,MAAO,SAAClC,EAAW1B,GACjB4K,EAAK0L,MAAM,WACTtW,EAAQ0pB,QACP,iDAMMlB,EAAMnI,GACrB7gB,KAAKslB,UAAU,WACftlB,KAAKiqB,QAAQjB,EAAKlqB,EAAGkqB,EAAKjqB,GAC1BiqB,EAAKnqB,UACLmB,KAAKiqB,QAAQpJ,EAAM/hB,EAAG+hB,EAAM9hB,GAC5B8hB,EAAMhiB,oDAGUmqB,EAAMpC,GACtB5mB,KAAKiqB,QAAQjB,EAAKlqB,EAAGkqB,EAAKjqB,GAC1BiqB,EAAKnqB,UACL+nB,EAAO/nB,UACPmB,KAAKslB,UAAU,oDAGA3E,EAAOsB,GAClBtB,EAAMiB,UAIW,IAAjBjB,EAAMc,SACHzhB,KAAK8f,MAAMsF,cACdplB,KAAKylB,MAAM9E,EAAO,WAAY,CAACiF,MAAO,mBAAoBngB,SAAU,KAEtEkb,EAAMe,SAAU,GAGlBf,EAAMiB,SAAU,EAEZjB,IAAU3gB,KAAK8f,MAAMqB,cACvBnhB,KAAKslB,UAAU,OAAQ,EAAG,KAG5BtlB,KAAK8hB,YAAYnB,6CAGFE,EAAOoB,GAClBpB,EAAMe,UAIVf,EAAMe,SAAU,uCAGNjB,GACV,IAAK3gB,KAAK8f,MAAMsF,aAAc,CAC5B,IAAMQ,EAAQjF,EAAMe,QAAU,mBAAqB,iBACnDf,EAAM4E,aAAevlB,KAAKmlB,KAAKxE,EAAM7hB,EAAG6hB,EAAM5hB,EAAG,KAAM,CAAC6mB,QAAOngB,SAAU,KACzEkb,EAAM4E,aAAatC,SAAS,gDAId2D,EAAQ3E,GACxB2E,EAAO/nB,sDAGW8hB,EAAOkD,GACrBlD,EAAMwJ,UAIVxJ,EAAMwJ,SAAU,8CAIhB,IAAIC,EACJpqB,KAAKqqB,SAAS/nB,KAAKzH,QAAQ,SAACyvB,GACP,SAAfA,EAAM3kB,MAAmB2kB,EAAMnF,KAAKxH,MAAM,iBAC5CyM,EAAeE,KAIfF,IACFA,EAAaruB,MAAQ,EACrBquB,EAAanH,SAAS,4CAIV,IAAAjW,EAAAhN,KACdA,KAAK8W,MAAM,WACT9J,EAAKud,UAAU,IACd,4CAGuB,IAAA9c,EAAAzN,KAAfiH,EAAezM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAI1BwF,KAAKmoB,aAAa,MAElB,IAAMqC,EAAQxqB,KAAKH,IAAI8C,MAAM0P,IAAWC,IAAiB,SACzDkY,EAAMzuB,MAAQ,EACdyuB,EAAM3E,gBAAgB,GACtB2E,EAAMvH,SAAS,KACfjjB,KAAKF,MAAM,wBAAyB0qB,GAEpCxqB,KAAK8W,MAAM,WACTrJ,EAAKgd,mBAEL,IAAMC,EAAYjd,EAAK5N,IAAI8C,MAAM0P,IAAWC,IAAY,aACxDoY,EAAUC,QAAQ,EAAG,EAAG,EAdX,KAebD,EAAU7E,gBAAgB,GAC1B6E,EAAUzH,SAAS,QACnBxV,EAAK3N,MAAM,4BAA6B4qB,GACxCjd,EAAKmd,aACHzqB,YAAK,sCACL,SAACsnB,GACCiD,EAAUC,QAAQ,EAAG,EAtBb,IAsBwBlD,EArBvB,OAyBbha,EAAKqJ,MAAM,WACT,IAAMjd,EAAO4T,EAAK0X,KAAK,IAAK,IAAK,cAAe,CAC9C1f,SAAU,GAAImgB,MAAO,YAEvB/rB,EAAKkC,MAAQ,EACblC,EAAKgsB,gBAAgB,GACrBhsB,EAAKopB,SAAS,QACdxV,EAAK3N,MAAM,uBAAwBjG,GAEnC4T,EAAKqJ,MAAM,WACTrJ,EAAKod,iBACJ5jB,EAAQ,IAAQ9G,YAAK,mCACvB8G,EAAQ,IAAO9G,YAAK,wCACtB8G,EAAQ,IAAO9G,YAAK,wEAGZwgB,GAAO,IAAA/S,EAAA5N,KACX8f,EAAS9f,KAAT8f,MACDc,EAAad,EAAMY,OAAOG,MAE1BiK,EAAYnK,IAAUb,EAAMqB,aAIlC,GAFArB,EAAMkB,OAASlB,EAAMkB,OAAOvU,OAAO,SAACpM,GAAD,OAAOA,IAAMsgB,IAE5CA,EAAMyF,QAAQjL,MAAO,CACvB,IACEwF,EAAMyF,QAAQjL,MAAMtc,UACpB,MAAOzE,IAETumB,EAAMyF,QAAQjL,MAAQ,KAbN,IAgBXrc,EAAe6hB,EAAf7hB,EAAGC,EAAY4hB,EAAZ5hB,EAAGkgB,EAAS0B,EAAT1B,MACP4B,EAAQD,EAAWG,MAAMY,OAAO7iB,EAAGC,EAAG,SAC5C8hB,EAAM5B,MAAQA,EACda,EAAMyB,OAAOvd,KAAK6c,GAClB7gB,KAAKwjB,WAAW3C,GAAO,GAEvBA,EAAM1hB,KAAK0oB,aAAqC,GAAxBlH,EAAMxhB,KAAK2oB,SAAShpB,GAC5C+hB,EAAM1hB,KAAK4oB,aAAqC,GAAxBpH,EAAMxhB,KAAK2oB,SAAS/oB,GAE5CiB,KAAKiqB,QAAQnrB,EAAGC,GAChB4hB,EAAMyF,QAAQvnB,UACd8hB,EAAM9hB,UACNmB,KAAKslB,UAAU,WAEXwF,IACFhL,EAAMqB,aAAe,KACrBnhB,KAAK8W,MAAM,WACTlJ,EAAK2S,gBACJ,0CAIK4G,GAAwB,IAAhB3rB,EAAgBhB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,IACzB2sB,EAAO4D,aACT5D,EAAO4D,YAAYb,OAErB/C,EAAO4D,YAAc/qB,KAAK4qB,aACxBpvB,EACA,SAACisB,GACC,IAAMhkB,EAAO9C,IAAOqqB,QAAQC,MAAMC,YAAYC,eAAejM,EAAYI,EAAU,EAAG,EAAImI,GACnF7B,EAASjlB,IAAOqqB,QAAQC,MAAMG,cAAc3nB,GAA5CmiB,MACPuB,EAAOI,QAAQ3B,yCAKTjF,EAAO+C,GACjB,OAAI1jB,KAAK8f,MAAMuL,WAIX1K,EAAMiB,SACR5hB,KAAKslB,UAAU,WAAY,IACpB,IAGT3E,EAAMc,QAAUiC,EACZ/C,IAAU3gB,KAAK8f,MAAMqB,cACvBnhB,KAAKsrB,OAAO3K,EAAMc,OAASthB,YAAK,iBAGlCH,KAAK+qB,YAAYpK,GAEbA,EAAMc,QAAUthB,YAAK,iBACvBH,KAAKurB,aAAa5K,IACX,IAEP3gB,KAAKslB,UAAU,WAAY,IACpB,gDAIQ3E,EAAOiG,GACxB,GAAIA,EAAOD,UAAYhG,EAAvB,CAIA,IAAMc,EAASthB,YAAK,sBAAwBH,KAAKmjB,YAAY,SAAU,EAAG,GAC1EnjB,KAAKgqB,YAAYrJ,EAAOc,GACxBmF,EAAO/nB,uDAGWwiB,EAAQuF,GACtBA,EAAOD,UAAYtF,IAIvBA,EAAO0B,aAAa1B,EAAOsB,aAAe,IAC1CtB,EAAOkG,QAAQ,UAEfvnB,KAAKslB,UAAU,aACfsB,EAAO/nB,oDAGQ8hB,EAAOoI,GAAM,IACrBnW,EAAO5S,KAAK6B,KAAZ+Q,IAEP,IAAI+N,EAAMiB,QAAV,CAIA,IACMH,EAASthB,YAAK,uBAAyBH,KAAKmjB,YAAY,SAAU,EAAG,GACvEvQ,GAAO+N,EAAMmC,qBAAqBiG,MAAQ,KAC5C/oB,KAAKgqB,YAAYrJ,EAAOc,GACxBd,EAAMmC,qBAAqBiG,KAAOnW,EAJnB,gDAWD4Y,EAAQC,GAAQ,IACzB7Y,EAAO5S,KAAK6B,KAAZ+Q,IAGD6O,EAASthB,YAAK,uBAAyBH,KAAKmjB,YAAY,SAAU,EAAG,IACvEvQ,GAAO4Y,EAAO1I,qBAAqB2I,IAAW,IAAM7Y,GAAO6Y,EAAO3I,qBAAqB0I,IAAW,MACpGxrB,KAAKgqB,YAAYwB,EAAQ/J,GACzBzhB,KAAKgqB,YAAYyB,EAAQhK,GACzB+J,EAAO1I,qBAAqB2I,GAAU7Y,EALvB,IAMf6Y,EAAO3I,qBAAqB0I,GAAU5Y,EANvB,KAWjB,IAAMqM,EAAQ5f,KAAKqsB,MAAMD,EAAO1sB,EAAIysB,EAAOzsB,EAAG0sB,EAAO3sB,EAAI0sB,EAAO1sB,GAE5D2sB,EAAOtsB,OACTssB,EAAO5D,aAAa4D,EAAOtsB,KAAK2oB,SAAShpB,EAF5B,IAEyCO,KAAK0nB,IAAI9H,IAC/DwM,EAAO1D,aAAa0D,EAAOtsB,KAAK2oB,SAAS/oB,EAH5B,IAGyCM,KAAK4nB,IAAIhI,KAE7DuM,EAAOrsB,OACTqsB,EAAO3D,aAAa2D,EAAOrsB,KAAK2oB,SAAShpB,EAN5B,KAM0CO,KAAK0nB,IAAI9H,IAChEuM,EAAOzD,aAAayD,EAAOrsB,KAAK2oB,SAAS/oB,EAP5B,KAO0CM,KAAK4nB,IAAIhI,+CAIlD0B,EAAOE,GAAO,IACvBjO,EAAO5S,KAAK6B,KAAZ+Q,IAGD6O,EAASthB,YAAK,uBAAyBH,KAAKmjB,YAAY,SAAU,EAAG,IACvEvQ,GAAO+N,EAAMmC,qBAAqBjC,IAAU,IAAMjO,GAAOiO,EAAMiC,qBAAqBnC,IAAU,MAChG3gB,KAAKgqB,YAAYrJ,EAAOc,GACxBd,EAAMmC,qBAAqBjC,GAASjO,EAJrB,IAKfiO,EAAMiC,qBAAqBnC,GAAS/N,EALrB,KAUjB,IAAMqM,EAAQ5f,KAAKqsB,MAAM7K,EAAM9hB,EAAI4hB,EAAM5hB,EAAG8hB,EAAM/hB,EAAI6hB,EAAM7hB,GAExD+hB,EAAM1hB,OACR0hB,EAAMgH,aAAahH,EAAM1hB,KAAK2oB,SAAShpB,EAF1B,IAEuCO,KAAK0nB,IAAI9H,IAC7D4B,EAAMkH,aAAalH,EAAM1hB,KAAK2oB,SAAS/oB,EAH1B,IAGuCM,KAAK4nB,IAAIhI,KAE3D0B,EAAMxhB,OACRwhB,EAAMkH,aAAalH,EAAMxhB,KAAK2oB,SAAShpB,EAN1B,KAMwCO,KAAK0nB,IAAI9H,IAC9D0B,EAAMoH,aAAapH,EAAMxhB,KAAK2oB,SAAS/oB,EAP1B,KAOwCM,KAAK4nB,IAAIhI,gDAI/C0B,EAAOU,GAAQ,IACzBzO,EAAO5S,KAAK6B,KAAZ+Q,IAGD6O,EAASthB,YAAK,uBAAyBH,KAAKmjB,YAAY,SAAU,EAAG,GACvEvQ,GAAO+N,EAAMmC,qBAAqBzB,IAAW,KAC/CrhB,KAAKgqB,YAAYrJ,EAAOc,GACxBd,EAAMmC,qBAAqBzB,GAAUzO,EAJtB,KASjB,IAAMqM,EAAQ5f,KAAKqsB,MAAMrK,EAAOtiB,EAAI4hB,EAAM5hB,EAAGsiB,EAAOviB,EAAI6hB,EAAM7hB,GAE1D6hB,EAAMxhB,OACRwhB,EAAMkH,aAAalH,EAAMxhB,KAAK2oB,SAAShpB,EAF1B,KAEwCO,KAAK0nB,IAAI9H,IAC9D0B,EAAMoH,aAAapH,EAAMxhB,KAAK2oB,SAAS/oB,EAH1B,KAGwCM,KAAK4nB,IAAIhI,+CAIhD,IAAA3Q,EAAAtO,KAChBA,KAAK+hB,MAAMJ,OAAO,CAChB7mB,IAAK,UACL6wB,OAAQ,CACN,CACE7wB,IAAK,UACLmS,MAAO,GAET,CACEnS,IAAK,UACLmS,MAAO,IAGX2e,UAAW,KAIb5rB,KAAK+hB,MAAMJ,OAAO,CAChB7mB,IAAK,cACL6wB,OAAQ,CACN,CACE7wB,IAAK,UACLmS,MAAO,GAET,CACEnS,IAAK,UACLmS,MAAO,IAGX2e,UAAW,EACXC,QAAS,IAGX7rB,KAAK+hB,MAAMJ,OAAO,CAChB7mB,IAAK,yBACL6wB,OAAQ,CACN,CACE7wB,IAAK,UACLmS,MAAO,GAET,CACEnS,IAAK,UACLmS,MAAO,IAGX2e,UAAW,EACXC,QAAS,IAGX,CAAC,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,UAAUhxB,QAAQ,SAAC8K,GAC9E2I,EAAKyT,MAAMJ,OAAO,CAChB7mB,IAAG,GAAApB,OAAKiM,EAAL,OACHgmB,OAAQ,CACN,CACE7wB,IAAK6K,EACLsH,MAAO,MAIbqB,EAAKyT,MAAMJ,OAAO,CAChB7mB,IAAG,GAAApB,OAAKiM,EAAL,WACHgmB,OAAQ,CACN,CACE7wB,IAAK6K,EACLsH,MAAO,6CAOJ0T,EAAOtS,GAAI,IACfK,EAAW1O,KAAX0O,QAEHkU,EAAS,EACTC,EAAO,EACPiJ,GAAa,EAEbpd,EAAQqd,GAAGhjB,OACb6Z,EAAS,GAGPlU,EAAQsd,MAAMjjB,KAChB8Z,EAAO,EACEnU,EAAQud,KAAKljB,OACtB8Z,GAAQ,GAGV,IAAIlnB,EAAK,EACLE,EAAK,EACT,GAAI6S,EAAQwd,OAAOnjB,KAAM,KAAAojB,EAAAxxB,OAAA+Q,EAAA,EAAA/Q,CACZ+T,EAAQwd,OAAOnjB,KADH,GACtBpN,EADsBwwB,EAAA,GAClBtwB,EADkBswB,EAAA,GAEvBL,GAAa,OACR,GAAIpd,EAAQ0d,OAAOrjB,KAAM,KAAAsjB,EAAA1xB,OAAA+Q,EAAA,EAAA/Q,CACnB+T,EAAQ0d,OAAOrjB,KADI,GAC7BpN,EAD6B0wB,EAAA,GACzBxwB,EADyBwwB,EAAA,GAE9BP,GAAa,EAGXA,IACEzsB,KAAKyN,IAAInR,GAAM,IACjBA,EAAKA,EAAK,GAAK,EAAI,EACnBE,EAAK,GACIwD,KAAKyN,IAAIjR,GAAM,KACxBA,EAAKA,EAAK,GAAK,EAAI,EACnBF,EAAK,GAGHE,EAAK,IACP+mB,EAAS,GAGXC,EAAOlnB,GAGTglB,EAAMiC,OAASA,EACfjC,EAAMkC,KAAOA,sCAGHhhB,EAAMwM,GAAI,IAIhByd,EAHGpd,EAAkB1O,KAAlB0O,QAASoR,EAAS9f,KAAT8f,MAEZwM,EAAO,EAGX,GAAI5d,EAAQqd,GAAGhjB,KACb/I,KAAKusB,oBADP,CAKI7d,EAAQsd,MAAMjjB,KAChBujB,EAAO,EACE5d,EAAQud,KAAKljB,OACtBujB,GAAQ,GAGV,IAAI3wB,EAAK,EACLE,EAAK,EACT,GAAI6S,EAAQwd,OAAOnjB,KAAM,KAAAyjB,EAAA7xB,OAAA+Q,EAAA,EAAA/Q,CACZ+T,EAAQwd,OAAOnjB,KADH,GACtBpN,EADsB6wB,EAAA,GAClB3wB,EADkB2wB,EAAA,GAEvBV,GAAa,OACR,GAAIpd,EAAQ0d,OAAOrjB,KAAM,KAAA0jB,EAAA9xB,OAAA+Q,EAAA,EAAA/Q,CACnB+T,EAAQ0d,OAAOrjB,KADI,GAC7BpN,EAD6B8wB,EAAA,GACzB5wB,EADyB4wB,EAAA,GAE9BX,GAAa,EAGf,GAAIA,IACEzsB,KAAKyN,IAAInR,GAAM,IACjBA,EAAKA,EAAK,GAAK,EAAI,EACnBE,EAAK,GACIwD,KAAKyN,IAAIjR,GAAM,KACxBA,EAAKA,EAAK,GAAK,EAAI,EACnBF,EAAK,GAGHA,GAAM,GACR2wB,GAAQ,EACC3wB,EAAK,KACd2wB,EAAO,GAGLzwB,GAAM,IACRmE,KAAKusB,qBAKT,IAAID,IAAQxM,EAAM4M,oBAEX,GAAKJ,EAAL,CAKP,IAAMtL,EAASlB,EAAMmI,gBACrBjH,EAAOnmB,QAAQ,SAAC8lB,GACdA,EAAMoB,MAAM3G,KAAZ,GAAA1hB,OAAoBinB,EAAMqB,QAAQlnB,IAAlC,UAGEkmB,EAAOvmB,OAAS,GAClBuF,KAAKslB,UAAU,UAGjBxF,EAAMoB,YAAcpB,EAAMoB,WAAaF,EAAOvmB,OAAS6xB,GAAQtL,EAAOvmB,OACtE,IAAMkmB,EAAQb,EAAMoI,eAAiBlH,EAAOlB,EAAMoB,YAClDP,EAAMoB,MAAM3G,KAAZ,GAAA1hB,OAAoBinB,EAAMqB,QAAQlnB,IAAlC,YAEAkF,KAAKmoB,aAAaxH,GAClBb,EAAM4M,qBAAsB,OAlB1B5M,EAAM4M,qBAAsB,uCAqBpB7qB,EAAMwM,GAAI,IAAAoD,EAAAzR,KACb8f,EAAS9f,KAAT8f,MAEL6M,EAEE7M,EAFF6M,SAAUrF,EAERxH,EAFQwH,eAAgBtG,EAExBlB,EAFwBkB,OAAQG,EAEhCrB,EAFgCqB,aAAcC,EAE9CtB,EAF8CsB,QAChDwL,EACE9M,EADF8M,UAAWrL,EACTzB,EADSyB,OAGbvhB,KAAKoC,UAAY,EACjBpC,KAAKie,OAAO4O,KAAO,EAEfF,KACQC,GAAatF,GACvBtnB,KAAK8sB,cACL9sB,KAAK+sB,YAAYlrB,EAAMwM,KAEvBrO,KAAK8sB,cACL9L,EAAOnmB,QAAQ,SAAC8lB,GACTA,EAAMqM,MAAQC,MAAMtM,EAAM7hB,KAAMmuB,MAAMtM,EAAM5hB,KAC/C1E,QAAQic,KAAK,kBACbqK,EAAMqM,KAAM,GAGVJ,GACFjM,EAAMiC,OAAS,EACfjC,EAAM1B,MAAQ,IACL0B,IAAUQ,GACnB1P,EAAKyb,aAAavM,EAAOtS,GAG3BoD,EAAK0b,OAAOxM,EAAOtS,GACnBoD,EAAK2b,UAAUzM,EAAOtS,GACtBoD,EAAK4b,SAAS1M,EAAOtS,GACrBoD,EAAK6b,SAAS3M,EAAOtS,GAEjBsS,IAAUQ,EACZ1P,EAAK8b,QAAQ5M,EAAOtS,IAEpBsS,EAAMxhB,KAAKquB,iBAAiB,GAC5B7M,EAAMxhB,KAAKsuB,iBAAiB,IAG9Bhc,EAAK2U,QAAQzF,EAAOtS,GACpBoD,EAAKic,WAAW/M,EAAOtS,GACvBoD,EAAKkc,KAAKhN,EAAOtS,GACjBoD,EAAK0Y,QAAQxJ,EAAOtS,GACpBoD,EAAKmc,MAAMjN,EAAOtS,KAGpBkT,EAAO1mB,QAAQ,SAACgmB,GACdpP,EAAKkc,KAAK9M,EAAOxS,KAGnB+S,EAAQvmB,QAAQ,SAACwmB,GACf5P,EAAKoc,MAAMxM,EAAQF,EAAc9S,qCAKjCgT,EAAQF,EAAc9S,GAC1B,GAAK8S,IAAgBA,EAAaS,QAAlC,CAIA,IAAM/lB,EAAKslB,EAAapiB,EAAIsiB,EAAOtiB,EAC7BpD,EAAKwlB,EAAariB,EAAIuiB,EAAOviB,EACnC,KAAIO,KAAKyuB,KAAKzuB,KAAAglB,IAAA1oB,EAAM,GAAN0D,KAAAglB,IAAUxoB,EAAM,IAAK,KAAnC,CAGA,IAAMmnB,EAAQ3jB,KAAKqsB,MAAM7vB,EAAIF,GAC7BqE,KAAKumB,MAAMlF,EAAQ2B,EAAO3jB,KAAKC,GAAK,GAAG,oCAGlCqhB,EAAOtS,GACRsS,EAAMiB,UACRjB,EAAMiC,OAAS,EACfjC,EAAMkC,KAAO,mCAITlC,EAAOtS,GACb,IAAM4R,EAAQU,EAAM5hB,EAAIiB,KAAK8f,MAAMyC,UAAYviB,KAAKwS,aAC9CmO,EAAMiB,SAAW3B,EAAQ,IAAMU,EAAMwJ,SACzCxJ,EAAMxhB,KAAKsuB,iBAAiB9M,EAAMxhB,KAAK4uB,aAAahvB,EAAI,mCAItD4hB,EAAOtS,GAAI,IACRxM,EAAe7B,KAAf6B,KAAMie,EAAS9f,KAAT8f,MACNlN,EAAO/Q,EAAP+Q,IACAuO,EAAgBrB,EAAhBqB,aAOP,GALIrB,EAAMoI,iBAAmBpI,EAAM8M,YACjCjM,EAAMkH,aAAa,GACnBlH,EAAMoH,aAAa,IAGhBpH,EAAMiB,UAAWjB,EAAMkB,MAA5B,EAKKlB,EAAMqN,MAAQ3uB,KAAKyN,IAAI6T,EAAMxhB,KAAK2oB,SAAShpB,GAD9B,IACgDO,KAAKyN,IAAI6T,EAAMxhB,KAAK2oB,SAAS/oB,GAD7E,KAEhB4hB,EAAMqN,KAAOpb,EACb+N,EAAMkH,aAAa,GACnBlH,EAAMoH,aAAa,IAGjBnV,EAAM+N,EAAMqN,KAAO7tB,YAAK,eAC1BwgB,EAAMkB,OAAQ,EAEVlB,IAAUQ,GACZnhB,KAAKugB,wDAKI,IACNT,EAAS9f,KAAT8f,MACHA,EAAMwH,iBAIVxH,EAAMmI,gBAAkBnI,EAAMkB,OAAOvU,OAAO,SAACpM,GAAD,OAAQA,EAAEuhB,UAASqM,KAAK,SAACxpB,EAAG4a,GAAJ,OAAU5a,EAAE3F,EAAIugB,EAAEvgB,IAEjFghB,EAAMmI,gBAAgBxtB,QAK3BqlB,EAAMmI,gBAAgBptB,QAAQ,SAAC8lB,GAC7BA,EAAMoB,MAAM3G,KAAZ,GAAA1hB,OAAoBinB,EAAMqB,QAAQlnB,IAAlC,UAGFglB,EAAMoB,WAAa,EACnBpB,EAAMwH,gBAAiB,EACvBxH,EAAMoI,eAAiBpI,EAAMmI,gBAAgBnI,EAAMoB,YACnDpB,EAAMoI,eAAenG,MAAM3G,KAA3B,GAAA1hB,OAAmComB,EAAMoI,eAAelG,QAAQlnB,IAAhE,YACAkF,KAAKmoB,aAAarI,EAAMoI,iBAZtBloB,KAAKkuB,mDAeCziB,GAA0B,IAAnB0iB,EAAmB3zB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC5B4zB,EAAMpuB,KAAKwgB,WACX6N,EAAQD,EAAI3zB,OACdulB,GAAcvU,EAAQ4iB,GAASA,EAC/BpO,EAAQjgB,KAAK8f,MAAMG,OAAS,EAIhC,GAHmB,IAAfD,GAAoBmO,IACtBlO,GAAS,GAEQ,IAAfD,GAAoBC,EACtB,KAAOmO,EAAIpO,GAAYjlB,WAAW,aAChCilB,GAAc,EAIlB,IAAME,EAAevlB,OAAAoP,EAAA,EAAApP,CAAOqF,KAAK8f,MAAMI,iBACvCA,EAAgBlgB,KAAK8f,MAAME,YAA3BrlB,OAAAoP,EAAA,EAAApP,CAA6CqF,KAAK8f,MAAMkB,OAAOvU,OAAO,SAAAlO,GAAA,OAAAA,EAAEqjB,UAAsBtM,IAAI,SAAA9W,GAAA,IAChGM,EADgGN,EAChGM,EAAGC,EAD6FP,EAC7FO,EAAGkgB,EAD0FzgB,EAC1FygB,MAAO+C,EADmFxjB,EACnFwjB,QAASP,EAD0EjjB,EAC1EijB,OAAQC,EADkEljB,EAClEkjB,QADkE,MAE3F,CACL5iB,IAAGC,IAAGkgB,QAAOuC,WAAYQ,EAAQlnB,IAAK2mB,SAAQC,cAGhD,IAAMvB,EAAexlB,OAAAoP,EAAA,EAAApP,CAAOqF,KAAK8f,MAAMK,iBACvCA,EAAgBngB,KAAK8f,MAAME,YAA3BrlB,OAAAoP,EAAA,EAAApP,CAA6CqF,KAAK8f,MAAMyB,OAAOjM,IAAI,SAAA5H,GAAA,IACjE5O,EADiE4O,EACjE5O,EAAGC,EAD8D2O,EAC9D3O,EAAGkgB,EAD2DvR,EAC3DuR,MAAO+C,EADoDtU,EACpDsU,QAASJ,EAD2ClU,EAC3CkU,QAD2C,MAE5D,CACL9iB,IAAGC,IAAGkgB,QAAOuC,WAAYQ,EAAQlnB,IAAK8mB,cAGxC5hB,KAAKsuB,iBAAgB,EAAM,CACzBtO,aACAC,QACAC,kBACAC,mBACC,CACDtmB,KAAM,4DAIAX,GACR8G,KAAKuuB,UAAUvuB,KAAK8f,MAAME,WAAa9mB,EAAGA,EAAI,2CAGhC,IACP4mB,EAAS9f,KAAT8f,MAEHA,EAAM6M,WAIV7M,EAAM6M,UAAW,EACjB3sB,KAAKuqB,UAAU,iCAGZpD,EAAQ9Y,GACX,GAAK8Y,EAAOhoB,KAAZ,CAIA,GAAIgoB,EAAOvF,QAAS,CAClB,IAAM+L,EAAOtuB,KAAKmC,IAAI,IAAMrB,YAAK,qBAAuBgnB,EAAOqH,mBAAqB,GAAK,IAGzF,OAFArH,EAAOU,aAAaV,EAAOhoB,KAAK2oB,SAAShpB,EAAI6uB,QAC7CxG,EAAOY,aAAaZ,EAAOhoB,KAAK2oB,SAAS/oB,EAAI4uB,GAIzC,WAAYxG,KAAW9nB,KAAKyN,IAAIqa,EAAOvE,QAAU,MACrDuE,EAAOU,aAAaV,EAAOhoB,KAAK2oB,SAAShpB,EAAIqB,YAAK,iBAGhDgnB,IAAWnnB,KAAK8f,MAAMqB,cACxBgG,EAAOY,aAAaZ,EAAOhoB,KAAK2oB,SAAS/oB,EAAIoB,YAAK,qDAI3CwgB,EAAOtS,GAAI,IACbyR,EAAS9f,KAAT8f,MACA0O,EAAqB7N,EAArB6N,kBAEDC,EAAStuB,YAAK,gBACdsnB,EAAS9G,EAAMiC,OAAS6L,EAE9B9N,EAAM+N,aAAwB,GAATjH,EAA2C,IAA3B9G,EAAM+N,cAAgB,GAC3D/N,EAAM+G,SAAS,EAAI/G,EAAM+N,aAAc,EAAI/N,EAAM+N,cAE7C/N,IAAUb,EAAMqB,cAAiBrB,EAAM0G,WACzCxmB,KAAKoC,UAAY,EAAIosB,EAAoBruB,YAAK,sBAC9CH,KAAKie,OAAO4O,KAAO,EAAI2B,EAAoBruB,YAAK,yDAI1CwgB,EAAOtS,GACf,IACImgB,EAAqC,IADlBnvB,KAAKuG,IAAI,EAAG+a,EAAM+B,oBAAsB1iB,KAAK6B,KAAK+Q,KAAOzS,YAAK,yBACL,IAAhCwgB,EAAM6N,mBAAqB,GACvEA,EAAoB,MACtBA,EAAoB,GAEtB7N,EAAM6N,kBAAoBA,EAE1B7N,EAAMiC,QAAUziB,YAAK,2BAA6BquB,EAElD,IAAI5oB,GAAO,EAAIzF,YAAK,yBAA2BquB,GAAqBruB,YAAK,qBACrEH,KAAK8f,MAAM8M,YAEXhnB,EADE5F,KAAK8f,MAAM0G,SACP,IAEA,KAGV7F,EAAMxhB,KAAKwvB,eAAe/oB,EAAKA,oCAGxB+a,EAAOtS,GACVsS,EAAMiC,OAAS,EACjBjC,EAAMkC,MAAQ1iB,YAAK,+BACVwgB,EAAMiC,SACfjC,EAAMkC,MAAQ1iB,YAAK,2BAEjBwgB,EAAMkC,OACRlC,EAAMiC,QAAUziB,YAAK,4DAIhBwgB,EAAOtS,GAAI,IACX4Q,EAAe0B,EAAf1B,MAAO4D,EAAQlC,EAARkC,KAEdlC,EAAMqC,MAAQhE,EAAYC,EAAQ,KAClC0B,EAAMxhB,KAAKyvB,mBAAmBzuB,YAAK,eAAiB0iB,mCAG9ClC,EAAOtS,GACb,IAAIwgB,EAAK,EACLC,EAAK,EAELnO,EAAMiC,OAAS,GACZjC,EAAMiB,UACTiN,EAAK1uB,YAAK,wBAGZ0uB,GAAMlO,EAAMiC,OAASziB,YAAK,gBAAkB,EAAId,KAAK0nB,IAAIpG,EAAMqC,OAC/D8L,EAAKnO,EAAMiC,OAASziB,YAAK,gBAAkB,EAAId,KAAK4nB,IAAItG,EAAMqC,QACpDrC,EAAMiB,UAChBiN,EAAK1uB,YAAK,kBAGRH,KAAK8f,MAAM8M,YACbiC,EAAK,GAGPlO,EAAMxhB,KAAKquB,iBAAiBsB,GAC5BnO,EAAMxhB,KAAKsuB,iBAAiBoB,2CAGdlO,GAAkB,IAAXoO,EAAWv0B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EAE3BsE,EACE6hB,EADF7hB,EAAGC,EACD4hB,EADC5hB,EAAGsT,EACJsO,EADItO,MAAOC,EACXqO,EADWrO,OAAQ0Q,EACnBrC,EADmBqC,MAKvB,MAAO,CAFIlkB,GAAKuT,EAAQ0c,GAAS1vB,KAAK0nB,IAAI/D,EAAQ3jB,KAAKC,GAAK,GACjDP,GAAKuT,EAASyc,GAAS1vB,KAAK4nB,IAAIjE,EAAQ3jB,KAAKC,GAAK,oCAIvDqhB,EAAOtS,GAAI,IACV+X,EAAWzF,EAAXyF,QAEP,GAAIzF,EAAMiC,QAAU,KAIlB,GAHAwD,EAAQrqB,MAAQ,EAChBqqB,EAAQ2I,MAAQ,EAChB3I,EAAQ4I,SAAW,EACf5I,EAAQjL,MAAO,CACjB,IACEiL,EAAQjL,MAAMtc,UACd,MAAOzE,IAGTgsB,EAAQjL,MAAQ,WAGlBiL,EAAQrqB,MAAQ,GAChBqqB,EAAQ4I,UAAY5I,EAAQ4I,UAAY,GAAK3gB,EAExCsS,EAAM6N,mBAAsB7N,EAAM6N,oBACrCpI,EAAQrE,MAAM3G,KAAK,eAAe,GAClCgL,EAAQC,eAAgB,GAGrBD,EAAQjL,OAAUnb,KAAK8f,MAAM8M,YAChCxG,EAAQjL,MAAQnb,KAAKslB,UAAU,SAAU,EAAG,IAAK,GACjDtlB,KAAK8f,MAAMwB,aAAatd,KAAKoiB,EAAQjL,QAKzC,IAAI8T,GAAc5vB,KAAK4nB,IAAIb,EAAQ4I,SAAW7uB,YAAK,mBAAqB,GAAK,EAC7E8uB,GAAc5vB,KAAKuG,IAAI,EAAG+a,EAAMiC,QAAU,EAG1C,IAAMsM,GAFND,GAAc,EAAItO,EAAMkC,MAEU1iB,YAAK,oBACjCgvB,EAAe/I,EAAQ2I,OAAS,EAEtC3I,EAAQ2I,MAAuB,GAAfG,EAAoC,GAAfC,EAtCpB,IAAAC,EAwCQpvB,KAAKimB,gBAAgBtF,EAAOyF,EAAQ2I,OAxC5CM,EAAA10B,OAAA+Q,EAAA,EAAA/Q,CAAAy0B,EAAA,GAwChBhJ,EAAQtnB,EAxCQuwB,EAAA,GAwCLjJ,EAAQrnB,EAxCHswB,EAAA,GA0CjBjJ,EAAQnH,MAAQ0B,EAAM1B,uCAGf7gB,GACP,MAAO,yCAGCA,GACR,MAAO,wDAGGA,GACV,MAAO,mDAGGA,GACV,OAAO,wCAIP,OAAO,mDAIPzD,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAA4kB,EAAAhZ,WAAA,kBAAAvG,MAAAD,KAAAC,uDAGuBgC,EAAOstB,EAAWztB,EAAMwM,EAAIkhB,GAEnD,MADgB,gDAIG,IAEjBzP,EACE9f,KADF8f,MAAOtZ,EACLxG,KADKwG,KAAMyX,EACXje,KADWie,OAERuR,EAAsD1P,EAAtD0P,WAAmBC,EAAmC3P,EAA1CzN,MAA2Bqd,EAAe5P,EAAvBxN,OAJnBqd,EAK4BnpB,EAAKhJ,OAAtCoyB,EALKD,EAKZtd,MAA0Bwd,EALdF,EAKMrd,OACXwd,EAA6CN,EAApDnd,MAAgC0d,EAAoBP,EAA5Bld,OACxBkW,EAAoBvK,EAApBuK,QAASC,EAAWxK,EAAXwK,QAEVuH,EAAUP,EAAa,IAAO,GAAMA,EAAa,IAAO,GAAM,GAC9DQ,EAAUP,EAAc,IAAO,GAAMA,EAAc,IAAO,GAAM,GAChEjI,EAASpoB,KAAKmC,IAAIwuB,EAASC,GACjCT,EAAW3J,gBAAgB,GAC3B2J,EAAWzzB,MAAQ,GACnByzB,EAAW1wB,EAAIgxB,EAAkB,EAAIF,EAAY,EAAIpH,EAAUf,EAC/D+H,EAAWzwB,EAAIgxB,EAAmB,EAAIF,EAAa,EAAIpH,EAAUhB,gDAG7C,IAElB3H,EACE9f,KADF8f,MAAOtZ,EACLxG,KADKwG,KAAMyX,EACXje,KADWie,OAERiS,EAAuDpQ,EAAvDoQ,YAAoBT,EAAmC3P,EAA1CzN,MAA2Bqd,EAAe5P,EAAvBxN,OAJnB6d,EAK2B3pB,EAAKhJ,OAAtCoyB,EALMO,EAKb9d,MAA0Bwd,EALbM,EAKK7d,OACXwd,EAA6CI,EAApD7d,MAAgC0d,EAAoBG,EAA5B5d,OACxBkW,EAAoBvK,EAApBuK,QAASC,EAAWxK,EAAXwK,QAEVuH,EAAUP,EAAa,IAAO,IAAOA,EAAa,IAAO,GAAM,GAC/DQ,EAAUP,EAAc,IAAO,IAAOA,EAAc,IAAO,GAAM,GACjEjI,EAASpoB,KAAKmC,IAAIwuB,EAASC,GACjCC,EAAYrK,gBAAgB,GAC5BqK,EAAYpxB,EAAIgxB,EAAkB,EAAIF,EAAY,EAAIpH,EAAUf,EAChEyI,EAAYnxB,EAAIgxB,EAAmB,EAAIF,EAAa,EAAIpH,EAAUhB,iDAG7CrgB,GACRA,EAARtI,EAAQsI,EAALrI,EAEHiB,KAAKie,OAAOuK,QACZxoB,KAAKie,OAAOwK,iDAGF3O,EAAUc,GACzB5a,KAAK8f,MAAMwB,aAAazmB,QAAQ,SAACsgB,GAC/B,IACEA,EAAMtc,UACN,MAAOzE,wDAMXO,OAAA2L,EAAA,EAAA3L,QAAAyL,EAAA,EAAAzL,CAAA4kB,EAAAhZ,WAAA,yBAAAvG,MAAAD,KAAAC,KAA6B,GAC1B,CACDowB,UAAW,YACX50B,SAAU,IACV60B,qBAAqB,EACrBC,sBAAsB,IACrBzW,KAAK,SAAC7X,6CAt9C0BgF,KClBjCkL,EAAa,CACjBK,UAAW,GACXC,WAAY,GACZ+d,YAAa,GACbC,aAAc,IAGKzR,cACnB,SAAAA,EAAY3gB,GAAUzD,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAA+e,GACpB,IAAMvhB,EAAM7C,OAAAkP,EAAA,EAAAlP,CAAA,GACPuX,EACA9T,GAHc,OAAAzD,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAAokB,GAAAhf,KAAAC,KAMjBxC,EACA,CAAC+hB,2EAKHvf,KAAKgC,MAAMnC,IAAX,SAAAnG,OAAwBiZ,KAAKC,OAAS2M,GAAW,EAAM,CACrD9e,KAAMkS,KAAKC,MACXC,QAAS3B,OAAO7R,KAAKyT,mBAfOL,6BCJbge,cACnB,SAAAA,EAAY5zB,GAAO,IAAAwJ,EAAA,OAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAywB,IACjBpqB,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAA81B,GAAA1wB,KAAAC,KAAMnD,KA6DR6zB,oBAAsB,WACpB,IAAMC,EAAsC,WAA7BhmB,SAASimB,gBACxBvqB,EAAKwqB,SAAS,CAACpd,SAAUkd,IACzBtqB,EAAKG,KAAKsqB,YAAYH,IAjELtqB,EAoEnB0qB,QAAU,WACR1qB,EAAKwqB,SAAS,CAACpd,SAAS,IACxBpN,EAAKG,KAAKsqB,YAAW,IAtEJzqB,EAyEnB2qB,SAAW,WACT3qB,EAAKwqB,SAAS,CAACpd,SAAS,IACxBpN,EAAKG,KAAKsqB,YAAW,IAxErBzqB,EAAKqD,MAAQ,CACXunB,YAAY,EACZC,WAAW,EACXzd,SAAS,EACTvO,OAAQ3L,YAAU,SAAU,KAC5BwZ,MAAO,MAET1M,EAAK8qB,SAAWtsB,IAAMusB,YAVL/qB,mFAaC,IAAAO,EAAA5G,KAAAgF,EACUhF,KAAKnD,MAA1Bw0B,EADWrsB,EACXqsB,WAAYpqB,EADDjC,EACCiC,MACZ/B,EAAUlF,KAAK0J,MAAfxE,OAEPoC,OAAOgqB,iBAAiB,mBAAoBtxB,KAAK0wB,qBACjDppB,OAAOgqB,iBAAiB,OAAQtxB,KAAK+wB,SACrCpmB,SAAS2mB,iBAAiB,OAAQtxB,KAAK+wB,SACvCzpB,OAAOgqB,iBAAiB,QAAStxB,KAAKgxB,UACtCrmB,SAAS2mB,iBAAiB,QAAStxB,KAAKgxB,UAE3BrmB,SAASkB,cAAc,QAC/B0lB,UAAU1xB,IAAI,WAEnBG,KAAKwG,KAAO,IAAIuY,EAAK,CAAC9X,UACtBjH,KAAKwG,KAAKkP,aAAaxQ,GAEnBmsB,GACFA,EAAWrxB,KAAKwG,KAAM,SAAC0P,GAAD,OAActP,EAAK4qB,aAAatb,oDAKxD5O,OAAOmqB,oBAAoB,mBAAoBzxB,KAAK0wB,qBACpDppB,OAAOmqB,oBAAoB,OAAQzxB,KAAK+wB,SACxCpmB,SAAS8mB,oBAAoB,OAAQzxB,KAAK+wB,SAC1CzpB,OAAOmqB,oBAAoB,QAASzxB,KAAKgxB,UACzCrmB,SAAS8mB,oBAAoB,QAASzxB,KAAKgxB,gDAG/B,IAAAlnB,EAAA9J,KACRA,KAAK0xB,YACPC,aAAa3xB,KAAK0xB,aAElB/mB,SAASkB,cAAc,QAAQ0lB,UAAU1xB,IAAI,cAG/CG,KAAK0xB,YAAc5qB,WAAW,WAC5BgD,EAAK8nB,WAAU,IACd,uCAGK1sB,GACRlF,KAAK6wB,SAAS,CAAC3rB,WAEflF,KAAKwG,KAAKkP,aAAaxQ,GAEvB7L,YAAU,SAAU6L,wCAmBTgR,GAAU,IAAA3L,EAAAvK,KACDA,KAAK0J,MAAlBwnB,UAGDhb,GACFA,KAKJlW,KAAK6wB,SAAS,CAACI,YAAY,IAE3BjxB,KAAKwG,KAAKgrB,aAAa,WAErBjnB,EAAKsmB,SAAS,CAACK,WAAW,IAC1B3mB,EAAKqnB,WAAU,GACX1b,GACFA,yCAKI2b,GAAS,IAAAzmB,EAAApL,KACZA,KAAK0xB,cAIVC,aAAa3xB,KAAK0xB,aAClB1xB,KAAK0xB,YAAc,KAEfG,IACF7xB,KAAKmxB,SAASW,QAAQtsB,MAAMoV,WAAa,OACzC9T,WAAW,WACTsE,EAAK+lB,SAASW,QAAQtsB,MAAMoV,WAAa,MAI7CjQ,SAASkB,cAAc,QAAQ0lB,UAAU5a,OAAO,yDAGhC,IAAA3J,EAAAhN,KACVb,EAAOwL,SAASkB,cAAc,QAC9BuL,EAASzM,SAASkB,cAAc,WAElC1M,GAAQiY,IACVjY,EAAKoyB,UAAU1xB,IAAI,UACnBV,EAAKoyB,UAAU5a,OAAO,WAEtBS,EAAO5R,MAAMusB,SAAW,GAExB/xB,KAAKgyB,cAAgB,WAAM,IAAAC,EACDjlB,EAAKxG,KAAKhJ,OAA3B6U,EADkB4f,EAClB5f,MAAOC,EADW2f,EACX3f,OACRS,EAAQ,IAAO1T,KAAKmC,IAAI8F,OAAO4qB,WAAa7f,EAAO/K,OAAO6qB,YAAc7f,GAC9EtF,EAAK6jB,SAAS,CAAC9d,WAEjB/S,KAAKgyB,gBAEL1qB,OAAOgqB,iBAAiB,SAAUtxB,KAAKgyB,eAElChyB,KAAKoyB,oBACRpyB,KAAKoyB,kBAAoB,WACAznB,SAAS2M,mBAC3B3M,SAAS4M,yBACT5M,SAAS6M,sBACT7M,SAAS8M,qBAGZzK,EAAKzH,gBAAe,IAIxBoF,SAAS2mB,iBAAiB,yBAA0BtxB,KAAKoyB,mBAAmB,GAC5EznB,SAAS2mB,iBAAiB,sBAAuBtxB,KAAKoyB,mBAAmB,GACzEznB,SAAS2mB,iBAAiB,mBAAoBtxB,KAAKoyB,mBAAmB,GACtEznB,SAAS2mB,iBAAiB,qBAAsBtxB,KAAKoyB,mBAAmB,IAGtEjzB,EAAKkzB,kBACPlzB,EAAKkzB,oBACIlzB,EAAKmzB,qBACdnzB,EAAKmzB,uBACInzB,EAAKozB,wBACdpzB,EAAKozB,0BACIpzB,EAAKqzB,qBACdrzB,EAAKqzB,8DAKIC,GACb,IAAMtzB,EAAOwL,SAASkB,cAAc,QAC9BuL,EAASzM,SAASkB,cAAc,WAClC1M,GAAQiY,IACVjY,EAAKoyB,UAAU1xB,IAAI,WACnBV,EAAKoyB,UAAU5a,OAAO,UAEtBS,EAAO5R,MAAMusB,SAAW,SAExB/xB,KAAK6wB,SAAS,CAAC9d,MAAO,OAElB/S,KAAK0xB,cACPC,aAAa3xB,KAAK0xB,aAClB1xB,KAAK0xB,YAAc,MAGrBpqB,OAAOmqB,oBAAoB,SAAUzxB,KAAKgyB,eAC1C1qB,OAAOmqB,oBAAoB,YAAazxB,KAAK0yB,cAG1CD,IACC9nB,SAASpF,eACXoF,SAASpF,iBACAoF,SAAS+M,qBAClB/M,SAAS+M,uBACA/M,SAASgN,oBAClBhN,SAASgN,sBACAhN,SAASiN,kBAClBjN,SAASiN,qDAKN,IAAAnK,EAAAzN,KAAA2yB,EAGH3yB,KAAK0J,MADPunB,EAFK0B,EAEL1B,WAAYle,EAFP4f,EAEO5f,MAAO7N,EAFdytB,EAEcztB,OAAQuO,EAFtBkf,EAEsBlf,QAErBrO,EAAsBpF,KAAKnD,MAA3BuI,kBAEFwtB,EAAU,GAIhB,OAHAA,EAAQ5uB,KAAKitB,EAAa,YAAc,YACxC2B,EAAQ5uB,KAAKyP,EAAU,UAAY,WAGjCjP,EAAAC,EAAAC,cAAA,OAAKE,UAAWguB,EAAQ50B,KAAK,KAAM2G,GAAG,oBACpCH,EAAAC,EAAAC,cAAA,OACEC,GAAG,SACHM,YAAa,kBAAMwI,EAAKxI,eACxBe,QAAS,kBAAMyH,EAAK+jB,gBACpBhsB,MAAOuN,EAAQ,CAACrN,UAAS,SAAAhM,OAAWqZ,EAAX,MAAuB,GAChD8f,IAAK,SAACC,GACArlB,EAAKslB,mBAITtlB,EAAKslB,iBAAmBD,KAG1BtuB,EAAAC,EAAAC,cAAA,OAAKc,MAAO,CAACwtB,gBAAe,OAAAt5B,OAASgd,IAAT,MAAoB/R,GAAG,UACnDH,EAAAC,EAAAC,cAACuuB,EAAD,OAEFzuB,EAAAC,EAAAC,cAACwuB,EAAD,CACEL,IAAK7yB,KAAKmxB,SACVlsB,YAAa,kBAAMwI,EAAKxI,eACxBC,OAAQA,EACRC,eAAgB,SAACguB,GAAD,OAAO1lB,EAAKgI,UAAU0d,IACtC/tB,kBAAmBA,EACnBC,aAAc0N,EACdzN,gBAAiB,kBAAMmI,EAAKnI,mBAC5BC,eAAgB,kBAAMkI,EAAKlI,4BA7ODV,IAAMC,WCErBsuB,uBACnB,SAAAA,EAAYv2B,GAAO,IAAAwJ,EAAA,OAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAozB,IACjB/sB,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAAy4B,GAAArzB,KAAAC,KAAMnD,KAED6M,MAAQ,CACX2pB,OAAQ95B,YAAU,SAAU,KAG9B8M,EAAKwsB,IAAMhuB,IAAMusB,YAPA/qB,mFAUC,IACXgtB,EAAUrzB,KAAK0J,MAAf2pB,OAEDC,EAAMC,cACZvzB,KAAK6yB,IAAIf,QAAQ0B,OAAOF,EAAIG,YAEb,KAAXJ,GACFK,YAAaL,GAAQ,8CAKvB,IAAMM,EAAWhpB,SAASjG,cAAc,YACxCivB,EAAS75B,MAAQ85B,cACjBjpB,SAASxL,KAAK00B,YAAYF,GAC1BA,EAASG,SACTnpB,SAASopB,YAAY,QACrBppB,SAASxL,KAAK4W,YAAY4d,oCAGnB,IAAA/sB,EAAA5G,KACAqzB,EAAUrzB,KAAK0J,MAAf2pB,OACP,OACE7uB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,SACEiB,KAAK,SACLf,UAAU,SACVovB,YAAY,qBACZl6B,MAAOu5B,EACPxtB,SAAU,SAACzL,GAET,IAAM65B,EAAkC,KAAtBrtB,EAAK8C,MAAM2pB,OAC7BzsB,EAAKiqB,SAAS,CAACwC,OAAQj5B,EAAE8D,OAAOpE,QAChC45B,YAAat5B,EAAE8D,OAAOpE,MAAOm6B,GAC7B56B,YAAU,SAAUe,EAAE8D,OAAOpE,UAGjC0K,EAAAC,EAAAC,cAAA,SACEiB,KAAK,SACLf,UAAU,OACV9K,MAAM,eACNkM,QAAS,kBAAMY,EAAKstB,sBAEtB1vB,EAAAC,EAAAC,cAAA,SACEiB,KAAK,SACLf,UAAU,QACV9K,MAAM,iBACNkM,QAAS,kBAAMmuB,iBAEjB3vB,EAAAC,EAAAC,cAAA,OAAKE,UAAsB,KAAXyuB,EAAgB,GAAK,YAAaR,IAAK7yB,KAAK6yB,cA5DhChuB,IAAMC,oBCPpCsvB,mBAAY,SAACrc,GACjB,OAAO1Y,KAAK2B,MAAM,EAAI+W,GAAK,IAGvBsc,EAAW,SAACtc,GAChB,OAAO1Y,KAAKi1B,KAAK,EAAIvc,GAAK,GAGPwc,cACnB,SAAAA,EAAY13B,GAAO,IAAAwJ,EAAA,OAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAu0B,IACjBluB,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAA45B,GAAAx0B,KAAAC,KAAMnD,KA4BR23B,UAAY,WACVnuB,EAAKouB,eA3BLpuB,EAAKqD,MAAQ,CACXgrB,SAAU,KACVC,SAAU,MAGZtuB,EAAKuuB,SAAW/vB,IAAMusB,YACtB/qB,EAAKwuB,UAAYhwB,IAAMusB,YATN/qB,mFAYC,IAAAO,EAAA5G,KAGlBA,KAAK6wB,SAAS,CAACiE,mBAAmB,IAElCxtB,OAAOgqB,iBAAiB,SAAUtxB,KAAKw0B,WAEvCltB,OAAOd,KAAKuuB,mBAAqB,SAAC9nB,EAAO8B,GACvCnI,EAAKouB,aAAa/nB,EAAO8B,mDAK3BzH,OAAOmqB,oBAAoB,SAAUzxB,KAAKw0B,kBACnCltB,OAAOd,KAAKuuB,wDAOR9nB,EAAO8B,GAAQ,IACnBkmB,EAAmBj1B,KAAKnD,MAAxBo4B,gBACP,GAAKj1B,KAAK60B,UAAU/C,SAAY9xB,KAAK40B,SAAS9C,QAI9C,GAAI7kB,GAAS8B,GAAUA,EAAO+J,YAAcmc,EAAiB,KAAAjwB,EACxChF,KAAKnD,MAAjB2E,EADoDwD,EACpDxD,IAAKoE,EAD+CZ,EAC/CY,IACNsvB,EAAal1B,KAAK40B,SAAS9C,QAAQqD,wBAAwB9iB,MAC3D+iB,EAAgB/1B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAIyL,EAAQzL,IAAQoE,EAAMpE,KACrExB,KAAK60B,UAAU/C,QAAQtsB,MAAMymB,KAA7B,GAAAvyB,OAAuC06B,EAAUgB,EAAgBF,GAAjE,MACAl1B,KAAK60B,UAAU/C,QAAQtsB,MAAM6vB,QAAU,aAEvCr1B,KAAK60B,UAAU/C,QAAQtsB,MAAM6vB,QAAU,wCAIlC,IAAAvrB,EAAA9J,KAAAs1B,EAMHt1B,KAAKnD,MAJP2E,EAFK8zB,EAEL9zB,IAAKoE,EAFA0vB,EAEA1vB,IAAK2vB,EAFLD,EAEKC,OAAQC,EAFbF,EAEaE,OAAQC,EAFrBH,EAEqBG,UAAWC,EAFhCJ,EAEgCI,UACrC5vB,EAHKwvB,EAGLxvB,UAAW6vB,EAHNL,EAGMK,aAAc1wB,EAHpBqwB,EAGoBrwB,YAAa2wB,EAHjCN,EAGiCM,aACtCC,EAJKP,EAILO,cAAeC,EAJVR,EAIUQ,YAAaC,EAJvBT,EAIuBS,QAASC,EAJhCV,EAIgCU,WAAYC,EAJ5CX,EAI4CW,WACjDC,EALKZ,EAKLY,OALKvD,EAOsB3yB,KAAK0J,MAA3BgrB,EAPA/B,EAOA+B,SAAUC,EAPVhC,EAOUgC,SAGXwB,EAAkBn2B,KAAK40B,SAAS9C,SAAW9xB,KAAK40B,SAAS9C,QAAQqD,wBACjEiB,EAAYD,EAAkBA,EAAgBlK,KAAO,EACrDiJ,EAAaiB,EAAkBA,EAAgB9jB,MAAQ,IACvDgkB,EAAWh3B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAI+zB,EAAS/zB,IAAQoE,EAAMpE,KAC3D80B,EAAWj3B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAIg0B,EAASh0B,IAAQoE,EAAMpE,KAC3D+0B,EAAoBl3B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAIw0B,EAAax0B,IAAQoE,EAAMpE,KACxEg1B,EAAoBn3B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAIy0B,EAAaz0B,IAAQoE,EAAMpE,KACxE4zB,EAAgB/1B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAI00B,EAAS10B,IAAQoE,EAAMpE,KAEtE,OACEgD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAAckB,UAAWA,EAAW6vB,aAAcA,EAAc1wB,YAAaA,EAAa2wB,aAAcA,GACrHpxB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,QAAQiuB,IAAK7yB,KAAK40B,WACjCpwB,EAAAC,EAAAC,cAAA,OACEc,MAAO,CACLymB,KAAI,GAAAvyB,OAAK06B,EAAUiC,EAAWnB,GAA1B,MACJlJ,MAAK,GAAAtyB,OAAK26B,EAASa,EAAaoB,EAAWpB,GAAtC,OAEPtwB,UAAU,mBAEZJ,EAAAC,EAAAC,cAAA,OACEc,MAAO,CACLymB,KAAI,GAAAvyB,OAAK06B,EAAUmC,EAAoBrB,GAAnC,MACJlJ,MAAK,GAAAtyB,OAAK26B,EAASa,EAAasB,EAAoBtB,GAA/C,OAEPtwB,UAAU,sBAEZJ,EAAAC,EAAAC,cAAA,OACEc,MAAO,CACLymB,KAAI,GAAAvyB,OAAK06B,EAAUgB,EAAgBF,GAA/B,MACJG,QAAoB,OAAXa,EAAkB,OAAS,SAEtCtxB,UAAU,qBACViuB,IAAK7yB,KAAK60B,YAEXkB,EAAQzgB,IAAI,SAAAvY,GAAoB,IAAlBjD,EAAkBiD,EAAlBjD,MAAO28B,EAAW15B,EAAX05B,MACdC,EAAc58B,GAASy7B,GAAUz7B,GAAS07B,GAAY17B,GAAS07B,GAAU17B,GAASy7B,EAClFoB,EAAiB78B,GAASk8B,GAAcl8B,GAASm8B,GAAgBn8B,GAASm8B,GAAcn8B,GAASk8B,EACjGY,EAAUv3B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAI1H,EAAQ0H,IAAQoE,EAAMpE,KACzDoxB,EAAU,CAAC,SAOjB,OANI+D,EACF/D,EAAQ5uB,KAAK,eACJ0yB,GACT9D,EAAQ5uB,KAAK,YAIbQ,EAAAC,EAAAC,cAAA,OACE5J,IAAKhB,EACL28B,MAAOA,EACP7xB,UAAWguB,EAAQ50B,KAAK,KACxBwH,MAAO,CACLymB,KAAI,GAAAvyB,OAAK06B,EAAUwC,EAAU1B,GAAzB,QAGL,OAIN,CAAC,EAAG,GAAG5f,IAAI,SAAC7J,GACX,IAAIlJ,EAAIkJ,EACF3R,EAAc,IAANyI,EAAUgzB,EAASC,EAC7BqB,EAAiB,IAANt0B,EAAU,EAAI,EACvBu0B,EAA6B,IAAbD,EAAiBtB,EAASC,EAC1CoB,EAAUv3B,KAAKuG,IAAI,EAAGvG,KAAKmC,IAAI,GAAI1H,EAAQ0H,IAAQoE,EAAMpE,KAE/D,OACEgD,EAAAC,EAAAC,cAAA,OACE5J,IAAKyH,EACLiD,MAAO,CACLymB,KAAI,GAAAvyB,OAAK06B,EAAUwC,GAAW1B,EAvEtB,KAuEJ,MACJ6B,OAAQx0B,IAAMoyB,EAAW,EAAI,GAE/B/vB,UAAS,gBAAAlL,OAAkB6I,EAAlB,KAAA7I,OAAuBg7B,IAAanyB,EAAI,WAAa,IAC9Dy0B,YAAa,SAAC58B,GACZ,IAAM4E,EAAY5E,EAAE68B,QAAU78B,EAAE8D,OAAOi3B,wBAAwBlJ,KAE3D4J,GACFA,IAEF,IAAIhwB,EAAiB,IAANtD,EAAUkzB,EAAYC,EAErC5rB,EAAKotB,cAAgB,SAAAl6B,GAAe,IAAbi6B,EAAaj6B,EAAbi6B,QAEfE,EAAW31B,GADGy1B,EAAUb,EAAYp3B,IAAck2B,EApFlD,KAqF+BtvB,EAAMpE,GACrC0M,EAAW7O,KAAKmC,IAAIoE,EAAKvG,KAAKuG,IAAIpE,EAAK21B,IAElC,IAAN50B,GAAW2L,EAAW4oB,GAAyB,IAANv0B,GAAW2L,EAAW4oB,GAC9DjxB,GACFA,EAASixB,GAIXD,EAAiB,KADjBt0B,EAAIs0B,GACiB,EAAI,EACzBhxB,EAAiB,IAANtD,EAAUkzB,EAAYC,EACjC5rB,EAAK+mB,SAAS,CAAC6D,SAAUnyB,EAAGoyB,SAAUpyB,KAC7BsD,GACTA,EAASqI,IAKbpE,EAAKstB,YAAc,SAACh9B,GAClB0P,EAAKotB,cAAc98B,GAEnBkN,OAAOmqB,oBAAoB,YAAa3nB,EAAKotB,sBACtCptB,EAAKotB,cAEZ5vB,OAAOmqB,oBAAoB,UAAW3nB,EAAKstB,oBACpCttB,EAAKstB,YAEZttB,EAAK+mB,SAAS,CAAC6D,SAAU,OAErBoB,GACFA,KAIJxuB,OAAOgqB,iBAAiB,YAAaxnB,EAAKotB,eAC1C5vB,OAAOgqB,iBAAiB,UAAWxnB,EAAKstB,aAExCttB,EAAK+mB,SAAS,CAAC6D,SAAUnyB,EAAGoyB,SAAUpyB,iBArLbsC,IAAMC,WCNzCuyB,EAAmB,CACvB,WACA,WACA,iBACA,oBAGmBC,eACnB,SAAAA,EAAYz6B,GAAO,IAAAwJ,EAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAs3B,GACjBjxB,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAA28B,GAAAv3B,KAAAC,KAAMnD,IAEN,IAAM06B,EAAUh+B,YAAU,UAAW,IAHpB,OAMjBg+B,EAAQ18B,QAAQ,SAACkU,GACXA,EAAOyoB,YACTzoB,EAAO5E,SAAP,GAAAzQ,OAAAiB,OAAAoP,EAAA,EAAApP,CACKoU,EAAOyoB,WADZ78B,OAAAoP,EAAA,EAAApP,CAEMoU,EAAO5E,UAAY,KAEzB4E,EAAOkB,gBAAkBlB,EAAOyoB,UAAUC,OAAO,SAACC,EAAQzqB,GAAT,OAAmByqB,GAAUzqB,EAAMC,SAAW,IAAI,UAC5F6B,EAAOyoB,WAGV,cAAezoB,IACnBA,EAAO3E,UAAY2E,EAAO5E,SAASstB,OAAO,SAACC,EAAQzqB,GAAT,OAAmByqB,GAAUzqB,EAAMC,SAAW,IAAI,IAGxF,4BAA6B6B,IACjCA,EAAOiB,wBAA0BjB,EAAOkB,iBAGpC,qBAAsBlB,IAC1BA,EAAOK,iBAAmBL,EAAO3E,aAIrC/D,EAAKqD,MAAQ,CACX6tB,UACAI,gBAAiB,KACjBC,aAAcr+B,YAAU,eAAgB,MACxCs+B,SAAUt+B,YAAU,WAAY,MAChCu+B,QAASv+B,YAAU,UAAW,MAC9BsyB,OAAQtyB,YAAU,UAAU,IAnCb8M,mFAwCjBrG,KAAK+3B,kBACL/3B,KAAKg4B,kEAGYC,GACMj4B,KAAKnD,MAArB20B,eACcyG,EAAUzG,eAC7BxxB,KAAKg4B,uBACLh4B,KAAK+3B,sDAIED,GACT93B,KAAK6wB,SAAS,CAACiH,YACfz+B,YAAU,UAAWy+B,2CAGPF,GACd53B,KAAK6wB,SAAS,CAAC+G,iBACfv+B,YAAU,eAAgBu+B,uCAGhB7oB,EAAQmpB,GAAmB,IAAAtxB,EAAA5G,KAC9BwxB,EAAgBxxB,KAAKnD,MAArB20B,aACAsG,EAAW93B,KAAK0J,MAAhBouB,QACPtG,EAAa,WAAM,IAEb5W,EADGgd,EAAgBhxB,EAAK8C,MAArBkuB,aAGHA,IACEA,EAAa9e,YAAc/J,EAAO+J,YAAc8e,EAAa1jB,WAAanF,EAAOmF,YACnF0G,EAAatT,OAAOd,KAAKqN,WAAWskB,yBAGtC7wB,OAAOd,KAAK2Q,cAGV+gB,GAAqBJ,IAAY/oB,EAAO+J,WAC1ClS,EAAKwxB,WAAW,MAGlB9wB,OAAOd,KAAKuT,YAAYhL,EAAQ,CAC9B2K,oBAAqBkB,4CAOzB4W,EADuBxxB,KAAKnD,MAArB20B,cACM,WACXlqB,OAAOd,KAAK2Q,sDAID/Y,GAAS,IACfozB,EAAgBxxB,KAAKnD,MAArB20B,aACPxxB,KAAKo4B,WAAW,MAEhB5G,EAAa,WACXlqB,OAAOd,KAAK8S,eAAelb,8CAM7BozB,EADuBxxB,KAAKnD,MAArB20B,cACM,WACXlqB,OAAOd,KAAK0Q,2DAKdlX,KAAKq4B,qBAAsB,EAC3Br4B,KAAKkX,0DAGW,IACT0gB,EAAgB53B,KAAK0J,MAArBkuB,aACP53B,KAAK+Z,YAALpf,OAAAkP,EAAA,EAAAlP,CAAA,GAAqBi9B,EAArB,CAAmC1jB,WAAY0jB,EAAa1jB,aAAY,0CAIxElU,KAAK6wB,SAAS,SAAA9zB,GAAc,IAAZ8uB,EAAY9uB,EAAZ8uB,OAKd,OAJA/kB,WAAW,WACTzN,YAAU,UAAWwyB,KAGhB,CACLA,QAASA,2CAKD,IAAA/hB,EAAA9J,KACZ8G,WAAW,WAAM,IAAAwxB,EAC0BxuB,EAAKJ,MAAvC6tB,EADQe,EACRf,QAASK,EADDU,EACCV,aAAcE,EADfQ,EACeR,QAC9Bz+B,YAAU,UAAWk+B,GACrBl+B,YAAU,UAAWy+B,GACrBz+B,YAAU,eAAgBu+B,wCAInB7oB,EAAQwpB,GACjBv4B,KAAKo4B,WAAW,MAChBp4B,KAAKw4B,wDAGW,IACThH,EAAgBxxB,KAAKnD,MAArB20B,aACAoG,EAAgB53B,KAAK0J,MAArBkuB,aAEFpG,GAIAoG,GAIL53B,KAAK+Z,YAAY6d,kDAGI,IAAArtB,EAAAvK,KACdwG,EAAQc,OAARd,KACFA,IAAQA,EAAKgT,gBAIlBhT,EAAKgT,cAAgB,SAACme,GACpBptB,EAAKsmB,SAAS,CAAC8G,qBAGjBnxB,EAAKiT,aAAe,SAAC1K,GACnBxE,EAAKsmB,SAAS,CAAC8G,gBAAiB,OAE5BptB,EAAK8tB,2BACA9tB,EAAK8tB,oBAId9tB,EAAKsmB,SAAS,SAAA7zB,GAAe,IAAbu6B,EAAav6B,EAAbu6B,QACRkB,EAAU,CAAI1pB,GAAJrV,OAAAiB,OAAAoP,EAAA,EAAApP,CAAe48B,IAU/B,OARAzwB,WAAW,WACTzN,YAAU,UAAWo/B,GAEhB1pB,EAAOwK,UACVhP,EAAKwP,YAAYhL,KAId,CACLwoB,QAASkB,MAKfjyB,EAAKwT,cAAgB,SAACjL,GACfA,EAAOwK,UACVhP,EAAKmuB,gBAAgB3pB,IAIzBvI,EAAKqU,YAAc,SAAC9L,GACDxE,EAAKb,MAAfmiB,SAEQ9c,EAAOwK,SACpBzS,WAAW,WAETyD,EAAKwP,YAAYxP,EAAKb,MAAMkuB,gBAG9BrtB,EAAKmuB,gBAAgB,OAIzBlyB,EAAKuU,aAAe,SAAChM,GACnBxE,EAAKmuB,gBAAgB,+CAICpnB,EAASyI,GAAa,IAAA3O,EAAApL,KAAlC8Y,EAAkCnb,EAAlCmb,UACZ9Y,KAAK6wB,SAAS,SAAAjzB,GAA6B,IACrC+6B,EADUf,EAA2Bh6B,EAA3Bg6B,aAERgB,EAAW,CACfrB,QAHuC35B,EAAb25B,QAGTjiB,IAAI,SAACvG,GACpB,OAAIA,EAAO+J,YAAcA,EACvB6f,EAASh+B,OAAAkP,EAAA,EAAAlP,CAAA,GACJoU,EACAuC,GAIAvC,KAoBX,OAhBI6oB,GAAgBA,EAAa9e,YAAcA,IAC7C8f,EAAShB,aAATj9B,OAAAkP,EAAA,EAAAlP,CAAA,GACKi9B,EACAtmB,IAIHqnB,GAAa5e,GACfjT,WAAW,WACTsE,EAAK2O,YAALpf,OAAAkP,EAAA,EAAAlP,CAAA,GACKg+B,EADL,CAEEzkB,UAAW0jB,GAAgBA,EAAa1jB,eAKvC0kB,qCAIF7pB,EAAQlV,EAAMkgB,GACrB/Z,KAAK64B,aAAa9pB,EAAQ,CAAClV,QAAOkgB,+CAGhBhL,EAAQkB,EAAiB8J,GAC3C,IAAMR,EAAWtJ,EAA4C,IAA1BlB,EAAOK,iBAC1CpP,KAAK64B,aAAa9pB,EAAQ,CAACkB,kBAAiBsJ,YAAWQ,gDAGpChL,EAAQK,EAAkB2K,GAC7C,IAAMR,EAAWxK,EAAOkB,gBAAqC,IAAnBb,EAC1CpP,KAAK64B,aAAa9pB,EAAQ,CAACK,mBAAkBmK,YAAWQ,uCAG9ChL,EAAQkB,EAAiBb,EAAkB2K,GACrD,IAAMR,EAAWtJ,EAAqC,IAAnBb,EACnCpP,KAAK64B,aAAa9pB,EAAQ,CAACkB,kBAAiBb,mBAAkBmK,YAAWQ,2CAGjD,IAAA/M,EAAAhN,KAAZ8Y,EAAY3a,EAAZ2a,UACZ9Y,KAAK6wB,SAAS,SAAAtyB,GAA6B,IAA3Bq5B,EAA2Br5B,EAA3Bq5B,aACRa,EADmCl6B,EAAbg5B,QACD9qB,OAAO,SAACsC,GAAD,OAAYA,EAAO+J,YAAcA,IAUnE,OARAhS,WAAW,WACTzN,YAAU,UAAWo/B,KAGnBb,GAAgBA,EAAa9e,YAAcA,GAC7ChS,WAAW,kBAAMkG,EAAKmK,eAGjB,CAACogB,QAASkB,wCAIV1pB,GACT,IAAM4pB,EAASh+B,OAAAkP,EAAA,EAAAlP,CAAA,GACVoU,EADU,CAEb+J,UAAWnG,KAAKC,MAChB/Y,KAAI,WAAAH,OAAaqV,EAAOlV,QAG1BmG,KAAK6wB,SAAS,SAAAryB,GAAe,IAAb+4B,EAAa/4B,EAAb+4B,QACRkB,EAAU,CAAIE,GAAJj/B,OAAAiB,OAAAoP,EAAA,EAAApP,CAAkB48B,IAMlC,OAJAzwB,WAAW,WACTzN,YAAU,UAAWo/B,KAGhB,CAAClB,QAASkB,oDAKnBnxB,OAAOd,KAAK8U,sEAGSja,EAAOC,GAC5BgG,OAAOd,KAAK+U,uBAAuBla,EAAOC,kDAI1CgG,OAAOd,KAAKgV,2DAGFzM,GACV,IAAM+pB,EAAQn+B,OAAAkP,EAAA,EAAAlP,CAAA,GAAOoU,GACf8oB,EAAW,CAAC9oB,UAClBsoB,EAAiBx8B,QAAQ,SAACk+B,GACV,aAAVA,IACFlB,EAASkB,GAAS/+B,KAAKC,UAAU6+B,EAASC,GAAQ,KAAM,UACjDD,EAASC,MAGpBlB,EAASiB,SAAW9+B,KAAKC,UAAU6+B,EAAU,KAAM,GAEnDzB,EAAiBx8B,QAAQ,SAACk+B,GACxBlB,EAAQ,GAAAn+B,OAAIq/B,EAAJ,cAAwBlB,EAASkB,KAG3C/4B,KAAK6wB,SAAS,CAACgH,aACfx+B,YAAU,WAAYw+B,uCAGZkB,EAAOj/B,GACjBkG,KAAK6wB,SAAS,SAAAnjB,GAAgB,IAAAsrB,EAAdnB,EAAcnqB,EAAdmqB,SACRpU,EAAC9oB,OAAAkP,EAAA,EAAAlP,CAAA,GACFk9B,GADEmB,EAAA,GAAAr+B,OAAAs+B,EAAA,EAAAt+B,CAAAq+B,EAEJD,EAAQj/B,GAFJa,OAAAs+B,EAAA,EAAAt+B,CAAAq+B,EAAA,GAAAt/B,OAGDq/B,EAHC,UAGe,MAHfp+B,OAAAs+B,EAAA,EAAAt+B,CAAAq+B,EAAA,GAAAt/B,OAIDq/B,EAJC,YAIiBj/B,IAAU+9B,EAAQ,GAAAn+B,OAAIq/B,EAAJ,eAJnCC,IASP,OAFAlyB,WAAW,kBAAMzN,YAAU,WAAYoqB,KAEhC,CAACoU,SAAUpU,yCAIVsV,GAEV/4B,KAAKk5B,YAAYH,EAAO/4B,KAAK0J,MAAMmuB,SAAX,GAAAn+B,OAAuBq/B,EAAvB,uDAIxBjyB,WAAW,WAAQzN,YAAU,WAAY,QACzC2G,KAAK6wB,SAAS,CACZgH,SAAU,4CAID,IAAApqB,EAAAzN,KACXA,KAAK6wB,SAAS,SAAAhjB,GAAgB,IACxBkB,EADU8oB,EAAchqB,EAAdgqB,SAEVsB,GAAW,EACTP,EAAQj+B,OAAAkP,EAAA,EAAAlP,CAAA,GAAOk9B,GAoBrB,OAlBAR,EAAiBx8B,QAAQ,SAACk+B,GACxB,IACE,IAAMj/B,EAAQE,KAAKmB,MAAM08B,EAASkB,IACpB,aAAVA,EACFhqB,EAASjV,EACAiV,IACTA,EAAOgqB,GAASj/B,GAGlB8+B,EAAQ,GAAAl/B,OAAIq/B,EAAJ,WAAqB,KAC7B,MAAO3+B,GAEPC,QAAQC,MAAMF,GACd++B,GAAW,EACXP,EAAQ,GAAAl/B,OAAIq/B,EAAJ,WAAqB3+B,EAAEg/B,cAI/BD,GACFryB,WAAW,WAAQzN,YAAU,WAAYu/B,KAClC,CAACf,SAAUe,KAElB9xB,WAAW,WACT2G,EAAKorB,aAAahB,EAAS9oB,OAAQA,GAAQ,GAC3CjI,WAAW,WAAQzN,YAAU,WAAY,UAGpC,CAACw+B,SAAU,kDAKP9oB,GAAQ,IAAAnB,EAAA5N,KAChB43B,EAAgB53B,KAAK0J,MAArBkuB,aACH5B,EAAa,KACbC,EAAa,KAEVzvB,EAAQc,OAARd,KACDxE,EAAQwE,GAAQA,EAAKqN,WACvBqiB,EAASl0B,GAASA,EAAM0M,QAAU1M,EAAM0M,QAAQS,YAAc,KAMlE,GAJIyoB,GAAgBA,EAAa9e,YAAc/J,EAAO+J,YACpDod,EAAS,MAGP0B,GAAgBA,EAAa9e,YAAc/J,EAAO+J,WAAa8e,EAAa1jB,UAAW,CACzFgiB,EAAS,KADgF,IAGlFvc,EAAoB5K,EAApB4K,iBACP,GAAKA,GAAgD,IAA5BA,EAAiBlf,OAGnC,CACL,IAAM4+B,EAAmBr3B,GAASA,EAAMm2B,wBACxC,GAAKn2B,EASE,GAAKq3B,EAIL,CAEL,IAAMC,EAAYD,GAAoBA,EAAiBjvB,WAAkB,EACrEmvB,EAAWxqB,EAAOK,iBAEtB4mB,EAAa32B,KAAKuG,IAAI0zB,EAAWvqB,EAAOkB,iBAExC,IAAK,IAAI1N,EAAI,EAAGA,EAAIoX,EAAiBlf,OAAQ8H,GAAK,EAChD,GAAIoX,EAAiBpX,GAAG6H,WAAakvB,EAAW,CAC1C/2B,EAAI,EAAIoX,EAAiBlf,SAC3B8+B,EAAW5f,EAAiBpX,EAAI,GAAG6H,WAErC,MAIJ6rB,EAAa52B,KAAKmC,IAAI+3B,EAAUxqB,EAAOK,uBAlBvC4mB,EAAajnB,EAAOkB,gBACpBgmB,EAAa52B,KAAKmC,IAAIuN,EAAOK,iBAAkBuK,EAAiB,GAAGvP,eAZzD,CAEV4rB,EAAajnB,EAAOkB,gBACpB,IAAK,IAAI1N,EAAI,EAAGA,EAAIoX,EAAiBlf,OAAQ8H,GAAK,EAChD,GAAIoX,EAAiBpX,GAAG6H,UAAY4rB,EAAY,CAC9CC,EAAa52B,KAAKmC,IAAIuN,EAAOK,iBAAkBuK,EAAiBpX,GAAG6H,WACnE,aAVN4rB,EAAajnB,EAAOkB,gBACpBgmB,EAAalnB,EAAOK,iBAoClB4mB,EAAaC,IACfD,EAAaC,EAAa,MAI9B,OACEzxB,EAAAC,EAAAC,cAAA,QAAM80B,SAAU,SAACp/B,GACfA,EAAE+Q,iBACFyC,EAAK6rB,WAAW1qB,KAGhBvK,EAAAC,EAAAC,cAAA,SACEiB,KAAK,OACL+zB,WAAS,EACT5/B,MAAOiV,EAAOlV,KACdgM,SAAU,SAACzL,GAAD,OAAOwT,EAAK+rB,SAAS5qB,EAAQ3U,EAAE8D,OAAOpE,UAElD0K,EAAAC,EAAAC,cAAA,QACEE,UAAU,cACV6xB,MAAM,6BACNzwB,QAAS,kBAAM4H,EAAKmM,YAALpf,OAAAkP,EAAA,EAAAlP,CAAA,GAAqBoU,EAArB,CAA6BwK,UAAU,EAAMpP,SAAU,QAHxE,gBAOA3F,EAAAC,EAAAC,cAAA,QAAME,UAAU,eAAe6xB,MAAM,eAAezwB,QAAS,kBAAM4H,EAAKgsB,YAAY7qB,KAApF,UACAvK,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAc6xB,MAAM,cAAczwB,QAAS,kBAAM4H,EAAKisB,WAAW9qB,KAAjF,gBACAvK,EAAAC,EAAAC,cAAA,QAAME,UAAU,gBAAgB6xB,MAAM,gBAAgBzwB,QAAS,kBAAM4H,EAAKksB,aAAa/qB,KAAvF,gBACAvK,EAAAC,EAAAC,cAAA,QAAME,UAAU,UACbmK,EAAOkB,gBADV,IAGGlB,EAAOK,iBACPL,EAAOK,mBAAqBL,EAAO3E,WAAnC,MAAA1Q,OAAsDqV,EAAO3E,YAEhE5F,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACq1B,EAAD,CACEv4B,IAAK,EACLoE,IAAKmJ,EAAO3E,UACZmrB,OAAQxmB,EAAOkB,gBACfulB,OAAQzmB,EAAOK,iBACf4mB,WAAYA,EACZC,WAAYA,EACZC,OAAQA,EACRH,SAAUhnB,EAAO4K,kBAAoB,IAAIrE,IAAI,SAACmO,GAAD,MAAQ,CAAC3pB,MAAO2pB,EAAErZ,UAAWqsB,MAAO,sBACjFxB,gBAAiBlmB,EAAO+J,UACxB6c,aAAc,SAACv7B,GACbwT,EAAKosB,YAAa,EACdpC,GAAgBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,WAC9ElL,EAAK0N,wBAGTsa,aAAc,SAACx7B,GACbwT,EAAKosB,YAAa,EACdpC,GAAgBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,YACzElL,EAAKqsB,kBACRrsB,EAAK4N,uBAEP5N,EAAK4qB,gBAGT3C,cAAe,SAACz7B,GACdwT,EAAKqsB,kBAAmB,GAE1BnE,YAAa,SAAC17B,GACZwT,EAAKqsB,kBAAmB,EAEpBrC,GAAgBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,WACzElL,EAAKosB,YACRpsB,EAAK4N,uBAEP5N,EAAK4qB,eAEL1xB,WAAW,WAAM,IAET6xB,EADY/qB,EAAKlE,MAAhB6tB,QACmBn3B,KAAK,SAAC+e,GAAD,OAAOA,EAAErG,YAAc/J,EAAO+J,YAC7DlL,EAAKmM,YAAY4e,GACjB/qB,EAAK4qB,iBAIX/C,UAAW,SAAC+B,GACV5pB,EAAKssB,oBAAoBnrB,EAAQ1P,KAAK2B,MAAMw2B,IACxCI,GAAgBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,WAC9EhS,WAAW,WAET8G,EAAK2N,uBAAuBlc,KAAK2B,MAAMw2B,GAAY5pB,EAAKlE,MAAMkuB,aAAaxoB,qBAIjFsmB,UAAW,SAACyE,GACVvsB,EAAKwsB,qBAAqBrrB,EAAQ1P,KAAK2B,MAAMm5B,IACzCvC,GAAgBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,WAC9EhS,WAAW,WAET8G,EAAK2N,uBAAuB3N,EAAKlE,MAAMkuB,aAAa3nB,gBAAiB5Q,KAAK2B,MAAMm5B,UAKtFprB,EAAOkB,kBAAoBlB,EAAOiB,yBAA2BjB,EAAOK,mBAAqBL,EAAO3E,YAChG5F,EAAAC,EAAAC,cAAA,SACEiB,KAAK,SACLK,QAAS,SAAC5L,GACRA,EAAE+Q,iBACFyC,EAAKysB,YAAYtrB,EAAQA,EAAOiB,wBAAyBjB,EAAO3E,WAAW,IAE7EtQ,MAAM,qDAOC,IAAAwU,EAAAtO,KACR63B,EAAY73B,KAAK0J,MAAjBmuB,SAEP,OACErzB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAAS6xB,MAAM,gBAAgBzwB,QAAS,kBAAMsI,EAAKgsB,kBAAnE,gBACA91B,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAAS6xB,MAAM,cAAczwB,QAAS,kBAAMsI,EAAKisB,eAAjE,iBAEF/1B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACZyyB,EAAiB/hB,IAAI,SAACyjB,GAAD,OACpBv0B,EAAAC,EAAAC,cAAA,OACE5J,IAAKi+B,EACLn0B,UAAS,SAAAlL,OAAWm+B,EAAQ,GAAAn+B,OAAIq/B,EAAJ,WAAqB,QAAU,GAAlD,KAAAr/B,OAAwDm+B,EAAQ,GAAAn+B,OAAIq/B,EAAJ,aAAuB,UAAY,KAE5Gv0B,EAAAC,EAAAC,cAAA,aACGq0B,EACA,IACDv0B,EAAAC,EAAAC,cAAA,QACEc,MAAO,CAACg1B,WAAY3C,EAAQ,GAAAn+B,OAAIq/B,EAAJ,aAAuB,UAAY,UAC/Dn0B,UAAU,SACV6xB,MAAM,uBACNzwB,QAAS,kBAAMsI,EAAKmsB,YAAY1B,KAJlC,iBASDlB,EAAQ,GAAAn+B,OAAIq/B,EAAJ,YACPv0B,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQizB,EAAQ,GAAAn+B,OAAIq/B,EAAJ,YAElCv0B,EAAAC,EAAAC,cAAA,YAAU5K,MAAO+9B,EAASkB,GAAQlzB,SAAU,SAACzL,GAAD,OAAOkU,EAAK4qB,YAAYH,EAAO3+B,EAAE8D,OAAOpE,gDAQvF,IAAA2X,EAAAzR,KAAA2yB,EAGH3yB,KAAK0J,MADP6tB,EAFK5E,EAEL4E,QAASI,EAFJhF,EAEIgF,gBAAiBC,EAFrBjF,EAEqBiF,aAAcE,EAFnCnF,EAEmCmF,QAASjM,EAF5C8G,EAE4C9G,OAGnD,OALO8G,EAEoDkF,SAIlD73B,KAAK06B,iBAIZl2B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAS,YAAAlL,OAAck+B,EAAe,gBAAkB,GAA/C,KAAAl+B,OAAqDk+B,GAAgBA,EAAa1jB,UAAY,YAAc,KACvH0jB,GACCpzB,EAAAC,EAAAC,cAACF,EAAAC,EAAMk2B,SAAP,KAEEn2B,EAAAC,EAAAC,cAAA,QACEE,UAAS,iBAAAlL,OAAmBmyB,EAAS,YAAc,cACnD4K,MAAO5K,EAAS,2BAA6B,0BAC7C7lB,QAAS,kBAAMyL,EAAKmpB,iBAHtB,gBAOAp2B,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAAS6xB,MAAM,cAAczwB,QAAS,kBAAMyL,EAAK0F,eAAjE,UACCygB,EAAa1jB,WACZ1P,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAAS6xB,MAAM,oBAAoBzwB,QAAS,kBAAMyL,EAAKopB,oBAAvE,iBAEAjD,EAAa1jB,WACb1P,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAAS6xB,MAAM,mBAAmBzwB,QAAS,kBAAMyL,EAAKopB,oBAAtE,YAIJjD,IACAD,EACEnzB,EAAAC,EAAAC,cAACF,EAAAC,EAAMk2B,SAAP,KACEn2B,EAAAC,EAAAC,cAAA,QAAME,UAAU,mBAAmB6xB,MAAM,iBAAiBzwB,QAAS,kBAAMyL,EAAKyF,kBAA9E,gBACA1S,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAAS6xB,MAAM,oBAAoBzwB,QAAS,kBAAMyL,EAAKqpB,mBAAvE,iBAGFt2B,EAAAC,EAAAC,cAACF,EAAAC,EAAMk2B,SAAP,KACEn2B,EAAAC,EAAAC,cAAA,QAAME,UAAU,gBAAgB6xB,MAAM,yBAAyBzwB,QAAS,kBAAMyL,EAAK6H,mBAAnF,gBACA9U,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBAAkB6xB,MAAM,6BAA6BzwB,QAAS,kBAAMyL,EAAK6H,eAAe,CAACC,UAAU,MAAnH,mBAKR/U,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WACX2yB,EAAQjiB,IAAI,SAACvG,GAAD,OACXvK,EAAAC,EAAAC,cAAA,MACEE,UAAS,6CAAAlL,OAELk+B,GAAgBA,EAAa9e,YAAc/J,EAAO+J,UAAY,SAAW,GAFpE,sBAAApf,OAGLo+B,IAAY/oB,EAAO+J,UAAY,UAAY,GAHtC,oBAKThe,IAAKiU,EAAO+J,WAEZtU,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAhB,gBACCgzB,GAAgBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,WAC3EtU,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAc6xB,MAAM,oBAAoBzwB,QAAS,kBAAMyL,EAAKsI,YAALpf,OAAAkP,EAAA,EAAAlP,CAAA,GAAqBoU,EAArB,CAA6BmF,WAAW,KAAO,KAAtH,UAED0jB,IAAiBA,EAAa1jB,WAAa0jB,EAAa9e,YAAc/J,EAAO+J,WAC5EtU,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAc6xB,MAAM,iBAAiBzwB,QAAS,kBAAMyL,EAAKsI,YAAYhL,GAAQ,KAA7F,kBAEC6oB,GAAgBA,EAAa9e,YAAc/J,EAAO+J,aAAe/J,EAAOwK,UACzE/U,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAc6xB,MAAM,eAAezwB,QAAS,kBAAMyL,EAAKsI,YAAYhL,GAAQ,KAA3F,kBAEC6oB,GAAgBA,EAAa9e,YAAc/J,EAAO+J,YAAc/J,EAAOwK,UACxE/U,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAc6xB,MAAM,6BAA6BzwB,QAAS,kBAAMyL,EAAKsI,YAAYhL,GAAQ,KAAzG,gBAED+oB,IAAY/oB,EAAO+J,WAClBrH,EAAKspB,iBAAiBhsB,GAExBvK,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOoB,QAAS,kBAAMyL,EAAKsI,YAAYhL,GAAQ,KAAQA,EAAOlV,MAC9E2K,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAc6xB,MAAM,cAAczwB,QAAS,kBAAMyL,EAAK2mB,WAAWrpB,EAAO+J,aAAxF,sBA3qBsBjU,IAAMC,WCRrBk2B,wBACnB,SAAAA,EAAYn+B,GAAO,IAAAwJ,EAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAg7B,GACjB30B,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAAqgC,GAAAj7B,KAAAC,KAAMnD,IACN,IAAMoa,EAAM1d,YAAU,MAAO,IAAI+b,IAAI,SAAC2lB,GAAD,OAAAtgC,OAAAkP,EAAA,EAAAlP,CAAA,GAAesgC,EAAf,CAAqBC,QAAQ,EAAOC,KAAK,MAF7D,OAGjB90B,EAAKqD,MAAQ,CACXuN,OAEF5Q,EAAK+0B,MAAQ,EAAIC,OAAOpkB,EAAI3B,IAAI,SAAAvY,GAAA,OAAAA,EAAE4H,KAAY8yB,OAAO,SAAChzB,EAAG4a,GAAJ,OAAW5a,EAAI4a,EAAI5a,EAAI4a,GAAI,IAChFhZ,EAAKi1B,OAAS,GACdj1B,EAAKwsB,IAAMhuB,IAAMusB,YARA/qB,mFAWC,IAAAO,EAAA5G,KAClBA,KAAKu7B,SAAW,GAChB,IAAMC,EAAYx7B,KAClB,CAAC,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAASnF,QAAQ,SAACilB,GAE1D,IAAMyb,EAAW30B,EAAK20B,SAASzb,GAASzlB,QAAQylB,GAEhDzlB,QAAQylB,GAAS,WAAkB,QAAA2b,EAAAjhC,UAAAC,OAANihC,EAAM,IAAAr+B,MAAAo+B,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAND,EAAMC,GAAAnhC,UAAAmhC,GACjC,IAAMC,EAAUJ,EAAUK,eAAVj9B,MAAA48B,EAA4BE,GAE5C,OADAF,EAAUM,WAAWJ,EAAK19B,KAAK,KAAM8hB,EAAO8b,GACrCL,EAAQ38B,WAAR,EAAY88B,iDAKNzD,GAAW,IAAAnuB,EAAA9J,KACrBwG,EAAQxG,KAAKnD,MAAb2J,MACFyxB,EAAUzxB,MAAQA,GACrBA,EAAKu1B,iBAAiB,WACpBjyB,EAAKkyB,iEAMTh8B,KAAKg8B,wDAILh8B,KAAKs7B,OAAOzgC,QAAQ,SAACic,GACnB6a,aAAa7a,KAGfnc,OAAOmC,QAAQkD,KAAKu7B,UAAU1gC,QAAQ,SAAAmC,GAAuB,IAAAW,EAAAhD,OAAA+Q,EAAA,EAAA/Q,CAAAqC,EAAA,GAArB8iB,EAAqBniB,EAAA,GAAd49B,EAAc59B,EAAA,GAE3DtD,QAAQylB,GAASyb,2CAINU,GACb,GAAIA,aAAe1+B,MAAO,KAElBogB,EADUse,EAATC,MACave,MAAM,oBAC1B,GAAIA,EACF,OAAOA,EAAM,GAGjB,OAAO,wCAGEwe,EAAarc,EAAO8b,GAAS,IAAArxB,EAAAvK,KAChCi8B,EAAME,EAAYj4B,QAAQ,WAAY,IAE5C,IAAI+3B,EAAIte,MAAM,wBAAd,CAIA,IAAMhZ,EAAM3E,KAAKo7B,OAAS,EAGlBtkB,EAAQhQ,WAAW,WACvByD,EAAKsmB,SAAS,SAAAjzB,GAAA,MAAY,CACxBqZ,IADYrZ,EAAEqZ,IACL3B,IAAI,SAAC2lB,GAAD,OAAWA,EAAKt2B,KAAOA,EAAZhK,OAAAkP,EAAA,EAAAlP,CAAA,GAAqBsgC,EAArB,CAA2BC,QAAQ,IAAQD,QAEpE,KAEHj7B,KAAKs7B,OAAOt3B,KAAK8S,GAIjB,IAAMA,EAAQhQ,WAAW,WACvByD,EAAKsmB,SAAS,SAAA1yB,GAAA,MAAY,CACxB8Y,IADY9Y,EAAE8Y,IACL3B,IAAI,SAAC2lB,GAAD,OAAWA,EAAKt2B,KAAOA,EAAZhK,OAAAkP,EAAA,EAAAlP,CAAA,GAAqBsgC,EAArB,CAA2BC,QAAQ,EAAOC,KAAK,IAAQF,QAEhF,KAEHj7B,KAAKs7B,OAAOt3B,KAAK8S,GAGnB9W,KAAK6yB,IAAIf,QAAQsK,UAAY,EAE7Bp8B,KAAK6wB,SAAS,SAAAtyB,GAAW,IAAT0Y,EAAS1Y,EAAT0Y,IACRolB,EAAM,CACV,CACEJ,MAAKnc,QAAOnb,KAAIi3B,YAFRliC,OAAAiB,OAAAoP,EAAA,EAAApP,CAIPsc,EAAIxK,OAAO,SAACa,EAAGyK,GAAJ,OAAUA,EAAI,OAO9B,OAJAjR,WAAW,WACTzN,YAAU,MAAOgjC,KAGZ,CACLplB,IAAKolB,uCAKF,IACAplB,EAAOjX,KAAK0J,MAAZuN,IACP,OACEzS,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UAAUiuB,IAAK7yB,KAAK6yB,KACjCruB,EAAAC,EAAAC,cAAA,UACGuS,EAAI3B,IAAI,SAAA9W,GAAA,IACPy9B,EADOz9B,EACPy9B,IAAKnc,EADEthB,EACFshB,MAAOnb,EADLnG,EACKmG,GAAIu2B,EADT18B,EACS08B,OAAQC,EADjB38B,EACiB28B,IAAKS,EADtBp9B,EACsBo9B,QADtB,OAGPp3B,EAAAC,EAAAC,cAAA,MAAI5J,IAAK6J,EAAIC,UAAS,GAAAlL,OAAKomB,EAAL,KAAApmB,OAAcwhC,EAAS,SAAW,GAAlC,KAAAxhC,OAAwCyhC,EAAM,MAAQ,KAC1E32B,EAAAC,EAAAC,cAAA,QAAME,UAAU,SAASkb,GACzBtb,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOq3B,GACtBL,GACCp3B,EAAAC,EAAAC,cAAA,QAAME,UAAU,WACbg3B,eA5HkB/2B,IAAMC,YCItBw3B,eACnB,SAAAA,EAAYz/B,GAAO,IAAAwJ,EAAA,OAAA1L,OAAAuL,EAAA,EAAAvL,CAAAqF,KAAAs8B,IACjBj2B,EAAA1L,OAAAwL,EAAA,EAAAxL,CAAAqF,KAAArF,OAAAyL,EAAA,EAAAzL,CAAA2hC,GAAAv8B,KAAAC,KAAMnD,KAQRw0B,WAAa,SAAC7qB,EAAMgrB,GAClBlqB,OAAOd,KAAOA,EACdH,EAAKwqB,SAAS,CAACrqB,OAAMgrB,kBARrBnrB,EAAKqD,MAAQ,CACXlD,KAAM,KACNgrB,aAAc,MALCnrB,wEAcV,IAAAssB,EACsB3yB,KAAK0J,MAA3BlD,EADAmsB,EACAnsB,KAAMgrB,EADNmB,EACMnB,aAEb,OACEhtB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAC63B,EAAD,CACEt1B,OAAK,EACLoqB,WAAYrxB,KAAKqxB,aAGnB7sB,EAAAC,EAAAC,cAAC83B,GAAD,CAASh2B,KAAMA,IAEfhC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SACX63B,IAAmBC,MAAMpnB,IAAI,SAAAvY,GAAA,IAAAC,EAAArC,OAAA+Q,EAAA,EAAA/Q,CAAAoC,EAAA,GAAE4/B,EAAF3/B,EAAA,GAAQ4/B,EAAR5/B,EAAA,UAC5BwH,EAAAC,EAAAC,cAAA,MAAI5J,IAAK6hC,GACPn4B,EAAAC,EAAAC,cAAA,KAAGxG,OAAO,SAAS2+B,IAAI,sBAAsBF,KAAMA,GAAOC,OAKhEp4B,EAAAC,EAAAC,cAACo4B,EAAD,MACAt4B,EAAAC,EAAAC,cAACq4B,GAAD,CAAQvL,aAAcA,aArCS3sB,IAAMC,8DCD1Bk4B,oLAEjB,OACEx4B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAC63B,EAAD,MAEA/3B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbJ,EAAAC,EAAAC,cAAA,UAAKu4B,IAAkBC,aACtBD,IAAkBE,YACjB34B,EAAAC,EAAAC,cAAA,eAEEF,EAAAC,EAAAC,cAAA,WACCu4B,IAAkBG,UACjB54B,EAAAC,EAAAC,cAAA,KAAGi4B,KAAMM,IAAkBG,WAAYH,IAAkBE,YAEzDF,IAAkBE,WAEpB34B,EAAAC,EAAAC,cAAA,WACCu4B,IAAkBI,eACjB74B,EAAAC,EAAAC,cAAA,KAAGi4B,KAAI,uBAAAjjC,OAAyBujC,IAAkBI,gBAChD74B,EAAAC,EAAAC,cAAA,OAAK44B,IAAKC,KAAaC,IAAG,IAAA9jC,OAAMujC,IAAkBI,cAAxB,kBAG7BJ,IAAkBQ,cACjBj5B,EAAAC,EAAAC,cAAA,KAAGi4B,KAAI,qBAAAjjC,OAAuBujC,IAAkBQ,eAC9Cj5B,EAAAC,EAAAC,cAAA,OAAK44B,IAAKI,KAAYF,IAAG,GAAA9jC,OAAKujC,IAAkBQ,aAAvB,kBAKjCj5B,EAAAC,EAAAC,cAAA,SACGu4B,IAAkBU,kBACjBn5B,EAAAC,EAAAC,cAACF,EAAAC,EAAMk2B,SAAP,KACGsC,IAAkBU,iBACnBn5B,EAAAC,EAAAC,cAAA,YAGHu4B,IAAkBW,aAClB,IACDp5B,EAAAC,EAAAC,cAAA,cAASu4B,IAAkBY,eAC1B,IACAZ,IAAkBa,eAEpBb,IAAkBc,UACjBv5B,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,KAAGi4B,KAAMM,IAAkBc,UACxBd,IAAkBc,WAIzBv5B,EAAAC,EAAAC,cAAA,SACGu4B,IAAkBe,kBACjBx5B,EAAAC,EAAAC,cAACF,EAAAC,EAAMk2B,SAAP,KACGsC,IAAkBe,iBACnBx5B,EAAAC,EAAAC,cAAA,YAGHu4B,IAAkBgB,SAClB,IACDz5B,EAAAC,EAAAC,cAAA,UAAKu4B,IAAkBiB,aACtB,IACAjB,IAAkBkB,WAEpBlB,IAAkBmB,SACjB55B,EAAAC,EAAAC,cAAA,mBAEEF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGE,UAAU,MAAM+3B,KAAMM,IAAkBmB,SACxCnB,IAAkBmB,mBApEKv5B,IAAMC,WCHzBu5B,oLAEjB,OACE75B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAC63B,EAAD,CAAQn3B,mBAAiB,YAJEP,IAAMC,WCGnCw5B,oLACK,IACAr3B,EAASjH,KAAKnD,MAAdoK,MAEP,OAAIg2B,IAAkBsB,MACb/5B,EAAAC,EAAAC,cAAC85B,GAAD,MACEv3B,EACFzC,EAAAC,EAAAC,cAAC+5B,GAAD,MAEAj6B,EAAAC,EAAAC,cAACg6B,GAAD,aATK75B,IAAMC,WAcT65B,iBAAIL,ICdnBM,IAASC,OAAOr6B,EAAAC,EAAAC,cAACo6B,GAAD,CAAK73B,OAFkBC,IAEAyD,SAASkL,eAAe,iwFCazD3D,WAAa,GAGElL,mCACnB,SAAAA,WAAY+3B,GAAW,IAAA14B,EAAA1L,OAAAqkC,kHAAA,EAAArkC,CAAAqF,KAAAgH,YACrB,IAAMxJ,EAAM7C,OAAAskC,gHAAA,EAAAtkC,CAAA,GACPuX,WACA6sB,GAHgB,OAKrB14B,EAAA1L,OAAAukC,6HAAA,EAAAvkC,CAAAqF,KAAArF,OAAAwkC,kHAAA,EAAAxkC,CAAAqM,YAAAjH,KAAAC,KAAMxC,KAEDkD,IAAM,GACX2F,EAAKjE,UAAY,EACjBiE,EAAK+4B,OAAS,GACd/4B,EAAKi1B,OAAS,GACdj1B,EAAKg5B,kBAAoB,EACzBh5B,EAAKi5B,uBAAwB,EAC7Bj5B,EAAKk5B,WAAa,EAClBl5B,EAAKm5B,eAAiB,EACtBn5B,EAAKo5B,QAAU,EACfp5B,EAAKq5B,aAAe,EACpBr5B,EAAKpE,QAAU,CACbud,SAAS,EACTtd,WAAW,EACXo5B,QAAQ,EACR77B,QAAQ,EACRsiB,OAAO,GAtBY1b,yTA0BlB7I,GAAQ,IAAAoJ,EAAA5G,KAAA2/B,EAGP3/B,KAAKwG,KAAKhJ,OADZ+U,EAFSotB,EAETptB,UAAWC,EAFFmtB,EAEEntB,WAAYH,EAFdstB,EAEcttB,MAAOC,EAFrBqtB,EAEqBrtB,OAOhC,GALAtS,KAAKuS,UAAYA,EACjBvS,KAAKwS,WAAaA,EAClBxS,KAAK4/B,UAAYrtB,EAAY,EAC7BvS,KAAK6/B,WAAattB,EAAY,GAEzB/U,EAAOiD,KACV,MAAM,IAAIlD,MAAJ,kDAAA7D,OAA4DsG,KAAKkZ,YAAYrf,OAGrF,IAAK2D,EAAOqV,QACV,MAAM,IAAItV,MAAJ,qDAAA7D,OAA+DsG,KAAKkZ,YAAYrf,OAgCxF,GA7BAmG,KAAK6S,QAAUrV,EAAOqV,QAEtB7S,KAAK0O,QAAU1O,KAAKwG,KAAKkI,QACzB1O,KAAK0O,QAAQoxB,YAAY9/B,KAAMxC,EAAOuiC,kBAEtC//B,KAAKie,OAASje,KAAKggC,QAAQvhC,KAC3BuB,KAAKie,OAAOgiB,mBAAmBjgC,KAAKkgC,eACpCC,oDAAkBngC,KAAKie,QAEnBzgB,EAAO4c,KACTpa,KAAKoa,KAAO5c,EAAO4c,MACTpa,KAAKoa,MAAQpa,KAAKogC,uBAC5BpgC,KAAKoa,KAAO7gB,mDAAUyG,KAAKogC,qBAAsB,WAC/C,IAAMhmB,EAAOxT,EAAKy5B,mBAElB,OADAjmB,EAAKkmB,QAAU15B,EAAK25B,mBACbnmB,KAIPpa,KAAKoa,OACPpa,KAAKoa,KAAOpa,KAAKwgC,iBAAiBxgC,KAAKoa,OAGpCpa,KAAKoa,OACRpa,KAAKoa,KAAO,IAGdpa,KAAKygC,aAAezmC,KAAKmB,MAAMnB,KAAKC,UAAU+F,KAAKoa,OAE/Cpa,KAAKwf,SAAWxf,KAAKwf,QAAQkhB,QAC/BC,qDAAyB3gC,MACzBR,oDAAsBQ,KAAKP,QAEvBU,+CAAK,oBACPH,KAAKwf,QAAQkhB,MAAME,qBAIjB5gC,KAAK6gC,aAAa,KAEbphC,EAAUO,KAAKgC,MAAM8+B,QAArBrhC,OACcA,EAAOqhC,QAAQhtB,OACvBitB,IAAI,SAAUthC,EAAOuhC,OAAQvhC,GAJtB,IAMb+f,EAAWxf,KAAXwf,QACAkhB,EAASlhB,EAATkhB,MACDO,EAAeP,EAAMQ,KACvBr/B,EAAO,EACX2d,EAAQ3d,KAAO2d,EAAQnR,GAAK,EAC5BqyB,EAAMQ,KAAO,SAACC,GACZ,IAAMh/B,EAAQg/B,EAAgBT,EAAMt+B,UAE9BiM,EAAa,IAARlM,EAMX,GALAN,GAAQwM,EACRmR,EAAQnR,GAAKA,EACbmR,EAAQ3d,KAAOA,EACf+E,EAAK24B,WAAa19B,IAEd+E,EAAKJ,KAAK46B,gBAAkB,KAIhC,IACE,IAAMC,EAAaz6B,EAAKy6B,aAExB,GAAIz6B,EAAK+I,gBAMP,OALI0xB,GACFz6B,EAAK8H,QAAQwe,aAAatmB,EAAM/E,EAAMwM,GAAI,GAE5CzH,EAAK06B,aAAaz/B,EAAMwM,QACxBzH,EAAK26B,qBAIF36B,EAAK3E,QAAQud,SAChByhB,EAAalhC,KAAK2gC,EAAOv+B,GAGvBk/B,GACFz6B,EAAK8H,QAAQwe,aAAatmB,EAAM/E,EAAMwM,GAGpCzH,EAAKJ,KAAKuuB,oBACZnuB,EAAKJ,KAAKuuB,mBAAmBnuB,EAAK8H,QAAQS,YAAavI,EAAKqN,SAGzDrN,EAAK3E,QAAQud,SAChB5Y,EAAKi6B,YAAYh/B,EAAMwM,GAGzBzH,EAAK46B,aAAa3/B,EAAMwM,GAEpBzH,EAAK+Y,kBAAoB/Y,EAAK+Y,iBAAiBllB,QACjDmM,EAAK66B,qBAGP76B,EAAK06B,aAAaz/B,EAAMwM,GAExBzH,EAAKJ,KAAK46B,gBAAkB,EAC5B,MAAOhnC,GAEPC,QAAQC,MAAMF,GAEdwM,EAAKJ,KAAK46B,iBAAmBx6B,EAAKJ,KAAK46B,iBAAmB,GAAK,EAC3Dx6B,EAAKJ,KAAK46B,gBAAkB,KAE9B/mC,QAAQC,MAAM,4DAiCxB,GAzBA0F,KAAKmb,MAAMumB,aAAc,EAEzB1hC,KAAK2hC,gBAAkB,GAEvB3hC,KAAK4hC,IAAI9tB,OAAOrJ,GAAG,UAAWzK,KAAKnB,QAASmB,MAE5C,CAAC,aAAc,UAAW,kBAAkBnF,QAAQ,SAACC,GACnD8L,EAAK9L,GAAO0C,EAAO1C,UACZ0C,EAAO1C,KAGZkF,KAAK6Y,YACP7Y,KAAK6Y,WAAWc,iBAAiB3V,KAAK,CACpCoG,UAAWpK,KAAK6Y,WAAWzO,UAC3B0O,UAAWnG,KAAKC,MAChBnS,KAAMjD,EAAOiD,KACbwY,UAAWjZ,KAAKkZ,YAAYrf,KAC5Bkf,SAAU/Y,KAAKgC,MAAMgX,SAASzX,KAC9B4Y,eAAgBngB,KAAKmB,MAAMnB,KAAKC,UAAU+F,KAAKygC,eAC/CoB,cAAerkC,EAAOqkC,cACtBhvB,QAAS7S,KAAK6S,QACduG,aAAcpZ,KAAK0O,QAAQ2K,uBAI3BrZ,KAAKiU,QAGP,IAHgB,IACT0F,EAAoB3Z,KAAKiU,QAAzB0F,iBACAxK,EAAenP,KAAK0O,QAApBS,YACE5M,EAAI,EAAGA,EAAIoX,EAAiBlf,QAC/Bkf,EAAiBpX,GAAG6H,WAAa+E,EADM5M,GAAK,EAE9CvC,KAAKm4B,wBAA0Bxe,EAAiBpX,GAOtD,IAAMu/B,EAAWziC,KAAK2B,MAAMqR,GAASE,EAAY,IAC3CwvB,EAAY1iC,KAAK2B,MAAMsR,GAAUE,EAAa,IAEpDxS,KAAKgiC,SAAW3vB,EAASyvB,EAAWvvB,GAAc,EAClDvS,KAAKiiC,SAAW3vB,EAAUyvB,EAAYvvB,GAAe,EAErDxS,KAAKwG,KAAK07B,aAAaliC,mDAIvB,cAAAtG,OAAesG,KAAKkZ,YAAYrf,iDAIhC,OAAO,2CAGQsoC,GACf,IAAMjkC,EAAS8B,KAAKugC,mBACpB,GAAI4B,EAAa7B,UAAYpiC,EAC3B,OAAOikC,EAGT,IAAM/nB,EAAOpgB,KAAKmB,MAAMnB,KAAKC,UAAUkoC,IAKvC,IAJK/nB,EAAKkmB,UACRlmB,EAAKkmB,QAAU,GAGVlmB,EAAKkmB,QAAUpiC,GAAQ,CAC5B,IAAMyN,EAAM,0BAAAjS,OAA6B0gB,EAAKkmB,SAG9C,GADAjmC,QAAQ4M,MAAM0E,IACT3L,KAAK2L,GACR,MAAM,IAAIpO,MAAJ,4BAAA7D,OAAsCiS,IAE9C3L,KAAK2L,GAAQyO,GACbA,EAAKkmB,SAAW,EAGlB,OAAOlmB,6CAIP,MAAO,uCAIP/gB,mDAAU2G,KAAKogC,qBAAsBpgC,KAAKoa,2CAI1C,OAAOpa,KAAKwG,KAAKqN,aAAe7T,qCAG1BnG,GACN,IAAKA,EACH,MAAM,IAAI0D,MAAM,iDAGlB,IAAKyC,KAAKU,IAAI7G,GAAO,KACZ4G,EAAQT,KAAKgC,MAAMgX,SAASzX,KAA5Bd,KACPT,KAAKU,IAAI7G,GAAQ,IAAI8G,8CAAOtB,KAAKuB,oBAAoB,CAACH,EAAM5G,IAG9D,OAAOmG,KAAKU,IAAI7G,qCAGRA,GACR,OAAOmG,KAAKoiC,QAAQvoC,GAAMoH,2CAGhBpH,EAAM2H,EAAKoE,GACrB,OAAO5F,KAAKqiC,UAAUxoC,IAAS+L,EAAMpE,GAAOA,sCAGlC3H,EAAMyI,GAChB,OAAOA,EAAKjD,KAAK2B,MAAMhB,KAAKmjB,YAAYtpB,EAAM,EAAGyI,EAAK7H,2CAItDuF,KAAK0O,QAAQ4zB,aAAatiC,MAE1BA,KAAKuiC,UAAY,IAAI5vB,KAEjB3S,KAAKwiC,iBACPxiC,KAAKwiC,kBANA,IASA5nB,EAAc5a,KAAKgC,MAAMgX,SAASzX,KAAlCqZ,WACFA,GAAeA,EAAWyV,qBAC7BrwB,KAAKyiC,iDAIChnB,GACRzb,KAAKyb,WAAaA,EAClBzb,KAAKyiC,sDAIC,eAAgBziC,OACpBA,KAAKyb,WAAa,QAGhBzb,KAAKyb,aACPzb,KAAKwG,KAAK4V,iBAAiBpc,KAAKyb,YAChCzb,KAAK+b,OAAS/b,KAAKwG,KAAKsX,eAAe9d,KAAKyb,YACxCzb,KAAK+b,SACP/b,KAAK+d,mBAAkB,GACvB/d,KAAKge,gBACLhe,KAAKie,OAAOykB,mBAAmB1iC,KAAK+b,4CAMxC/b,KAAK2iC,KAAKxd,KAAK,YAAayd,0DAE5BC,oDAAc7iC,KAAMoT,gFAQpB,OAJKpT,KAAKwG,KAAKs8B,cACb9iC,KAAKwG,KAAKs8B,YAAcC,0DAAU/iC,KAAKgjC,MAAM7d,KAAK7e,IAAI,eAGjDtG,KAAKwG,KAAKs8B,YAAYxtB,IAAI,SAAAvY,GAAA,OAAApC,OAAAsoC,iHAAA,EAAAtoC,CAAAoC,EAAA,MAAuB4H,uCAGhDA,GACH3E,KAAKwG,KAAKs8B,cACb9iC,KAAKwG,KAAKs8B,YAAcC,0DAAU/iC,KAAKgjC,MAAM7d,KAAK7e,IAAI,eAExD,IAEImF,EAFEy3B,EAAWljC,KAAKwG,KAAKs8B,YAGvB5lC,EAAOgmC,EAASv+B,GAQpB,GAPIzH,EACFuO,EAAQ9G,GAER8G,EAAQy3B,EAASC,UAAU,SAACzqB,GAAD,OAAOA,EAAE,GAAG/T,KAAOA,IAC9CzH,EAAOgmC,EAASz3B,KAGbvO,EACH,MAAM,IAAIK,MAAJ,6BAAA7D,OAAuCiL,IAhBnC,IAAA4D,EAmBYrL,EAnBZkmC,EAAAzoC,OAAAsoC,iHAAA,EAAAtoC,CAAA4N,EAAA,GAmBL86B,EAnBKD,EAAA,GAmBE5lC,EAnBF4lC,EAAA,GAAAE,EAoBoBC,0DAAgBF,EAAOrjC,KAAK4f,oBAArDtK,EApBKguB,EAoBLhuB,IAAKkuB,EApBAF,EAoBAE,QAASC,EApBTH,EAoBSG,QAEdlxB,EAAyBvS,KAAzBuS,UAAWC,EAAcxS,KAAdwS,WACZkxB,EAAgBpuB,EAAI7a,OACpB6X,EAASE,EAAakxB,EACtBC,EAAetkC,KAAKuG,IAALhH,MAAAS,KAAI1E,OAAAkD,qHAAA,EAAAlD,CAAQ2a,EAAIA,IAAI,SAAC7Q,GAAD,OAAOA,EAAEhK,WAC5C4X,EAAQE,EAAYoxB,EAEpB7jB,EAAKnlB,OAAAskC,gHAAA,EAAAtkC,CAAA,GACN6C,EADM,CAETkmC,gBACAC,eACArxB,SACAD,QACAiD,MACAkuB,UACAthB,WAAYuhB,EACZh4B,UAiBF,OAdIqU,EAAMoQ,cACRpQ,EAAMoQ,YAAclwB,KAAKH,IAAIipB,OAAO,EAAG,EAAGhJ,EAAMoQ,aAChDpQ,EAAMoQ,YAAY9H,YAAsC,GAA1BtI,EAAMoQ,YAAY7d,MAAwC,GAA3ByN,EAAMoQ,YAAY5d,SAG7EwN,EAAM0P,aACR1P,EAAM0P,WAAaxvB,KAAKH,IAAIipB,OAAO,EAAG,EAAGhJ,EAAM0P,YAC/C1P,EAAM0P,WAAWpH,YAAqC,GAAzBtI,EAAM0P,WAAWnd,MAAuC,GAA1ByN,EAAM0P,WAAWld,SAG1EwN,EAAM8jB,aACR5jC,KAAK6jC,kBAAkB/jB,EAAM8jB,aAGxB9jB,4CAGSjmB,GAChB,GAAImG,KAAKwG,KAAKS,MAAO,CACnB,IAAM68B,EAAW9jC,KAAKH,IAAI8C,MAAM,EAAG,EAAG9I,GAC/BwY,EAAiByxB,EAAjBzxB,MAAOC,EAAUwxB,EAAVxxB,OACdwxB,EAASjlC,UAGT,IAAMklC,EAAe,SAACjlC,GAAD,OAAOA,KAAOA,EAAKA,EAAI,IACvCilC,EAAa1xB,IAAW0xB,EAAazxB,IAExCjY,QAAQC,MAAR,eAAAZ,OAA6BG,EAA7B,QAAAH,OAAwC2Y,EAAxC,KAAA3Y,OAAiD4Y,EAAjD,6EAVkB,IAAA0xB,EAgBlBhkC,KAAKwG,KAAKhJ,OADZ6U,EAfoB2xB,EAepB3xB,MAAOC,EAfa0xB,EAeb1xB,OAKH2xB,EAAI5xB,EAAQ,GApBI2xB,EAeLzxB,UAMX2xB,EAAI5xB,EAAS,GArBG0xB,EAeMxxB,WAOtBoxB,EAAc5jC,KAAKH,IAAIskC,WAAWF,EAAI,EAAGC,EAAI,EAAGD,EAAGC,EAAGrqC,GAC5D+pC,EAAYQ,cAAgB,EAC5BR,EAAYS,cAAgB,EAC5BrkC,KAAK4jC,YAAcA,wCAGPU,GAAQ,IAAAx6B,EAAA9J,KACb2O,EAAkB21B,EAAlB31B,QAASpT,EAAS+oC,EAAT/oC,MAEhB,GAAIA,EACFyE,KAAK8W,MAAM,WACThN,EAAKy6B,cAAL5pC,OAAAskC,gHAAA,EAAAtkC,CAAA,GAAuB2pC,EAAvB,CAA+B/oC,MAAO,MACrCA,QAIL,GAAIoT,EACF,GAAuB,kBAAZA,EAAsB,KAAA61B,EAAA7pC,OAAA8pC,2GAAA,EAAA9pC,CACLgU,GAAnBhD,EADwB64B,EAAA,GACb9I,EADa8I,EAAA1mC,MAAA,GAE/BkC,KAAK2L,GAAL/M,MAAAoB,KAAArF,OAAAkD,qHAAA,EAAAlD,CAAgB+gC,SAEhB17B,KAAK2O,wCAMT,MAAO,2CAIP,MAAO,uDAIP,MAAO,qDAIP,OAAO,wCAIP,OAAO,+BAGJ7P,EAAGC,EAAGomB,GAAoB,IAAd/mB,EAAc5D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACnBoiC,EAAQ58B,KAAKH,IAAIslB,KACrBrmB,EACAC,EACAomB,EAHYxqB,OAAAskC,gHAAA,EAAAtkC,CAAA,CAKV+pC,WAAY,kEACZC,WAAY,OACZl/B,SAAUzF,KAAK4kC,SAASxmC,GACxBwnB,MAAO5lB,KAAK6kC,UAAUzmC,IACnBA,IAYP,OARuB,OAAnBA,EAAQ0mC,cACapqC,IAAnB0D,EAAQ0mC,OACVlI,EAAMmI,UAAU/kC,KAAKglC,YAAY5mC,GAAU4B,KAAKilC,YAAY7mC,IAE5Dw+B,EAAMmI,UAANnmC,MAAAg+B,EAAKjiC,OAAAkD,qHAAA,EAAAlD,CAAcyD,EAAQ0mC,UAIxBlI,kCAGM,QAAAryB,EAAAvK,KACTzE,EAAQ,EADCkgC,EAAAjhC,UAAAC,OAANihC,EAAM,IAAAr+B,MAAAo+B,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAND,EAAMC,GAAAnhC,UAAAmhC,GAGb,IACIuJ,EADAC,EAAKzJ,EAAK0J,QAGd,GAAID,IAAO9J,OAAOgK,UAAUF,GAC1B,GAAkB,kBAAPA,EACTD,EAAKC,MACA,CACL,IAAM1B,EAAUzjC,KAAK8f,MAAMoC,WAAWijB,QAE3BzqC,KADXyqC,EAAKD,EAAKzB,EAAQnuB,IAAI,SAACmO,GAAD,OAAOA,EAAE0D,SAAQ/mB,KAAK,SAAC4X,GAAD,OAAOA,OAEjDmtB,EAAK1B,EAAQ,GAAG6B,OAChBJ,EAAKzB,EAAQ,GAAG8B,aAIpBL,EAAKxJ,EAAK0J,QAGD,OAAPD,QAAsBzqC,IAAPyqC,IACjBA,EAAKnlC,KAAKwG,KAAKhJ,OAAO6U,MAAQ,GAErB,OAAP6yB,QAAsBxqC,IAAPwqC,IACjBA,EAAKllC,KAAKwG,KAAKhJ,OAAO8U,OAAS,GAGjC,IAAI+wB,EAAQ3H,EAAK0J,QACZ/nC,MAAMC,QAAQ+lC,KACjBA,EAAQ,CAACA,IAGX,IAAMjlC,EAAUs9B,EAAK0J,SAAW,GAEhC/B,EAAMxoC,QAAQ,SAACogC,EAAM14B,GAAM,IAAAijC,EAAA7qC,OAAAskC,gHAAA,EAAAtkC,CAAA,CAKvB8qC,OAAQ,IACRC,QAAS,IACTlqC,SAAU,KACVmqC,WAAY,IACZ9pC,GAAI,KACJF,GAAI,KACJiqC,GAAI,EACJC,GAAI,EACJC,UAAW,KACXC,OAAO,EACPC,QAAQ,GACL5nC,EACiB,kBAAT68B,EAAoBA,EAAO,CAAC9V,KAAM8V,IAf7Cz/B,EAFuBgqC,EAEvBhqC,SAAUiqC,EAFaD,EAEbC,OAAQC,EAFKF,EAELE,QAASvgB,EAFJqgB,EAEIrgB,KAAMwgB,EAFVH,EAEUG,WACjChqC,EAHuB6pC,EAGvB7pC,GAAIE,EAHmB2pC,EAGnB3pC,GAAI+pC,EAHeJ,EAGfI,GAAIC,EAHWL,EAGXK,GAAIE,EAHOP,EAGPO,MAAOC,EAHAR,EAGAQ,OAAQF,EAHRN,EAGQM,UAiB3B5sC,EAAiB,OAAbsC,EAAkC,IAAd2pB,EAAK1qB,OAAee,EAC5CyqC,EAAa,OAAPtqC,EAAc,EAAIA,EACxBuqC,EAAa,OAAPrqC,GAAe0O,EAAK/D,KAAKhJ,OAAOgV,WAAa3W,EAEzD0O,EAAKuM,MAAM,WACT,IAAIqvB,EAAKhB,EACLiB,EAAKlB,EAELmB,EAAmB,kBAAPF,EAAkBA,EAAK,KACnCG,EAAmB,kBAAPF,EAAkBA,EAAK,KAEnCC,IACFF,EAAKE,EAAGvnC,EACHknC,IACHK,EAAK,OAGLC,IACFF,EAAKE,EAAGvnC,EACHinC,IACHM,EAAK,OAITH,GAAMP,EACNQ,GAAMP,EAEN,IAAMjJ,EAAQryB,EAAK4a,KAAKghB,EAAIC,EAAIjhB,EAAM/mB,GAChCwhC,EAAYhD,EAAMvqB,MAAQ,EAC1BwtB,EAAajD,EAAMtqB,OAAS,EAClCsqB,EAAM99B,GAAK8gC,EACXhD,EAAM79B,GAAK8gC,EACXjD,EAAM3Z,SAAS,KAEf,IAAIsjB,EAAK3J,EAAM99B,EACX0nC,EAAK5J,EAAM79B,EACf69B,EAAM7gC,MAAQ,EAEdwO,EAAKqgB,aACH6a,EACA,SAAChe,GACCmV,EAAM7gC,MAAQ0rB,EAEV4e,IACFzJ,EAAM99B,QAAmBpE,IAAd2rC,EAAGf,OAAuBe,EAAGvnC,EAAIunC,EAAGf,QAAU1F,EAAYqG,EACrEM,EAAK3J,EAAM99B,GAGTwnC,IACF1J,EAAM79B,QAAmBrE,IAAd4rC,EAAGf,OAAuBe,EAAGvnC,EAAIunC,EAAGf,QAAU1F,EAAaqG,EACtEM,EAAK5J,EAAM79B,GAGb69B,EAAM99B,EAAIynC,EAAKN,GAAO,EAAMxe,GAAUme,EACtChJ,EAAM79B,EAAIynC,EAAKN,GAAO,EAAMze,GAAUoe,GAExC,KACA,EACA,iBAGFt7B,EAAKuM,MAAM,WACTvM,EAAKqgB,aACH1xB,EACA,SAACuuB,GACK4e,IACFzJ,EAAM99B,QAAmBpE,IAAd2rC,EAAGf,OAAuBe,EAAGvnC,EAAIunC,EAAGf,QAAU1F,EAAYqG,EACrEM,EAAK3J,EAAM99B,GAETwnC,IACF1J,EAAM79B,QAAmBrE,IAAd4rC,EAAGf,OAAuBe,EAAGvnC,EAAIunC,EAAGf,QAAU1F,EAAaqG,EACtEM,EAAK5J,EAAM79B,GAGb69B,EAAM99B,EAAIynC,EAAKX,EACfhJ,EAAM79B,EAAIynC,EAAKX,GAEjB,KACA,EACA,kBAEDJ,GAECK,GACFv7B,EAAKuM,MAAM,WACTvM,EAAKzK,MAAMgmC,EAAWlJ,IACrB6I,GAGDM,GAIJx7B,EAAKuM,MAAM,WACTvM,EAAKqgB,aACH8a,EACA,SAACje,GACCmV,EAAM7gC,MAAQ,EAAM0rB,EAEhB4e,IACFzJ,EAAM99B,QAAmBpE,IAAd2rC,EAAGf,OAAuBe,EAAGvnC,EAAIunC,EAAGf,QAAU1F,EAAYqG,EACrEM,EAAK3J,EAAM99B,GAGTwnC,IACF1J,EAAM79B,QAAmBrE,IAAd4rC,EAAGf,OAAuBe,EAAGvnC,EAAIunC,EAAGf,QAAU1F,EAAaqG,EACtEM,EAAK5J,EAAM79B,GAGb69B,EAAM99B,EAAIynC,EAAKN,EAAMxe,EAASme,EAC9BhJ,EAAM79B,EAAIynC,EAAKN,EAAMze,EAASoe,GAEhC,WACEjJ,EAAM/9B,WAER,EACA,kBAED4mC,EAASvsC,IACXysC,EAAapqC,GAEhBA,GAASoqC,EAAazsC,EAAIusC,EAASC,wCAI3B/gC,GACV,IAAMmb,EAAQ9f,KAAK8f,MAAQ9f,KAAKymC,UAAU9hC,GAE1C,OADA3E,KAAK0mC,SACE5mB,6CAGU6mB,EAAW7nC,EAAGC,EAAGqkB,GAAM,IAMpC+D,EAJFrH,EACE9f,KADF8f,MAAOvN,EACLvS,KADKuS,UAAWC,EAChBxS,KADgBwS,WAAYotB,EAC5B5/B,KAD4B4/B,UAAWC,EACvC7/B,KADuC6/B,WAErC9e,EAAQjB,EAAMY,OAAOimB,GAc3B,GAVIvjB,EAAKzgB,MACPwkB,EAASpG,EAAMA,MAAMY,OAAO7iB,EAAGC,EAAGqkB,EAAKzgB,OAC9Boe,EAAMpe,MACfwkB,EAASpG,EAAMA,MAAMY,OAAO7iB,EAAGC,EAAGgiB,EAAMpe,QAExCwkB,EAASnnB,KAAKH,IAAI+mC,UAAU9nC,EAAGC,EAAGwT,EAAWC,GAC7CuO,EAAMA,MAAMlhB,IAAIsnB,IAElBpG,EAAME,QAAQjd,KAAKmjB,GAEfpG,EAAM8lB,SAAU,CAClB,IAAMC,GAAUjH,EAAaD,GAAa,EAC1CzY,EAAO4f,UAAUD,GAGnB,OAAO3f,mCAGA,IAAA/b,EAAApL,KAEL8f,EACE9f,KADF8f,MAAOvN,EACLvS,KADKuS,UAAWC,EAChBxS,KADgBwS,WAAYotB,EAC5B5/B,KAD4B4/B,UAAWC,EACvC7/B,KADuC6/B,WAGrCnf,EAASZ,EAAMY,OAAS,GAC9B/lB,OAAOqP,OAAOg9B,wCAAiBnsC,QAAQ,SAACqC,GAMpC,IAAI6jB,EALD7jB,IAIDA,EAAK6jB,QAGLA,EADE7jB,EAAK+pC,SACC77B,EAAKoU,QAAQ3f,IAAIqnC,cAEjB97B,EAAKoU,QAAQ3f,IAAIkhB,QAG3BL,EAAOxjB,EAAK6jB,OAAZpmB,OAAAskC,gHAAA,EAAAtkC,CAAA,CACE0oB,MAAO,GACPpC,QAAS,IACN/jB,EAHL,CAIE6jB,cAKN,IAAMomB,EAAU,GAkIhB,OAhIArnB,EAAMxK,IAAIza,QAAQ,SAACusC,EAAKroC,GACtBqoC,EAAIvsC,QAAQ,SAACuoB,EAAMtkB,GAAM,IAChB8kB,EAAgBR,EAAhBQ,MAAO7C,EAASqC,EAATrC,MADSsmB,EAEEj8B,EAAKiX,2BAA2Be,EAAKtkB,EAAGskB,EAAKrkB,GAF/CuoC,EAAA3sC,OAAAsoC,iHAAA,EAAAtoC,CAAA0sC,EAAA,GAEhB/B,EAFgBgC,EAAA,GAER/B,EAFQ+B,EAAA,GAMvB,GAHAlkB,EAAKkiB,OAASA,EACdliB,EAAKmiB,OAASA,EAEVxkB,EAAO,CACT,GAAIqC,EAAK+jB,QAAS,CAChB,IAAMI,GAA4B,IAAjBnkB,EAAK+jB,QAAmBvjB,EAAQR,EAAK+jB,QAOtD,OALKA,EAAQI,KACXJ,EAAQI,GAAY,SAGtBJ,EAAQI,GAAUvjC,KAAKof,GAIzB,IAAM+D,EAAS/b,EAAKo8B,mBAAmBzmB,EAAOukB,EAAS1F,EAAW2F,EAAS1F,EAAYzc,GACvF+D,EAAO9D,MAAQ,CAACD,GAChBA,EAAK+D,OAASA,OACT,GAAI/D,EAAKzgB,MAAO,CACrB,IAAMA,EAAQyI,EAAKvL,IAAI8C,MAAM2iC,EAAS1F,EAAW2F,EAAS1F,EAAYzc,EAAKzgB,OAC3EA,EAAMygB,KAAOA,EACbA,EAAKzgB,MAAQA,EAGXygB,EAAK+jB,SAEP9sC,QAAQic,KAAR,+BAAA5c,OAA4C0pB,EAAKQ,MAAjD,wBAKNjpB,OAAOqP,OAAOm9B,GAAStsC,QAAQ,SAACwoB,GAAU,IACjCokB,EAAyBpkB,EAAM,GAA/BokB,sBACDC,EAAYD,EAAwB,EAAI,EACxCE,EAAYF,EAAwB,EAAI,EACxCG,EAAcH,EAAwB,EAAI,EAC1CI,EAAcJ,EAAwB,EAAI,EAE1C1mB,EAAQjB,EAAMY,OAAO2C,EAAM,GAAGtC,OAEhC0mB,EACFpkB,EAAM4K,KAAK,SAACxpB,EAAG4a,GAAJ,OAAU5a,EAAE3F,EAAIugB,EAAEvgB,GAAK2F,EAAE1F,EAAIsgB,EAAEtgB,IAE1CskB,EAAM4K,KAAK,SAACxpB,EAAG4a,GAAJ,OAAU5a,EAAE1F,EAAIsgB,EAAEtgB,GAAK0F,EAAE3F,EAAIugB,EAAEvgB,IAG5C,IAAM4Z,EAAItN,EAAK0U,MAAMxK,IAAI,GAAGA,IAAI,SAAC8xB,GAAD,MAAS,KAEzC1uB,EAAE1U,KAAK,IAEPqf,EAAMxoB,QAAQ,SAACuoB,GAAS,IACftkB,EAAQskB,EAARtkB,EAAGC,EAAKqkB,EAALrkB,EACV2Z,EAAE5Z,GAAGC,GAAKqkB,IAGZ,IAAM0kB,EAAS,GAUfzkB,EAAMxoB,QAAQ,SAACuoB,GAAS,IACftkB,EAAqBskB,EAArBtkB,EAAGC,EAAkBqkB,EAAlBrkB,EAAGgpC,EAAe3kB,EAAf2kB,YAEPpjC,EAAE,GAAAjL,OAAMoF,EAAN,KAAApF,OAAWqF,GAGnB,GAAKgpC,EAkBE,KACEC,EAAkB5kB,EAAlB4kB,OAAQC,EAAU7kB,EAAV6kB,OAET33B,EAAOoI,EAAE5Z,EAAIkpC,GAAQjpC,EAAIkpC,GAC3B33B,IAASA,EAAKy3B,cAChBz3B,EAAKy3B,YAAcA,EACnBz3B,EAAK03B,OAASA,EACd13B,EAAK23B,OAASA,EACdH,EAAOC,GAAa/jC,KAAKsM,QA1BX,CAChB,IAAM43B,EAAUxvB,EAAE5Z,EAAI4oC,GAAW3oC,EAAI4oC,GACrC,GAAIO,IAAYA,EAAQH,YACtBG,EAAQH,YAAcpjC,EACtBujC,EAAQF,OAASN,EACjBQ,EAAQD,OAASN,EACjBG,EAAOnjC,GAAM,CAACye,EAAM8kB,OACf,CACL,IAAMC,EAAYzvB,EAAE5Z,EAAI8oC,GAAa7oC,EAAI8oC,GACrCM,IAAcA,EAAUJ,aAC1BI,EAAUJ,YAAcpjC,EACxBwjC,EAAUH,OAASJ,EACnBO,EAAUF,OAASJ,EACnBC,EAAOnjC,GAAM,CAACye,EAAM+kB,IAEpBL,EAAOnjC,GAAM,CAACye,OAgBtBzoB,OAAOmC,QAAQgrC,GAAQjtC,QAAQ,SAAA8C,GAAsB,IAAAC,EAAAjD,OAAAsoC,iHAAA,EAAAtoC,CAAAgD,EAAA,GAAhByqC,GAAgBxqC,EAAA,GAAAA,EAAA,IAC7CyqC,EAAQD,EAAW,GACnBE,EAAOF,EAAWA,EAAW3tC,OAAS,GAFO8tC,EAGlCn9B,EAAKiX,2BAA2BgmB,EAAMvpC,EAAGupC,EAAMtpC,GAHbypC,EAAA7tC,OAAAsoC,iHAAA,EAAAtoC,CAAA4tC,EAAA,GAG5CE,EAH4CD,EAAA,GAGxCE,EAHwCF,EAAA,GAAAG,EAIlCv9B,EAAKiX,2BAA2BimB,EAAKxpC,EAAGwpC,EAAKvpC,GAJX6pC,EAAAjuC,OAAAsoC,iHAAA,EAAAtoC,CAAAguC,EAAA,GAI5CE,EAJ4CD,EAAA,GAIxCE,EAJwCF,EAAA,GAK7C3E,EAAI4E,EAAKJ,EAAKl2B,EACd2xB,EAAI4E,EAAKJ,EAAKl2B,EACd2U,EAAS/b,EAAKvL,IAAI+mC,UAAU6B,EAAS,GAAJxE,EAASyE,EAAS,GAAJxE,EAASD,EAAGC,GAEjEnjB,EAAMA,MAAMlhB,IAAIsnB,GAChBpG,EAAME,QAAQjd,KAAKmjB,GACnBA,EAAO9D,MAAQ+kB,EAEfA,EAAWvtC,QAAQ,SAACuoB,GAClB,IAAMzgB,EAAQyI,EAAKvL,IAAI8C,MAAMygB,EAAKkiB,OAAS1F,EAAWxc,EAAKmiB,OAAS1F,EAAYzc,EAAKzgB,OACrFA,EAAMygB,KAAOA,EACbA,EAAKzgB,MAAQA,EACbygB,EAAK+D,OAASA,QAKbrH,4CAGS,IACTA,EAAS9f,KAAT8f,MAEP,GAAK3f,+CAAK,2BAKV,GAAI2f,GAASA,EAAMzN,OAASyN,EAAMxN,OAAQ,CACxC,IAEIy2B,EAAcjpB,EAAMzN,MACpB22B,EAAelpB,EAAMxN,OAErBtS,KAAKgiC,UACP+G,GAA8B,EAAf/oC,KAAKgiC,SAGlBhiC,KAAKiiC,UACP+G,GAA+B,EAAfhpC,KAAKiiC,SAGvBjiC,KAAKie,OAAOgrB,UAbI,EACA,EAYwBF,EAAaC,SAlBrDhpC,KAAKie,OAAOirB,2DAuBdlpC,KAAKie,OAAOkrB,YACVhpC,+CAAK,0BACLA,+CAAK,mEAKPH,KAAKie,OAAOmrB,QAAQjpC,+CAAK,0DAGf0B,EAAMwM,GAAI,IAAArB,EAAAhN,KAKpB,GAJAA,KAAKqpC,kBACLrpC,KAAKspC,oBACLtpC,KAAKupC,gBAEDvpC,KAAK8f,OAAS9f,KAAK8f,MAAM0pB,QAAS,CACpC,IAAIjuC,EAAQ,EACZyE,KAAK8f,MAAM0pB,QAAQ3uC,QAAQ,SAACypC,GACtBA,EAAO/oC,QACTA,GAAS+oC,EAAO/oC,OAElByR,EAAKu3B,cAAL5pC,OAAAskC,gHAAA,EAAAtkC,CAAA,GAAuB2pC,EAAvB,CAA+B/oC,6CAK9BsG,EAAMwM,GACNrO,KAAKypC,gBACRzpC,KAAK0pC,YAAY7nC,EAAMwM,GACvBrO,KAAKypC,eAAgB,GAGnBzpC,KAAKwf,SAAWxf,KAAKwf,QAAQkhB,MAAM3+B,WAAa/B,KAAK2P,iBAAmB3P,KAAKqhC,cAC/ErhC,KAAK0O,QAAQwe,aAAaltB,KAAM6B,EAAMwM,GAAI,GAGxCrO,KAAK2pC,cACP3pC,KAAK2pC,aAAa9nC,EAAMwM,GAEtBrO,KAAK+b,QACP/b,KAAKge,gBAGPhe,KAAK4pC,qBACL5pC,KAAK6pC,sBACL7pC,KAAK8pC,mEAGc,IAEjBhqB,EACE9f,KADF8f,MAAOtZ,EACLxG,KADKwG,KAAMw7B,EACXhiC,KADWgiC,QAASC,EACpBjiC,KADoBiiC,QAAShkB,EAC7Bje,KAD6Bie,OAEjC,GAAK6B,EAAL,CAJmB,IAQZ0P,EAAsD1P,EAAtD0P,WAAmBC,EAAmC3P,EAA1CzN,MAA2Bqd,EAAe5P,EAAvBxN,OACtC,GAAKkd,EAAL,CATmB,IAAAG,EAa4BnpB,EAAKhJ,OAAtCoyB,EAbKD,EAaZtd,MAA0Bwd,EAbdF,EAaMrd,OACXwd,EAA6CN,EAApDnd,MAAgC0d,EAAoBP,EAA5Bld,OACxBkW,EAAoBvK,EAApBuK,QAASC,EAAWxK,EAAXwK,QAEVshB,EAAWta,EAAaG,EAAsB,EAAVoS,EAC1C,GAAiB,IAAb+H,EACFva,EAAW1wB,EAAsB,GAAlBgxB,MACV,CACL,IAAME,EAAUxH,EAAUuhB,EAC1Bva,EAAW1wB,EAAIkjC,EAA4B,GAAlBlS,EAAwBE,GAAWP,EAAaK,GAG3E,IAAMka,EAAWta,EAAcG,EAAuB,EAAVoS,EAC5C,GAAiB,IAAb+H,EACFxa,EAAWzwB,EAAuB,GAAnBgxB,MACV,CACL,IAAME,EAAUxH,EAAUuhB,EAC1Bxa,EAAWzwB,EAAIkjC,EAA6B,GAAnBlS,EAAyBE,GAAWP,EAAcK,oDAIzD,IAElBjQ,EACE9f,KADF8f,MAAOtZ,EACLxG,KADKwG,KAAMw7B,EACXhiC,KADWgiC,QAASC,EACpBjiC,KADoBiiC,QAAShkB,EAC7Bje,KAD6Bie,OAEjC,GAAK6B,EAAL,CAJoB,IAQboQ,EAAuDpQ,EAAvDoQ,YAAoBT,EAAmC3P,EAA1CzN,MAA2Bqd,EAAe5P,EAAvBxN,OACvC,GAAK4d,EAAL,CAToB,IAAAC,EAa2B3pB,EAAKhJ,OAAtCoyB,EAbMO,EAab9d,MAA0Bwd,EAbbM,EAaK7d,OACXwd,EAA6CI,EAApD7d,MAAgC0d,EAAoBG,EAA5B5d,OACxBkW,EAAoBvK,EAApBuK,QAASC,EAAWxK,EAAXwK,QAEVshB,EAAWta,EAAaG,EAAsB,EAAVoS,EAC1C,GAAiB,IAAb+H,EACF7Z,EAAYpxB,EAAsB,GAAlBgxB,MACX,CACL,IAAME,EAAUxH,EAAUuhB,EAC1B7Z,EAAYpxB,EAAIkjC,EAA4B,GAAlBlS,EAAwBE,GAAWP,EAAaK,GAG5E,IAAMka,EAAWta,EAAcG,EAAuB,EAAVoS,EAC5C,GAAiB,IAAb+H,EACF9Z,EAAYnxB,EAAuB,GAAnBgxB,MACX,CACL,IAAME,EAAUxH,EAAUuhB,EAC1B9Z,EAAYnxB,EAAIkjC,EAA6B,GAAnBlS,EAAyBE,GAAWP,EAAcK,oDAI1D,IAElB6T,EACE5jC,KADF4jC,YAAa3lB,EACXje,KADWie,OAAQ1L,EACnBvS,KADmBuS,UAAWC,EAC9BxS,KAD8BwS,WAE9BoxB,IACFA,EAAY9kC,EAAImf,EAAOuK,QAAUob,EAAYvxB,MAAQ,EAAgB,EAAZE,EACzDqxB,EAAY7kC,EAAIkf,EAAOwK,QAAUmb,EAAYtxB,OAAS,EAAiB,EAAbE,EAC1DoxB,EAAYQ,cAAgBnmB,EAAOuK,QAAUjW,EAC7CqxB,EAAYS,cAAgBpmB,EAAOwK,QAAUjW,+DAI/By3B,qBAAqB,IAAAx8B,OAAAzN,KAC9BkqC,iBAAoBlqC,KAApBkqC,iBACPlqC,KAAKwG,KAAK2jC,gBAAgBnqC,KAAKyb,YAAY5gB,QAAQ,SAAAsD,GAA8B,IAAAI,EAAA5D,OAAAsoC,iHAAA,EAAAtoC,CAAAwD,EAAA,GAA5BgX,EAA4B5W,EAAA,GAAd0e,EAAc1e,EAAA,GAC/E5D,OAAOmC,QAAQmgB,GAAUpiB,QAAQ,SAAA2D,GAAyB,IAAAkP,EAAA/S,OAAAsoC,iHAAA,EAAAtoC,CAAA6D,EAAA,GAAvB4e,EAAuB1P,EAAA,GAAVxQ,EAAUwQ,EAAA,GAClD7T,EAAI,GAAAH,OAAMyb,EAAN,KAAAzb,OAAsB0jB,GADwBgtB,EAAAzvC,OAAAsoC,iHAAA,EAAAtoC,CAERuC,EAFQ,GAEjDyI,EAFiDykC,EAAA,GAE3CC,EAF2CD,EAAA,GAGxD,GAAuB,OAHiCA,EAAA,GAIhDF,kBAAoBA,iBAAiBrwC,IAASA,KAAQ4T,SAAUw8B,qBAAyBpwC,KAAQ4T,SACrGA,OAAK5T,GAAQwwC,OAEV,KAIDC,EAHOC,EADN5vC,OAAAsoC,iHAAA,EAAAtoC,CACgB2iB,6CAAe3X,GAD/B,MAGC6kC,EAAYC,qDAAoBt1B,EAAciI,EAAalgB,GAGxC,IAArBstC,EAAU/vC,OACZ6vC,EAAenqC,+CAAKqqC,EAAU,KAE9BF,EAAe,GACfE,EAAU3vC,QAAQ,SAACkd,GACjB,IACsB2yB,EADhBvX,EAAIhzB,+CAAK4X,GACX1a,MAAMC,QAAQ61B,IAChBuX,EAAAJ,GAAatmC,KAAbpF,MAAA8rC,EAAA/vC,OAAAkD,qHAAA,EAAAlD,CAAqBw4B,IAErBmX,EAAatmC,KAAKmvB,MAKX,QAATxtB,GAA2B,SAATA,IACpB2kC,EAAeA,EAAah1B,IAAI,SAAC4N,EAAG3gB,GAAJ,OAAWA,EAAI,EAAI2gB,EAAI,IAAQA,KAGjEzV,OAAKsO,OAAOwuB,GAAQ1wC,EAAMywC,QAlCK,IA0C9BvuB,OAAkB/b,KAAlB+b,OAAQkC,OAAUje,KAAVie,OAEVlC,SACH/b,KAAKge,cAAgB,cAGvB,IAAM2sB,aAAe,CACnB,iBADmB,wDAAAjxC,OAEqCsG,KAAKwG,KAAKhJ,OAAO6U,MAFtD,uBAAA3Y,OAEiFsG,KAAKwG,KAAKhJ,OAAO8U,OAFlG,MAGnB,sDAGFtS,KAAKwG,KAAK2jC,gBAAgBnqC,KAAKyb,YAAY5gB,QAAQ,SAAAgT,GAA8B,IAAAC,EAAAnT,OAAAsoC,iHAAA,EAAAtoC,CAAAkT,EAAA,GAA5BsH,EAA4BrH,EAAA,GAAdmP,EAAcnP,EAAA,GAC1E3N,+CAAI,UAAAzG,OAAWyb,EAAX,cAITxa,OAAOmC,QAAQmgB,GAAUpiB,QAAQ,SAAA2T,GAA6C,IAAAC,EAAA9T,OAAAsoC,iHAAA,EAAAtoC,CAAA6T,EAAA,GAA3C4O,EAA2C3O,EAAA,GAAAm8B,EAAAjwC,OAAAsoC,iHAAA,EAAAtoC,CAAA8T,EAAA,MAA7B9I,EAA6BilC,EAAA,GAArBC,EAAqBD,EAAA,GACtE/wC,EAAI,GAAAH,OAAMyb,EAAN,KAAAzb,OAAsB0jB,GAChC,GAAuB,OAAnBytB,EAAJ,CAF4E,IAMjEN,EANiE5vC,OAAAsoC,iHAAA,EAAAtoC,CAMvD2iB,6CAAe3X,GANwC,MAQ/D,SAATA,EACFglC,aAAa3mC,KAAb,YAAAtK,OAA8B6wC,EAA9B,MAAA7wC,OAAyCG,EAAzC,aAAAH,OAAyDG,EAAzD,qBAEA8wC,aAAa3mC,KAAb,YAAAtK,OAA8B6wC,EAA9B,MAAA7wC,OAAyCG,EAAzC,aAAAH,OAAyDG,EAAzD,cAKN8wC,aAAa3mC,KAAK,MAGlBhE,KAAKge,cAAgB8sB,KAAKH,aAAa3sC,KAAK,qDAGxBnE,EAAMkxC,GAAgD,IAAAn9B,EAAA5N,KAAxCxC,EAAwChD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA/B,GAAIwwC,EAA2BxwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAC7DgM,EAAQxG,KAARwG,KAEP,GAAKxG,KAAKgC,MAAMgX,SAOhB,GAAIhZ,KAAKgC,MAAMgX,SAASzX,KAAKw+B,iBAC3B//B,KAAKqP,kBADP,CAV0E,IAsBtEwD,EAPCpS,EAAQT,KAAKgC,MAAMgX,SAASzX,KAA5Bd,MACU,IAAXsqC,EACFtqC,EAAOT,KAAKqiC,UAAU,yBACb0I,IACTtqC,EAAOsqC,GAKL/qC,KAAKiU,UACNjU,KAAKiU,QAAQ0F,kBAAoB,IAAI9e,QAAQ,SAAC4oB,GACzCA,EAAEoe,gBAAkBj0B,EAAKiF,UAE3BA,EAAU4Q,EAAE5Q,WAKbA,IACHA,EAAU3B,OAAOlR,KAAKqiC,UAAU,aAGlC,IAAMnkC,EAAM,SAAAxE,OAAYsG,KAAKqiC,UAAU,WAAa1vB,KAAKC,OAEzD,IAAI5S,KAAKirC,iBAAT,CAMAjrC,KAAKirC,kBAAmB,EAExB,IAAMhxB,EAAWja,KACViU,EAAuCjU,KAAvCiU,QAASi3B,EAA8BlrC,KAA9BkrC,eAAgBryB,EAAc7Y,KAAd6Y,WAE1B+B,EAAa5a,KAAKmrC,iBAAiBH,GAEnC3wB,EAAgB,IAAIC,QAAQ,SAACC,EAASC,GAC1C5M,EAAKpH,KAAKiU,YAAYvc,EAAQ,SAAC4b,GAC7BlM,EAAKw9B,iBAAiBtxB,EAAUc,GAChCd,EAASjD,mBAAmBoD,EAAUW,GACtChN,EAAK+M,iBAAiBV,EAAUH,EAAUc,GAC1CL,EAAQT,EAAUc,OAuBtB,OAnBA5a,KAAKgC,MAAMnC,IACT3B,EACAsI,EAAKkN,mBAAmB7Z,IACxB,EAHFc,OAAAskC,gHAAA,EAAAtkC,CAAA,GAKOqF,KAAKgC,MAAMgX,SAASzX,KACpB,CACD0S,UACAi3B,iBACAryB,aACAhG,UACAgvB,cAAe7hC,KAAK6S,SAEnBrV,EAbP,CAcIod,aACAna,UAIG4Z,EAvCLhgB,QAAQC,MAAM,yIA0CFywC,GAAwC,IAAhCvtC,EAAgChD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAvB,GAAIogB,EAAmBpgB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAChD,OAAOwF,KAAKqrC,sBAAsBrrC,KAAKkZ,YAAYrf,KAAMkxC,EAAQvtC,EAAQod,4CAG1DX,EAAUH,EAAUc,GAAY,IAAAtM,EAAAtO,KAAA6Q,EAG3C+J,GAAc,GADhBwV,EAF6Cvf,EAE7Cuf,UAAW30B,EAFkCoV,EAElCpV,KAAMD,EAF4BqV,EAE5BrV,SAAU0D,EAFkB2R,EAElB3R,SAAUosC,EAFQz6B,EAERy6B,aAAcC,EAFN16B,EAEM06B,eAGjDC,EAAe,WAEjBnxC,QAAQC,MAAM,gDAGZmxC,GAAa,EAEbC,GAAc,EACZC,EAAiB,SAACC,GAClBF,IAGJA,GAAc,OAEahxC,IAAvBkxC,IACFH,EAAaG,GAGXhxB,GAAcA,EAAWixB,WAC3BjxB,EAAWixB,UAAU5xB,EAAUH,EAAUc,GAGtB,YAAjB0wB,GACFQ,yDAAW7xB,EAAUW,EAAYA,EAAWmxB,UAGvB,YAAnBR,GACFC,IAGF1xB,EAASkyB,iBAELP,GACF3xB,EAAStT,KAAKxE,MAAMiqC,WAAWnyB,EAAS9X,MAAMlH,OAI9CoxC,GAAgB,EACdC,EAAqB,WACrBD,IAICR,IAEHrxC,QAAQC,MAAM,iEACdqxC,KAGE/wB,GAAcA,EAAWjc,YAC3Bic,EAAWjc,WAAWsb,EAAUH,EAAUc,GAGvB,aAAjB0wB,GACFQ,yDAAW7xB,EAAUW,EAAYA,EAAWmxB,UAGvB,aAAnBR,GACFC,IAGFU,GAAgB,EAEhBpyB,EAAShD,MAAM,WACbmD,EAASmyB,gBAAgBtyB,EAAUc,GACnCd,EAAS/C,kBAAkBkD,EAAUW,GACrCX,EAASjY,MAAM2U,WACdna,mBAAoB,EAEnBoe,IACgBd,EAAShD,MAAM,WAC3B8D,GAAcA,EAAWyxB,WAC3BzxB,EAAWyxB,UAAUpyB,EAAUH,EAAUc,GAGpB,YAAnB2wB,GACFC,KAED5wB,EAAW0xB,MACJ9vC,mBAAoB,KAIlC,GAAIoe,EAAY,CAMd,IAAI2xB,EAEJ,GAPI3xB,EAAW0V,uBACbrW,EAAS8B,OAAS,KAClB9B,EAASgE,OAAOE,wBAKO,oBAAdiS,EACTmc,EAAU,kBAAMnc,EAAUnW,EAAUH,EAAU6xB,EAAgBQ,EAAoBvxB,SAC7E,GAAkB,cAAdwV,EACTqb,GAAa,EAEb3xB,EAASmE,OAAOgiB,mBAAmB,GACnChmB,EAASgE,OAAOgiB,mBAAmB,GACnCnmB,EAASmE,OAAOliB,MAAQ,EACxBke,EAASgE,OAAOliB,MAAQ,EAExBwwC,EAAU,WACMj+B,EAAKk+B,WACjBhxC,EAAW,EACXA,EAAW,EACX,SAACisB,EAAQglB,IACHA,EACFxyB,EAASgE,OAAOliB,MAAQ,EAAI0rB,EAE5B3N,EAASmE,OAAOliB,MAAQ,EAAI0rB,EAG1BvoB,IAEFA,EADgButC,EAAYhlB,EAAS,EAAI,EAAIA,EAAS,EACpCxN,EAAUH,EAAUc,IAG1C,SAAC8xB,GACCA,EAAclwC,mBAAoB,EAClCmvC,KAEF,WACE7xB,EAASmE,OAAOliB,MAAQ,EACxBke,EAASgE,OAAOliB,MAAQ,EACxBowC,KAEF,EACA1wC,GAEIe,mBAAoB,QAEvB,GAAkB,cAAd4zB,GAGJnW,EAAS8B,QAAUjC,EAASiC,QAC/B9B,EAASzT,KAAKxE,MAAMiqC,WAAWhyB,EAASjY,MAAMlH,KAC9C2wC,GAAa,GACJxxB,EAAS8B,SAAWjC,EAASiC,QACtCjC,EAAStT,KAAKxE,MAAMiqC,WAAWnyB,EAAS9X,MAAMlH,KAC9C2wC,GAAa,GAEbA,GAAa,EAGf3xB,EAASmE,OAAOliB,MAAQ,EACxBke,EAASgE,OAAOliB,MAAQ,EAExBwwC,EAAU,WACMj+B,EAAKsc,aACjBpvB,EACA,SAACisB,GACC3N,EAASmE,OAAOliB,MAAQ0rB,EACxBxN,EAASgE,OAAOliB,MAAQ,EAAI0rB,EACxBA,GAAU,IACZkkB,IAGEzsC,GACFA,EAASuoB,EAAQxN,EAAUH,EAAUc,IAGzC,WACEd,EAASmE,OAAOliB,MAAQ,EACxBke,EAASgE,OAAOliB,MAAQ,GAEnB6e,EAAW+xB,sBAAwB/xB,EAAWyV,qBAAuBpW,EAAS8B,QAAUjC,EAASiC,QAEpG1hB,QAAQC,MAAM,2MAGhB6xC,KAEF,EACA1wC,GAEIe,mBAAoB,QAEvB,GAAkB,cAAd4zB,GAA2C,aAAdA,GAA0C,WAAdA,GAAwC,aAAdA,EAA0B,KAAAwc,EAC9F5sC,KAAKwG,KAAKhJ,OAA3B8U,EAD+Gs6B,EAC/Gt6B,OAAQD,EADuGu6B,EACvGv6B,MAEfo5B,GAAa,EAEbxxB,EAASgE,OAAOnf,EAAI,EACpBmb,EAASgE,OAAOlf,EAAI,EAEpB,IAAIpD,EAAK,EACLE,EAAK,EAES,cAAdu0B,GACFtW,EAASmE,OAAOnf,GAAKuT,EACrB1W,EAAK,GACkB,aAAdy0B,GACTtW,EAASmE,OAAOnf,EAAIuT,EACpB1W,GAAM,GACiB,WAAdy0B,GACTtW,EAASmE,OAAOlf,GAAKuT,EACrBzW,GAAM,GACiB,aAAdu0B,IACTtW,EAASmE,OAAOlf,EAAIuT,EACpBzW,EAAK,GAGP0wC,EAAU,WACMj+B,EAAKsc,aACjBpvB,EACA,SAACisB,GACC3N,EAASmE,OAAOnf,EAAInD,GAAM8rB,EAAS,GAAKpV,EACxC4H,EAASgE,OAAOnf,EAAInD,EAAK8rB,EAASpV,EAClCyH,EAASmE,OAAOlf,EAAIlD,GAAM4rB,EAAS,GAAKnV,EACxC2H,EAASgE,OAAOlf,EAAIlD,EAAK4rB,EAASnV,EAE9BmV,GAAU,IACZkkB,IAGEzsC,GACFA,EAASuoB,EAAQxN,EAAUH,EAAUc,IAGzC,WACEd,EAASmE,OAAOnf,EAAI,EACpBgb,EAASmE,OAAOlf,EAAI,EACpBotC,KAEF,EACA1wC,GAEIe,mBAAoB,OAEvB,IAAkB,cAAd4zB,GAA2C,aAAdA,GAA0C,WAAdA,GAAwC,aAAdA,EAkG5F,OAHA/1B,QAAQC,MAAR,iCAAAZ,OAA+C02B,EAA/C,MACAub,SACAQ,IAjGsH,IAKlHU,EACAC,EANkHC,EAC9F/sC,KAAKwG,KAAKhJ,OAA3B8U,EAD+Gy6B,EAC/Gz6B,OAAQD,EADuG06B,EACvG16B,MAEfo5B,GAAa,EAMK,cAAdrb,GAA2C,aAAdA,GAC/BtW,EAASmE,OAAOliB,MAAQ,GAExB8wC,EAAY/yB,EAASkmB,QAAQngC,IAAI,EAAG,EAAGwS,EAAOC,IACpC2tB,mBAAmBnmB,EAASomB,eACtC2M,EAAUrkB,QAAU1O,EAASmE,OAAOuK,QACpCqkB,EAAUpkB,QAAU3O,EAASmE,OAAOwK,QAElB,cAAd2H,EACFyc,EAAUx6B,MAAQ,EAElBw6B,EAAUv6B,OAAS,IAGrB2H,EAASzT,KAAKxE,MAAMiqC,WAAWhyB,EAASjY,MAAMlH,KAC9Cmf,EAASgE,OAAOliB,MAAQ,GAExB+wC,EAAY7yB,EAAS+lB,QAAQngC,IAAI,EAAG,EAAGwS,EAAOC,IACpC2tB,mBAAmBhmB,EAASimB,eACtC4M,EAAUtkB,QAAUvO,EAASgE,OAAOuK,QACpCskB,EAAUrkB,QAAUxO,EAASgE,OAAOwK,QAEhCxO,EAAS8B,QACX+wB,EAAUpK,mBAAmBzoB,EAAS8B,SAI1C,IAAIixB,GAAY,EAEhBT,EAAU,WACMj+B,EAAKsc,aACjBpvB,EACA,SAACisB,GACKolB,GAAaG,IACXlzB,EAASiC,QACX8wB,EAAUnK,mBAAmB5oB,EAASiC,QAExCixB,GAAY,GAGI,cAAd5c,EACFyc,EAAUI,QAAQ5tC,KAAKuG,IAAI,EAAG6hB,EAASpV,GAAQC,GACxB,aAAd8d,EACT0c,EAAUG,QAAQ5tC,KAAKuG,IAAI,GAAI,EAAI6hB,GAAUpV,GAAQC,GAC9B,WAAd8d,EACT0c,EAAUG,QAAQ56B,EAAOhT,KAAKuG,IAAI,GAAI,EAAI6hB,GAAUnV,IAC7B,aAAd8d,GACTyc,EAAUI,QAAQ56B,EAAOhT,KAAKuG,IAAI,EAAG6hB,EAASnV,IAG5CmV,GAAU,IACZkkB,IAGEzsC,GACFA,EAASuoB,EAAQxN,EAAUH,EAAUc,IAGzC,WACMiyB,IACF/yB,EAASkmB,QAAQvhC,KAAK1C,MAAQ,EAC9B+d,EAASmE,OAAOuK,QAAUqkB,EAAUrkB,QACpC1O,EAASmE,OAAOwK,QAAUokB,EAAUpkB,QACpC3O,EAASkmB,QAAQrpB,OAAOk2B,IAGrBjyB,EAAW+xB,uBACT/xB,EAAWyV,qBAAuBvW,EAASiC,QAAU8wB,GAExDxyC,QAAQC,MAAR,GAAAZ,OAAiB02B,EAAjB,2KAEEnW,EAAS8B,QAAU+wB,GAErBzyC,QAAQC,MAAR,GAAAZ,OAAiB02B,EAAjB,6KAIJ+b,KAEF,EACA1wC,GAEIe,mBAAoB,GAU1BivC,GACFxxB,EAASzT,KAAKxE,MAAMiqC,WAAWhyB,EAASjY,MAAMlH,KAG3B,UAAjBwwC,GACFQ,yDAAW7xB,EAAUW,EAAYA,EAAWmxB,UAGvB,UAAnBR,IACFC,EAAeM,yDAAWhyB,EAAUc,EAAYA,EAAWsyB,WAG7D,IAAMC,EAAaZ,EAiBnB,GAhBAA,EAAU,WACJ3xB,GAAcA,EAAWwyB,YAC3BxyB,EAAWwyB,WAAWnzB,EAAUH,EAAUc,GAGvB,aAAjB0wB,GACFQ,yDAAW7xB,EAAUW,EAAYA,EAAWmxB,UAGvB,aAAnBR,GACFC,IAGF2B,KAGEvyB,EAAWrf,MACMyE,KAAK8W,MAAMy1B,EAAS3xB,EAAWrf,OACvCiB,mBAAoB,OAE/B+vC,SAGFZ,IACAQ,2CAIW3rC,GAIb,IAHA,IAAM6sC,EAAc7sC,EAAQqC,SAASyqC,kBAC/BnqC,EAAW3C,EAAQ2C,SAASmqC,kBAC3B1qC,EAAapC,EAAboC,UACEL,EAAI8qC,EAAa9qC,EAAI,EAAGA,GAAKK,EACpC,IAAK,IAAI2qC,EAAI,EAAGA,EAAIpqC,EAAUoqC,GAAK,EAAG,CACnB/sC,EAAQgtC,aAAa,GAC7BxM,OAAOz+B,EAAGA,EAAI,IAAM,mCAK7B/G,GAAmC,IAAAiW,EAAAzR,KAAzBytC,EAAyBjzC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACvCwF,KAAK0tC,wBAAwBlyC,GAE7B,IAAMsb,EAAQ9W,KAAK8W,MAAM,WACvBrF,EAAKk8B,0BAA0BnyC,IAC9BA,GAEHsb,EAAMta,mBAAoB,EACtBixC,IACF32B,EAAM82B,kBAAmB,uCAIjB7+B,EAAQmB,GAAe,IAAA29B,EAAA7tC,KAC1B0O,EAAiB1O,KAAjB0O,QAASlI,EAAQxG,KAARwG,KACTjK,EAAQiK,EAARjK,KAEPyD,KAAKiU,QAAUlF,EACf/O,KAAKkrC,eAAiBh7B,EACtBlQ,KAAKm4B,wBAA0BjoB,EAAcwJ,oBAC7C,IAAMvJ,EAAYD,EAAcC,WAAcnQ,KAAKm4B,yBAA2Bn4B,KAAKm4B,wBAAwB/tB,WAAkB,EAE7HsE,EAAQqL,YAAYhL,EAApBpU,OAAAskC,gHAAA,EAAAtkC,CAAA,GACKuV,EADL,CAEEC,YACAC,MAAO,WACLy9B,EAAKrnC,KAAKqN,WAAWxE,eAEvBgB,OAAQ,WACNw9B,EAAKrnC,KAAKqN,WAAWsD,YAAW,OAIpC,IAAItV,EAAOyF,OAAOwmC,YAAYl7B,MACxBvE,EAAK,IAAOrO,KAAKwf,QAAQkhB,MAAMhhB,IAErClZ,EAAKyM,kBAAoB,EAEzB,IAAMtR,EAAU3B,KAAK0O,QAAQgB,WAAW1P,MAIxC,IAFAzD,EAAKwxC,QACL/tC,KAAKgC,MAAMgsC,YAAW,GACft/B,EAAQu/B,gBAQb,GAPIl/B,EAAOm/B,wBACTn/B,EAAOm/B,uBAAuBluC,KAAM6B,EAAMwM,EAAI1M,GAAS,GAAM,GAAO,GAGtEE,GAAQwM,EACR9R,EAAK2kC,KAAKr/B,GAEN2E,EAAK46B,gBAAkB,IAGzB,YADA/mC,QAAQC,MAAM,mDAIlBiC,EAAK4xC,aAEL3nC,EAAKyM,kBAAoB,EAKzB,IAAMY,EAAWrN,EAAKqN,WAEtB,GAAI9E,EAAOmF,UACTL,EAASu6B,0BACJ,GAAIr/B,EAAOm/B,uBAAwB,CAMxC,IAAI9+B,EALJ5I,EAAKyM,kBAAoB,EACzBY,EAASw6B,sBAAwB,WAC/Bt/B,EAAOm/B,uBAAuBr6B,EAAUhS,EAAMwM,EAAI1M,GAAS,GAAO,GAAM,IAItE,qBAAsBoN,IACtBK,EAAoBL,EAAOK,iBAA3BA,wBACKL,EAAOK,kBAGhB,MAAQyE,EAASy6B,sBAAsB,CACrC,IAAMC,OAAoC7zC,IAArB0U,GAAkCpP,KAAK0O,QAAQS,aAAeC,EAKnF,GAJAL,EAAOm/B,uBAAuBr6B,EAAUhS,EAAMwM,EAAI1M,GAAS,EAAO4sC,GAAc,GAChF1sC,GAAQwM,EACR9R,EAAK2kC,KAAKr/B,GAEN2E,EAAK46B,gBAAkB,IAGzB,YADA/mC,QAAQC,MAAM,mDAIlBuZ,EAAS7R,MAAM2U,SACfnQ,EAAKyM,kBAAoB,OAEzBY,EAAS7R,MAAMgsC,YAAW,GAC1BzxC,EAAKiyC,oDAIY,IAAAC,EAAAzuC,KAEnB3F,QAAQkX,KAAK,yBAEbvR,KAAK0uC,iBAAmB,GAExB1uC,KAAKgC,MAAM2sC,WAAU,GACrB3uC,KAAKgC,MAAMgsC,YAAW,GAEtBhuC,KAAK4uC,kBAEL,IAAM1wC,EAAM,SAAAxE,OAAY2F,KAAKyT,SAAWH,KAAKC,OACvCi8B,EAAc7uC,KAAKwG,KAAKxE,MAAMnC,IAAI3B,EAAQ8B,KAAKkZ,aAAa,EAA9Cve,OAAAskC,gHAAA,EAAAtkC,CAAA,GAAwDqF,KAAKgC,MAAMgX,SAASzX,KAA5E,CAAkFw+B,kBAAkB,KACxH//B,KAAKwG,KAAKxE,MAAMiqC,WAAW/tC,GAE3B,IAAI4wC,EAAW,EAEfD,EAAY90B,YAAZpf,OAAAskC,gHAAA,EAAAtkC,CAAA,GAEOqF,KAAKiU,QAFZ,CAGIC,WAAW,EACX/D,WAAYnQ,KAAKm4B,wBAA0Bn4B,KAAKm4B,wBAAwB/tB,UAAY,IAAM,EAC1F8jC,uBAAwB,SAAClsC,EAAO+sC,EAAWC,EAASrtC,EAASstC,EAAaV,EAAchf,GACtFuf,GAAYE,EAEEP,EAAKS,oBAAoBltC,EAAO8sC,EAAUC,EAAWC,EAASrtC,EAASstC,EAAaV,EAAchf,KAE9Guf,EAAW,MAIjB,CACE1+B,MAAO,WACLy+B,EAAYP,sBAAuB,EAEnCG,EAAKzsC,MAAMgsC,YAAW,GACtBS,EAAKzsC,MAAM2sC,WAAU,GAErBF,EAAKjoC,KAAKjK,KAAKiyC,OAEfC,EAAKU,8EAMOntC,EAAO8sC,EAAUC,EAAWC,EAASrtC,EAASstC,EAAaV,EAAchf,GAAQ,IAAA6f,EAAApvC,KAC7FihB,EAAUjf,EAAMqtC,yBAAyBrvC,KAAM8uC,EAAUC,EAAWC,EAASzf,GACnF,GAAKtO,GAAYA,EAAQxmB,OAAzB,CAIA0Z,yDAAoB,GAEpB,IAAMlH,EAAQ,CACZgU,UACApkB,MAAMlC,OAAAskC,gHAAA,EAAAtkC,CAAA,GAAK20C,wCACXnlC,SAASxP,OAAAkD,qHAAA,EAAAlD,CAAKgH,EAAQwI,UACtBC,UAAWzI,EAAQyI,UACnB6kC,cACAV,gBAkBF,OAfAttB,EAAQpmB,QAAQ,SAACssB,GACXA,EAAOnlB,QAAUotC,GAEnB/0C,QAAQC,MAAR,uEAAAZ,OAAqFM,KAAKC,UAAUktB,KAGtGA,EAAOooB,gBAAkBpoB,EAAOprB,MAChCorB,EAAOqoB,gBAAkBviC,GAErBgiC,GAAeV,KACjBpnB,EAAOprB,MAAQ,KAInBiE,KAAK0uC,iBAAiB1qC,KAAKiJ,GACpBA,0DAGsB,IAczBwiC,EAdyBC,EAAA1vC,KAEvB2vC,EADS3vC,KAAK0uC,iBACQjiC,OAAO,SAACQ,GAAD,OAAYA,EAAMgiC,cAAgBhiC,EAAMshC,eAEtEoB,EAAal1C,SAIlBm1C,wDAAcD,EAAa,GAAG9yC,OAE1BmD,KAAKwG,KAAKuuB,oBACZ/0B,KAAKwG,KAAKuuB,qBAKZ0a,EAAY,SAACxiC,EAAO8K,GAAM,IACjBkJ,EAAkBhU,EAAlBgU,QAASpkB,EAASoQ,EAATpQ,MAEhB+yC,wDAAc/yC,GAEdokB,EAAQpmB,QAAQ,SAACssB,EAAQ5kB,GACvB4kB,EAAO0oB,qBAAuBH,EAAKjwC,OAAOI,IAAI,CAC5CnB,QAASyoB,EACTprB,MAAO,GACPP,SAAU,IACVmD,WAAY,WACVwoB,EAAO0oB,qBAAuBH,EAAKjwC,OAAOI,IAAI,CAC5CnB,QAASyoB,EACTprB,MAAOorB,EAAOooB,gBACd/zC,SAAU,IACVmD,WAAY,WACA,IAAN4D,IACF0K,EAAM6J,MAAQ44B,EAAK7tC,KAAKiuC,SAAS,CAC/Bv0C,MAAO,IAAMo0C,EAAal1C,OAAS,IACnCyb,SAAU,kBAAMu5B,EAAUxiC,EAAO8K,gBAUjD43B,EAAa90C,QAAQ,SAACoS,EAAO8K,GAC3B9K,EAAM6J,MAAQ44B,EAAK7tC,KAAKiuC,SAAS,CAC/Bv0C,MAAO,IAAMwc,EAAI,IACjB7B,SAAU,WACRu5B,EAAUxiC,EAAO8K,QAKnB/X,KAAK+vC,qBACPJ,EAAa90C,QAAQ,SAACoS,GACpBA,EAAMgU,QAAQpmB,QAAQ,SAACssB,GACrBA,EAAOprB,MAAQorB,EAAOooB,qBAO5BvvC,KAAK+vC,sBAAuB,EAE5B/vC,KAAKwK,MAAMwlC,SAAU,EAErBL,EAAa90C,QAAQ,SAACoS,GACpBA,EAAMgU,QAAQpmB,QAAQ,SAACssB,GACrBA,EAAO8oB,qBAIXjwC,KAAKwK,MAAMC,GAAG,iBAAkB,SAACqB,EAASokC,GAOxC,IAAIC,EANAT,EAAKU,4BACPV,EAAKU,2BAA2BvxC,UAGlC6wC,EAAKlpC,KAAKoF,OAAOpG,MAAM0wB,OAAS,UAGhCyZ,EAAa90C,QAAQ,SAACoS,GAChBA,EAAM6J,OACR7J,EAAM6J,MAAMjY,UAGdoO,EAAMgU,QAAQpmB,QAAQ,SAACssB,GACjBA,EAAO0oB,sBACT1oB,EAAO0oB,qBAAqB3lB,OAG9B/C,EAAOprB,MAAQorB,EAAOooB,gBAElBpoB,IAAW+oB,IACbC,EAAeljC,EACfka,EAAOprB,MAAQ,OAKjBo0C,IACFP,wDAAcO,EAAatzC,OAEvB6yC,EAAKlpC,KAAKuuB,oBACZ2a,EAAKlpC,KAAKuuB,mBAAmBob,EAAa/lC,UAAWslC,EAAKz7B,YAKhEjU,KAAKwK,MAAMC,GAAG,gBAAiB,SAACqB,EAASokC,GACnCR,EAAKU,4BACPV,EAAKU,2BAA2BvxC,UAGlC6wC,EAAKU,2BAA6BV,EAAK7tC,KAAKiuC,SAAS,CACnDv0C,MAAO,IACP2a,SAAU,WACRw5B,EAAKlpC,KAAKoF,OAAOpG,MAAM0wB,OAAS,GAChCwZ,EAAKP,oCAKXnvC,KAAKwK,MAAMC,GAAG,iBAAkB,SAACqB,EAASokC,GACpCR,EAAKU,4BACPV,EAAKU,2BAA2BvxC,UAGlC6wC,EAAKlpC,KAAKoF,OAAOpG,MAAM0wB,OAAS,GAEhC,IAAMnnB,EAAS2gC,EAAKz7B,QAEb9J,EAAY+lC,EAAaV,gBAAzBrlC,SACD8F,EAAkB9F,EAASstB,OAAO,SAACC,EAAQzqB,GAAT,OAAmByqB,GAAUzqB,EAAMC,SAAW,IAAI,GAE1FwiC,EAAKlpC,KAAK2Q,aACVu4B,EAAKlpC,KAAKuT,YAAVpf,OAAAskC,gHAAA,EAAAtkC,CAAA,GACKoU,EACC2gC,EAAKvX,yBAA2B,GAFtC,CAGEjkB,WAAW,EACXqF,UAAU,EACVpP,WACA8F,oBACC,CACDyJ,oBAAqBg2B,EAAKvX,wBAC1BhoB,WAAY,8CAMhB,GAAKnQ,KAAKiU,QAAV,CADY,IAKL7D,EAASpQ,KAAKkrC,eAAd96B,MACDrB,EAAS/O,KAAKiU,eAEbjU,KAAKiU,eACLjU,KAAKkrC,eAERn8B,EAAOmF,UACTlU,KAAKsuB,iBAAgB,IAInBtuB,KAAKquC,uBACPruC,KAAKquC,wBAGHj+B,GACFA,yCAIO0K,GACT,GAAK9a,KAAKiU,QAAV,CADuB,IAKhB5D,EAAUrQ,KAAKkrC,eAAf76B,OACDtB,EAAS/O,KAAKiU,eAEbjU,KAAKiU,eACLjU,KAAKkrC,eAERn8B,EAAOmF,UACTlU,KAAKsuB,iBAAgB,IAIlBxT,GACH9a,KAAK0O,QAAQyI,aAGX9G,GACFA,gDAKFrQ,KAAK2P,iBAAkB,EAEvB,GAAAjW,OAAAiB,OAAAkD,qHAAA,EAAAlD,CAAIqF,KAAKP,OAAO4wC,SAAhB11C,OAAAkD,qHAAA,EAAAlD,CAA4BqF,KAAKP,OAAO6wC,OAAMz1C,QAAQ,SAACiF,GAAD,OAAWA,EAAMywC,sBAAwBzwC,EAAMoqB,SACrGlqB,KAAKH,IAAI2wC,YAAYluC,KAAKmK,OAAO,SAACgkC,GAAD,MAAwB,WAAdA,EAAK9qC,OAAmB2P,IAAI,SAACm7B,GAAD,OAAUA,EAAKF,sBAAwBE,EAAK1uB,MAAMmI,SAKzH,IAAMhoB,EAAYlC,KAAKH,IAAI2wC,YAAYluC,KAAKmK,OAAO,SAACgkC,GAAD,MAAwB,2BAAdA,EAAK9qC,OAClE3F,KAAK6B,KAAKiuC,SAAS,CACjB55B,SAAU,WACRhU,EAAUrH,QAAQ,SAAC41C,GACZA,EAAKF,sBACRE,EAAKC,4DAQb,IAAM/kB,EAAS3rB,KAAK0uC,iBAEf/iB,IAID3rB,KAAKowC,4BACPpwC,KAAKowC,2BAA2BvxC,UAGlC8sB,EAAO9wB,QAAQ,SAACoS,GACVA,EAAM6J,OACR7J,EAAM6J,MAAMjY,UAGdoO,EAAMgU,QAAQpmB,QAAQ,SAACssB,GACjBA,EAAO0oB,sBACT1oB,EAAO0oB,qBAAqB3lB,OAG9B/C,EAAOprB,MAAQorB,EAAOooB,oBAI1BvvC,KAAKub,uBAAuBvb,KAAKiU,QAAQhE,gBAAiBjQ,KAAKiU,QAAQ7E,kEAGlD/N,EAAOC,GAAK,IAAAqvC,EAAA3wC,KAC3B2rB,EAAS3rB,KAAK0uC,iBACf/iB,IAML3rB,KAAKiU,QAAQhE,gBAAkB5O,EAC/BrB,KAAKiU,QAAQ7E,iBAAmB9N,EAEhCqqB,EAAO9wB,QAAQ,SAACoS,EAAO2jC,GACrB,IAAMC,EAAO5jC,EAAM7C,YAAcumC,EAAKxY,wBAA0BwY,EAAKxY,wBAAwB/tB,UAAY,IAAM,GAC/G6C,EAAMgiC,YAAc4B,EAAOxvC,EAC3B4L,EAAMshC,aAAesC,EAAOvvC,EAE5B2L,EAAMgU,QAAQpmB,QAAQ,SAACssB,GACrBA,EAAOprB,MAASkR,EAAMgiC,aAAehiC,EAAMshC,aAAgBpnB,EAAOooB,gBAAkB,sDAMxF,IAAM5jB,EAAS3rB,KAAK0uC,iBACf/iB,IAILA,EAAO9wB,QAAQ,SAACoS,GACdA,EAAMgU,QAAQpmB,QAAQ,SAACssB,GACrBA,EAAOprB,MAASkR,EAAMgiC,aAAehiC,EAAMshC,aAAgB,EAAIpnB,EAAOooB,oBAI1EvvC,KAAKmvC,sEAGOr0C,EAAKhB,GACjBkG,KAAK8wC,sBAAsBh2C,+CAGTA,EAAKhB,GACvB,GAAIkG,KAAKiU,SAAWjU,KAAKiU,QAAQC,UAAW,CAC1C,IAAMnF,EAAS/O,KAAKiU,QACpBjU,KAAKwG,KAAK2Q,aACVnX,KAAKwG,KAAKuT,YAAYhL,EAAQ,CAC5B2K,oBAAqB1Z,KAAKm4B,kEAKjBpoB,GACb/P,KAAK6Y,WAAa9I,EAClBA,EAAUoK,eAAiBngB,KAAKmB,MAAMnB,KAAKC,UAAU+F,KAAKygC,eAC1D1wB,EAAU4J,iBAAmB,GAC7B5J,EAAU8C,QAAU7S,KAAK6S,QAEzB7S,KAAK0O,QAAQ4K,eAAetZ,KAAM+P,2CAIlC,IAAMA,EAAY/P,KAAK6Y,WAGvB,cAFO7Y,KAAK6Y,WACZ7Y,KAAK0O,QAAQwI,gBACNnH,gDAGaghC,GAAY,IAAAC,EAAAhxC,KACzB2hC,EAAmB3hC,KAAnB2hC,gBACP3hC,KAAK2hC,gBAAkB,GAEvBA,EAAgB9mC,QAAQ,SAAC2C,GAAW,IAEhC0E,EACE1E,EADF0E,UAAW1B,EACThD,EADSgD,QAAS3G,EAClB2D,EADkB3D,KAAMuE,EACxBZ,EADwBY,QAG5B,GAAK8D,EAAUO,SAAUP,EAAU+uC,SAKnC,IAAIF,GAAeA,EAAWh2C,WAAWlB,GAAzC,CAVkC,IAe3B4G,EAAQD,EAARC,KACPD,EAAQ0wC,UACR1wC,EAAQ0pB,OACRhoB,EAAUrD,UAEVmyC,EAAKhtB,eAAenqB,EAAMuE,EAASqC,QATjCuwC,EAAKrP,gBAAgB39B,KAAKxG,2CAiB9B,GAFAnD,QAAQkX,KAAR,eAAA7X,OAA4BsG,KAAKkZ,YAAYrf,OAEzCmG,KAAKwG,KAAK46B,gBAAkB,IAI9B,OAFA/mC,QAAQkX,KAAK,+CACbvR,KAAKwG,KAAK46B,gBAAkB,GAI9B,GAAIphC,KAAKiU,SAAWjU,KAAKiU,QAAQC,UAAW,CAC1C,IAAMnF,EAAS/O,KAAKiU,QACpBjU,KAAKwG,KAAK2Q,aACVnX,KAAKwG,KAAKuT,YAAYhL,EAAQ,CAC5B2K,oBAAqB1Z,KAAKm4B,+BAG5Bn4B,KAAK8wC,wBAGH9wC,KAAKwiC,gBACPxiC,KAAKmxC,mBAELnxC,KAAKoxC,mBAGPpxC,KAAKwG,KAAKgW,mBAEVxc,KAAKqxC,6DAGyB,QAAAC,EAAA92C,UAAAC,OAANihC,EAAM,IAAAr+B,MAAAi0C,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAN7V,EAAM6V,GAAA/2C,UAAA+2C,GAC9B,OAAOvxC,KAAKsuB,gBAAL1vB,MAAAoB,KAAA,EAAqB,GAArBtG,OAA+BgiC,+CAGrB,IAAA8V,EAAAxxC,KACbA,KAAKwf,SAAWxf,KAAKwf,QAAQkhB,OAAS1gC,KAAKwf,QAAQkhB,MAAM+Q,QAAUzxC,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,SAC/FkD,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,QAAQjC,QAAQ,SAACsE,GACrCA,EAAKuyC,YAAcvyC,EAAKuyC,WAAW3vB,QACrC5iB,EAAKuyC,WAAW3vB,MAAM2uB,QACtBvxC,EAAKuyC,WAAW3vB,MAAMmI,OACtB/qB,EAAKuyC,WAAW3vB,MAAMpL,YAK5Bhc,OAAOC,KAAKoF,KAAK+hB,MAAMA,MAAMjlB,SAASjC,QAAQ,SAACC,GAC7C02C,EAAKzvB,MAAMpL,OAAO7b,gDAIH,IAAA62C,EAAA3xC,KACjBrF,OAAOC,KAAKoF,KAAK+hB,MAAMA,MAAMjlB,SAASjC,QAAQ,SAACC,GAC7C62C,EAAK5vB,MAAMpL,OAAO7b,KAGpBkF,KAAKwiC,kBAEDxiC,KAAKwf,SAAWxf,KAAKwf,QAAQkhB,OAAS1gC,KAAKwf,QAAQkhB,MAAM+Q,QAAUzxC,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,SAC/FkD,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,QAAQjC,QAAQ,SAACsE,GACzC,GAAIA,EAAKuyC,YAAcvyC,EAAKuyC,WAAW3vB,OAAS5iB,EAAKuyC,WAAW3vB,MAAM6vB,YAAa,KAC1E92C,EAAOqE,EAAKuyC,WAAW3vB,MAAM6vB,YAA7B92C,IACPqE,EAAKuyC,WAAW3vB,MAAMmI,OACtB/qB,EAAKuyC,WAAW3vB,MAAM6vB,YAAc,KACpCD,EAAK76B,MAAM,kBAAM3X,EAAKuyC,WAAW3vB,MAAM3G,KAAKtgB,KAAM0B,mBAAoB,4CAM/D3C,GAAgC,IAA1BuE,EAA0B5D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAhB,GAAIq3C,EAAYr3C,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAE7CyF,+CAAI,GAAAzG,OAAIG,EAAJ,WAEJ,IAAMgD,EAAKlC,OAAAskC,gHAAA,EAAAtkC,CAAA,GACNm3C,+CAAe,GAAAp4C,OAAIG,EAAJ,MACfuE,GAGEgG,EAAgBvH,EAAhBuH,MAAOzB,EAAS9F,EAAT8F,MAERT,EAAYlC,KAAKH,IAAIqC,UAAUS,GAE/BovC,EAAe5tC,uDAAqBtH,GACpC2D,EAAU0B,EAAU8vC,cAAcD,GAExC7vC,EAAUE,UAAYpC,KAAKoC,UAE3B7B,uDAA4BC,EAASqxC,GAAc7xC,KAAKqiC,UAAU,cAE9Dj+B,GACFA,EAAMlC,EAAW1B,IAGf3D,EAAM+G,SAAYiuC,GAAch1C,EAAMgH,kBACxC7D,KAAKiyC,eAAezxC,GAGtBA,EAAQhE,kBAAoBu1C,EAAav1C,kBACzCgE,EAAQgC,mBAAqBuvC,EAAavvC,mBAE1CxC,KAAK2hC,gBAAgB39B,KAAK,CACxB9B,YAAW1B,UAAS3G,OAAMuE,0CAIxBvE,EAAMqE,GAAsB,IAAdE,EAAc5D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACf,OAATX,GAEFsG,+CAAI,GAAAzG,OAAIG,EAAJ,cAGN,IAAMgD,EAAiB,OAAThD,EAAAc,OAAAskC,gHAAA,EAAAtkC,CAAA,GAAoByD,GAApBzD,OAAAskC,gHAAA,EAAAtkC,CAAA,GACTm3C,+CAAe,GAAAp4C,OAAIG,EAAJ,MACfuE,GAGC8zC,EAASj0C,oDAAkBC,EAAQrB,EAAOuB,GAEhD,OAAO4B,KAAKP,OAAOI,IAAIqyC,4CAGR1nC,GACf,IAAKA,EACH,OAAOA,EAGT,IAGI3N,EAHEpD,EAA0B,kBAAV+Q,EAAqBA,EAAM3Q,KAAO2Q,EAClDpM,EAA2B,kBAAVoM,EAAqBA,EAAQ,GAmBpD,OAfI/Q,GAEF0G,+CAAI,GAAAzG,OAAID,EAAJ,eAEJoD,EAAKlC,OAAAskC,gHAAA,EAAAtkC,CAAA,GACAm3C,+CAAe,GAAAp4C,OAAID,EAAJ,MACf2E,IAGLvB,EAAKlC,OAAAskC,gHAAA,EAAAtkC,CAAA,GACAw3C,iDACA/zC,GAIAg0C,yDAAuBv1C,EAAOuB,wCAG1B5C,EAAUwlC,EAAQriC,GAA6C,IAAjC0zC,EAAiC73C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAApB,EAAGiB,EAAiBjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAV,SAC1DsF,EAAQE,KAAKP,OAAO6yC,WAAW,CACnCC,KAAMF,EACNG,GAAI,IACJ/2C,OACAD,WACA0D,SAAU,WACR,IAAMuoB,EAAS3nB,EAAM2yC,WAAa,IAClCzR,EAAOvZ,IAET9oB,eAGF,OAAOmB,gDAGa4yC,EAAWl3C,EAAUwlC,EAAQriC,GAA6B,IAAAg0C,EAAA3yC,KAAjBvE,EAAiBjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAV,SAChE63C,EAAa,EAmBjB,OAlBIryC,KAAK0yC,KACPL,EAAaryC,KAAK0yC,GAAWD,WAC7BzyC,KAAK0yC,GAAWxoB,QAGlBlqB,KAAK0yC,GAAa1yC,KAAK4qB,aACrBpvB,GAAY,EAAI62C,EAAa,KAC7BrR,EACA,WACMriC,GACFA,EAAUC,WAAV,EAAApE,kBAEKm4C,EAAKD,IAEdL,EACA52C,GAGKuE,KAAK0yC,sCAGHE,EAAYC,EAAa7R,EAAQ8R,EAAYn0C,GAAiE,IACnHmB,EADmHizC,EAAA/yC,KAArDqyC,EAAqD73C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxC,EAAGw4C,EAAqCx4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5B,SAAUy4C,EAAkBz4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAARw4C,EA+B/G,OA5BAlzC,EAAQE,KAAKP,OAAO6yC,WAAW,CAC7BC,KAAMF,EACNG,GAAI,IACJ/2C,KAAMu3C,EACNx3C,SAAUo3C,EACV1zC,SAAU,WACR,IAAMuoB,EAAS3nB,EAAM2yC,WAAa,IAClCzR,EAAOvZ,GAAQ,IAEjB9oB,WAAY,WACVmB,EAAQizC,EAAKtzC,OAAO6yC,WAAW,CAC7BC,KAAM,IACNC,GAAI,EACJ/2C,KAAMw3C,EACNz3C,SAAUq3C,EACV3zC,SAAU,WACR,IAAMuoB,EAAS3nB,EAAM2yC,WAAa,IAClCzR,EAAOvZ,GAAQ,IAEjB9oB,eAGEm0C,GACFA,EAAWhzC,kDAQC4yC,EAAWE,EAAYC,EAAa7R,EAAQ8R,EAAYn0C,GAAiD,IAAAu0C,EAAAlzC,KAArCgzC,EAAqCx4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5B,SAAUy4C,EAAkBz4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAARw4C,EAC/GX,EAAa,EA4BjB,OA3BIryC,KAAK0yC,KACPL,EAAaryC,KAAK0yC,GAAWD,WAC7BzyC,KAAK0yC,GAAWxoB,QAGlBlqB,KAAK0yC,GAAa1yC,KAAKwsC,WACrBoG,GAAc,EAAIP,EAAa,KAC/BQ,EACA7R,EACA,SAAClhC,GACC,GAAIgzC,EAAY,SAAAK,EAAA34C,UAAAC,OADPihC,EACO,IAAAr+B,MAAA81C,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IADP1X,EACO0X,EAAA,GAAA54C,UAAA44C,GACdN,EAAUl0C,WAAV,GAAWkB,GAAXpG,OAAqBgiC,IAGvBwX,EAAKR,GAAa5yC,GAEpB,WACMnB,GACFA,EAAUC,WAAV,EAAApE,kBAEK04C,EAAKR,IAEdL,EACAW,EACAC,GAGKjzC,KAAK0yC,wCAGDE,EAAYS,EAAiBR,EAAa7R,EAAQsS,EAAWC,EAAO50C,GAAiE,IAC5ImB,EAD4I0zC,EAAAxzC,KAArDqyC,EAAqD73C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxC,EAAGw4C,EAAqCx4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5B,SAAUy4C,EAAkBz4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAARw4C,EA8CxI,OA3CAlzC,EAAQE,KAAKP,OAAO6yC,WAAW,CAC7BC,KAAMF,EACNG,GAAI,IACJ/2C,KAAMu3C,EACNx3C,SAAUo3C,EACV1zC,SAAU,WACR,IAAMuoB,EAAS3nB,EAAM2yC,WAAa,IAClCzR,EAAOvZ,EAAQ,OAEjB9oB,WAAY,WACVmB,EAAQ0zC,EAAK/zC,OAAO6yC,WAAW,CAC7BC,KAAM,EACNC,GAAI,IACJh3C,SAAU63C,EACVn0C,SAAU,WACR,IAAMuoB,EAAS3nB,EAAM2yC,WAAa,IAClCzR,EAAO,EAAG,UAAWvZ,IAEvB9oB,WAAY,WACVmB,EAAQ0zC,EAAK/zC,OAAO6yC,WAAW,CAC7BC,KAAM,IACNC,GAAI,EACJ/2C,KAAMw3C,EACNz3C,SAAUq3C,EACV3zC,SAAU,WACR,IAAMuoB,EAAS3nB,EAAM2yC,WAAa,IAClCzR,EAAOvZ,EAAQ,QAEjB9oB,eAGE40C,GACFA,EAAMzzC,MAKRwzC,GACFA,EAAUxzC,oDAShB4yC,EACAE,EACAS,EACAR,EACA7R,EACAsS,EACAC,EACA50C,GAGA,IAAA80C,EAAAzzC,KAFAgzC,EAEAx4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAFS,SACTy4C,EACAz4C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GADUw4C,EAENX,EAAa,EAoCjB,OAnCIryC,KAAK0yC,KACPL,EAAaryC,KAAK0yC,GAAWD,WAC7BzyC,KAAK0yC,GAAWxoB,QAGlBlqB,KAAK0yC,GAAa1yC,KAAKwnB,aACrBorB,GAAc,EAAIP,EAAa,KAC/BgB,EACAR,EACA7R,EACA,SAAClhC,GACC,GAAIwzC,EAAW,SAAAI,EAAAl5C,UAAAC,OADNihC,EACM,IAAAr+B,MAAAq2C,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IADNjY,EACMiY,EAAA,GAAAn5C,UAAAm5C,GACbL,EAAS10C,WAAT,GAAUkB,GAAVpG,OAAoBgiC,IAGtB+X,EAAKf,GAAa5yC,GAEpB,SAACA,GACC,GAAIyzC,EAAO,SAAAK,EAAAp5C,UAAAC,OADFihC,EACE,IAAAr+B,MAAAu2C,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IADFnY,EACEmY,EAAA,GAAAr5C,UAAAq5C,GACTN,EAAK30C,WAAL,GAAMkB,GAANpG,OAAgBgiC,IAGlB+X,EAAKf,GAAa5yC,GAEpB,WACMnB,GACFA,EAAUC,WAAV,EAAApE,kBAEKi5C,EAAKf,IAEdL,EACAW,EACAC,GAGKjzC,KAAK0yC,kCAGPhvB,GACDA,IAAW1jB,KAAKy/B,UAClBz/B,KAAK8zC,aAAe9zC,KAAK6B,KAAK+Q,KAGhC,IAAMmhC,EAAY10C,KAAKmC,IAAInC,KAAKuG,IAAI5F,KAAKy/B,QAAU/b,EAAQ,GAAI,GACzDswB,EAAK30C,KAAAglB,IAAG0vB,EAAa5zC,+CAAK,0BAIhC,GAHAH,KAAKy/B,QAAUsU,EACf/zC,KAAK0/B,aAAesU,EAEhBA,GAAS7zC,+CAAK,wBAA0BA,+CAAK,wBAAyB,KAAA8zC,EAChDj0C,KAAKwG,KAAKhJ,OAA3B6U,EADiE4hC,EACjE5hC,MAAOC,EAD0D2hC,EAC1D3hC,OAER4hC,EAAY,IAAIvzC,8CAAOtB,KAAK80C,QAChCH,EAAQ7zC,+CAAK,mBAAqBkS,EAClC2hC,EAAQ7zC,+CAAK,mBAAqBmS,GAEpCtS,KAAKie,OAAO+1B,MALK,IAKWE,sCAItBE,EAAUC,GAAsC,IAAAC,EAAAt0C,KAA5BkF,EAA4B1K,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAnB,EAAK+B,EAAc/B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAExD,GAAKwF,KAAKgC,MAAMuyC,cAAev0C,KAAKwG,KAAKyM,iBAAzC,CAIA,IAAIpZ,EAAOu6C,EACPC,IACFx6C,GAAQ,EAAIwF,KAAK2B,MAAMhB,KAAKmjB,YAAL,SAAAzpB,OAA0BG,GAAQ,EAAGw6C,KAG9D,IAAMl5B,EAAQnb,KAAKmb,MAAMtb,IAAIhG,GAE7B,GAAKshB,GAAUA,EAAMrgB,IAArB,CAMAkF,KAAKo/B,OAAOp7B,KAAKmX,GAEjBA,EAAM1Q,GAAG,WAAY,WACnB6pC,EAAKlV,OAASkV,EAAKlV,OAAO3yB,OAAO,SAACkM,GAAD,OAAOA,IAAMwC,MAGhD,IACEA,EAAMq5B,gBAAkBtvC,EACxBiW,EAAM1F,UAAUvQ,EAASlF,KAAKwG,KAAKtB,OAAS/E,+CAAK,sBACjDgb,EAAM/Y,UAAY,EAClB+Y,EAAMC,KAAK,GAAI,CAAC7e,SAChB,MAAOnC,GAEPC,QAAQic,KAAR,wBAAA5c,OAAqCG,EAArC,MAAAH,OAA8CU,IAGhD,OAAO+gB,EApBL9gB,QAAQic,KAAR,wBAAA5c,OAAqCG,0CAuB5B0b,GAAW,IACf6pB,EAAUp/B,KAAVo/B,OAEDqV,EAAal/B,EAAYpV,+CAAK,qBAEpCi/B,EAAOvkC,QAAQ,SAACsgB,GAAD,OAAWA,EAAM1F,UAAU0F,EAAMq5B,gBAAkBC,yCAGX,IAA/C56C,EAA+CW,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxCwF,KAAK00C,YAAa15B,EAAsBxgB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACvDwF,KAAKwG,KAAK6qC,UAAUx3C,EAAMmhB,4CAGkC,IAA/CnhB,EAA+CW,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxCwF,KAAK00C,YAAa15B,EAAsBxgB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC5D,GAAIX,EACF,OAAOmG,KAAKqxC,UAAUx3C,EAAMmhB,uCAK9B,OAAO,mCAGH9E,EAAUrU,GACd,IAAMiV,EAAQ,CAACZ,WAAUrU,QAEzB,OADA7B,KAAKs7B,OAAOt3B,KAAK8S,GACVA,uCAGIjV,EAAMwM,GAAI,IAAAsmC,EAAA30C,KACds7B,EAAUt7B,KAAVs7B,OACDsZ,EAAY50C,KAAKs7B,OAAS,GAC1Bv5B,EAAW/B,KAAKiC,QAAQq5B,QAEzBv5B,GAAY/B,KAAKy/B,SACpBz/B,KAAKsrB,OAAOnrB,+CAAK,sBAAwBkO,GAAM,GAGjDitB,EAAOzgC,QAAQ,SAACic,IACV/U,GAAa+U,EAAMta,kBAKnBsa,EAAMjV,OACJiV,EAAM82B,iBACR92B,EAAMjV,MAAQwM,EAAKsmC,EAAKvyC,UAExB0U,EAAMjV,MAAQwM,EAEZyI,EAAMjV,KAAO,GACf+yC,EAAU5wC,KAAK8S,GAKnBA,EAAMZ,WAhBJ0+B,EAAU5wC,KAAK8S,0CAoBRjV,EAAMgzC,GAAQ,IAClBp1C,EAAUO,KAAKgC,MAAM8+B,QAArBrhC,OACDsC,EAAW/B,KAAKiC,QAAQxC,OAGxB4O,EAAKwmC,EAASp1C,EAAO2C,UAE3B3C,EAAO4wC,QAAQx1C,QAAQ,SAACiF,GAClBiC,IAAajC,EAAMtD,mBAInBsD,EAAMkhC,OAAOn/B,EAAMwM,KACrB5O,EAAOq1C,SAAS9wC,KAAKlE,GACrBL,EAAOs1C,YAAc,kDAKN,IAAAC,EAAAh1C,KAOnB,GANAA,KAAKq/B,mBAAqB,EAErBr/B,KAAKs/B,wBACRt/B,KAAKs/B,sBAAwBt/B,KAAKwG,KAAKjK,KAAK04C,UAAY,MAGtDj1C,KAAKq/B,kBAAoB,KAM7B,GAFAr/B,KAAKq/B,kBAAoB,EAErBr/B,KAAKs/B,sBACPt/B,KAAKs/B,uBAAwB,OAI/B,GAAIt/B,KAAK2f,iBAAiBllB,OAAQ,CAChC,IAAI6W,EAAUtR,KAAK2f,iBAAiBylB,QAC/B/nC,MAAMC,QAAQgU,KACjBA,EAAU,CAACA,IAGb,IAAM4jC,EAAmB,SAACr4C,GACpBA,EAAMpC,SACJu6C,EAAKxuC,KAAKS,OACZkuC,0DAGFt4C,EAAMhC,QAAQ,SAACmU,GACb,IAAMomC,EAAel1C,uDAAqB8O,GACtComC,IACFtD,+CAAe,GAAAp4C,OAAI07C,EAAJ,MAAqB,GAEpCJ,EAAKlE,sBAAsBsE,QAM/BC,GAAQ,EACNC,EAAe,GACfC,EAAU,SAACz6C,EAAKhB,GACpBw7C,EAAatxC,KAAKlJ,GAClB,IAAMoC,EAAOs4C,uCAAU16C,IAEnBk6C,EAAKxuC,KAAKS,MACZqoC,uCAAgBx0C,GAAOhB,EAEvB07C,uCAAU16C,GAAK,GAAKhB,EAGlBoD,EAAKzC,OAAS,GAAiB,OAAZyC,EAAK,MACW,oBAA1BA,EAAKA,EAAKzC,OAAS,KAE5Bg7C,EADuBv4C,EAAKA,EAAKzC,OAAS,IAC3BX,EAAOk7C,EAAMA,EAAKxuC,OAIhC6uC,GACHH,EAAiB,CAACp6C,KAItBwW,EAAQzW,QAAQ,SAAC8pB,GACO,kBAAXA,EACM,mBAAXA,EACFqwB,EAAKxuC,KAAKkvC,iBAEVH,EAAQ5wB,GAASxkB,+CAAKwkB,IAEG,oBAAXA,GAChBA,EAAO4wB,KAIXF,GAAQ,EAGRh7C,QAAQ4c,IAAR,oCAAAvd,OAAgD4X,EAAQtT,KAAK,QAE7Dk3C,EAAiBI,+CAIFluC,GACjB,IAAMuuC,EAAYvuC,EAAMvN,KAAK+7C,OAAO,GAAGC,cAAgBzuC,EAAMvN,KAAKiE,MAAM,GAClE6N,EAAM,SAAAjS,OAAYi8C,GACxB,GAAI31C,KAAK2L,GACP3L,KAAK2L,GAAQvE,QACR,GAAIjH,+CAAK,gBAAiB,CAC/B,IAAM21C,EAAW,cAAAp8C,OAAiBi8C,GAC9B31C,KAAK81C,IACP91C,KAAK81C,GAAa1uC,yCAKX+f,GAAkC,IAA1B4uB,EAA0Bv7C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAhB,EAAGw7C,EAAax7C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EAC1C,GAAI2sB,EAAQ,CACV,IAAM0B,EAAO1oB,+CAAK,qBAElBH,KAAKie,OAAOg4B,YAAY9uB,GAAQ,EAAM0B,EAAMA,EAAMktB,EAASC,QAE3Dh2C,KAAKie,OAAOi4B,+CAkCNp3C,EAAGC,GACXiB,KAAKw/B,eAAiBx/B,KAAKu/B,WAC3Bv/B,KAAKm2C,iBAAmB,CAACr3C,EAAIkB,KAAKwG,KAAKhJ,OAAO6U,MAAOtT,EAAIiB,KAAKwG,KAAKhJ,OAAO8U,2DAGjDxT,EAAGC,GAAG,IAE7BijC,EACEhiC,KADFgiC,QAASC,EACPjiC,KADOiiC,QAEX,MAAO,CAACnjC,EADJkB,KADgBuS,UAEIyvB,EAASjjC,EAD7BiB,KAD2BwS,WAEmByvB,0DAGrBnjC,EAAGC,GAAG,IAEjCijC,EACEhiC,KADFgiC,QAASC,EACPjiC,KADOiiC,QAAS1vB,EAChBvS,KADgBuS,UAAWC,EAC3BxS,KAD2BwS,WAE/B,MAAO,CAAC1T,EAAIyT,EAAYyvB,EADpBhiC,KADuC4/B,UAEE7gC,EAAIyT,EAAayvB,EAD1DjiC,KADkD6/B,+DAK7B/gC,EAAGC,GAAG,IAE7BijC,EACEhiC,KADFgiC,QAASC,EACPjiC,KADOiiC,QAEX,MAAO,EAAEnjC,EAAIkjC,GADThiC,KADgBuS,WAEgBxT,EAAIkjC,GADpCjiC,KAD2BwS,mEAKF1T,EAAGC,GAAG,IAEjCijC,EACEhiC,KADFgiC,QAASC,EACPjiC,KADOiiC,QAAS1vB,EAChBvS,KADgBuS,UAAWC,EAC3BxS,KAD2BwS,WAE/B,MAAO,EAAE1T,EAAIkjC,EADThiC,KADuC4/B,WAEPrtB,GAAYxT,EAAIkjC,EADhDjiC,KADkD6/B,YAEsBrtB,gDAGzD,IACZ4jC,EAAiBp2C,KAAKwG,KAAKgE,MAA3B4rC,cACHA,EAAcC,QAChBr2C,KAAKmoB,eAEDnoB,KAAKs2C,uBACPt2C,KAAKie,OAAOuK,SAAWxoB,KAAKs2C,qBAAuBF,EAAcG,SAASz3C,GAGxEkB,KAAKw2C,uBACPx2C,KAAKie,OAAOwK,SAAWzoB,KAAKw2C,qBAAuBJ,EAAcG,SAASx3C,GAG5EiB,KAAKs2C,qBAAuBF,EAAcG,SAASz3C,EACnDkB,KAAKw2C,qBAAuBJ,EAAcG,SAASx3C,WAE5CiB,KAAKs2C,4BACLt2C,KAAKw2C,+DAIC18B,EAAUc,+CAGRX,EAAUW,4CAGbd,EAAUc,8CAGRX,EAAUW,GACtBA,GAAcA,EAAWyV,qBAC3BrwB,KAAKyiC,eAGPziC,KAAKqxC,4DAGiBz2B,GACtB5a,KAAK0O,QAAQH,UAAU,eAAe,qDAGdqM,GACxB5a,KAAK0O,QAAQH,UAAU,eAAe,8CAGrB/S,GACjBwE,KAAK0O,QAAQH,UAAU,UAAU,gDAGd/S,GACnBwE,KAAK0O,QAAQH,UAAU,UAAU,qDAGTqM,GACxB5a,KAAKy2C,wBAAwB77B,GAE7B5a,KAAKiC,QAAQud,SAAU,EAEvBxf,KAAK02C,kEAGcl7C,GACnBwE,KAAK22C,mBAAmBn7C,GAExBwE,KAAKiC,QAAQud,SAAU,EAEvBxf,KAAK02C,yEAGqB97B,GAC1B5a,KAAK42C,0BAA0Bh8B,GAE/B5a,KAAKiC,QAAQud,SAAU,EAEvBxf,KAAK62C,qEAGgBr7C,GACrBwE,KAAK82C,qBAAqBt7C,GAE1BwE,KAAKiC,QAAQud,SAAU,EAEvBxf,KAAK62C,2EAGsBj8B,GAC3B5a,KAAK+2C,0BAA0Bn8B,GAE/B5a,KAAKiC,QAAQq5B,QAAS,EACtBt7B,KAAKg3C,0BACLh3C,KAAKi3C,wEAGwBr8B,GAC7B5a,KAAKk3C,4BAA4Bt8B,GAEjC5a,KAAKiC,QAAQq5B,QAAS,EACtBt7B,KAAKm3C,2BACLn3C,KAAKo3C,kEAGiB57C,GACtBwE,KAAKq3C,qBAAqB77C,GAE1BwE,KAAKiC,QAAQq5B,QAAS,EACtBt7B,KAAKg3C,0BACLh3C,KAAKi3C,mEAGmBz7C,GACxBwE,KAAKs3C,uBAAuB97C,GAE5BwE,KAAKiC,QAAQq5B,QAAS,EACtBt7B,KAAKm3C,2BACLn3C,KAAKo3C,oEAILp3C,KAAKiC,QAAQC,WAAY,EAErBlC,KAAK2hC,gBAAgBlnC,QACvBiH,uDAAsC1B,KAAK2hC,gBAAgB,GAAGz/B,oDAKhElC,KAAKiC,QAAQxC,QAAS,+CAGH,IAAA83C,EAAAv3C,KACnBA,KAAKiC,QAAQ8f,OAAQ,EAEjB/hB,KAAKw3C,sBAILx3C,KAAKwf,SAAWxf,KAAKwf,QAAQkhB,OAAS1gC,KAAKwf,QAAQkhB,MAAM+Q,QAAUzxC,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,SAC/FkD,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,QAAQjC,QAAQ,SAACsE,GACrCA,EAAKuyC,YAAcvyC,EAAKuyC,WAAW3vB,OACjC01B,mDAAsBt4C,EAAKuyC,WAAW3vB,SACxCw1B,EAAKC,sBAAuB,wDAQpCx3C,KAAKiC,QAAQC,WAAY,EAEzBlC,KAAK2hC,gBAAgB9mC,QAAQ,SAACwF,GAC5BA,EAAE6B,UAAUw1C,qDAKd13C,KAAKiC,QAAQxC,QAAS,gDAItBO,KAAKiC,QAAQ8f,OAAQ,oCAIrB/hB,KAAK0O,QAAQipC,YAAY33C,wCAnOzB,OAAOA,KAAK43C,yBAGA7kC,GACZ/S,KAAK43C,WAAa7kC,EAEd/S,KAAK2hC,iBACP3hC,KAAK2hC,gBAAgB9mC,QAAQ,SAACwF,GAC5BA,EAAE6B,UAAUE,UAAY2Q,IAIxB/S,KAAKwf,UACPxf,KAAKwf,QAAQkhB,MAAMt+B,UAAY2Q,EAC/B/S,KAAKwf,QAAQkhB,MAAM+Q,OAAO30C,QAAQjC,QAAQ,SAACsE,GACrCA,EAAKuyC,YAAcvyC,EAAKuyC,WAAW3vB,OACrC5iB,EAAKuyC,WAAW3vB,MAAM81B,aAAa9kC,sBA9oFLpS,8CAAOm3C,6GCpB3CC,iDAyEG,SAAShV,EAAUiV,GACxB,IAAMC,EAAO,GAEPC,EAAWF,EAAQG,MAAM,MAC/B,GAAwB,IAApBD,EAASz9C,OACX,OAAOw9C,EAITC,EAASl0C,KAAK,IAEd,IAAIo0C,EAAW,GACXC,EAAc,GACdC,GAAkB,EAClBC,GAAgB,EAiCpB,OA/BAL,EAASr9C,QAAQ,SAACogC,EAAM14B,GACtB,GAAa,KAAT04B,EAAa,CACf,GAAIqd,EACF,OAIF,GAFAA,GAAkB,EAEdF,EAAS39C,QAAU49C,EAAY59C,OAAQ,CACzC,IAAM+C,EAASxD,KAAKmB,MAAMk9C,EAAYr6C,KAAK,OACtCR,EAAOmH,IAEVtK,QAAQic,KAAR,eAAA5c,OAA4B6I,EAA5B,+BAEF01C,EAAKj0C,KAAK,CAACrJ,OAAA69C,EAAA,EAAA79C,CAAIy9C,GAAW56C,IAC1B46C,EAAW,GACXC,EAAc,GACdE,GAAgB,OACPH,EAAS39C,SAClB89C,GAAgB,QAGlBD,GAAkB,EAEdC,EACFF,EAAYr0C,KAAKi3B,GAEjBmd,EAASp0C,KAAKi3B,KAKbgd,EAGF,SAAS1U,EAAgBF,EAAOoV,GACrC,IAAMhV,EAAU,GACVnuB,EAAM,GACZ+tB,EAAMxoC,QAAQ,SAACogC,EAAMl8B,GACnB,IAAMqoC,EAAM,GACZnM,EAAKkd,MAAM,IAAIt9C,QAAQ,SAAC+oB,EAAO9kB,GAC7B,KAAM8kB,KAASm0B,GACb,MAAM,IAAIx6C,MAAJ,qBAAA7D,OAA+BoF,EAA/B,MAAApF,OAAqCqF,EAArC,OAAArF,OAA4CkqB,IAGpD,IAAMR,EAAIzoB,OAAA+9C,EAAA,EAAA/9C,CAAA,CACRmE,IACAC,IACA6kB,SACGm0B,EAAUn0B,IAGfwjB,EAAIpjC,KAAKof,GAEJqgB,EAAQ7f,KACX6f,EAAQ7f,GAAS,IAEnB6f,EAAQ7f,GAAO5f,KAAKof,KAGtB9N,EAAItR,KAAKojC,KAGPqR,GACFnjC,EAAIza,QAAQ,SAACusC,EAAKroC,GAChB,GAAIA,IAAMuW,EAAI7a,OAAS,GAInB2sC,EAAI3sC,SAAW6a,EAAIvW,EAAI,GAAGtE,OAC5B,MAAM,IAAI8C,MAAJ,6BAAA7D,OAAuCqF,EAAI,EAA3C,eAAArF,OAA0D0tC,EAAI3sC,OAA9D,UAAAf,OAA6E4b,EAAIvW,EAAI,GAAGtE,WAKpG,IAAM+oC,EAAUH,EAAMrlC,KAAK,MAE3B,MAAO,CAACsX,MAAKkuB,UAASC,YApKjB,SAA+BkV,GACpC,IAAMC,EAAoBb,EAG1B,GAFAA,EAoCF,SAA4Bc,GA2B1B,OA1BAl+C,OAAOmC,QAAQ+7C,GAAOh+C,QAAQ,SAAAkC,GAAmB,IAAAC,EAAArC,OAAAsoC,EAAA,EAAAtoC,CAAAoC,EAAA,GAAjBjC,EAAiBkC,EAAA,GAAZQ,EAAYR,EAAA,GAC/C,GAAKQ,GAAWA,EAAOs7C,SAAvB,CAIA,IAAMr7C,EAAI9C,OAAAo+C,EAAA,EAAAp+C,CAAA,GAAKG,GAAM,GACfk+C,EAAQ,CAACr+C,OAAA+9C,EAAA,EAAA/9C,CAAA,GAAI6C,IAEf4U,EAAS5U,EAAOs7C,SACpB,KAAM1mC,KAAUymC,GACd,MAAM,IAAIt7C,MAAJ,sCAAA7D,OAAgDoB,EAAhD,YAAApB,OAAyD0Y,IAGjE,KAAOymC,EAAMzmC,IAAS,CACpB,GAAI3U,EAAK2U,GACP,MAAM,IAAI7U,MAAJ,8CAAA7D,OAAwD,GAAAA,OAAAiB,OAAA69C,EAAA,EAAA79C,CAAIA,OAAOC,KAAK6C,IAAhB,CAAuB3C,IAAKkD,KAAK,cAGjGP,EAAK2U,IAAU,EACf4mC,EAAMC,QAAQJ,EAAMzmC,IACpBA,EAASymC,EAAMzmC,GAAQ0mC,SAGzBn+C,OAAOu+C,OAAPt6C,MAAAjE,OAAM,CAAQ6C,GAAR9D,OAAmBs/C,OAGpBH,EAIAM,CAnE+BR,IAEjCC,EACH,OAAO,KAGT,IAAMtnC,EAAU,GAEV8nC,EAAe,GACrBz+C,OAAOC,KAAKg+C,GAAmB/9C,QAAQ,SAACC,GACtCs+C,EAAat+C,IAAO,IAGtBH,OAAOC,KAAKm9C,GAAWl9C,QAAQ,SAACC,GAC9B,IAAMu+C,EAAWT,EAAkB99C,GAC7BoT,EAAW6pC,EAAUj9C,GAEvBA,KAAO89C,UACFQ,EAAat+C,GAGjBw+C,IAAUD,EAAUnrC,IACvBoD,EAAQtN,KAAKlJ,KAIjBwW,EAAQtN,KAARpF,MAAA0S,EAAO3W,OAAA69C,EAAA,EAAA79C,CAASA,OAAOC,KAAKw+C,KAI9BG,MAAsBvS,sTC3BT78B,EAAW,CACtBoc,MAAO,CACL/b,MAAO,CAAC,aAAc,aACtBmE,QAAS,eAGX6qC,YAAa,CACXhvC,MAAO,CAAC,aAAc,aACtBmE,QAAS,aAGXod,GAAI,CACFvhB,MAAO,CAAC,cAAe,eAEzBivC,KAAM,CACJjvC,MAAO,CAAC,gBAAiB,iBAE3ByhB,KAAM,CACJzhB,MAAO,CAAC,gBAAiB,iBAE3BwhB,MAAO,CACLxhB,MAAO,CAAC,iBAAkB,kBAE5B0hB,OAAQ,CACN1hB,MAAO,CAAC,sBACRkvC,UAAU,GAEZttB,OAAQ,CACN5hB,MAAO,CAAC,sBACRkvC,UAAU,GAGZppC,KAAM,CACJ9F,MAAO,CAAC,cACRmE,QAAS,SAAC3M,GAAD,OAAWA,EAAMuoB,UAAU,IACpCtjB,OAAO,EACPkG,aAAa,EACbQ,cAAc,GAEhB4C,KAAM,CACJ/F,MAAO,CAAC,cACRmE,QAAS,SAAC3M,GAAD,OAAWA,EAAMuoB,WAAW,IACrCtjB,OAAO,EACPkG,aAAa,EACbQ,cAAc,GAEhBgsC,QAAS,CACPnvC,MAAO,CAAC,cACRmE,QAAS,SAAC3M,GAAD,OAAWA,EAAMssB,mBAC1BrnB,OAAO,EACPkG,aAAa,EACbQ,cAAc,GAEhBisC,KAAM,CACJpvC,MAAO,CAAC,cACRmE,QAAS,YACT1H,OAAO,EACPkG,aAAa,EACbQ,cAAc,GAEhBksC,YAAa,CACXrvC,MAAO,CAAC,aACRmD,cAAc,EACd1G,OAAO,EACPkG,aAAa,EACbwB,QAAS,SAAC3M,EAAOwE,GAAS,IACjByN,EAAuBzN,EAAvByN,QAAS4E,EAAcrS,EAAdqS,WACZ5E,GAAWA,EAAQC,UACrB1N,EAAK2Q,aACIlD,EACTnN,WAAW,WACTN,EAAK2Q,aACL3Q,EAAKuT,YAALpf,OAAA+9C,EAAA,EAAA/9C,CAAA,GAAqBsZ,EAArB,CAA8BC,WAAW,OAElC2E,EACTrS,EAAK0Q,gBAEL1Q,EAAK8S,oBAMAhG,EAAuB,CAClC,aAEWC,EAAuB,CAClC,QAEWC,EAAkB,GAGlBgiC,EAAS76C,OAAA+9C,EAAA,EAAA/9C,CAAA,GACjBm/C,YAAiB3vC,EAAUmJ,EAAsBC,GADhC,CAIpBwmC,mBAAoB,CAAC,IAAM,EAAG,GAC9BC,eAAgB,CAAC,IAAM,EAAG,GAC1BC,qBAAsB,CAAC,EAAG,EAAG,IAC7BC,qBAAsB,CAAC,IAAM,EAAG,GAEhCC,kBAAmB,CAAC,EAAG,MAEvBC,8BAA+B,CAAC,GAAK,EAAG,GACxCC,yBAA0B,CAAC,GAAK,EAAG,GACnCC,yBAA0B,CAAC,EAAK,EAAG,GACnCC,cAAe,CAAC,IAAK,EAAG,KACxBC,gBAAiB,CAAC,IAAK,EAAG,KAC1BC,sBAAuB,CAAC,IAAK,EAAG,KAChCC,cAAe,CAAC,IAAK,EAAG,KACxBC,oBAAqB,CAAC,IAAK,EAAG,KAC9BC,eAAgB,CAAC,GAAI,EAAG,KACxBC,mBAAoB,CAAC,IAAO,EAAG,KAC/BC,oBAAqB,CAAC,IAAO,EAAG,KAChCC,mBAAoB,CAAC,IAAK,EAAG,KAC7BC,eAAgB,CAAC,IAAK,EAAG,KACzBC,yBAA0B,CAAC,EAAK,EAAG,IACnCC,qBAAsB,CAAC,EAAG,EAAG,KAC7BC,sBAAuB,CAAC,EAAG,EAAG,KAE9BC,iBAAkB,CAAC,EAAG,KAAM,wBAC5BC,iBAAkB,CAAC,EAAG,KAAM,wBAC5BC,kBAAmB,CAAC,GAAK,KAAM,sCAC/BC,kBAAmB,CAAC,GAAK,KAAM,sCAC/BC,sBAAuB,CAAC,GAAK,KAAM,6BACnCC,oBAAqB,CAAC,GAAK,KAAM,2BACjCC,qBAAsB,CAAC,GAAK,KAAM,4BAClCC,qBAAsB,CAAC,GAAK,KAAM,4BAClCC,6BAA8B,CAAC,GAAK,KAAM,0CAC1CC,6BAA8B,CAAC,GAAK,KAAM,0CAC1CC,iCAAkC,CAAC,GAAK,KAAM,wCAC9CC,uBAAwB,CAAC,SAAC/5C,GAAD,OAAWA,EAAMupB,aAAavpB,EAAM8d,MAAMqB,gBAEnE66B,YAAa,CAAC,EAAG,KAAM,gCACvBC,YAAa,CAAC,EAAG,KAAM,gCACvBC,gBAAiB,CAAC,EAAG,KAAM,oCAC3BC,iBAAkB,CAAC,IAAK,EAAG,KAC3BC,mBAAoB,CAAC,GAAI,EAAG,KAC5BC,gBAAiB,CAAC,GAAK,KAAM,oCAC7BC,sBAAuB,CAAC,GAAI,EAAG,KAE/BC,8BAA+B,CAAC,EAAG,KAAM,0CACzCC,uBAAwB,CAAC,IAAM,EAAG,KAClCC,0BAA2B,CAAC,EAAG,EAAG,IAClCC,wBAAyB,CAAC,EAAK,EAAG,IAElCC,cAAe,CAAC,EAAG,KAAM,iCACzBC,WAAY,CAAC,SAAC56C,GAAD,OAAWA,EAAM66C,YAC9BC,WAAY,CAAC,SAAC96C,GAAD,OAAWA,EAAM+6C,YAE9BC,cAAe,CAAC,IAAK,EAAG,KACxBC,iBAAkB,CAAC,IAAK,EAAG,KAC3BC,eAAgB,CAAC,IAAK,EAAG,KAEzBC,YAAa,CAAC,IAAM,EAAG,KACvBC,kBAAmB,CAAC,EAAG,KAAM,oBAC7BC,qBAAsB,EAAC,EAAO,KAAM,6BACpCC,qBAAsB,CAAC,IAAK,EAAG,IAC/BC,uBAAwB,CAAC,GAAI,EAAG,KAEhCC,6BAA8B,CAAC,CAC7BhiD,SAAU,IACVK,GAAI,EACJJ,KAAM,iBACNa,MAAM,EACNC,MAAO,IAGTkhD,mCAAoC,CAAC,CACnCrtB,UAAW,YACX50B,SAAU,MAGZkiD,8BAA+B,CAAC,CAC9B3hD,MAAO,EACPF,GAAI,GACJJ,KAAM,gBACND,SAAU,MAGZmiD,kCAAmC,CAAC,CAClCniD,SAAU,MAGZoiD,6BAA8B,CAAC,CAC7B7hD,MAAO,EACPJ,IAAK,IACLF,KAAM,gBACND,SAAU,MAGZqiD,4BAA6B,CAAC,CAC5Bl7C,MAAO,oBACPQ,SAAU,KAGZ26C,4BAA6B,CAAC,CAC5Bn7C,MAAO,oBACPiB,SAAS,EACTzH,OAAQ,IACRE,OAAQ,IACR8G,SAAU,EACVP,UAAW,EACXC,SAAU,QAId2yC,EAAU,qBAAqB,GAAK,GACpCA,EAAU,0BAA0B,IAAK,EAElC,IAAMxO,EAAkB,CAC7B+W,IAAK,KAELC,IAAK,CACHr7C,MAAO,QACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzBwW,IAAK,CACHt7C,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzByW,IAAK,CACHv7C,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAIzB0W,IAAK,CACHx7C,MAAO,QACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzB2W,IAAK,CACHz7C,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzBn6B,EAAG,CACD3K,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAGzB4W,IAAK,CACH17C,MAAO,OACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzB6W,IAAK,CACH37C,MAAO,eACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzBhkB,EAAG,CACD9gB,MAAO,UACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzBpoB,EAAG,CACD1c,MAAO,aACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,IACTM,uBAAuB,GAEzB8W,EAAG,CACD57C,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,KAEXhoB,EAAG,CACDxc,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,KAEXjkB,EAAG,CACDvgB,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,KAEXjuC,EAAG,CACDyJ,MAAO,SACPoe,MAAO,OACPkmB,UAAU,EACVE,QAAS,KAEXhlB,EAAG,CACDpB,MAAO,UACPkmB,UAAU,EACVE,SAAS,GAEXqX,EAAG,CACD77C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEXsX,EAAG,CACD97C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEXuX,EAAG,CACD/7C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEXwX,EAAG,CACDh8C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEXyX,EAAG,CACDj8C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEX0X,EAAG,CACDl8C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEX2X,EAAG,CACDn8C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEX4X,EAAG,CACDp8C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEX6X,EAAG,CACDr8C,MAAO,WACPoe,MAAO,OACPkmB,UAAU,EACVE,SAAS,GAEX8X,IAAK,CACHt8C,MAAO,QACPoe,MAAO,SAETm+B,IAAK,CACHv8C,MAAO,SACPoe,MAAO,SAETlZ,EAAG,CACDlF,MAAO,SACPoe,MAAO,SAET/Y,EAAG,CACDrF,MAAO,SACPoe,MAAO,SAETo+B,EAAG,CACDx8C,MAAO,SACPoe,MAAO,SAETq+B,EAAG,CACDz8C,MAAO,SACPoe,MAAO,SAETs+B,EAAG,CACD18C,MAAO,SACPoe,MAAO,SAETu+B,EAAG,CACD38C,MAAO,SACPoe,MAAO,SAETw+B,EAAG,CACD58C,MAAO,SACPoe,MAAO,SACPkmB,UAAU,GAEZuY,EAAG,CACD78C,MAAO,UACPoe,MAAO,SACPkmB,UAAU,GAEZwY,EAAG,CACD98C,MAAO,UACPoe,MAAO,SACPwC,YAAY,EACZ0jB,UAAU,GAEZyY,EAAG,CACD/8C,MAAO,UACPoe,MAAO,SACPuC,aAAa,EACb2jB,UAAU,GAEZ0Y,EAAG,CACDh9C,MAAO,OACPoe,MAAO,OACPkmB,UAAU,IAId2Y,YAAoBpK,EAlbG,CACrB,sBAmbK,IAAMlG,EAAkB,IAAIuQ,IAAgBrK,GACtC1D,EAAkBgO,YAAoBtK,EAAWlG,GAC/CyQ,gBAAWvK,EAAWlG,wQCrbjChc,yEAEE0sB,EAAU,GACVC,EAAc,GACdC,EAAiB,IAAIz3C,IACrB6sC,EAAe,GAGjB6K,GADiBhgD,IACQmvC,KACvB8Q,EAAuB,IAAIxsC,MAAM,GAAI,CACzCtN,IADyC,SACrCpI,EAAQpD,GACV,OAAOqlD,EAAuBrlD,IAGhCoP,IALyC,SAKrChM,EAAQpD,EAAKhB,GAEf,OADAqmD,EAAuBrlD,GAAOhB,GACvB,KAIJ,SAASy5B,IAad,OAZKD,IACHA,EAAM,IAAI+sB,IAAQ,CAACC,WAAW,IAE9B3lD,OAAOC,KAAK46C,KAAW36C,QAAQ,SAACC,GAAD,OAASylD,EAAgBzlD,KACxDH,OAAOC,KAAK46C,KAAW36C,QAAQ,SAACC,GAAD,OAAS0lD,EACtC1lD,EACA06C,IAAU16C,IACV,EACAA,KAAO2lD,KAAqB,GAAA/mD,OAAGoB,EAAH,cAAoB2lD,QAI7CntB,EAGT,SAASotB,EAAOC,GACd,OAAOA,EAAK/K,OAAO,GAAGC,cAAgB8K,EAAK7iD,MAAM,GAQnD,SAASyiD,EAAgBzlD,GAKvB,IAJA,IAAM8lD,EAAW9lD,EAAIq9C,MAAM,KACvB0I,EAAY,GACZC,EAASxtB,EAENstB,EAASnmD,OAAS,GAAG,CAC1B,IAAMsmD,EAAUH,EAASxb,QAGzB,GAFAyb,GAAS,IAAAnnD,OAAQqnD,IAEZf,EAAQa,GACXb,EAAQa,GAAaC,EAAOE,UAAuBD,EAdpC5I,MAAM,SACZ7iC,IAAIorC,GAAQ1iD,KAAK,MAc1BkiD,EAAeh2C,IAAI81C,EAAQa,GAAYC,GAEzBd,EAAQa,GAAWptB,WAAW5nB,cAAc,YACpDylB,iBAAiB,QAAS,WAC9B2vB,MAIJH,EAASd,EAAQa,GAGnB,OAAOC,EA0BT,IAAII,EAAwB,EAC5B,SAASC,IACHD,GAIJ7nD,YAAU,eAAgBi8C,GAG5B,SAAS8L,EAAetmD,GACtBw6C,EAAax6C,GAAO,CAACw0C,IAAgBx0C,GAAM06C,IAAU16C,GAAK,IAC1D6P,SAASxL,KAAKoyB,UAAU1xB,IAAI,iBAG9B,SAASwhD,EAAiBvmD,UACjBw6C,EAAax6C,GACfH,OAAOC,KAAK06C,GAAc76C,QAC7BkQ,SAASxL,KAAKoyB,UAAU5a,OAAO,iBAInC,SAAS6pC,EAAc1lD,EAAKoC,EAAMokD,EAAMC,GAAO,IAAAC,EAAA7mD,OAAA8mD,EAAA,EAAA9mD,CACT66C,IAAU16C,IAAvC4mD,EADsCF,EAAA,GACpBpjD,EADoBojD,EAAA1jD,MAAA,GAEvCgjD,EAASP,EAAgBzlD,GAE/B,GAAkC,OAA9BslD,EAAqBtlD,GACvB,MAAM,IAAIyC,MAAJ,QAAA7D,OAAkBoB,EAAlB,qCAGR,IAAIA,EAAIqC,SAAS,YAAjB,CAQA,IAEIwkD,EAFEC,EAAU,GAAAloD,OAAMoB,EAAN,YAGhB,GAAIsD,EAAQ3D,QAAU,GAAoB,OAAf2D,EAAQ,IAE/BujD,EADE7mD,EAAI6iB,MAAM,WACCmjC,EAAOe,SAASzB,EAAsBtlD,GAAKgnD,SAE3ChB,EAAOjhD,IAAIugD,EAAsBtlD,GAAKgnD,UAE1CruB,WAAWsuB,QAAQ,OAAOxwB,UAAU1xB,IAAI,UACnD8hD,EAAWluB,WAAWuuB,iBAAiB,iBAAiBnnD,QAAQ,SAAC41C,GAC/DA,EAAKwR,UAAY,EACjBxR,EAAKyR,QAAU,SAAC9nD,GACdA,EAAE+Q,oBAIF/M,EAAQ3D,OAAS,GAA4C,oBAAhC2D,EAAQA,EAAQ3D,OAAS,KACxDknD,EAAWQ,mBAAqB/jD,EAAQA,EAAQ3D,OAAS,QAEtD,CACL,IAAIyb,EACA9X,EAAQ3D,QAAU,GAA4C,oBAAhC2D,EAAQA,EAAQ3D,OAAS,KACzDyb,EAAW9X,EAAQ6P,OAInB0zC,EADE7mD,EAAI6iB,MAAM,WACCmjC,EAAOe,SAAPjjD,MAAAkiD,EAAM,CAAUV,EAAsBtlD,GAAhCpB,OAAAiB,OAAAynD,EAAA,EAAAznD,CAAwCyD,KAE9C0iD,EAAOjhD,IAAPjB,MAAAkiD,EAAM,CAAKV,EAAsBtlD,GAA3BpB,OAAAiB,OAAAynD,EAAA,EAAAznD,CAAmCyD,KAGpD8X,IACFyrC,EAAWU,mBAAqBnsC,GAGL,oBAAlBwrC,IACTC,EAAWW,mBAAqBZ,GAGlC,IAEIa,EACAC,EAHEC,EAASd,EAAWluB,WAAWsuB,QAAQ,OAIvCW,EAAkBd,KAAcpM,IAAYA,IAAUoM,GAAY,GAAK,KAE7E,GAAIA,KAActS,IAAiB,CACjCkT,EAAelT,IAAgBsS,GAE/B,IAAM9uB,EAAYnoB,SAASjG,cAAc,OACzCouB,EAAUvB,UAAU1xB,IAAI,WAExB0iD,EAAkB53C,SAASjG,cAAc,UACzBi+C,aAAa,OAAQ,YACjCH,IACFD,EAAgBI,aAAa,UAAW,WACxCJ,EAAgBK,SAAU,GAG5B9vB,EAAUe,YAAY0uB,GAEtBE,EAAOlxB,UAAU1xB,IAAI,eAEA8hD,EAAWluB,WAAzB3d,WACI+d,YAAYf,GAEvB6uB,EAAWkB,gBAAkBrN,IAAUoM,GAEvCW,EAAgBO,SAAW,SAAC1oD,GAC1BA,EAAE+Q,iBAD8B,IAEzBy3C,EAAWxoD,EAAE8D,OAAb0kD,QACPtT,IAAgBsS,GAAcgB,EAE9BL,EAAgBQ,kBAAmB,EACnC,IACEpB,EAAWqB,WAAW1T,IAAgBx0C,IACtC6mD,EAAWsB,iBAAiB3T,IAAgBx0C,IAC5C,MAAOooD,GAEP,MADAX,EAAgBQ,kBAAmB,EAC7BG,EAGRX,EAAgBQ,kBAAmB,GAIvC,GAA6B,oBAAlBrB,EAA8B,CACvC,IAAM5uB,EAAYnoB,SAASjG,cAAc,OACzCouB,EAAUvB,UAAU1xB,IAAI,SAExB,IAAMsjD,EAAcx4C,SAASjG,cAAc,SAC3Cy+C,EAAYR,aAAa,OAAQ,UACjCQ,EAAYrpD,MAAQ,SAEpBg5B,EAAUe,YAAYsvB,GAEDxB,EAAWluB,WAAzB3d,WACI+d,YAAYf,GAEvBqwB,EAAYjB,QAAU,SAAC9nD,GACjBA,IACFA,EAAE+Q,iBACF/Q,EAAEgpD,mBAGJ9T,IAAgBx0C,GAAO4mD,EAEnBa,IACFA,EAAgBQ,kBAAmB,EACnCzT,IAAgBsS,GAAcc,EAC1BA,GACFH,EAAgBI,aAAa,UAAW,WACxCJ,EAAgBK,SAAU,IAE1BL,EAAgBc,gBAAgB,WAChCd,EAAgBK,SAAU,IAI9BjB,EAAW2B,gBAEX,IACE3B,EAAWqB,WAAW1T,IAAgBx0C,IACtC6mD,EAAWsB,iBAAiB3T,IAAgBx0C,IAC5C,MAAOooD,GAKP,MAJIX,IACFA,EAAgBQ,kBAAmB,GAG/BG,EAGJX,IACFA,EAAgBQ,kBAAmB,IAKZ,oBAAlBrB,IACTC,EAAW4B,eAAe,SAACzpD,GAEzB,IACiBwN,OAARd,KACYqN,WACb2vC,oBAAoB1oD,EAAKhB,GAC/BqnD,IACA,MAAO/mD,GAEPC,QAAQC,MAAMF,MAMlBunD,EAAW97C,SAAS,SAAC/L,GACnB,IAAI2pD,EACJ,IACMlB,IAAoBA,EAAgBQ,mBACtCzT,IAAgBsS,IAAc,EAC9BW,EAAgBI,aAAa,UAAW,WACxCJ,EAAgBK,SAAU,GAJ1B,IAOKp8C,EAAQc,OAARd,KACDxE,EAAQwE,EAAKqN,WACnB7R,EAAM0hD,cAAc5oD,EAAKhB,GAEzB,IAAI6pD,GAAY,EACZpB,IACEjT,IAAgBsS,KAAgBc,GAClCiB,GAAY,EACZvC,EAAeQ,IAEfP,EAAiBO,IAIjB9nD,IAAU4nD,GACZiC,GAAY,EACZvC,EAAetmD,IAEfumD,EAAiBvmD,GAGnBqmD,IAEIwC,EACFlB,EAAOlxB,UAAU1xB,IAAI,WAErB4iD,EAAOlxB,UAAU5a,OAAO,WAGtBgrC,EAAWU,qBACboB,EAAM9B,EAAWU,mBAAmBvoD,EAAOkI,EAAOwE,IAEpD,MAAOpM,GAEPC,QAAQC,MAAMF,GAGhB,OAAOqpD,IAGLlC,IACFH,EAAetmD,GACf2nD,EAAOlxB,UAAU1xB,IAAI,aAK3B,IAAMizB,EAAY6uB,EAAWluB,WAAWsuB,QAAQ,OAOhD,GANAjvB,EAAU2D,MAAQ37B,EAClBg4B,EAAU8wB,QAAQzjD,KAAOrF,EAEzBmlD,EAAYnlD,GAAO6mD,EACnBA,EAAWkC,SAAW3mD,EAElBokD,EAEF,IADA,IAAI1Q,EAAIkQ,EACDlQ,GACLA,EAAE0Q,OACF1Q,EAAIsP,EAAe55C,IAAIsqC,GAI3B,OAAO+Q,EAxOL,IAAMloD,EAASqB,EAAIsC,OAAO,EAAGtC,EAAIL,OAAS,WAAWA,QACrD,KAAMhB,KAAU+7C,KACd,MAAM,IAAIj4C,MAAJ,QAAA7D,OAAkBoB,EAAlB,iCAAApB,OAAqDD,IAgP1D,SAAS07C,IACd7hB,EAAIgwB,gBACJ3oD,OAAOqP,OAAOg2C,GAASnlD,QAAQ,SAACimD,GAAD,OAAYA,EAAOwC,kBAGpD,IAAMQ,EAAmB,GACzB,SAAS7C,IACP6C,EAAiBrpD,OAAS,EAC1BkQ,SAASq3C,iBAAiB,sDAAsDnnD,QAAQ,SAAC41C,GACvF,IAAM31C,EAAM21C,EAAKmT,QAAQzjD,KACnBjD,EAAOs4C,IAAU16C,GACvBgpD,EAAiB9/C,KAAK,CAAClJ,EAAKoC,MAIzB,SAASiX,EAAoB4vC,GAAW,IACtCv9C,EAAQc,OAARd,KACDxE,EAAQwE,EAAKqN,WAEbmwC,EAAa,SAAArmD,GAAiB,IAAAC,EAAAjD,OAAAsoC,EAAA,EAAAtoC,CAAAgD,EAAA,GAAf7C,EAAe8C,EAAA,GAAVV,EAAUU,EAAA,GAClC,GAAgB,OAAZV,EAAK,GACP,GAAKA,EAAK,IAEH,GAAuB,kBAAZA,EAAK,GACrBoyC,IAAgBx0C,GAAOwS,IAAEhH,IAAIE,EAAMtJ,EAAK,KAAOoQ,IAAEhH,IAAItE,EAAO9E,EAAK,SAC5D,GAAuB,oBAAZA,EAAK,GACrB,IACEoyC,IAAgBx0C,GAAOoC,EAAK,GAAGsJ,EAAKqN,WAAYrN,GAChD,MAAOpM,GAEPC,QAAQC,MAAMF,SARhBk1C,IAAgBx0C,GAAOwS,IAAEhH,IAAIE,EAAM1L,IAAQwS,IAAEhH,IAAItE,EAAOlH,IAc1DipD,EACFppD,OAAOmC,QAAQ04C,KAAW36C,QAAQmpD,GAElCF,EAAiBjpD,QAAQmpD,GAItB,SAASpU,EAAcqU,GAC5BtpD,OAAOmC,QAAQ04C,KAAW36C,QAAQ,SAAAsD,GAAiB,IAAAI,EAAA5D,OAAAsoC,EAAA,EAAAtoC,CAAAwD,EAAA,GAAfrD,EAAeyD,EAAA,GACjC,OADiCA,EAAA,GACxC,KACP+wC,IAAgBx0C,GAAOmpD,EAASnpD,MAqM/B,SAAS44B,EAAawwB,EAAOjwB,GAClBiwB,EAEhB,IAAMC,EAnCR,SAAkBD,GAChB,IAAME,EAAaF,EAAM/L,MAAM,IAC3BkM,GAAe,EAcbC,EAZoBF,EAAW9uC,IAAI,SAACivC,GAKxC,OAJIA,IAAcA,EAAUz5C,gBAC1Bu5C,GAAe,GAGb,kBAAkBG,SAASD,GAC7B,KAAA7qD,OAAY6qD,GAELA,IAI2BvmD,KAAK,MAE3C,GAAIkmD,EAAMnpD,WAAW,KAAM,CACzB,IACE,OAAO,IAAI2iB,OAAOwmC,EAAMO,UAAU,GAAIJ,EAAe,GAAK,KAC1D,MAAOjqD,GAEPC,QAAQC,MAAMF,GAEhB,OAAO,IAAIsjB,OAAO,QAGpB,OAAO,IAAIA,OAAO4mC,EAAaD,EAAe,GAAK,KAOhCK,CAASR,GAEtBpxB,EAAYnoB,SAASkB,cAAc,oBAC3B,KAAVq4C,GACFvpD,OAAOqP,OAAOg2C,GAASnlD,QAAQ,SAACimD,GAAD,OAAYA,EAAO6D,UAClD7xB,EAAUkvB,iBAAiB,aAAannD,QAAQ,SAAC41C,GAC/CA,EAAKlf,UAAU5a,OAAO,gBAGxBhc,OAAOqP,OAAOg2C,GAASnlD,QAAQ,SAACimD,GAC1B7sB,GACF6sB,EAAOQ,OAGTR,EAAOrtB,WAAWlC,UAAU1xB,IAAI,cAGlCizB,EAAUkvB,iBAAiB,iBAAiBnnD,QAAQ,SAAC41C,GACnD,IAAImU,GAAa,EAUjB,GAR4B,WAAxBV,EAAMp5C,cACJ2lC,EAAKlf,UAAUxlB,SAAS,aAC1B64C,GAAa,GAENnU,EAAKmT,QAAQzjD,KAAKwd,MAAMwmC,KACjCS,GAAa,GAGXA,EACFnU,EAAKlf,UAAU1xB,IAAI,iBAGnB,IADA,IAAIihD,EAASrQ,EACNqQ,GACLA,EAAOvvB,UAAU5a,OAAO,YACxBmqC,EAASA,EAAOhrC,WAAWisC,QAAQ,gBAK3Cd,IAGK,SAASrtB,IACd,OAAOj5B,OAAOmC,QAAQw4C,GAAchgC,IAAI,SAAAzH,GAAA,IAAAC,EAAAnT,OAAAsoC,EAAA,EAAAtoC,CAAAkT,EAAA,GAAE/S,EAAFgT,EAAA,GAAQgkB,EAARn3B,OAAAsoC,EAAA,EAAAtoC,CAAAmT,EAAA,6BAAApU,OACxBoB,EADwB,YAAApB,OACVM,KAAKC,UAAU63B,GADL,OAErC9zB,KAAK,MAGH,SAASm2B,IACd+sB,GAAyB,EACzBv2C,SAASq3C,iBAAiB,oCAAoCnnD,QAAQ,SAAC0Q,GACrEA,EAAO22C,YAEThB,GAAyB,EACzBC,oYCxpBIV,EAAoBlnD,YAAU,eAAgB,IAG9CsrD,GAAYC,EAAA,GAAAnqD,OAAAoqD,EAAA,EAAApqD,CAAAmqD,EACfnkD,IAAOwR,KAAO,QADCxX,OAAAoqD,EAAA,EAAApqD,CAAAmqD,EAEfnkD,IAAO6V,OAAS,UAFD7b,OAAAoqD,EAAA,EAAApqD,CAAAmqD,EAGfnkD,IAAO+a,MAAQ,SAHAopC,GAMZ79C,GAAiCC,EAEhC,SAAS4yC,EAAiB3vC,EAAUmJ,EAAsBC,GAS/D,OARKtM,GACHtM,OAAOC,KAAKuP,GAAUtP,QAAQ,SAACC,GACzBqP,EAASrP,GAAKmM,cACTkD,EAASrP,KAKfH,OAAA+C,EAAA,EAAA/C,CAAA,CACLqqD,cAAe,CAAC,IAAM,KAAM,aAC5BC,mBAAoB,CAAC,IAAM,KAAM,cACjCC,mBAAoB,CAAC,IAAM,KAAM,kBACjCC,mBAAoB,CAAC,IAAM,KAAM,kBACjCC,kBAAmB,CAACP,EAAalkD,IAAOwR,MAAO,KAAM,SAACnQ,EAAOwE,GAAR,OAAiBq+C,EAAar+C,EAAK+P,SAAS5Q,QACjG0/C,iBAAkB,EAAC,EAAO,KAAM,sBAChCC,kBAAmB,EAAC,GACpBC,kBAAmB,EAAC,EAAO,SAACzrD,EAAOkI,EAAOwE,GAAf,OAAyB1M,EAAQ0M,EAAKjK,KAAKwxC,QAAUvnC,EAAKjK,KAAKiyC,SAC1FgX,cAAe,CAAC,SAACxjD,EAAOwE,GAAR,OAAiBA,EAAKrG,KAAK,oBAAsBqG,EAAKjK,KAAKs0C,SAC3E4U,2BAA4B,CAAC,WAAQnsD,cAAmBF,cAAiBkO,OAAOo+C,SAAWp+C,OAAOo+C,WAClGC,wBAAyB,CAAC,WAAQrsD,YAAgB,SAAUF,cAAiBkO,OAAOo+C,SAAWp+C,OAAOo+C,WACtGE,wBAAyB,CAAC,SAAC5jD,EAAOwE,GAAR,OAAiBA,EAAK6Q,mBAEhDwuC,eAAgB,CAAC5+C,EAAO,KAAM,kBAAMA,IACpC6+C,eAAgB,CAAC,EAAG,KAAM,SAAC9jD,EAAOwE,GAAR,OAAiBA,EAAKhJ,OAAO6U,QACvD0zC,gBAAiB,CAAC,EAAG,KAAM,SAAC/jD,EAAOwE,GAAR,OAAiBA,EAAKhJ,OAAO8U,SACxD0zC,mBAAoB,CAAC,EAAG,KAAM,SAAChkD,EAAOwE,GAAR,OAAiBA,EAAKhJ,OAAO+U,YAC3D0zC,oBAAqB,CAAC,EAAG,KAAM,SAACjkD,EAAOwE,GAAR,OAAiBA,EAAKhJ,OAAOgV,aAC5D0zC,iBAAkB,CAAC,EAAG,KAAM,SAAClkD,EAAOwE,GAAR,OAAiBxE,EAAMggC,UACnDmkB,iBAAkB,CAAC,EAAG,KAAM,SAACnkD,EAAOwE,GAAR,OAAiBxE,EAAMggC,UAEnDokB,cAAe,CAAC,GAAI,KAAM,uBAC1BC,sBAAuB,CAAC,GAAI,KAAM,SAACrkD,GAAD,OAAWA,EAAM0M,QAAQlG,QAAQ89C,OACnEC,cAAe,CAAC,GAAI,KAAM,SAACvkD,GAAD,OAAWA,EAAMkX,YAAYrf,OACvD2sD,gBAAiB,CAAC,GAAI,KAAM,WAC5BC,sBAAuB,CAAC,GAAI,KAAM,qCAClCC,YAAa,CAAC,GAAI,KAAM,aACxBC,aAAc,CAAC,GAAI,KAAM,4BACzBC,mBAAoB,CAAC,IAAM,KAAM,cACjCC,cAAe,CAAC,GAAI,KAAM,oBAC1BC,kBAAmB,CAAC,IAAM,KAAM,aAChCC,mBAAoB,CAAC,GAAI,KAAM,cAC/BC,mBAAoB,CAAC,IAAM,KAAM,qBACjCC,eAAgB,CAAC,EAAG,KAAM,SAACjlD,GAAD,OAAWA,EAAMnC,IAAI2wC,YAAYluC,KAAKmK,OAAO,SAACgkC,GAAD,MAAwB,UAAdA,EAAK9qC,OAAkBlL,SACxGysD,gBAAiB,CAAC,EAAG,KAAM,SAACllD,GAAD,OAAWA,EAAMnC,IAAI2wC,YAAYluC,KAAKmK,OAAO,SAACgkC,GAAD,MAAwB,WAAdA,EAAK9qC,OAAmBlL,SAC1G0sD,kBAAmB,CAAC,EAAG,KAAM,SAACnlD,GAAD,OAAWA,EAAMnC,IAAI2wC,YAAYluC,KAAKmK,OAAO,SAACgkC,GAAD,MAAwB,2BAAdA,EAAK9qC,OAAmClL,SAC5H2sD,aAAc,CAAC,EAAG,KAAM,SAACplD,GAAD,OAAWA,EAAMnC,IAAI2wC,YAAYluC,KAAKmK,OAAO,SAACgkC,GAAD,MAAwB,SAAdA,EAAK9qC,OAAiBlL,SACrG4sD,eAAgB,CAAC,EAAG,KAAM,iBAC1BC,eAAgB,CAAC,EAAG,KAAM,iBAC1BC,yBAA0B,CAAC,EAAG,KAAM,0CACpCC,oBAAqB,CAAC,EAAG,EAAG,EAAG,SAAC1tD,EAAOkI,EAAOwE,GAC5CA,EAAKkP,aAAalP,EAAKtB,UAEzBuiD,oBAAqB,CAAC,EAAG,EAAG,EAAG,SAAC3tD,EAAOkI,EAAOwE,GAC5CA,EAAKkP,aAAalP,EAAKtB,UAEzBwiD,kBAAmB,EAAC,EAAO,SAAC5tD,EAAOkI,GAC7BlI,EACFkI,EAAMwd,QAAQkhB,MAAME,qBAEpB5+B,EAAMwd,QAAQkhB,MAAMinB,aAAa9oD,YAGrC+oD,wBAAyB,CAAC,SAAC5lD,GAAD,OAAWA,EAAMssB,iBAAgB,KAE3Du5B,qBAAsB,CAAC,EAAG,KAAM,gBAChCC,sBAAuB,CAAC,EAAG,KAAM,iBACjCC,qBAAsB,CAAC,GAAK,KAAM,gBAClCC,oBAAqB,CAAC,GAAK,KAAM,eACjCC,wBAAyB,CAAC,GAAK,KAAM,mBACrCC,iBAAkB,CAAC,EAAG,KAAM,YAC5BC,iBAAkB,CAAC,EAAG,KAAM,YAC5BC,uBAAwB,CAAC,EAAG,KAAM,kBAClCC,uBAAwB,CAAC,EAAG,KAAM,kBAClCC,uBAAwB,CAAC,EAAG,KAAM,kBAClCC,uBAAwB,CAAC,EAAG,KAAM,kBAClCC,uBAAwB,CAAC,EAAG,KAAM,oBAClCC,uBAAwB,CAAC,EAAG,KAAM,oBAClCC,2BAA4B,CAAC,EAAG,KAAM,wBACtCC,4BAA6B,CAAC,EAAG,KAAM,yBACvCC,yBAA0B,EAAC,EAAM,KAAM,oBAEvCC,sBAAuB,CAAC,GAAI,KAAMC,EAChC,SAAC9mD,GAAD,OAAWA,EAAM8d,OACjB,SAAC9d,GAAD,OAAWA,EAAMic,OAAO8qC,WAE1BC,6BAA8B,CAAC,EAAG,KAAM,yBACxCC,6BAA8B,CAAC,EAAG,KAAM,yBAExCC,oBAAqB,CAAC,EAAG,EAAG,EAAG,SAACpvD,EAAOkI,GACrCA,EAAMunC,kBAER4f,yBAA0B,CAAC,EAAG,EAAG,IAAM,SAACrvD,EAAOkI,GAC7CA,EAAMsnC,sBAER8f,yBAA0B,CAAC,EAAG,EAAG,IAAM,SAACtvD,EAAOkI,GAC7CA,EAAMsnC,sBAER+f,yBAA0B,EAAC,EAAM,SAACvvD,EAAOkI,GACvCA,EAAMqnC,oBAGRigB,sBAAuB,CAAC,IAAM,KAAM,WACpCC,2BAA4B,CAAC,IAAM,KAAM,gBACzCC,qBAAsB,CAAC,KAAO,EAAG,GACjCC,wBAAyB,CAAC,EAAK,EAAG,GAClCC,kBAAmB,CAAC,GAAM,EAAG,KAC7BC,kBAAmB,CAAC,GAAM,EAAG,KAC7BC,kBAAmB,CAAC,IAAM,EAAG,GAC7BC,qBAAsB,CAAC,GAAK,EAAG,GAC/BC,sBAAuB,CAAC,IAAK,EAAG,KAChCC,sBAAuB,EAAC,GACxBC,oBAAqB,CAAC,SAAChoD,GAAD,OAAWA,EAAMspB,OAAO,MAC9C2+B,qBAAsB,CAAC,SAACjoD,GAAD,OAAWA,EAAMspB,OAAO,MAC/C4+B,qBAAsB,CAAC,SAACloD,GAAD,OAAWA,EAAMspB,OAAO,MAC/C6+B,mBAAoB,CAAC,SAACnoD,GAAD,OAAWA,EAAMspB,OAAO,OAC7C8+B,uBAAwB,EAAC,IAqItB,SAAyBjgD,GAC9B,IAAMtN,EAAQ,GAMd,OAJAwO,EAAYlB,GAAU8jB,OAAOpzB,QAAQ,SAACC,GACpC+B,EAAK,oBAAAnD,OAAqBoB,IAAS,EAAC,EAAO,QAGtC+B,EA1IFwtD,CAAgBlgD,GA7GrB,CA+GEmgD,wBAAyB,CAAC,EAAG,MAC7BC,oBAAqB,EAAC,EAAO,MAC7BC,oBAAqB,EAAC,EAAO,MAC7BC,oBAAqB,EAAC,EAAO,MAC7BC,oBAAqB,EAAC,EAAO,MAC7BC,qBAAsB,EAAC,EAAO,MAC9BC,qBAAsB,EAAC,EAAO,MAC9BC,qBAAsB,EAAC,EAAO,MAC9BC,qBAAsB,EAAC,EAAO,MAC9BC,qBAAsB,EAAC,EAAO,MAC9BC,uBAAwB,EAAC,EAAO,MAChCC,uBAAwB,EAAC,EAAO,MAChCC,wBAAyB,EAAC,EAAO,MACjCC,0BAA2B,CAAC,IAAM,MAClCC,0BAA2B,CAAC,IAAM,MAClCC,0BAA2B,CAAC,IAAM,MAClCC,0BAA2B,CAAC,IAAM,MAElCC,yBAA0B,EAAC,EAAO,KAAM,SAACvpD,GAAD,OAAWA,EAAM0M,QAAQH,cACjEi9C,iCAAkC,EAAC,EAAO,KAAM,SAACxpD,GAAD,OAAWA,EAAM0M,QAAQH,UAAU,iBACnFk9C,4BAA6B,EAAC,EAAO,KAAM,SAACzpD,GAAD,OAAWA,EAAM0M,QAAQH,UAAU,aAOlF,SAAsBpE,GACpB,IAAMtN,EAAQ,GAkCd,OAhCAlC,OAAOmC,QAAQqN,GAAUtP,QAAQ,SAAAkC,GAAoB,IAAAC,EAAArC,OAAA+wD,EAAA,EAAA/wD,CAAAoC,EAAA,GAAlBlD,EAAkBmD,EAAA,GAAZQ,EAAYR,EAAA,GAwBnD,GAvBAH,EAAK,WAAAnD,OAAYG,EAAZ,UAA2B,EAAC,EAAO,MACxCgD,EAAK,WAAAnD,OAAYG,EAAZ,aAA8B,EAAC,EAAO,MAC3CgD,EAAK,WAAAnD,OAAYG,EAAZ,eAAgC,EAAC,EAAO,MAC7CgD,EAAK,WAAAnD,OAAYG,EAAZ,cAA+B,EAAC,EAAO,MAE5CgD,EAAK,WAAAnD,OAAYG,EAAZ,gBAAiC,CAAC,EAAG,MAC1CgD,EAAK,WAAAnD,OAAYG,EAAZ,oBAAqC,CAAC,EAAG,MAC9CgD,EAAK,WAAAnD,OAAYG,EAAZ,kBAAmC,CAAC,EAAG,MAC5CgD,EAAK,WAAAnD,OAAYG,EAAZ,sBAAuC,CAAC,EAAG,MAE5C2D,EAAO+L,WACT1M,EAAK,WAAAnD,OAAYG,EAAZ,cAA+B,CAAC2D,EAAO+L,SAAU,EAAG,KACzD1M,EAAK,WAAAnD,OAAYG,EAAZ,iBAAkC,EAAC,EAAO,KAAM,SAACmI,GAAD,OAAWA,EAAM0M,QAAQ7U,GAAM2P,cACpF3M,EAAK,WAAAnD,OAAYG,EAAZ,qBAAsC,CAAC,IAAM,KAAM,SAACmI,GAAD,OAAWA,EAAM0M,QAAQ7U,GAAM4P,mBAGrFjM,EAAOk8C,WACT78C,EAAK,WAAAnD,OAAYG,EAAZ,OAAwB,CAAC,IAAM,KAAM,SAACmI,GAAD,OAAWA,EAAM0M,QAAQ7U,GAAMkP,KAAK,KAC9ElM,EAAK,WAAAnD,OAAYG,EAAZ,OAAwB,CAAC,IAAM,KAAM,SAACmI,GAAD,OAAWA,EAAM0M,QAAQ7U,GAAMkP,KAAK,MAGhFlM,EAAK,WAAAnD,OAAYG,EAAZ,aAA8B,EAAC,GAEhC2D,EAAOmR,QAAS,CAClB,IAAMA,EAAoC,oBAAnBnR,EAAOmR,QAC1B,SAAC3M,EAAOwE,GAAR,OAAiBhJ,EAAOmR,QAAQ3M,EAAOwE,IACvC,SAACxE,EAAOwE,GAAR,OAAiBxE,EAAMxE,EAAOmR,SAAS3M,EAAOwE,IAClD3J,EAAK,WAAAnD,OAAYG,EAAZ,aAA8B,CAAC8U,MAIjC9R,EAxCF8uD,CAAaxhD,GACbyhD,YAAYt4C,EAAsBC,IA0CzC,IAAMs4C,EAAc,CAClB,YACA,YACA,YACA,YACA,aACA,aACA,aACA,aACA,aACA,eACA,eACA,gBACA,oBACA,sBACA,sBACA,uBACA,oBACA,sBACA,sBACA,uBACA,qBACA,sBAtBkBnyD,OAAAiB,OAAAynD,EAAA,EAAAznD,CAwBdA,OAAOC,KAAK+F,IAAOmrD,MAAMC,SAASC,UAAU12C,IAAI,SAACxW,GAAD,kBAAApF,OAAmBoF,OACvE24B,OAAO,SAAChzB,EAAG4a,GAEX,OADA5a,EAAE4a,IAAK,EACA5a,GACN,IAEI,SAASwnD,EAAe9hD,EAAU1Q,EAAQyyD,GAC/C,IAAMtxD,EAAO,GAsBb,OApBAD,OAAOmC,QAAQqN,GAAUtP,QAAQ,SAAA8C,GAAuB,IAAAC,EAAAjD,OAAA+wD,EAAA,EAAA/wD,CAAAgD,EAAA,GAArB+Q,EAAqB9Q,EAAA,GAAZJ,EAAYI,EAAA,GACjDJ,EAAOgN,OAIZhN,EAAOgN,MAAM3P,QAAQ,SAACsxD,GACfN,EAAYM,GAQbA,EAAUpxD,WAAWtB,IACvBmB,EAAKoJ,KAAKmoD,EAAU/uD,OAAO3D,EAAOgB,SAR7ByxD,GAEH7xD,QAAQC,MAAR,sBAAAZ,OAAoCyyD,EAApC,iBAAAzyD,OAA6DgV,QAW9D9T,EAGF,SAASyQ,EAAYlB,EAAU+hD,GACpC,OAAOD,EAAe9hD,EAAU,YAAa+hD,GAGxC,SAASr6C,EAAY1H,EAAU+hD,GACpC,OAAOD,EAAe9hD,EAAU,WAAY+hD,GAavC,SAAStM,EAAoBpK,EAAWzxC,GAC7CD,YAAoB0xC,EAAWzxC,GAC/BnH,YAAiB44C,EAAWzxC,GAC5BqoD,YAAsB5W,EAAWzxC,GAG5B,SAAS87C,EAAgBrK,GAAW,IAAAnvC,EAAArG,KACzCrF,OAAOmC,QAAQ04C,GAAW36C,QAAQ,SAAAsD,GAAiB,IAAAI,EAAA5D,OAAA+wD,EAAA,EAAA/wD,CAAAwD,EAAA,GAAfrD,EAAeyD,EAAA,GAAVrB,EAAUqB,EAAA,GACjD,IAAKlB,MAAMC,QAAQJ,GACjB,MAAM,IAAIK,MAAJ,yBAAA7D,OAAmCoB,EAAnC,0BAAApB,OAA+DwD,IAFtB,IAK5CpD,EAL4Ca,OAAA+wD,EAAA,EAAA/wD,CAKnCuC,EALmC,MAOjD,GAAqB,oBAAVpD,EAAsB,CAC/B,IAAMyhC,EAAWzhC,EACjBA,EAAQ,WACN,IAAI,IACK0M,EAAQc,OAARd,KACDxE,EAAQwE,EAAKqN,WACnB7R,EAAM0M,QAAQ29C,oBAAoBvxD,GAClCygC,EAASv5B,EAAOwE,GAChB,MAAOpM,GAEPC,QAAQC,MAAMF,KAKpB,GAAIU,KAAO2lD,EAAmB,KAAA6L,EAAA3xD,OAAA+wD,EAAA,EAAA/wD,CACA8lD,EAAkB3lD,GADlB,GACrBg3B,EADqBw6B,EAAA,GACZ/wB,EADY+wB,EAAA,GAExBtyD,KAAKC,UAAUH,KAAWE,KAAKC,UAAUshC,GAC3CzhC,EAAQg4B,SAED2uB,EAAkB3lD,GAI7BuL,EAAKvL,GAAOhB,IAIT,SAASgmD,EAAoBtK,EAAWlG,GAC7C,GAAIroC,EACF,OAAO,SAACxN,GACN,IAAMoD,EAAQ,GAOd,OANAlC,OAAOmC,QAAQwyC,GAAiBz0C,QAAQ,SAAA2D,GAAkB,IAAAkP,EAAA/S,OAAA+wD,EAAA,EAAA/wD,CAAA6D,EAAA,GAAhB1D,EAAgB4S,EAAA,GAAX5T,EAAW4T,EAAA,GACxD,GAAI5S,EAAIC,WAAWtB,GAAS,CAC1B,IAAMI,EAAOiB,EAAIsC,OAAO3D,EAAOgB,QAC/BoC,EAAMhD,GAAQC,KAGX+C,GAIX,IAAMmmC,EAAQ,GACd,OAAO,SAACvpC,EAAQ8yD,GASd,GARIA,IACE9yD,SACKupC,EAAMvpC,GAEbkB,OAAOC,KAAKooC,GAAOnoC,QAAQ,SAACC,GAAD,cAAgBkoC,EAAMloC,OAIhDkoC,EAAMvpC,GAAS,CAClB,IAAMoD,EAAQ,GACdlC,OAAOmC,QAAQ04C,GAAW36C,QAAQ,SAAAgT,GAAiB,IAAAC,EAAAnT,OAAA+wD,EAAA,EAAA/wD,CAAAkT,EAAA,GAAf/S,EAAegT,EAAA,GAAV5Q,EAAU4Q,EAAA,GACjD,GAAIhT,EAAIC,WAAWtB,GAAS,KACnBK,EADmBa,OAAA+wD,EAAA,EAAA/wD,CACVuC,EADU,MAEpBrD,EAAOiB,EAAIsC,OAAO3D,EAAOgB,QAC/BoC,EAAMhD,GAAQC,KAGlBkpC,EAAMvpC,GAAUoD,EAElB,OAAOmmC,EAAMvpC,IAIV,SAASsmD,EAAWvK,EAAWlG,GACpC,GAAIroC,EAAO,CACT,IAAI5G,EAAIivC,EACR,OAAO,SAACz1C,EAAMmnC,GACZ,IAAIA,EAAJ,CAKA,KAAMnnC,KAAQwG,GACZ,MAAM,IAAI9C,MAAJ,sBAAA7D,OAAgCG,IAGxC,OAAOwG,EAAExG,GARPwG,EAAI2gC,GAYV,OAAO,SAACnnC,GAAD,OAAU27C,EAAU37C,GAAM,IAG5B,SAASivD,EAAiB0D,EAAcC,GAC7C,IAAIC,EACAC,EACJ,OAAO,WACL,IAAMxlC,EAASslC,EAAS7tD,WAAT,EAAApE,WACf,GAAI2sB,IAAWulC,EACb,OAAOC,EAKT,GAFAD,EAAavlC,GAERA,EAEH,OADAwlC,EAAcxlC,EAIhB,GAAsB,kBAAXA,GAAuBA,EAAOttB,KAEvC,OADA8yD,EAAcxlC,EAAOttB,KAIvB,IAAMi5B,EAAY05B,EAAY5tD,WAAZ,EAAApE,WAClB,GAAIs4B,GAAkC,kBAAdA,EAEtB,IAAK,IAAMh4B,KAAOg4B,EAAW,CAG3B,GAFcA,EAAUh4B,KAEVqsB,EAEZ,OADAwlC,EAAc7xD,EAMpB,OACE6xD,EADoB,kBAAXxlC,GAAuBA,EAAOnF,SAAWmF,EAAOnF,QAAQlnB,IACnDqsB,EAAOnF,QAAQlnB,SAIjBJ,4DCjalBzB,EAAAC,EAAAC,EAAA,sBAAAwnC,IAAA,IAAIphC,GAAW,EACR,SAASohC,EAAyB3+B,GACvC,IAAIzC,EAAJ,CAKA,IAAMG,EAAQsC,EAAMwd,QAAQ3f,IAAIF,UAE1BC,EAAUF,EAAMopB,OAEtBppB,EAAMopB,OAAS,WAAkB,QAAA2S,EAAAjhC,UAAAC,OAANihC,EAAM,IAAAr+B,MAAAo+B,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAND,EAAMC,GAAAnhC,UAAAmhC,GAC/B,IAAM7S,EAASlpB,EAAQG,KAARnB,MAAAgB,EAAO,CAAMI,MAANtG,OAAegiC,IAKrC,OAJI5S,GAAUA,EAAO/G,QACnB+G,EAAO/G,MAAM81B,aAAa/uB,EAAO9mB,MAAMI,WACvC0mB,EAAO/G,MAAMvlB,mBAAoB,GAE5BssB,GAGTvpB,GAAW,sCCpBbtG,EAAAC,EAAAC,EAAA,sBAAAs+C,IAAA,IAAIl4C,GAAW,EACR,SAASk4C,EAAsBrnB,GACpC,GAAI7wB,IAAa6wB,EACf,OAAO7wB,EAIT,IAAMG,EAAQ0wB,EAAUzwB,UAElBitD,EAAaltD,EAAMshC,OAYzB,OAVAthC,EAAMshC,OAAS,WACb,IAAIhhC,KAAKoS,OAAOpQ,MAAMC,QAAQ8f,OAAU/hB,KAAKxD,mBAAuBwD,KAAK4xC,aAAgB5xC,KAAK4xC,YAAYp1C,kBAA1G,CAD+B,QAAAi/B,EAAAjhC,UAAAC,OAANihC,EAAM,IAAAr+B,MAAAo+B,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAND,EAAMC,GAAAnhC,UAAAmhC,GAK/B,OAAOixB,EAAW7sD,KAAXnB,MAAAguD,EAAU,CAAM5sD,MAANtG,OAAegiC,MAGlCn8B,GAAW,qCCnBbtG,EAAAC,EAAAC,EAAA,sBAAAgnC,IAAA,IAAA0sB,EAAA5zD,EAAA,KAAA6zD,EAAA7zD,EAAA8e,EAAA80C,GAAAE,EAAA9zD,EAAA,GAGM+zD,EAAS,IAAIC,IAAa,KAC1BC,EAAS,IAAID,IAAa,KAC1BE,EAAS,IAAIF,IAAa,KAE5B1tD,GAAW,EACR,SAAS4gC,EAAkBliB,GAChC,GAAI1e,IAAa0e,EACf,OAAO1e,EAIT,IAAMG,EAAQue,EAAOte,UAEfytD,EAAgB1tD,EAAM2tD,UAwC5B,OAtCA3tD,EAAM2tD,UAAY,WAAkB,QAAA5xB,EAAAjhC,UAAAC,OAANihC,EAAM,IAAAr+B,MAAAo+B,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAND,EAAMC,GAAAnhC,UAAAmhC,GAGlC,GAFAyxB,EAAcrtD,KAAdnB,MAAAwuD,EAAa,CAAMptD,MAANtG,OAAegiC,KAExBv7B,YAAK,wBAA2BA,YAAK,wBAAzC,CAHkC,IAO3BkS,EAAwBrS,KAAxBqS,MAAOC,EAAiBtS,KAAjBsS,OAAQtQ,EAAShC,KAATgC,MAEpB09B,EACE19B,EADF09B,aAAc79B,EACZG,EADYH,KAAMO,EAClBJ,EADkBI,UAAW0xC,EAC7B9xC,EAD6B8xC,aAE1BlhC,EAAO/Q,EAAP+Q,IAEP,GAAK8sB,EAAL,CAIA,IAAMv9B,EAAQyQ,EAAMkhC,EACdrwB,EAAIthB,EAAQhC,YAAK,sBAAbd,KAAAglB,IAAqCjiB,EAAa,GACtDkrD,EAASjuD,KAAKmC,IAAI,EAAGW,GAAShC,YAAK,uBAAyBiC,IAE5DzG,EAAK2xD,EAAS5tB,EAAev/B,YAAK,mBAAqB6sD,EAAOO,QAAQzZ,EAAcrwB,GACpF5nB,EAAKyxD,EAAS5tB,EAAev/B,YAAK,mBAAqB+sD,EAAOK,QAAQzZ,EAAcrwB,GACpFpV,EAAKi/C,EAAS5tB,EAAev/B,YAAK,mBAAqBgtD,EAAOI,QAAQzZ,EAAcrwB,GAEpFmc,EAAYvtB,EAAQ,EACpBwtB,EAAavtB,EAAS,EAG5BtS,KAAKwtD,OAAOC,UAAU7tB,EAAWC,GACjC7/B,KAAKwtD,OAAOnqD,OAAOgL,GACnBrO,KAAKwtD,OAAOC,WAAW7tB,GAAYC,GAEnC7/B,KAAKwtD,OAAOC,UAAU9xD,EAAIE,MAG5B0D,GAAW,wBCtDbmuD,EAAAC,QAAiB10D,EAAAoH,EAAuB,mECAxCpH,EAAAkmB,EAAAhmB,GAAAF,EAAAC,EAAAC,EAAA,gCAAAy0D,KAAA30D,EAAAC,EAAAC,EAAA,iCAAA00D,KAAA50D,EAAAC,EAAAC,EAAA,gCAAA20D,KAAA70D,EAAAC,EAAAC,EAAA,gCAAA40D,KAAA,IAAAC,EAAA/0D,EAAA,KAAAg1D,EAAAh1D,EAAA8e,EAAAi2C,GAAAE,EAAAj1D,EAAA,KAAAk1D,EAAAl1D,EAAA8e,EAAAm2C,GAAAE,EAAAn1D,EAAA,KAAAo1D,EAAAp1D,EAAA8e,EAAAq2C,GAAAE,EAAAr1D,EAAA,KAAAs1D,EAAAt1D,EAAA8e,EAAAu2C,GAAAE,EAAAv1D,EAAA,KAAAw1D,EAAAx1D,EAAA8e,EAAAy2C,GAAAE,EAAAz1D,EAAA,KAAA01D,EAAA11D,EAAA8e,EAAA22C,GAAAE,EAAA31D,EAAA,KAAA41D,EAAA51D,EAAA8e,EAAA62C,GAAAE,EAAA71D,EAAA,KAAA81D,EAAA91D,EAAA8e,EAAA+2C,GAAAE,EAAA/1D,EAAA,KAAAg2D,EAAAh2D,EAAA8e,EAAAi3C,GAAAE,EAAAj2D,EAAA,KAAAk2D,EAAAl2D,EAAA8e,EAAAm3C,GAAAE,EAAAn2D,EAAA,KAAAo2D,EAAAp2D,EAAA8e,EAAAq3C,GAAAE,EAAAr2D,EAAA,KAAAs2D,EAAAt2D,EAAA8e,EAAAu3C,GAAAE,EAAAv2D,EAAA,KAAAw2D,EAAAx2D,EAAA8e,EAAAy3C,GAAAE,EAAAz2D,EAAA,KAAA02D,EAAA12D,EAAA8e,EAAA23C,GAAAE,EAAA32D,EAAA,KAAA42D,EAAA52D,EAAA8e,EAAA63C,GAAAE,EAAA72D,EAAA,KAAA82D,EAAA92D,EAAA8e,EAAA+3C,GAAAE,EAAA/2D,EAAA,KAAAg3D,EAAAh3D,EAAA8e,EAAAi4C,GAAAE,EAAAj3D,EAAA,KAAAk3D,EAAAl3D,EAAA8e,EAAAm4C,GAAAE,EAAAn3D,EAAA,KAAAo3D,EAAAp3D,EAAA8e,EAAAq4C,GAAAE,EAAAr3D,EAAA,KAAAs3D,EAAAt3D,EAAA8e,EAAAu4C,GAAAE,EAAAv3D,EAAA,KAAAw3D,EAAAx3D,EAAA8e,EAAAy4C,GAAAE,EAAAz3D,EAAA,KAAA03D,EAAA13D,EAAA8e,EAAA24C,GAAAE,EAAA33D,EAAA,KAAA43D,EAAA53D,EAAA8e,EAAA64C,GAAAE,EAAA73D,EAAA,KAAA83D,EAAA93D,EAAA8e,EAAA+4C,GAAAE,EAAA/3D,EAAA,KAAAg4D,EAAAh4D,EAAA8e,EAAAi5C,GAAAE,EAAAj4D,EAAA,KAAAk4D,GAAAl4D,EAAA8e,EAAAm5C,GAAAE,GAAAn4D,EAAA,KAAAo4D,GAAAp4D,EAAA8e,EAAAq5C,IAAAE,GAAAr4D,EAAA,KAAAs4D,GAAAt4D,EAAA8e,EAAAu5C,IAAAE,GAAAv4D,EAAA,KAAAw4D,GAAAx4D,EAAA8e,EAAAy5C,IAAAE,GAAAz4D,EAAA,KAAA04D,GAAA14D,EAAA8e,EAAA25C,IAAAE,GAAA34D,EAAA,KAAA44D,GAAA54D,EAAA8e,EAAA65C,IAAAE,GAAA74D,EAAA,KAAA84D,GAAA94D,EAAA8e,EAAA+5C,IAAAE,GAAA/4D,EAAA,KAAAg5D,GAAAh5D,EAAA8e,EAAAi6C,IAAAE,GAAAj5D,EAAA,KAAAk5D,GAAAl5D,EAAA8e,EAAAm6C,IAAAE,GAAAn5D,EAAA,KAAAo5D,GAAAp5D,EAAA8e,EAAAq6C,IAAAE,GAAAr5D,EAAA,KAAAs5D,GAAAt5D,EAAA8e,EAAAu6C,IAAAE,GAAAv5D,EAAA,KAAAw5D,GAAAx5D,EAAA8e,EAAAy6C,IAAAE,GAAAz5D,EAAA,KAAA05D,GAAA15D,EAAA8e,EAAA26C,IAAAE,GAAA35D,EAAA,KAAA45D,GAAA55D,EAAA8e,EAAA66C,IAAAE,GAAA75D,EAAA,KAAA85D,GAAA95D,EAAA8e,EAAA+6C,IAAAE,GAAA/5D,EAAA,KAAAg6D,GAAAh6D,EAAA8e,EAAAi7C,IAAAE,GAAAj6D,EAAA,KAAAk6D,GAAAl6D,EAAA8e,EAAAm7C,IAAAE,GAAAn6D,EAAA,KAAAo6D,GAAAp6D,EAAA8e,EAAAq7C,IAAAE,GAAAr6D,EAAA,KAAAs6D,GAAAt6D,EAAA8e,EAAAu7C,IAAAE,GAAAv6D,EAAA,KAAAw6D,GAAAx6D,EAAA8e,EAAAy7C,IAAAE,GAAAz6D,EAAA,KAAA06D,GAAA16D,EAAA8e,EAAA27C,IAAAE,GAAA36D,EAAA,KAAA46D,GAAA56D,EAAA8e,EAAA67C,IAAAE,GAAA76D,EAAA,KAAA86D,GAAA96D,EAAA8e,EAAA+7C,IAmDalG,GAAc,CACzBoG,UACAC,WACAC,sBACAC,aACAzpC,eACA+L,WACA29B,WACArrC,UACAsrC,YACAC,YACAC,gBACAC,YACAC,YACAC,aACAC,mBAGW9G,GAAe,CAC1BznC,YACAwuC,YACAC,WACA7rC,SACA8rC,WACAC,WACAC,WACAC,WACAC,WACAC,WACA9zC,YACA+zC,aACAC,YACAC,YACAz0C,YAGWitC,GAAc,CACzByH,WACAC,UACA/2D,SACAg3D,cAGW1H,GAAc,CACzBvU,gBACAkc,UACAzrC,YACAhI,SACA0zC,cACAC,cACAC,cACAC,cACA1xC,WACA0P,YACAiiC,YACAC,YACAC,YACArzC,kCC5GF8qC,EAAAC,QAAiB10D,EAAAoH,EAAuB,6DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,yDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,yDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,mECAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,yDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,sDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,sDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,gOCiB3B61D,EAAmB,CAC9B,UACA,QACA,UACA,cAGWC,EAAuB,CAClC,QACA,WACA,UACA,WACA,WAGWC,EAAyB,CACpChmC,UAAW,CAAC,YA/BsB,CAClC,YACA,YAEA,WACA,YACA,SACA,WAEA,WACA,YACA,SACA,aAqBA90B,cAAe,EAAC,GAChBC,MAAO,CAAC,EAAG,EAAG,KACdC,SAAU,CAAC,IAAM,EAAG,KACpBC,KAAM,CAAC,gBAAUL,GACjBi7D,aAAc,EAAC,GACf/pB,KAAM,CAAC,EAAG,EAAG,KAEbP,SAAU,CAAC,QAASmqB,GACpB5qB,aAAc,CAAC,QAAS6qB,EAAqB1pD,OAAO,SAACgX,GAAD,MAAa,YAANA,KAC3DypB,SAAU,CAAC,QAASgpB,GACpB3qB,eAAgB,CAAC,UAAW4qB,GAE5B9lC,oBAAqB,EAAC,GACtBC,qBAAsB,EAAC,GACvBqc,oBAAqB,EAAC,GAEtBhwC,SAAU,EAAC,IAGAw1C,EAAsB,GAK5B,SAASia,EAAsBvvD,GACpClC,OAAOmC,QAAQD,GAAOhC,QAAQ,SAAA8C,GAAkB,IAAAC,EAAAjD,OAAAsoC,EAAA,EAAAtoC,CAAAgD,EAAA,GAAhB9D,EAAgB+D,EAAA,GAAVV,EAAUU,EAAA,GAC9C,GAAK/D,EAAKsD,SAAS,eAAnB,CAIA,IAAM1D,EAASI,EAAKuD,OAAO,EAAGvD,EAAKY,OAAS,cAAcA,QAE1D,IAAK4C,MAAMC,QAAQJ,IAAyB,IAAhBA,EAAKzC,QAAmC,kBAAZyC,EAAK,GAC3D,MAAM,IAAIK,MAAJ,YAAA7D,OAAsBG,EAAtB,sFAGDgD,EAAMhD,GAXiC,IAavC2D,EAbuC7C,OAAAsoC,EAAA,EAAAtoC,CAa7BuC,EAb6B,MAexCO,EAAI9C,OAAA27D,EAAA,EAAA37D,CAAA,GAAO6C,GAkBjB,GAhBA7C,OAAOmC,QAAQs5D,GAAwBv7D,QAAQ,SAAAsD,GAAkB,IAAAI,EAAA5D,OAAAsoC,EAAA,EAAAtoC,CAAAwD,EAAA,GAAhBrD,EAAgByD,EAAA,GAAXzE,EAAWyE,EAAA,GAC/D,GAAIzD,KAAO0C,EACTX,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcoB,IAAnB,CAA6B0C,EAAO1C,IAApCpB,OAAAiB,OAAAynD,EAAA,EAAAznD,CAA6Cb,EAAMgE,MAAM,YAClDL,EAAK3C,QACP,GAAIA,EAAIqC,SAAS,YAAa,CACnC,IAAMY,EAAYjD,EAAIsC,OAAO,EAAGtC,EAAIL,OAAS,WAAWA,QACxDoC,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcoB,IAAS,CAACiD,KAAaP,QAE1CX,EAAK,GAAAnD,OAAID,EAAJ,KAAAC,OAAcoB,IAAShB,IAIhC+C,EAAK,GAAAnD,OAAID,EAAJ,aAAwB,CAAC,SAACuI,EAAOwE,GACpCxE,EAAMssB,iBAAgB,EAAO,KAAM70B,KAGjCkB,OAAOC,KAAK6C,GAAMhD,OACpB,MAAM,IAAI8C,MAAJ,8CAAA7D,OAAwDiB,OAAOC,KAAK6C,GAAMO,KAAK,WAK5E,SAASo0C,EAAuBv1C,EAAOuB,GAAS,IACtDE,EAAgBzB,EAAhByB,aAuBP,cArBOzB,EAAMyB,aAEb3D,OAAOmC,QAAQD,GAAOhC,QAAQ,SAAA2D,GAAmB,IAAAkP,EAAA/S,OAAAsoC,EAAA,EAAAtoC,CAAA6D,EAAA,GAAjB1D,EAAiB4S,EAAA,GAAZlQ,EAAYkQ,EAAA,GAC/C,GAAI5S,EAAIqC,SAAS,YAAa,CAC5B,IAAMsB,EAAO3D,EAAIsC,OAAO,EAAGtC,EAAIL,OAAS,WAAWA,QAC9C+C,GAAWY,EAAQK,WACf5B,EAAM4B,UAER5B,EAAM/B,MAIbwD,GACFA,EAAazB,GAGX,aAAcA,IAAUA,EAAMF,WAChCE,EAAMrB,SAAW,UAEZqB,EAAMF,SAENE,EAGF,SAASivC,EAAW9pC,EAAO4Y,EAAYjV,GAC5C,MAAa,YAATA,EACK,aACW,UAATA,GACT3D,EAAMy0C,wBAAwB77B,GACvB,WACL5Y,EAAM40C,0BAA0Bh8B,KAEhB,YAATjV,GACT3D,EAAM+0C,0BAA0Bn8B,GACzB,WACL5Y,EAAMk1C,4BAA4Bt8B,KAElB,eAATjV,GACT3D,EAAMu0D,6BAA6B37C,GAC5B,WACL5Y,EAAMw0D,+BAA+B57C,MAIvCvgB,QAAQC,MAAR,6BAAAZ,OAA2CiM,EAA3C,MACO,cA5FXhL,OAAOmC,QAAQs5D,GAAwBv7D,QAAQ,SAAAkC,GAAoB,IAAAC,EAAArC,OAAAsoC,EAAA,EAAAtoC,CAAAoC,EAAA,GAAlBjC,EAAkBkC,EAAA,GAAZlD,EAAYa,OAAAsoC,EAAA,EAAAtoC,CAAAqC,EAAA,SACjEm1C,EAAoBr3C,GAAOhB,yBCxD7B4zD,EAAAC,QAAiB10D,EAAAoH,EAAuB,2DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,2DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,2DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,sDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,sDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,2DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,yDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,yDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,sDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,4DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,wDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,yDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,8DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,2HCAlCo2D,EAAe,CACnB7I,YAAa,QACbC,aAAc,cACdC,YAAa,QACbC,YAAa,SAGT2I,EAAiB,CACrB9I,YAAa,SAAC5rD,EAAOlH,GACnBkH,EAAM2gC,KAAKg0B,eAAehgD,OAAO7b,IAEnCgzD,YAAa,SAAC9rD,EAAOlH,GACnBkH,EAAMghC,MAAM4zB,MAAMjgD,OAAO7b,KA0BtB,SAAS+7D,EAAU70D,EAAO2D,EAAM7K,EAAK0P,GAAO,IAAAssD,EAC1CtwD,EAAQxE,EAARwE,KACDmF,EAAS8qD,EAAa9wD,GAEtBusC,EAvBR,SAAsBvsC,EAAMa,EAAMgE,GAChC,GAAa,iBAAT7E,EAAyB,CAC3B,GAAqB,kBAAV6E,EAAoB,KAAAmlB,EACOnpB,EAAKhJ,OAAlC+yB,EADsBZ,EACtBY,YAAaC,EADSb,EACTa,aACpB,GAAID,GAAeC,EACjB,MAAO,CAAChmB,EAAO,CAACusD,WAAYxmC,EAAaymC,YAAaxmC,IAH3B,IAAAL,EAMG3pB,EAAKhJ,OACrC,MAAO,CAACgN,EAAO,CAACusD,WAPa5mC,EAMtB5d,UACgCykD,YAPV7mC,EAMX3d,aAIlB,MAAO,CADQhI,EAARysD,KACOzsD,GAIlB,MAAO,CAACA,GAOO0sD,CAAavxD,EAAMa,EAAMgE,IAExCssD,EAAA90D,EAAM2gC,MAAKh3B,GAAX/M,MAAAk4D,EAAA,CAAmBh8D,GAAnBpB,OAAAiB,OAAAw8D,EAAA,EAAAx8D,CAA2Bu3C,KAE3B1rC,EAAK4M,OAAOzN,GAAM7K,GAAO0P,EAGpB,SAASq4B,EAAc7gC,EAAOoR,GAAQ,IACpC5M,EAAQxE,EAARwE,KAEP7L,OAAOmC,QAAQsW,GAAQvY,QAAQ,SAAAkC,GAAqB,IAAAC,EAAArC,OAAA+wD,EAAA,EAAA/wD,CAAAoC,EAAA,GAAnB4I,EAAmB3I,EAAA,GAAbF,EAAaE,EAAA,GAC7Cy5D,EAAa9wD,IAMba,EAAK4M,OAAOzN,KACfa,EAAK4M,OAAOzN,GAAQ,IAGtBhL,OAAOmC,QAAQA,GAASjC,QAAQ,SAAA8C,GAAkB,IAAAC,EAAAjD,OAAA+wD,EAAA,EAAA/wD,CAAAgD,EAAA,GAAhB7C,EAAgB8C,EAAA,GAAX4M,EAAW5M,EAAA,GAChDi5D,EAAU70D,EAAO2D,EAAM7K,EAAK0P,MAT5BnQ,QAAQC,MAAR,gCAAAZ,OAA8CiM,MAvCpD+wD,EAAe7I,aAAe6I,EAAe9I,YAC7C8I,EAAe3I,YAAc2I,EAAe5I,iCCjB5CJ,EAAAC,QAAiB10D,EAAAoH,EAAuB,uDCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,4DCAxCqtD,EAAAC,QAAiB10D,EAAAoH,EAAuB,kUCA3B+2D,EAAwB,CACnC,CAAC,YAAa,CACZv1D,KAAM,CAAC,QAAS,EAAG,MACnBw1D,OAAQ,CAAC,OAAQ,CAAC,GAAK,IAAM,MAC7BtkD,MAAO,CAAC,QAAS,GAAM,EAAG,KAC1BukD,MAAO,CAAC,QAAS,GAAK,EAAG,IACzBC,UAAW,CAAC,QAAS,GAAK,EAAG,IAC7Bj0D,MAAO,CAAC,QAAS,EAAK,EAAG,IACzBk0D,MAAO,CAAC,QAAS,IAAM,EAAG,GAC1BC,QAAS,CAAC,QAAS,GAAM,EAAG,MAR9B,wsBAyBWC,EAAwB,CACnC,CAAC,OAAQ,CACPh0C,OAAQ,CAAC,QAAS,EAAG,OADvB,4zBAiBA,CAAC,aAAc,CACbi0C,IAAK,CAAC,OAAQ,CAAC,EAAG,GAAI,MACtBC,MAAO,CAAC,OAAQ,CAAC,EAAG,GAAI,MACxBC,KAAM,CAAC,OAAQ,CAAC,EAAG,GAAI,OAHzB,klBAeA,CAAC,OAAQ,CACPjyC,MAAO,CAAC,OAAQ,CAAC,EAAG,EAAG,EAAG,KAD5B,0IASWtI,EAAiB,CAC5Bw6C,MAAO,CAAC,EAAG,QAAS,aACpBC,KAAM,CAAC,EAAG,QAAS,aACnBC,KAAM,CAAC,EAAG,OAAQ,aAAc,IAAK,KACrCC,KAAM,CAAC,EAAG,OAAQ,aAAc,IAAK,IAAK,KAC1CC,KAAM,CAAC,EAAG,OAAQ,aAAc,IAAK,IAAK,IAAK,KAC/CC,IAAK,CAAC,EAAG,OAAQ,aAAc,IAAK,IAAK,KACzCC,KAAM,CAAC,EAAG,OAAQ,aAAc,IAAK,IAAK,IAAK,MAG1C,SAAS3tB,EAAoBt1B,EAAciI,EAAalgB,GAAM,IAC9DyI,EAD8DhL,OAAAsoC,EAAA,EAAAtoC,CACtDuC,EADsD,MAG9DyI,IACHA,EAAO,SAJ0D,IAAA0yD,EAAA19D,OAAA8mD,EAAA,EAAA9mD,CAO9B2iB,EAAe3X,IAA7C0oB,EAP4DgqC,EAAA,GAO9CC,EAP8CD,EAAAv6D,MAAA,GASnE,GAAa,QAAT6H,EAAgB,CAClB,IAAI4yD,EAAM,GAKV,OAJKn7C,EAAYO,MAAM,aACrB46C,EAAM,UAGD,WAAA7+D,OAAWyb,EAAX,KAAAzb,OAA2B0jB,GAA3B1jB,OAAyC6+D,IAC3C,MAAa,SAAT5yD,EACF,WAAAjM,OACKyb,EADL,KAAAzb,OACqB0jB,EADrB,oBAAA1jB,OAEKyb,EAFL,KAAAzb,OAEqB0jB,EAFrB,WAIY,IAAViR,EACF,WAAA30B,OAAWyb,EAAX,KAAAzb,OAA2B0jB,IAE3Bk7C,EAAahjD,IAAI,SAACijD,EAAKh2D,GAC5B,gBAAA7I,OAAiByb,EAAjB,KAAAzb,OAAiC0jB,EAAjC,KAAA1jB,OAAgD6+D,KAKtD,SAASC,EAAsB97C,EAAW+7C,GACxC,IAAIvwB,EAAUwvB,EACVvvB,EAAYivB,EACZsB,EAAc,uBACdC,EAAgB,uBAEpB,IAAKj8C,EACH,MAAO,GAGT,GAAI+7C,EAAS,KAAA17D,EACY,CAACorC,EAAWD,GAAlCA,EADUnrC,EAAA,GACDorC,EADCprC,EAAA,OAAAC,EAEoB,CAAC27D,EAAeD,GAA9CA,EAFU17D,EAAA,GAEG27D,EAFH37D,EAAA,GAKb,GAAyB,IAArB0f,EAAUjiB,OAKd,IAAK,IAAI8H,EAAI,EAAGA,EAAIma,EAAUjiB,OAAQ8H,GAAK,EACb,kBAAjBma,EAAUna,IAAiB,WACpC,IAAM1I,EAAO6iB,EAAUna,GACjBq2D,EAAc1wB,EAAQ9nC,KAAK,SAAAzC,GAAA,IAAE0C,EAAF1F,OAAAsoC,EAAA,EAAAtoC,CAAAgD,EAAA,aAAS9D,IAASwG,IAC/Cu4D,EACFl8C,EAAUna,GAAKq2D,GAGfv+D,QAAQC,MAAR,0BAAAZ,OAAwCg/D,EAAxC,MAAAh/D,OAAwDG,EAAxD,sBAAAH,OAAiFwuC,EAAQ5yB,IAAI,SAAAnX,GAAA,OAAAxD,OAAAsoC,EAAA,EAAAtoC,CAAAwD,EAAA,QAAYH,KAAK,QAE3FmqC,EAAU/nC,KAAK,SAAA5B,GAAA,IAAE6B,EAAF1F,OAAAsoC,EAAA,EAAAtoC,CAAA6D,EAAA,aAAS3E,IAASwG,KAGlDhG,QAAQC,MAAR,iCAAAZ,OAA+Ci/D,EAA/C,MAAAj/D,OAAiEG,EAAjE,OAGF6iB,EAAUm8C,OAAOt2D,EAAG,GACpBA,GAAK,GAhB6B,QALtCma,EAAU1Y,KAAVpF,MAAA8d,EAAS/hB,OAAAynD,EAAA,EAAAznD,CAASutC,IA2Bf,SAAS0jB,EAAYn3C,EAAgBC,GAC1C,IAAM7X,EAAQ,GA8Id,OA5IA27D,EAAsB/jD,GAAgB,GACtC+jD,EAAsB9jD,GAAgB,GAEtC,GAAAhb,OAAAiB,OAAAynD,EAAA,EAAAznD,CAAK8Z,GAAkB,IAAvB9Z,OAAAynD,EAAA,EAAAznD,CAAgC+Z,GAAkB,KAAK7Z,QAAQ,SAAAgT,GAA8B,IAAAC,EAAAnT,OAAAsoC,EAAA,EAAAtoC,CAAAkT,EAAA,GAA5BsH,EAA4BrH,EAAA,GAAdmP,EAAcnP,EAAA,GAC3FjR,EAAK,UAAAnD,OAAWyb,EAAX,aAAqC,EAAC,EAAM,SAACrb,EAAOkI,EAAOwE,GAAf,OAAwBA,EAAKgW,qBAE9E7hB,OAAOmC,QAAQmgB,GAAUpiB,QAAQ,SAAA2T,GAAyB,IAAAC,EAAA9T,OAAAsoC,EAAA,EAAAtoC,CAAA6T,EAAA,GAAvB4O,EAAuB3O,EAAA,GAAVvR,EAAUuR,EAAA,GAAA20B,EAAAzoC,OAAA8mD,EAAA,EAAA9mD,CAEhCuC,GAAnByI,EAFmDy9B,EAAA,GAE1C5lC,EAF0C4lC,EAAAtlC,MAAA,GAIlDjE,EAAI,GAAAH,OAAMyb,EAAN,KAAAzb,OAAsB0jB,GAMhC,GAJKzX,IACHA,EAAO,UAGJ2X,EAAe3X,GAClB,MAAM,IAAIpI,MAAJ,gBAAA7D,OAA0BiM,EAA1B,gBAAAjM,OAA6CG,IAXG,IAAAi/D,EAAAn+D,OAAA8mD,EAAA,EAAA9mD,CAcb2iB,EAAe3X,IAAnD0oB,EAdiDyqC,EAAA,GAcxCvuB,EAdwCuuB,EAAA,GAc7BR,EAd6BQ,EAAAh7D,MAAA,GAgBxD,GAAIsf,EAAYO,MAAM,YAAuB,QAAThY,GAA2B,SAATA,EACpD,MAAM,IAAIpI,MAAJ,kBAAA7D,OAA4BG,EAA5B,6DAGR,GAAa,QAAT8L,EAAgB,CAClB,GAAInI,EAAO/C,OAAS,GACK,IAAlB+C,EAAO/C,SACN4C,MAAMC,QAAQE,EAAO,KACD,IAArBA,EAAO,GAAG/C,QACS,IAAlB+C,EAAO/C,QAA8B,OAAd+C,EAAO,GACpC,MAAM,IAAID,MAAJ,+BAAA7D,OAAyCG,EAAzC,kFAGR,IAAI0+D,EAAM,GACLn7C,EAAYO,MAAM,aACrB46C,EAAM,UAGU,OAAd/6D,EAAO,GACTA,EAAOwG,KAAK,SAAChC,GAAD,OAAYA,EAAMnI,GAAQmI,EAAMnI,GAAMyb,IAAI,SAAC4N,GAAD,OAAW,IAAJA,SAAaxoB,IAE1E8C,EAAOwG,KAAK,SAACsJ,EAAGtL,EAAOwE,GACrB,GAAKxE,EAAM+Z,OAAX,CAGA,IAAMjiB,EAAQ0M,EAAKrG,KAAL,UAAAzG,OAAoByb,EAApB,KAAAzb,OAAoC0jB,GAApC1jB,OAAkD6+D,IAAOjjD,IAAI,SAAC4N,GAAD,OAAOA,EAAI,MACtFlhB,EAAM+Z,OAAOwuB,GAAQ1wC,EAAMC,MAI/B0D,EAAO,GAAKA,EAAO,GAAG8X,IAAI,SAAC4N,GAAD,OAAW,IAAJA,IACjCrmB,EAAK,UAAAnD,OAAWyb,EAAX,KAAAzb,OAA2B0jB,GAA3B1jB,OAAyC6+D,IAAS/6D,OAClD,GAAa,SAATmI,EAAiB,CAC1B,GAAInI,EAAO/C,OAAS,GACK,IAAlB+C,EAAO/C,SACN4C,MAAMC,QAAQE,EAAO,KACD,IAArBA,EAAO,GAAG/C,QACS,IAAlB+C,EAAO/C,QAA8B,OAAd+C,EAAO,GACpC,MAAM,IAAID,MAAJ,gCAAA7D,OAA0CG,EAA1C,yFAGR,IAAMk/D,EAAc,CAACv7D,EAAO,GAAGiP,OAAO,SAACa,EAAG/K,GAAJ,OAAUA,EAAI,KAC9Cy2D,EAAc,CAACx7D,EAAO,GAAG,IAE/B,GAAkB,OAAdA,EAAO,GACTu7D,EAAY/0D,KAAK,MACjBg1D,EAAYh1D,KAAK,MAEjB+0D,EAAY/0D,KAAK,SAAChC,GAAD,OAAYA,EAAMnI,GAAQmI,EAAMnI,GAAM4S,OAAO,SAACa,EAAG/K,GAAJ,OAAUA,EAAI,IAAG+S,IAAI,SAAC4N,GAAD,OAAW,IAAJA,SAAaxoB,IACvGs+D,EAAYh1D,KAAK,SAAChC,GAAD,OAAYA,EAAMnI,GAAQmI,EAAMnI,GAAM,QAAKa,QACvD,CACLs+D,EAAYh1D,KAAK,EAAG,GAEpB,IAAM8a,EAAK,SAAChlB,EAAOkI,EAAOwE,GACnBxE,EAAM+Z,QAIX/Z,EAAM+Z,OAAOwuB,GAAQ1wC,EAArB,GAAAH,OAAAiB,OAAAynD,EAAA,EAAAznD,CACK6L,EAAKrG,KAAL,UAAAzG,OAAoByb,EAApB,KAAAzb,OAAoC0jB,EAApC,WAAyD9H,IAAI,SAAC4N,GAAD,OAAOA,EAAI,OAD7E,CAEE1c,EAAKrG,KAAL,UAAAzG,OAAoByb,EAApB,KAAAzb,OAAoC0jB,EAApC,eAGJ27C,EAAY/0D,KAAK8a,GACjBk6C,EAAYh1D,KAAK8a,GAGnBi6C,EAAY,GAAKA,EAAY,GAAGzjD,IAAI,SAAC4N,GAAD,OAAW,IAAJA,IAC3CrmB,EAAK,UAAAnD,OAAWyb,EAAX,KAAAzb,OAA2B0jB,EAA3B,WAAkD27C,EACvDl8D,EAAK,UAAAnD,OAAWyb,EAAX,KAAAzb,OAA2B0jB,EAA3B,WAAkD47C,MACrC,SAATrzD,GACS,OAAdnI,EAAO,GACTA,EAAOwG,KAAK,SAAChC,GAAD,OAAWA,EAAMnI,KACiB,oBAA9B2D,EAAOA,EAAO/C,OAAS,IACvC+C,EAAOwG,KAAK,SAAClK,EAAOkI,GAAR,OAAkBA,EAAM+Z,QAAU/Z,EAAM+Z,OAAOwuB,GAAQ1wC,EAAMC,EAAQ,EAAM,KAGzF+C,EAAK,UAAAnD,OAAWyb,EAAX,KAAAzb,OAA2B0jB,IAAiB5f,GAC9B,IAAV6wB,GACS,OAAd7wB,EAAO,GACTA,EAAOwG,KAAK,SAAChC,GAAD,OAAWA,EAAMnI,KACiB,oBAA9B2D,EAAOA,EAAO/C,OAAS,IACvC+C,EAAOwG,KAAK,SAAClK,EAAOkI,GAAR,OAAkBA,EAAM+Z,QAAU/Z,EAAM+Z,OAAOwuB,GAAQ1wC,EAAMC,KAGzD,IAAd0D,EAAO,IAA0B,OAAdA,EAAO,KAC5BA,EAAO,GAAK,IAGdX,EAAK,UAAAnD,OAAWyb,EAAX,KAAAzb,OAA2B0jB,IAAiB5f,GAEjD86D,EAAaz9D,QAAQ,SAAC09D,EAAKh2D,GACzB,IAAM2gB,EAACvoB,OAAAynD,EAAA,EAAAznD,CAAO6C,GACd0lB,EAAE,GAAKA,EAAE,GAAG3gB,GAEC,OAAT2gB,EAAE,GACJA,EAAElf,KAAK,SAAChC,GAAD,OAAYA,EAAMnI,GAAQmI,EAAMnI,GAAM0I,QAAK7H,IACd,oBAApBwoB,EAAEA,EAAEzoB,OAAS,IAC7ByoB,EAAElf,KAAK,SAACsJ,EAAGtL,EAAOwE,GAChB,GAAKxE,EAAM+Z,OAAX,CAIA,IAAMjiB,EAAQw+D,EAAahjD,IAAI,SAACqD,GAAD,OAAOnS,EAAKrG,KAAL,UAAAzG,OAAoByb,EAApB,KAAAzb,OAAoC0jB,EAApC,KAAA1jB,OAAmDif,MACzF3W,EAAM+Z,OAAOwuB,GAAQ1wC,EAAMC,MAIlB,IAATopB,EAAE,IAAqB,OAATA,EAAE,KAClBA,EAAE,GAAK,IAGTrmB,EAAK,UAAAnD,OAAWyb,EAAX,KAAAzb,OAA2B0jB,EAA3B,KAAA1jB,OAA0C6+D,IAASr1C,QAMzDrmB","file":"static/js/main.8015ba5e.chunk.js","sourcesContent":["import {name as project} from '../../../package.json';\n\nconst debug = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\nconst prefix = `${project}_${debug ? 'debug' : 'prod'}_`;\n\nlet frozen = false;\nexport function freezeStorage() {\n  frozen = true;\n}\n\nexport function saveField(name, value) {\n  if (frozen) {\n    return false;\n  }\n\n  try {\n    const payload = JSON.stringify(value);\n    localStorage.setItem(`${prefix}${name}`, payload);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(e);\n    return false;\n  }\n\n  return true;\n}\n\nexport function removeField(name) {\n  if (frozen) {\n    return false;\n  }\n\n  try {\n    localStorage.removeItem(`${prefix}${name}`);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(e);\n    return false;\n  }\n\n  return true;\n}\n\nexport function removeAllFields(subprefix = '') {\n  if (frozen) {\n    return false;\n  }\n\n  try {\n    Object.keys(localStorage).forEach((key) => {\n      if (key.startsWith(`${prefix}${subprefix}`)) {\n        localStorage.removeItem(key);\n      }\n    });\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(e);\n    return false;\n  }\n\n  return true;\n}\n\nexport function loadField(name, defaultValue) {\n  let value = defaultValue;\n\n  try {\n    const payload = localStorage.getItem(`${prefix}${name}`);\n    if (payload !== null && payload !== undefined) {\n      value = JSON.parse(payload);\n    }\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(e);\n  }\n\n  if (typeof value === 'function') {\n    value = value();\n  }\n\n  return value;\n}\n","export const tweenEases = [\n  'Linear',\n  'Quad.easeIn',\n  'Quad.easeOut',\n  'Quad.easeInOut',\n  'Cubic.easeIn',\n  'Cubic.easeOut',\n  'Cubic.easeInOut',\n  'Quart.easeIn',\n  'Quart.easeOut',\n  'Quart.easeInOut',\n  'Quint.easeIn',\n  'Quint.easeOut',\n  'Quint.easeInOut',\n  'Sine.easeIn',\n  'Sine.easeOut',\n  'Sine.easeInOut',\n  'Expo.easeIn',\n  'Expo.easeOut',\n  'Expo.easeInOut',\n  'Circ.easeIn',\n  'Circ.easeOut',\n  'Circ.easeInOut',\n  'Back.easeIn',\n  'Back.easeOut',\n  'Back.easeInOut',\n  'Bounce.easeIn',\n  'Bounce.easeOut',\n  'Bounce.easeInOut',\n];\n\nconst defaultTweenProps = {\n  delay_enabled: [true],\n  delay: [0, 0, 10000],\n  duration: [0, 0, 10000],\n  ease: ['Linear', tweenEases],\n\n  dx_enabled: [false],\n  dx: [0, -1000, 1000],\n  dy_enabled: [false],\n  dy: [0, -1000, 1000],\n  alpha_enabled: [false],\n  alpha: [1.0, 0, 1, 0.01],\n  rotation_enabled: [false],\n  rotation: [0, -1080, 1080, 1],\n  scaleX_enabled: [false],\n  scaleX: [1.0, 0, 10, 0.1],\n  scaleY_enabled: [false],\n  scaleY: [1.0, 0, 10, 0.1],\n\n  yoyo: [false],\n  loop: [0, -1, 100, 1],\n  ignoresScenePause: [false],\n  refreshPhysics: [false],\n  destroyOnComplete: [false],\n  animated: [true],\n};\n\nexport function expandTweenProps(props) {\n  Object.entries(props).forEach(([name, spec]) => {\n    if (!name.endsWith('.tween')) {\n      return;\n    }\n\n    const prefix = name.substr(0, name.length - '.tween'.length);\n\n    if (!Array.isArray(spec) || spec.length !== 1 || typeof spec[0] !== 'object') {\n      throw new Error(`Expected ${name} prop to have the shape [{…}]; did you mean to end it in .tween?`);\n    }\n\n    delete props[name];\n\n    const [config] = spec;\n\n    const seen = {...config};\n\n    Object.entries(defaultTweenProps).forEach(([key, value]) => {\n      if (key in config) {\n        props[`${prefix}.${key}`] = [config[key], ...value.slice(1)];\n        delete seen[key];\n      } else if (key.endsWith('_enabled')) {\n        const targetKey = key.substr(0, key.length - '_enabled'.length);\n        props[`${prefix}.${key}`] = [targetKey in config];\n      } else {\n        props[`${prefix}.${key}`] = value;\n      }\n    });\n\n    if (Object.keys(seen).length) {\n      throw new Error(`Got unexpected tween config settings: ${Object.keys(seen).join(', ')}`);\n    }\n  });\n}\n\nexport default function massageTweenProps(target, {...props}, options) {\n  const {massageProps} = props;\n\n  delete props.massageProps;\n\n  Object.entries(props).forEach(([key, config]) => {\n    if (key.endsWith('_enabled')) {\n      const main = key.substr(0, key.length - '_enabled'.length);\n      if (!config && !options[main]) {\n        delete props[main];\n      }\n      delete props[key];\n    }\n  });\n\n  props.targets = target;\n\n  if (props.destroyOnComplete) {\n    delete props.destroyOnComplete;\n    const {onComplete} = props;\n    if (onComplete) {\n      props.onComplete = (...args) => {\n        onComplete(...args);\n        target.destroy();\n      };\n    } else {\n      props.onComplete = () => {\n        target.destroy();\n      };\n    }\n  }\n\n  if ('dx' in props) {\n    const {dx} = props;\n    props.x = target.x + dx;\n  }\n\n  if ('dy' in props) {\n    const {dy} = props;\n    props.y = target.y + dy;\n  }\n\n  const originalX = props.x;\n  const originalY = props.y;\n\n  if (props.refreshPhysics) {\n    delete props.refreshPhysics;\n    const {onUpdate} = props;\n    if (onUpdate) {\n      props.onUpdate = (...args) => {\n        onUpdate(...args);\n        if (target.body) {\n          target.refreshBody();\n        }\n      };\n    } else {\n      props.onUpdate = () => {\n        if (target.body) {\n          target.refreshBody();\n        }\n      };\n    }\n  }\n\n  if (massageProps) {\n    massageProps(props);\n  }\n\n  if ('dx' in props && (!('x' in props) || props.x === originalX)) {\n    const {dx} = props;\n    props.x = target.x + dx;\n  }\n  delete props.dx;\n\n  if ('dy' in props && (!('y' in props) || props.y === originalY)) {\n    const {dy} = props;\n    props.y = target.y + dy;\n  }\n  delete props.dy;\n\n  // convert degrees to radians\n  if (props.rotation) {\n    props.rotation *= Math.PI / 180;\n  }\n\n  if ('animated' in props && !props.animated) {\n    props.duration = 0;\n    delete props.loop;\n\n    // yoyo ends up where we began, so just don't animate anything\n    if (props.yoyo) {\n      delete props.x;\n      delete props.y;\n      delete props.dx;\n      delete props.dy;\n      delete props.rotation;\n      delete props.scaleX;\n      delete props.scaleY;\n\n      delete props.yoyo;\n\n      // make sure we animate \"something\"\n      props.alpha = target.alpha;\n    }\n  }\n  delete props.animated;\n\n  return props;\n}\n\nlet injected = false;\nexport function injectTweenManagerAdd(tweens) {\n  if (injected) {\n    return;\n  }\n\n  // eslint-disable-next-line no-proto\n  const proto = tweens.__proto__;\n\n  const origAdd = proto.add;\n  proto.add = function(config) {\n    const tween = origAdd.call(this, config);\n    tween.ignoresScenePause = config.ignoresScenePause;\n    return tween;\n  };\n\n  injected = true;\n}\n","import Phaser from 'phaser';\n\nconst ParticleProps = [];\nexport function particlePropFromProp(prop) {\n  return ParticleProps.find((p) => prop.startsWith(p));\n}\n\nlet injectedEmitterOpSeededRandom = false;\nexport function injectEmitterOpSeededRandom(emitter, seed) {\n  emitter.seed = seed;\n  emitter.rnd = new Phaser.Math.RandomDataGenerator([seed]);\n\n  if (injectedEmitterOpSeededRandom) {\n    return;\n  }\n\n  // eslint-disable-next-line no-proto\n  const proto = emitter.delay.__proto__;\n\n  proto.randomStaticValueEmit = function(particle, key) {\n    const randomIndex = Math.floor(particle.emitter.rnd.frac() * this.propertyValue.length);\n    return this.propertyValue[randomIndex];\n  };\n\n  proto.randomRangedValueEmit = function(particle, key) {\n    const value = particle.emitter.rnd.realInRange(this.start, this.end);\n\n    if (particle && particle.data[key]) {\n      particle.data[key].min = value;\n    }\n\n    return value;\n  };\n\n\n  injectedEmitterOpSeededRandom = true;\n}\n\nlet injectedParticleEmitterManagerPreUpdate = false;\nexport function injectParticleEmitterManagerPreUpdate(manager) {\n  if (injectedParticleEmitterManagerPreUpdate || !manager) {\n    return injectedParticleEmitterManagerPreUpdate;\n  }\n\n  // eslint-disable-next-line no-proto\n  const proto = manager.__proto__;\n\n  proto.preUpdate = function(time, origDelta) {\n    const {scene} = this;\n    const isPaused = scene._paused.particles;\n\n    // Scale the delta\n    const delta = origDelta / this.timeScale;\n\n    const emitters = this.emitters.list;\n\n    for (let i = 0; i < emitters.length; i += 1) {\n      const emitter = emitters[i];\n      if ((!isPaused || this.ignoresScenePause || emitter.ignoresScenePause || emitter.updatesOnceOnPause) && emitter.active) {\n        emitter.preUpdate(time, delta);\n        if (isPaused) {\n          emitter.updatesOnceOnPause = false;\n        }\n      }\n    }\n  };\n\n  injectedParticleEmitterManagerPreUpdate = true;\n\n  return injectedParticleEmitterManagerPreUpdate;\n}\n\nconst defaultParticleProps = {\n  image: null,\n\n  /*\n   * to investigate:\n   * bounds: null (rectangle)\n   * bounce: 0\n   * collideBottom: true\n   * collideLeft: true\n   * collideRight: true\n   * collideTop: true\n   * defaultFrame: 0?\n   * deathZone: null\n   * emitZone: null\n   * frameQuantity: 1 int\n   * mask\n  visible: [true],\n  timeScale: [1, 0, 100],\n\n  randomFrame: [true],\n  moveToX: [0, 0, 1000],\n  moveToY: [0, 0, 1000],\n   * scrollFactorX: 1 number\n   * scrollFactorY: 1 number\n   *\n   * followOffset: vec2\n   * trackVisible: false\n   *\n   * maxVelocityX: 10000\n   * maxVelocityY: 10000\n   *\n   * I suppose we don't need both gravity and acceleration?\n  gravityX: [0, -1000, 1000],\n  gravityY: [0, -1000, 1000],\n   */\n\n  /*\n   * angle: {min: 0, max: 360}\n  */\n  frequency: [0, 0, 20000],\n  lifespan: [1000, 0, 20000],\n\n  accelerationX: [0, -1000, 1000],\n  accelerationY: [0, -1000, 1000],\n  alpha: [1, 0, 1],\n  blendMode: ['NORMAL', ['NORMAL', 'ADD', 'MULTIPLY', 'SCREEN', 'ERASE']],\n  delay: [0, 0, 20000],\n  maxParticles: [0, 0, 1000],\n  particleBringToTop: [true],\n  quantity: [1, 0, 200, 1],\n  radial: [true],\n  rotate: [0, -1080, 1080, 1],\n  scaleX: [1, 0, 100],\n  scaleY: [1, 0, 100],\n  speed: [0, 0, 1000],\n  speedX: [0, -1000, 1000],\n  speedY: [0, -1000, 1000],\n  tint: [0xFFFFFF],\n  tint_enabled: [false],\n  x: [0, -1000, 1000],\n  y: [0, -1000, 1000],\n  ignoresScenePause: [false],\n  updatesOnceOnPause: [false],\n  visible: [true],\n\n  preemit: [false],\n  preemitOnReload: [false],\n};\n\nexport function expandParticleProps(props, particleImages = ['set props/particleImages!']) {\n  Object.entries(props).forEach(([name, spec]) => {\n    if (name === 'scene.particles') {\n      return;\n    }\n\n    if (name.endsWith('.particle')) {\n      throw new Error(`Found ${name}; did you mean ${name}s?`);\n    }\n\n    if (!name.endsWith('.particles')) {\n      return;\n    }\n\n    const prefix = name.substr(0, name.length - '.particles'.length);\n\n    if (!Array.isArray(spec) || spec.length !== 1 || typeof spec[0] !== 'object') {\n      throw new Error(`Expected ${name} prop to have the shape [{…}]; did you mean to end it in .particles?`);\n    }\n\n    delete props[name];\n\n    ParticleProps.push(prefix);\n\n    const [config] = spec;\n\n    const seen = {...config};\n\n    Object.entries(defaultParticleProps).forEach(([key, value]) => {\n      const propKey = key.replace(/^tint/, 'tintColor');\n      const options = key === 'image' ? [particleImages[0], particleImages] : value;\n\n      if (key in config) {\n        props[`${prefix}.${propKey}`] = [config[key], ...options.slice(1)];\n        delete seen[key];\n      } else if (key === 'preemitOnReload' && config.preemit) {\n        props[`${prefix}.${propKey}`] = [true, ...options.slice(1)];\n      } else if (key.endsWith('_enabled')) {\n        const targetKey = key.substr(0, key.length - '_enabled'.length);\n        props[`${prefix}.${propKey}`] = [targetKey in config];\n      } else {\n        props[`${prefix}.${propKey}`] = options;\n      }\n    });\n\n    if (Object.keys(seen).length) {\n      throw new Error(`Got unexpected particle config settings: ${Object.keys(seen).join(', ')}`);\n    }\n  });\n}\n\nexport default function massageParticleProps({...props}) {\n  const {massageProps} = props;\n\n  delete props.onAdd;\n  delete props.massageProps;\n  delete props.image;\n\n  if (props.tintColor_enabled) {\n    props.tint = props.tintColor;\n    delete props.tintColor_enabled;\n  }\n\n  // these accidentally take precedence over one another\n  if (props.speedX === 0 && props.speedY === 0) {\n    delete props.speedX;\n    delete props.speedY;\n  } else if (props.speed === 0) {\n    delete props.speed;\n  }\n\n  // convert degrees to radians\n  if (props.rotate) {\n    if (typeof props.rotate === 'number') {\n      props.rotate *= Math.PI / 180;\n    }\n    // TODO handle other input formats\n  }\n\n  if (massageProps) {\n    massageProps(props);\n  }\n\n  return props;\n}\n","import React from 'react';\n\nexport default class Spinner extends React.Component {\n  render() {\n    return (\n      <div id=\"lds-spinner\">\n        <div className=\"lds-spinner\">\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Controls.css';\n\nexport default class Controls extends React.Component {\n  render() {\n    const {\n      onMouseMove, volume, onVolumeChange, disableFullscreen, isFullscreen, enterFullscreen, exitFullscreen,\n    } = this.props;\n    return (\n      <div className=\"Controls\" onMouseMove={onMouseMove}>\n        <div className=\"volume\">\n          <span style={{fontSize: 20, transform: `scale(${0.5 + volume / 2})`}}>♫</span>\n          &nbsp;&nbsp;\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            value={volume * 100}\n            onChange={(e) => onVolumeChange(e.target.value / 100)}\n            onMouseUp={(e) => e.target.blur()}\n          />\n        </div>\n        {disableFullscreen || (\n          <div className=\"fullscreen\">\n            {isFullscreen ? (\n              <div className=\"button\" onClick={exitFullscreen}>\n                <div className=\"label exit\">╳</div>\n              </div>\n            ) : (\n              <div className=\"button\" onClick={enterFullscreen}>\n                <div className=\"label enter\">⇆</div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import SuperScene from './SuperScene.js';\n\nexport default class BootScene extends SuperScene {\n  static key() {\n    return 'BootScene';\n  }\n\n  constructor() {\n    super({key: BootScene.key()});\n  }\n\n  preload() {\n    super.preload();\n\n    this.game.preloadScenes.forEach((sceneClass) => {\n      if (sceneClass.name === this.name) {\n        return;\n      }\n\n      const scene = new sceneClass();\n      scene.preload.call(this);\n    });\n  }\n\n  create() {\n    super.create();\n\n    this.game.initializeShaders();\n\n    setTimeout(() => {\n      this.game.preloadComplete();\n    });\n  }\n\n  saveStateFieldName() {\n    return null;\n  }\n}\n","import {name as project} from '../../../package.json';\n\nconst debug = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n\nexport function devAnalytics(event, value) {\n  const options = {event_category: project};\n\n  if (value !== undefined) {\n    options.value = value;\n  }\n\n  try {\n    window.gtag(\n      'event',\n      event,\n      options,\n    );\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(e);\n  }\n}\n\nexport default function analytics(...args) {\n  if (debug) {\n    return;\n  }\n\n  return devAnalytics(...args);\n}\n","import _ from 'lodash';\nimport {commandKeys, gamepadKeys} from './lib/props';\nimport prop from '../props';\n\nconst GamepadButtons = {\n  LEFT: '_LCLeft',\n  RIGHT: '_LCRight',\n  UP: '_LCTop',\n  DOWN: '_LCBottom',\n  A: '_RCBottom',\n  Y: '_RCTop',\n  X: '_RCLeft',\n  B: '_RCRight',\n  L1: '_FBLeftTop',\n  L2: '_FBLeftBottom',\n  R1: '_FBRightTop',\n  R2: '_FBRightBottom',\n};\n\nconst ButtonName = {};\n\nexport default class CommandManager {\n  constructor(spec) {\n    this._spec = spec;\n    this._scenes = new Map();\n\n    this.keyboard = {};\n    this.gamepad = {};\n    this.pointerEvents = [];\n    this.executedProps = [];\n    this._ignoreAlls = {};\n\n    Object.keys(spec).forEach((name) => {\n      if (this[name]) {\n        throw new Error(`Conflicting command name ${name}`);\n      }\n\n      this[name] = {\n        held: false,\n        heldFrames: 0,\n        started: false,\n        continued: false,\n        heldDuration: 0,\n        releasedFrames: 0,\n        released: false,\n        releasedDuration: 0,\n\n        cooldown: 0,\n        coolingDown: false,\n        coolingDownTime: null,\n      };\n    });\n  }\n\n  freezeCommandState() {\n    const state = {\n      inputs: {},\n      ignoreAlls: {...this._ignoreAlls},\n    };\n\n    Object.keys(this._spec).forEach((name) => {\n      state.inputs[name] = {...this[name]};\n    });\n\n    return state;\n  }\n\n  thawCommandState(state) {\n    Object.keys(this._spec).forEach((name) => {\n      this[name] = {...state.inputs[name]};\n    });\n    this._ignoreAlls = {...state.ignoreAlls};\n  }\n\n  getManager(scene) {\n    return this._scenes.get(scene);\n  }\n\n  managerList() {\n    return [...this._scenes.values()];\n  }\n\n  attachScene(scene, suppressRepeatFrames) {\n    this._scenes.set(scene, {\n      scene,\n      commands: scene.game.debug ? [] : null,\n      tickCount: 0,\n      suppressRepeatFrames,\n    });\n  }\n\n  detachScene(scene) {\n    this._scenes.delete(scene);\n  }\n\n  attachKey(scene, code) {\n    const {keyboard} = scene.input;\n\n    keyboard.on(`keydown-${code}`, (e) => {\n      const tag = document.activeElement && document.activeElement.tagName.toLowerCase();\n      if (tag === 'input' || tag === 'select' || tag === 'textarea') {\n        return;\n      }\n\n      if (e.altKey || e.ctrlKey || e.metaKey || e.shiftKey) {\n        return;\n      }\n\n      e.preventDefault();\n      this.keyboard[code] = true;\n    });\n\n    keyboard.on(`keyup-${code}`, (e) => {\n      const tag = document.activeElement && document.activeElement.tagName.toLowerCase();\n      if (tag === 'input' || tag === 'select' || tag === 'textarea') {\n        return;\n      }\n\n      e.preventDefault();\n      this.keyboard[code] = false;\n    });\n\n    if (!(code in this.keyboard)) {\n      this.keyboard[code] = false;\n    }\n  }\n\n  detachKey(scene, code) {\n    delete this.keyboard[code];\n  }\n\n  attachInputs(scene) {\n    commandKeys(this._spec).forEach((code) => {\n      this.attachKey(scene, code);\n    });\n\n    if (scene.input.gamepad) {\n      scene.input.gamepad.on('down', (gamepad, button) => {\n        let buttonName = ButtonName[button.index];\n        if (!buttonName) {\n          Object.entries(GamepadButtons).forEach(([name, method]) => {\n            if (button === gamepad[method]) {\n              buttonName = ButtonName[button.index] = name;\n            }\n          });\n        }\n\n        this.gamepad[buttonName] = true;\n      });\n\n      scene.input.gamepad.on('up', (gamepad, button) => {\n        let buttonName = ButtonName[button.index];\n        if (!buttonName) {\n          Object.entries(GamepadButtons).forEach(([name, method]) => {\n            if (button === gamepad[method]) {\n              buttonName = ButtonName[button.index] = name;\n            }\n          });\n        }\n\n        this.gamepad[buttonName] = false;\n      });\n    }\n\n    const canvas = document.querySelector('#engine canvas');\n\n    ['pointerdown', 'pointerup'].forEach((name) => {\n      scene.input.on(name, (pointer) => {\n        // fix issue with dat.gui not releasing focus\n        if (!document.activeElement || !document.activeElement.contains || document.activeElement.contains(canvas)) {\n          this.pointerEvents.push({\n            name,\n            x: pointer.x,\n            y: pointer.y,\n          });\n        } else {\n          // timeout to avoid 2x input events\n          setTimeout(() => {\n            document.activeElement.blur();\n          });\n        }\n      });\n    });\n  }\n\n  readRawGamepad(scenes) {\n    const {gamepad} = this;\n    let seenGamepad = false;\n\n    scenes.forEach((scene) => {\n      const rawGamepad = scene.input.gamepad;\n      if (!rawGamepad.total) {\n        return;\n      }\n\n      if (!seenGamepad) {\n        seenGamepad = true;\n\n        gamepad.total = 0;\n        gamepad.LSTICKX = 0;\n        gamepad.LSTICKY = 0;\n        gamepad.RSTICKX = 0;\n        gamepad.RSTICKY = 0;\n      }\n\n      if (gamepad.total < rawGamepad.total) {\n        gamepad.total = rawGamepad.total;\n      }\n\n      rawGamepad.gamepads.filter((pad) => pad).forEach((rawPad) => {\n        const {leftStick, rightStick} = rawPad;\n        if (Math.abs(leftStick.x) > Math.abs(gamepad.LSTICKX)) {\n          gamepad.LSTICKX = leftStick.x;\n        }\n\n        if (Math.abs(leftStick.y) > Math.abs(gamepad.LSTICKY)) {\n          gamepad.LSTICKY = leftStick.y;\n        }\n\n        if (Math.abs(rightStick.x) > Math.abs(gamepad.RSTICKX)) {\n          gamepad.RSTICKX = rightStick.x;\n        }\n\n        if (Math.abs(rightStick.y) > Math.abs(gamepad.RSTICKY)) {\n          gamepad.RSTICKY = rightStick.y;\n        }\n      });\n    });\n  }\n\n  heldCommands(onlyUnignorable) {\n    const {gamepad} = this;\n    const spec = this._spec;\n    const frame = {_repeat: 0};\n\n    Object.entries(spec).forEach(([name, config]) => {\n      if (onlyUnignorable && !config.unignorable) {\n        return;\n      }\n\n      let held = false;\n      if (config.input) {\n        config.input.forEach((path) => {\n          let keyHeld;\n\n          if (gamepad.total) {\n            if (path === 'gamepad.LSTICK.RAW' && (Math.abs(gamepad.LSTICKX) > 0.1 || Math.abs(gamepad.LSTICKY) > 0.1)) {\n              held = [gamepad.LSTICKX, gamepad.LSTICKY];\n            } else if (path === 'gamepad.RSTICK.RAW' && (Math.abs(gamepad.RSTICKX) > 0.1 || Math.abs(gamepad.RSTICKY) > 0.1)) {\n              held = [gamepad.RSTICKX, gamepad.RSTICKY];\n            } else if (path === 'gamepad.LSTICK.UP') {\n              keyHeld = gamepad.LSTICKY < -0.2;\n            } else if (path === 'gamepad.LSTICK.DOWN') {\n              keyHeld = gamepad.LSTICKY > 0.2;\n            } else if (path === 'gamepad.LSTICK.LEFT') {\n              keyHeld = gamepad.LSTICKX < -0.2;\n            } else if (path === 'gamepad.LSTICK.RIGHT') {\n              keyHeld = gamepad.LSTICKX > 0.2;\n            } else if (path === 'gamepad.RSTICK.UP') {\n              keyHeld = gamepad.RSTICKY < -0.2;\n            } else if (path === 'gamepad.RSTICK.DOWN') {\n              keyHeld = gamepad.RSTICKY > 0.2;\n            } else if (path === 'gamepad.RSTICK.LEFT') {\n              keyHeld = gamepad.RSTICKX < -0.2;\n            } else if (path === 'gamepad.RSTICK.RIGHT') {\n              keyHeld = gamepad.RSTICKX > 0.2;\n            } else {\n              keyHeld = _.get(this, path);\n            }\n          } else {\n            keyHeld = _.get(this, path);\n          }\n\n          if (keyHeld) {\n            held = true;\n          }\n        });\n\n        this[name].held = held;\n\n        if (held) {\n          frame[name] = held;\n        }\n      }\n    });\n\n    if (this.pointerEvents.length) {\n      if (!onlyUnignorable) {\n        frame._pointer = [...this.pointerEvents];\n      }\n      this.pointerEvents.length = 0;\n    }\n\n    if (this.executedProps.length) {\n      if (!onlyUnignorable) {\n        frame._executedProps = [...this.executedProps];\n      }\n      this.executedProps.length = 0;\n    }\n\n    return frame;\n  }\n\n  replayFrame(frame) {\n    const spec = this._spec;\n\n    Object.entries(spec).forEach(([name, config]) => {\n      if (frame[name] && config.unreplayable) {\n        this[name].held = false;\n      } else {\n        this[name].held = frame[name];\n      }\n    });\n  }\n\n  mergeUnignorable(frame) {\n    const spec = this._spec;\n\n    Object.entries(spec).forEach(([name, config]) => {\n      if (frame[name] && config.unignorable && !config.unreplayable) {\n        this[name].held = true;\n      }\n    });\n  }\n\n  addFrameToList(suppressRepeatFrames, list, frame) {\n    if (!suppressRepeatFrames && list.length) {\n      const prevFrame = list[list.length - 1];\n      let isSame = true;\n      if (frame._pointer || prevFrame._pointer) {\n        isSame = false;\n      } else if (frame._executedProps || prevFrame._executedProps) {\n        isSame = false;\n      } else {\n        Object.keys(this._spec).forEach((key) => {\n          if (prevFrame[key] !== frame[key]) {\n            isSame = false;\n          }\n        });\n      }\n\n      if (isSame) {\n        list.pop();\n        list.push({...prevFrame, _repeat: prevFrame._repeat + 1});\n        return;\n      }\n    }\n\n    list.push(frame);\n  }\n\n  ignoreAll(type, newValue) {\n    const {_ignoreAlls} = this;\n\n    if (type === undefined) {\n      let ignoreAny = false;\n      Object.values(_ignoreAlls).forEach((ignore) => {\n        if (ignore) {\n          ignoreAny = true;\n        }\n      });\n      return ignoreAny;\n    }\n\n    if (newValue === undefined) {\n      return _ignoreAlls[type];\n    }\n\n    _ignoreAlls[type] = !!newValue;\n    return _ignoreAlls[type];\n  }\n\n  clearIgnoreAlls() {\n    const {_ignoreAlls} = this;\n    Object.keys(_ignoreAlls).forEach((key) => {\n      _ignoreAlls[key] = false;\n    });\n  }\n\n  processCommands(manager, frame, dt) {\n    const spec = this._spec;\n    const {scene} = manager;\n\n    const ignoreAll = this.ignoreAll();\n\n    Object.entries(spec).forEach(([name, config]) => {\n      const command = this[name];\n\n      if (!prop(`command.${name}.enabled`) || (ignoreAll && !config.unignorable)) {\n        command.held = false;\n      }\n\n      if (config.cooldown) {\n        command.coolingDownTime = Math.max(0, command.coolingDownTime - dt);\n        command.coolingDown = command.coolingDownTime > 0;\n        if (command.coolingDown) {\n          command.held = false;\n        }\n        if (command.held) {\n          command.coolingDownTime = prop(`command.${name}.cooldown`);\n        }\n      }\n\n      if (command.held) {\n        command.heldFrames += 1;\n        command.heldDuration += dt;\n        command.started = command.heldFrames === 1;\n        command.continued = command.heldFrames > 1;\n        command.released = false;\n        command.releasedFrames = 0;\n        command.releasedDuration = 0;\n      } else {\n        command.held = false;\n        command.heldFrames = 0;\n        command.heldDuration = 0;\n        command.started = false;\n        command.continued = false;\n        command.released = command.releasedFrames === 1;\n        command.releasedFrames += 1;\n        command.releasedDuration += dt;\n      }\n\n      if (command.started && config.execute) {\n        if (typeof config.execute === 'function') {\n          config.execute(scene, scene.game);\n        } else {\n          const scenePath = _.get(scene, config.execute);\n          if (scenePath) {\n            scenePath.call(scene);\n          } else {\n            const gamePath = _.get(scene.game, config.execute);\n            if (gamePath) {\n              gamePath.call(scene.game);\n            } else {\n              throw new Error(`Invalid execute for command '${name}'; expected a function or a scene/game method name, got ${config.execute}`);\n            }\n          }\n        }\n      }\n    });\n\n    if (!ignoreAll && frame._pointer) {\n      frame._pointer.forEach((event) => {\n        scene.handlePointerEvent(event);\n      });\n    }\n\n    if (this.replay && frame._executedProps) {\n      frame._executedProps.forEach((propName) => {\n        const fn = prop(propName);\n        if (typeof fn === 'function') {\n          fn();\n        } else {\n          // eslint-disable-next-line no-console\n          console.error(`Recorded prop ${propName} is no longer a function? It's ${fn}`);\n        }\n      });\n    }\n  }\n\n  injectReplayFrame() {\n    if (!this.replay) {\n      return null;\n    }\n\n    if (this.replayFrameIndex >= this.replay.commands.length || this.replayTicks >= this.replay.postflightCutoff) {\n      this.endedReplay();\n      return null;\n    }\n\n    const frame = this.replay.commands[this.replayFrameIndex];\n\n    if (frame._repeat) {\n      this.replayRepeatRun += 1;\n\n      if (this.replayRepeatRun > frame._repeat) {\n        this.replayRepeatRun = 0;\n        this.replayFrameIndex += 1;\n      }\n    } else {\n      this.replayFrameIndex += 1;\n    }\n\n    this.replayTicks += 1;\n\n    this.replayFrame(frame);\n    this.heldCommands(true);\n    this.mergeUnignorable(frame);\n\n    return {...frame, _repeat: 0};\n  }\n\n  processInput(scene, time, dt, onlyUnignorable) {\n    const manager = this.getManager(scene);\n\n    if (manager.scene.timeSightFrozen) {\n      const frame = this.heldCommands(onlyUnignorable);\n      this.processCommands(manager, frame, dt);\n      return;\n    }\n\n    const frame = this.injectReplayFrame()\n      || this.heldCommands(onlyUnignorable);\n\n    if (manager.commands) {\n      this.addFrameToList(manager.suppressRepeatFrames, manager.commands, frame);\n    }\n    if (this.recording) {\n      this.addFrameToList(manager.suppressRepeatFrames, this.recording.commands, frame);\n    }\n\n    manager.tickCount += 1;\n\n    if (this.recording) {\n      this.recording.tickCount += 1;\n    }\n\n    this.processCommands(manager, frame, dt);\n  }\n\n  recordPropExecution(propName) {\n    this.executedProps.push(propName);\n  }\n\n  beginRecording(scene, recording) {\n    const manager = this.getManager(scene);\n    this.recording = recording;\n    recording.commands = [...manager.commands];\n    recording.originalPreflightCutoff = recording.preflightCutoff = recording.tickCount = manager.tickCount;\n  }\n\n  stopRecording() {\n    const {recording} = this;\n    delete this.recording;\n    recording.postflightCutoff = recording.tickCount;\n    return recording;\n  }\n\n  beginReplay(replay, replayOptions) {\n    this.replay = replay;\n    this.replayFrameIndex = 0;\n    this.replayRepeatRun = 0;\n    this.replayTicks = 0;\n    this.replayOptions = replayOptions;\n\n    const startTick = replayOptions.startTick || replay.startTick || 0;\n    if (startTick) {\n      for (let i = 0; i < startTick; i += 1) {\n        this.injectReplayFrame();\n      }\n    }\n  }\n\n  endedReplay() {\n    if (!this.replay) {\n      return;\n    }\n\n    const {onEnd} = this.replayOptions;\n\n    delete this.replay;\n    delete this.replayOptions;\n    delete this.replayFrameIndex;\n    delete this.replayRepeatRun;\n    delete this.replayTicks;\n\n    if (onEnd) {\n      onEnd();\n    }\n  }\n\n  stopReplay() {\n    if (!this.replay) {\n      return;\n    }\n\n    const {onStop} = this.replayOptions;\n\n    delete this.replay;\n    delete this.replayOptions;\n    delete this.replayFrameIndex;\n    delete this.replayRepeatRun;\n    delete this.replayTicks;\n\n    if (onStop) {\n      onStop();\n    }\n  }\n\n  hasPreflight() {\n    if (!this.replay) {\n      return false;\n    }\n\n    if (this.replayTicks >= this.replay.postflightCutoff) {\n      return false;\n    }\n\n    return this.replayTicks < (this.replayOptions.preflightCutoff || this.replay.preflightCutoff);\n  }\n\n  updateCommandsFromReload(next) {\n    const prev = this._spec;\n\n    this.updateSpecFromReload(prev, next);\n    this.updateInputsFromReload(prev, next, true);\n    this.updateInputsFromReload(prev, next, false);\n  }\n\n  updateSpecFromReload(prev, next) {\n    this._spec = next;\n    const addCommands = [];\n    const removeCommands = [];\n    const updateCommands = [];\n\n    const seen = {};\n\n    Object.entries(next).forEach(([name, config]) => {\n      if (!prev[name]) {\n        addCommands.push(name);\n      } else {\n        seen[name] = true;\n\n        const prevJson = {};\n        Object.entries(prev[name]).forEach(([key, value]) => {\n          if (typeof value === 'function') {\n            prevJson[key] = String(value);\n          } else {\n            prevJson[key] = value;\n          }\n        });\n\n        const nextJson = {};\n        Object.entries(next[name]).forEach(([key, value]) => {\n          if (typeof value === 'function') {\n            nextJson[key] = String(value);\n          } else {\n            nextJson[key] = value;\n          }\n        });\n\n        if (JSON.stringify(prevJson) !== JSON.stringify(nextJson)) {\n          updateCommands.push(name);\n        }\n      }\n    });\n\n    Object.keys(prev).forEach((name) => {\n      if (!seen[name]) {\n        removeCommands.push(name);\n      }\n    });\n\n    if (addCommands.length === 0 && removeCommands.length === 0 && updateCommands.length === 0) {\n      return;\n    }\n\n    const changes = [];\n    if (addCommands.length) {\n      changes.push(`+[${addCommands.join(', ')}]`);\n    }\n    if (removeCommands.length) {\n      changes.push(`-[${removeCommands.join(', ')}]`);\n    }\n    if (updateCommands.length) {\n      changes.push(`Δ[${updateCommands.join(', ')}]`);\n    }\n\n    // eslint-disable-next-line no-console\n    console.info(`Hot-loading command changes (${changes.join(', ')})`);\n  }\n\n  updateInputsFromReload(prev, next, isKeyboard) {\n    const nextKeys = {};\n    const prevKeys = {};\n\n    const keyLister = isKeyboard ? commandKeys : gamepadKeys;\n\n    keyLister(next).forEach((code) => {\n      nextKeys[code] = true;\n    });\n\n    keyLister(prev, true).forEach((code) => {\n      prevKeys[code] = true;\n    });\n\n    const addKeys = [];\n    Object.keys(nextKeys).forEach((code) => {\n      if (prevKeys[code]) {\n        delete prevKeys[code];\n      } else {\n        addKeys.push(code);\n      }\n    });\n    const removeKeys = Object.keys(prevKeys);\n\n    if (addKeys.length === 0 && removeKeys.length === 0) {\n      return;\n    }\n\n    if (isKeyboard) {\n      this.managerList().forEach((manager) => {\n        addKeys.forEach((code) => {\n          this.attachKey(manager.scene, code);\n        });\n        removeKeys.forEach((code) => {\n          this.detachKey(manager.scene, code);\n        });\n      });\n    }\n\n    const changes = [];\n    if (addKeys.length) {\n      changes.push(`+[${addKeys.join(', ')}]`);\n    }\n    if (removeKeys.length) {\n      changes.push(`-[${removeKeys.join(', ')}]`);\n    }\n\n    // eslint-disable-next-line no-console\n    console.info(`Hot-loading ${isKeyboard ? 'keyboard' : 'gamepad'} input changes (${changes.join(', ')})`);\n  }\n}\n","import Phaser from 'phaser';\nimport BootScene from './boot-scene';\nimport prop, {\n  commands, shaderCoordFragments, shaderColorFragments, shaderPipelines,\n} from '../props';\nimport {updatePropsFromStep} from './lib/manage-gui';\nimport {shaderTypeMeta} from './lib/shaders';\nimport {name as project} from '../../package.json';\nimport analytics from './lib/analytics';\nimport CommandManager from './CommandManager';\n\nconst baseConfig = {\n  type: Phaser.AUTO,\n  parent: 'engine',\n  width: 800,\n  height: 600,\n  tileWidth: 24,\n  tileHeight: 24,\n};\n\nexport default class SuperGame extends Phaser.Game {\n  constructor(subConfig, preloadScenes) {\n    const config = {\n      ...baseConfig,\n      ...subConfig,\n    };\n\n    super(config);\n\n    Object.entries(config).forEach(([key, value]) => {\n      if (!(key in this.config)) {\n        this.config[key] = value;\n      }\n    });\n\n    this.debug = config.debug;\n\n    this.scene.add('BootScene', BootScene, true, {seed: Date.now(), sceneId: String(Math.random())});\n\n    this.preloadScenes = preloadScenes;\n\n    // hack to stop phaser from rejecting our fullscreen\n    // eslint-disable-next-line no-proto\n    this.scale.__proto__.onFullScreenChange = function() {};\n\n    this.prop = prop;\n\n    this._replayPreflight = 0;\n\n    this._onDisableDebugUI = [];\n\n    this._sceneInitCallbacks = {};\n\n    this.assets = {};\n\n    this.command = new CommandManager(commands);\n\n    this._initializeShaderStructures(shaderCoordFragments, shaderColorFragments, shaderPipelines);\n\n    this.focused = true;\n\n    this._sceneConstructors = {};\n    [\n      BootScene,\n      ...preloadScenes,\n    ].forEach((sceneClass) => {\n      this._sceneConstructors[sceneClass.name] = sceneClass;\n    });\n\n    if (config.debug) {\n      const game = this;\n      window.scene = new Proxy({}, {\n        get(target, key) {\n          return game.topScene()[key];\n        },\n      });\n      window.prop = prop;\n    }\n\n    this.events.on('step', () => {\n      const topScene = this.topScene();\n\n      this.readRawInput();\n\n      if (config.debug) {\n        if (this._replayPreflight > 0) {\n          return;\n        }\n\n        if (!this.disableDebug && (!topScene._replay || !topScene._replay.timeSight)) {\n          updatePropsFromStep(false);\n        }\n\n        if (prop('engine.throttle')) {\n          const begin = new Date().getTime();\n          // eslint-disable-next-line no-empty\n          while ((new Date()).getTime() - begin < 50) {\n          }\n        }\n      }\n    });\n  }\n\n  shaderFragments(pipelineName) {\n    const bothFragmentTypes = this._shaderPipelines[pipelineName];\n    if (!bothFragmentTypes) {\n      return null;\n    }\n\n    return [...bothFragmentTypes[0], ...bothFragmentTypes[1]];\n  }\n\n  _initializeShaderStructures(coordFragments, colorFragments, pipelines) {\n    if (!this._shaderSource) {\n      this._shaderSource = {};\n    }\n\n    const allFragments = [\n      ...(coordFragments || []),\n      ...(colorFragments || []),\n    ];\n\n    const out = {};\n    const setupPipeline = (pipelineName, fragmentNames) => {\n      const coords = [];\n      const colors = [];\n\n      fragmentNames.forEach((fragmentName) => {\n        const coordFragment = coordFragments.find(([n]) => n === fragmentName);\n        if (coordFragment) {\n          coords.push(coordFragment);\n          return;\n        }\n\n        const colorFragment = colorFragments.find(([n]) => n === fragmentName);\n        if (colorFragment) {\n          colors.push(colorFragment);\n          return;\n        }\n\n        throw new Error(`Unable to find shader '(${fragmentName}' in shader pipeline '${pipelineName}'`);\n      });\n\n      out[pipelineName] = [coords, colors];\n    };\n\n    Object.entries(pipelines).forEach(([pipelineName, fragmentNames]) => {\n      setupPipeline(pipelineName, fragmentNames);\n    });\n\n    allFragments.forEach(([name]) => {\n      if (!out[name]) {\n        setupPipeline(name, [name]);\n      }\n    });\n\n    if (!out.main) {\n      setupPipeline('main', allFragments.map(([name]) => name));\n    }\n\n    this._shaderPipelines = out;\n  }\n\n  changeVolume(newVolume) {\n    this.volume = newVolume;\n\n    if (this.currentMusicPlayer) {\n      this.currentMusicPlayer.setVolume(newVolume * prop('scene.musicVolume'));\n    }\n\n    this.scene.scenes.forEach((scene) => {\n      scene.changeVolume(newVolume);\n    });\n  }\n\n  setFocused(isFocused) {\n    if (this.focused === isFocused) {\n      return;\n    }\n\n    this.focused = isFocused;\n  }\n\n  topScene() {\n    const {scenes} = this.scene;\n    return scenes[scenes.length - 1];\n  }\n\n  preloadComplete() {\n    const spinner = document.getElementById('lds-spinner');\n    if (spinner && spinner.parentNode) {\n      spinner.parentNode.removeChild(spinner);\n    }\n\n    this._preloadedAssets = true;\n    this.tryLaunch();\n  }\n\n  activateGame(callback) {\n    if (!this._activatedGame) {\n      this._activatedGame = [];\n    }\n\n    if (callback) {\n      this._activatedGame.push(callback);\n    }\n\n    this.tryLaunch();\n  }\n\n  tryLaunch() {\n    if (!this._preloadedAssets || !this._activatedGame) {\n      return;\n    }\n\n    if (this._launchedGame) {\n      if (this._activatedGame) {\n        this._activatedGame.forEach((callback) => {\n          callback();\n        });\n        delete this._activatedGame;\n      }\n      return;\n    }\n\n    if (this._launchingGame) {\n      return;\n    }\n\n    this._launchingGame = true;\n\n    analytics('00 started game');\n\n    // eslint-disable-next-line no-console\n    console.warn(`Welcome to ${project}!`);\n\n    // if clicking comes first, removing the scene immediately after\n    // preloading finishes causes a crash\n    setTimeout(() => {\n      if (this.renderer.type === Phaser.CANVAS) {\n        // eslint-disable-next-line no-alert\n        alert('It looks like this browser will offer a degraded experience. For best results, please use Chrome!');\n      }\n\n      const cover = document.getElementById('cover');\n      if (cover && cover.parentNode) {\n        cover.parentNode.removeChild(cover);\n      }\n\n      this.scene.remove(BootScene.key());\n      this.launch();\n\n      const scene = this.topScene();\n      if (scene) {\n        scene.willTransitionFrom();\n        scene.timer(() => scene.didTransitionFrom()).ignoresScenePause = true;\n      }\n\n      this._activatedGame.forEach((callback) => {\n        callback();\n      });\n      delete this._activatedGame;\n      this._launchedGame = true;\n    });\n  }\n\n  onDisableDebugUI(callback) {\n    if (this.disableDebug) {\n      callback();\n    } else {\n      this._onDisableDebugUI.push(callback);\n    }\n  }\n\n  disableDebugUI() {\n    if (this.disableDebug) {\n      return;\n    }\n\n    this.disableDebug = true;\n\n    this._onDisableDebugUI.forEach((callback) => callback());\n\n    const manage = document.querySelector('.development .Manage');\n    if (manage) {\n      manage.remove();\n    }\n\n    const replay = document.querySelector('.development .Replay');\n    if (replay) {\n      replay.remove();\n    }\n\n    const log = document.querySelector('.development .Logging');\n    if (log) {\n      log.remove();\n    }\n  }\n\n  forceQuit() {\n    this.stopRecording();\n    this.stopReplay();\n\n    this.destroy(true, true);\n\n    const engine = document.querySelector('#engine-container');\n    if (engine) {\n      engine.remove();\n    }\n\n    this.disableDebugUI();\n\n    const isInFullScreen = document.fullscreenElement\n      || document.webkitFullscreenElement\n      || document.mozFullScreenElement\n      || document.msFullscreenElement;\n\n    if (isInFullScreen) {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      }\n    }\n  }\n\n  zeroPrefix(number, zeros) {\n    let n = number;\n    let o = '';\n    for (let i = 1; i < zeros; i += 1) {\n      if (n < 10) {\n        o += '0';\n      } else {\n        n /= 10;\n      }\n    }\n\n    return `${o}${number}`;\n  }\n\n  renderDateTime(date) {\n    const zero = (n) => this.zeroPrefix(n, 2);\n    return [\n      [date.getFullYear(), zero(date.getMonth() + 1), zero(date.getDate())].join('-'),\n      [date.getHours(), zero(date.getMinutes()), zero(date.getSeconds())].join(':'),\n    ].join(' ');\n  }\n\n  renderMillisecondDuration(duration) {\n    const m = Math.floor(duration / 1000 / 60);\n    if (m > 99) return '99:99.99+';\n    const s = duration / 1000 - m * 60;\n    return `${m}:${this.zeroPrefix(s.toFixed(3), 2)}`;\n  }\n\n  beginRecording(options = {}) {\n    const scene = this.topScene();\n\n    const now = new Date();\n\n    this._recording = {\n      timestamp: now.getTime(),\n      initData: scene.scene.settings.data,\n      sceneName: scene.constructor.name,\n      name: this.renderDateTime(now),\n      commandState: this.command.freezeCommandState(),\n      ...options,\n    };\n\n    scene.beginRecording(this._recording);\n\n    if (this._recording.snapshot) {\n      this.stopRecording();\n    } else if (this.onRecordBegin) {\n      this.onRecordBegin(this._recording);\n    }\n  }\n\n  stopRecording() {\n    const recording = this._recording;\n    if (!recording) {\n      return;\n    }\n\n    this.topScene().stopRecording();\n    delete this._recording;\n\n    if (this.onRecordStop) {\n      this.onRecordStop(recording);\n    }\n\n    return recording;\n  }\n\n  beginReplay(replay, options = {}) {\n    this._replay = replay;\n\n    let {startFromTransition} = options;\n    const {sceneTransitions} = replay;\n    if (!startFromTransition && sceneTransitions) {\n      for (let i = 0; i < sceneTransitions.length; i += 1) {\n        if (sceneTransitions[i].tickCount <= replay.preflightCutoff) {\n          startFromTransition = sceneTransitions[i];\n        }\n      }\n    }\n\n    const preflightCutoff = Math.max(\n      replay.preflightCutoff,\n      startFromTransition ? (startFromTransition.tickCount || 0) : 0,\n    );\n\n    this.transitionToSceneToBeginReplay(replay, startFromTransition).then((newScene) => {\n      newScene.beginReplay(replay, {\n        ...options,\n        startFromTransition,\n        preflightCutoff,\n        onEnd: () => {\n          this.endedReplay();\n        },\n        onStop: () => {\n          this.stopReplay(true);\n        },\n      });\n\n      if (this.onReplayBegin) {\n        this.onReplayBegin(replay);\n      }\n    });\n  }\n\n  transitionToSceneToBeginReplay(replay, startFromTransition) {\n    const oldScene = this.topScene();\n    const sceneKey = `scene-${Math.random() * Date.now()}`;\n\n    const {\n      sceneSaveState, sceneName, initData, commandState,\n    } = startFromTransition || replay;\n    const save = JSON.parse(JSON.stringify(sceneSaveState));\n    const {seed} = (startFromTransition || replay).initData;\n\n    const returnPromise = new Promise((resolve, reject) => {\n      this.onSceneInit(sceneKey, (newScene) => {\n        this.command.thawCommandState(commandState);\n        newScene.willTransitionFrom(null, null);\n        oldScene._sceneTransition(oldScene, newScene, null);\n        resolve(newScene, null);\n      });\n    });\n\n    oldScene.scene.add(\n      sceneKey,\n      this._sceneConstructors[sceneName],\n      true,\n      {\n        ...initData,\n        save,\n        seed,\n        transition: null,\n      },\n    );\n\n    return returnPromise;\n  }\n\n  endedReplay() {\n    if (!this._replay) {\n      return;\n    }\n\n    const replay = this._replay;\n    delete this._replay;\n\n    if (this.onReplayEnd) {\n      this.onReplayEnd(replay);\n    }\n  }\n\n  stopReplay(skipDownward) {\n    if (!this._replay) {\n      return;\n    }\n\n    const replay = this._replay;\n    delete this._replay;\n\n    if (!skipDownward) {\n      this.topScene().stopReplay();\n    }\n\n    if (this.onReplayStop) {\n      this.onReplayStop(replay);\n    }\n  }\n\n  playMusic(name, forceRestart) {\n    if (forceRestart || this.currentMusicName !== name) {\n      if (this.currentMusicPlayer && this.currentMusicPlayer.key) {\n        this.currentMusicPlayer.destroy();\n      }\n\n      if (name) {\n        try {\n          const music = this.sound.add(name);\n          if (!music || !music.key) {\n            // eslint-disable-next-line no-console\n            console.warn(`Could not load music ${name}`);\n            return;\n          }\n\n          music.play('', {loop: true});\n          music.setVolume(this.volume * prop('scene.musicVolume'));\n          this.currentMusicPlayer = music;\n          this.currentMusicName = name;\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.log(`Could not play music ${name}: ${e}`);\n        }\n      } else {\n        this.currentMusicName = name;\n      }\n    }\n  }\n\n  readRawInput() {\n    const scenes = this.scene.scenes.filter((scene) => scene.input.gamepad);\n    if (scenes) {\n      this.command.readRawGamepad(scenes);\n    }\n  }\n\n  cutoffTimeSightEnter() {\n    const scene = this.topScene();\n    if (scene) {\n      scene.cutoffTimeSightEnter();\n    }\n  }\n\n  cutoffTimeSightChanged(start, end) {\n    const scene = this.topScene();\n    if (scene) {\n      scene.cutoffTimeSightChanged(start, end);\n    }\n  }\n\n  cutoffTimeSightLeave() {\n    const scene = this.topScene();\n    if (scene) {\n      scene.cutoffTimeSightLeave();\n    }\n  }\n\n  shaderInstance(shaderName) {\n    if (this.renderer.type !== Phaser.WEBGL) {\n      return null;\n    }\n\n    return this.renderer.getPipeline(shaderName);\n  }\n\n  initializeShader(shaderName, replace) {\n    if (this.renderer.type !== Phaser.WEBGL) {\n      return;\n    }\n\n    if (!replace && this.renderer.hasPipeline(shaderName)) {\n      return;\n    }\n\n    const source = this.generateShaderSource(shaderName);\n\n    if (source) {\n      const shaderClass = this.shaderInstantiation(source);\n      const shader = new shaderClass(this);\n\n      // undefined `active` indicates the shader didn't completely load,\n      // probably due to a compile error\n      if (!shader || shader.active === undefined) {\n        return;\n      }\n\n      if (replace) {\n        this.renderer.removePipeline(shaderName);\n      }\n\n      this.renderer.addPipeline(shaderName, shader);\n\n      shader.setFloat2('resolution', this.config.width, this.config.height);\n    } else {\n      this.renderer.removePipeline(shaderName);\n    }\n\n    this._shaderSource[shaderName] = source;\n  }\n\n  initializeShaders() {\n    Object.keys(this._shaderPipelines).forEach((name) => {\n      this.initializeShader(name);\n    });\n  }\n\n  updateShaderFragments(nextCoord, nextColor, nextPipelines) {\n    this._initializeShaderStructures(nextCoord, nextColor, nextPipelines);\n    this.recompileShaders();\n  }\n\n  generateShaderSourceInternal(shaderName) {\n    const bothFragmentTypes = this._shaderPipelines[shaderName];\n    if (!bothFragmentTypes) {\n      throw new Error(`No definition found for shader pipeline ${shaderName}; do you need to add it to shaderPipelines in props.js?`);\n    }\n\n    const [shaderCoordSource, shaderColorSource] = bothFragmentTypes.map((fragments) => {\n      if (!fragments) {\n        return '';\n      }\n\n      return fragments.filter(([name]) => prop(`shader.${name}.enabled`)).map(([, , source]) => source).join('\\n');\n    });\n\n    if (!shaderCoordSource && !shaderColorSource) {\n      return;\n    }\n\n    return `\n      void main( void ) {\n        vec2 uv = outTexCoord;\n\n        ${shaderCoordSource}\n\n        vec4 c = texture2D(uMainSampler, uv);\n\n        ${shaderColorSource}\n\n        gl_FragColor = vec4(c.rgb * c.a, c.a);\n      }\n    `;\n  }\n\n  generateShaderSource(shaderName) {\n    const bothFragmentTypes = this._shaderPipelines[shaderName];\n    if (!bothFragmentTypes) {\n      throw new Error(`No definition found for shader pipeline ${shaderName}; do you need to add it to shaderPipelines in props.js?`);\n    }\n\n    const builtinDeclarations = `\n      precision mediump float;\n    `;\n\n    const builtinUniforms = `\n      uniform sampler2D uMainSampler;\n      varying vec2      outTexCoord;\n\n      uniform vec2 resolution;\n      uniform vec2 camera_scroll;\n      uniform float scene_time;\n    `;\n\n    const uniformNames = [];\n    const uniformDeclarations = [];\n\n    [...bothFragmentTypes[0], ...bothFragmentTypes[1]].forEach(([fragmentName, uniforms]) => {\n      if (!prop(`shader.${fragmentName}.enabled`)) {\n        return;\n      }\n\n      Object.entries(uniforms).forEach(([uniformName, [type]]) => {\n        const name = `${fragmentName}_${uniformName}`;\n        uniformNames.push(name);\n        const [, uniformType] = shaderTypeMeta[type];\n        uniformDeclarations.push(`uniform ${uniformType} ${name};\\n`);\n      });\n    });\n\n    const userShaderBody = this.generateShaderSourceInternal(shaderName);\n    if (!userShaderBody) {\n      return userShaderBody;\n    }\n\n    uniformNames.forEach((name) => {\n      const regex = new RegExp(`\\\\b${name.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\b`);\n\n      if (!userShaderBody.match(regex)) {\n        // eslint-disable-next-line no-console, max-len\n        console.error(`Shader program ${shaderName} doesn't appear use uniform '${name}'. (If this is a false positive, try adding this to your program: // ${name}`);\n      }\n    });\n\n    return `\n      ${builtinDeclarations}\n      ${builtinUniforms}\n      ${uniformDeclarations.join('')}\n      ${userShaderBody}\n    `;\n  }\n\n  recompileShader(shaderName) {\n    if (this.renderer.type !== Phaser.WEBGL) {\n      return;\n    }\n\n    const oldSource = this._shaderSource[shaderName];\n    const newSource = this.generateShaderSource(shaderName);\n\n    if (oldSource === newSource) {\n      return;\n    }\n\n    // eslint-disable-next-line no-console\n    console.info(`Hot-loading shader ${shaderName}`);\n\n    this._shaderSource[shaderName] = newSource;\n\n    if (newSource) {\n      this.initializeShader(shaderName, true);\n    } else {\n      this.renderer.removePipeline(shaderName);\n    }\n\n    const shader = this.shaderInstance(shaderName);\n\n    this.scene.scenes.forEach((scene) => {\n      if (scene.shaderName !== shaderName) {\n        return;\n      }\n\n      scene.shader = shader;\n      if (newSource) {\n        scene._shaderInitialize();\n        scene._shaderUpdate();\n        scene.camera.setPipeline(shader);\n      } else {\n        scene.camera.clearRenderToTexture();\n      }\n    });\n  }\n\n  recompileShaders() {\n    Object.keys(this._shaderPipelines).forEach((name) => {\n      this.recompileShader(name);\n    });\n  }\n\n  disableShader(shaderName) {\n    if (this.renderer.type !== Phaser.WEBGL) {\n      return;\n    }\n\n    this._shaderSource[shaderName] = null;\n\n    this.renderer.removePipeline(shaderName);\n\n    const shader = this.shaderInstance(shaderName);\n\n    this.scene.scenes.forEach((scene) => {\n      if (scene.shaderName !== shaderName) {\n        return;\n      }\n\n      scene.shader = shader;\n      scene.camera.clearRenderToTexture();\n    });\n  }\n\n  disableShaders() {\n    Object.keys(this._shaderPipelines).forEach((name) => {\n      this.disableShader(name);\n    });\n  }\n\n  shaderInstantiation(fragShader) {\n    try {\n      return new Phaser.Class({\n        Extends: Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline,\n        initialize: function Shader(game) {\n          try {\n            Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline.call(this, {\n              game,\n              renderer: game.renderer,\n              fragShader,\n            });\n          } catch (e) {\n            // eslint-disable-next-line no-console\n            console.error(e);\n          }\n        },\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n  }\n\n  onSceneInit(key, cb) {\n    if (!this._sceneInitCallbacks[key]) {\n      this._sceneInitCallbacks[key] = [];\n    }\n\n    this._sceneInitCallbacks[key].push(cb);\n  }\n\n  sceneDidInit(scene) {\n    const {key} = scene.scene;\n    if (!this._sceneInitCallbacks[key]) {\n      return;\n    }\n\n    this._sceneInitCallbacks[key].forEach((cb) => {\n      cb(scene);\n    });\n\n    delete this._sceneInitCallbacks[key];\n  }\n}\n","import Phaser from 'phaser';\nimport SuperScene from './scaffolding/SuperScene';\nimport prop from './props';\nimport analytics from './scaffolding/lib/analytics';\n\n// DEEPER AND DEEPER\n\nconst GUNS = 1;\n\nconst Angle2Theta = (angle) => angle / 180 * Math.PI;\nconst Theta2Angle = (theta) => theta / Math.PI * 180;\n\nconst whiteColor = {\n  r: 255,\n  g: 255,\n  b: 255,\n};\nconst redColor = {\n  r: 255,\n  g: 0,\n  b: 0,\n};\n\nexport default class PlayScene extends SuperScene {\n  constructor() {\n    super({\n      input: {\n        gamepad: true,\n      },\n      physics: {\n        arcade: {\n          fps: 60,\n        },\n      },\n    });\n\n    this.performanceProps = [];\n    this.mapsAreRectangular = true;\n  }\n\n  levelIds() {\n    return ['tutorialStory', 'tutorialThrust', 'tutorialSteer', 'tutorialContract', 'tutorialAfterburner', 'walls', 'obstacles', 'ambush', 'tunnel', 'finale'];\n  }\n\n  initialSaveState() {\n    return {\n      createdAt: Date.now(),\n    };\n  }\n\n  saveStateVersion() {\n    return 1;\n  }\n\n  migrateSaveStateVersion1(save) {\n  }\n\n  init(config) {\n    super.init(config);\n  }\n\n  preload() {\n    super.preload();\n  }\n\n  create(config) {\n    super.create(config);\n    this.level = this.createLevel(config.levelIndex || 0, config.depth || 0, config.shallowerPlanes || [], config.shallowerWrecks || []);\n    this.hud = this.createHud();\n\n    this.setupPhysics();\n\n    this.changePlanes();\n  }\n\n  musicName() {\n    return this.level && this.level.music;\n  }\n\n  createLevel(index, depth, shallowerPlanes, shallowerWrecks) {\n    let id = this.levelIds()[index];\n    if (index === 0 && depth) {\n      id += '2';\n    }\n\n    const level = super.createLevel(id);\n\n    const planeGroup = level.groups.plane;\n    const wreckGroup = level.groups.wreck;\n    level.levelIndex = index;\n    level.depth = depth;\n    level.bullets = this.physics.add.group();\n    level.planes = [...planeGroup.objects];\n    level.planeIndex = 0;\n    level.currentPlane = level.planes[level.planeIndex];\n    level.turrets = [...level.groups.turret.objects];\n    level.loopedSounds = [];\n    level.wrecks = [];\n    level.shallowerPlanes = shallowerPlanes;\n    level.shallowerWrecks = shallowerWrecks;\n\n    (shallowerPlanes[index] || []).forEach(({\n      x, y, angle, textureKey, damage, perfect,\n    }) => {\n      const plane = planeGroup.group.create(x, y, textureKey);\n      plane.angle = angle;\n      plane.damage = damage;\n      plane.winning = plane.inert = true;\n      plane.perfect = perfect;\n      this.addWinLabel(plane);\n      level.planes.push(plane);\n      plane.anims.play(`${plane.texture.key}Alt`);\n    });\n\n    (shallowerWrecks[index] || []).forEach(({\n      x, y, angle, textureKey, winning,\n    }) => {\n      const wreck = wreckGroup.group.create(x, y, textureKey);\n      wreck.angle = angle;\n      wreck.winning = winning;\n      level.wrecks.push(wreck);\n    });\n\n    const goal = level.mapLookups.$[0];\n    const [, goalY] = this.positionToScreenCoordinate(goal.x, goal.y);\n    level.goalDepth = goalY;\n\n    const cooldowns = [];\n    for (let i = 0; i < GUNS; i += 1) {\n      cooldowns.push(-100000);\n    }\n\n    level.planes.forEach((plane) => {\n      this.createBooster(plane);\n      plane.afterburnerCooldown = -100000;\n      plane.currentGun = 0;\n      plane.thrust = 0;\n      plane.roll = 0;\n      plane.damage = plane.damage || 0;\n      plane.planeCollideDebounce = {};\n      plane.gunCooldowns = [...cooldowns];\n      plane.theta = Angle2Theta(plane.angle + 180);\n      plane.setDepth(10);\n    });\n\n    level.turrets.forEach((turret) => {\n      // ??\n      turret.afterburnerCooldown = -100000;\n\n      turret.currentGun = 0;\n      turret.gunCooldowns = cooldowns.map((c) => this.randBetween('cooldown', 1000, 2000));\n\n      const tile = turret.tiles[0];\n      if (tile.rotateRight) {\n        turret.angle -= 90;\n      }\n      if (tile.rotateLeft) {\n        turret.angle += 90;\n      }\n      turret.setDepth(8);\n    });\n\n    level.wrecks.forEach((wreck) => {\n      this.setupWreck(wreck, true);\n      wreck.setDepth(7);\n    });\n\n    level.groups.goal.objects.forEach(({tiles}) => {\n      const [t] = tiles;\n      const amount = 0.5 + parseInt(t.glyph, 10) / 20;\n      tiles.forEach((tile) => {\n        tile.image.alpha = amount;\n        tile.image.setDepth(100);\n      });\n    });\n\n    const {tileWidth, tileHeight} = this;\n\n    level.groups.pregoal.objects.forEach(({tiles}) => {\n      tiles.forEach((tile) => {\n        const [x, y] = this.positionToScreenCoordinate(tile.x, tile.y);\n        this.particleSystem(\n          'effects.pregoal',\n          {\n            speedY: {min: -30, max: -15},\n            x: {min: x, max: x + tileWidth},\n            y: y + tileHeight,\n            accelerationY: 10,\n            tint: [0x4397F7],\n            onAdd: (particles, emitter) => {\n              particles.setDepth(50);\n            },\n          },\n        );\n      });\n    });\n    return level;\n  }\n\n  setupWreck(wreck, shallower) {\n    wreck.planeCollideDebounce = {};\n  }\n\n  calculateScore() {\n    const {level, time} = this;\n    const {goalDepth} = level;\n    const {now} = time;\n\n    const planeHealth = prop('plane.health');\n    const healthMultiplier = prop('plane.healthMultiplier');\n    let score = 0;\n    level.planes.forEach((plane) => {\n      plane.score = Math.max(0, healthMultiplier * (planeHealth - plane.damage));\n\n      // add score for goal depth\n      if (plane.winning) {\n        const depth = Math.max(0, plane.y - goalDepth) ** prop('goal.depthExponent');\n        plane.score += prop('goal.depthMultiplier') * depth;\n\n        if (plane.perfect) {\n          plane.score *= 3;\n        }\n      }\n\n      plane.score = Math.trunc(plane.score);\n\n      score += plane.score;\n    });\n\n    score = Math.max(0, score);\n\n    const newScore = (level.shownScore || score) * 0.9 + score * 0.1;\n    const oldScore = level.shownScore;\n\n    if (Math.trunc(newScore) !== Math.trunc(oldScore)) {\n      level.scoreChangeAt = now;\n    }\n\n    let change = null;\n    if (now - level.scoreChangeAt > 500) {\n      change = null;\n    } else if (newScore < oldScore) {\n      change = false;\n      level.prevChange = false;\n    } else if (newScore > oldScore) {\n      change = true;\n      level.prevChange = true;\n    } else {\n      change = level.prevChange;\n    }\n\n    level.shownScore = newScore;\n    return [`contract: $${newScore.toFixed(0)}`, change, Math.trunc(score)];\n  }\n\n  updateScore() {\n    const {hud, level, tileWidth} = this;\n    const {scoreSteady, scoreUp, scoreDown} = hud;\n\n    const [text, change] = this.calculateScore();\n    scoreSteady.text = scoreUp.text = scoreDown.text = text;\n\n    scoreSteady.alpha = scoreUp.alpha = scoreDown.alpha = 0;\n\n    if (this.level.hideContract) {\n      return;\n    }\n\n    if (change === true) {\n      scoreUp.alpha = 1;\n\n      const {now} = this.time;\n      if (!level.nextClinkTime || now > level.nextClinkTime) {\n        level.nextClinkTime = now + this.randBetween('clink', 250, 500);\n        this.playSound('clink');\n      }\n    } else if (change === false) {\n      scoreDown.alpha = 1;\n    } else {\n      scoreSteady.alpha = 1;\n    }\n\n    level.planes.forEach(({\n      winningLabel, x, y, score,\n    }) => {\n      if (winningLabel) {\n        winningLabel.text = `$${score}`;\n        winningLabel.x = x - winningLabel.width / 2;\n        winningLabel.y = y;\n      }\n    });\n  }\n\n  tutorial(text, options = {}, useForcedX) {\n    this.speak(useForcedX || this.level.currentPlane.x, this.level.currentPlane.y - this.tileHeight * 2, text, {\n      ...options,\n    });\n  }\n\n  createHud() {\n    const hud = {};\n\n    const [scoreText] = this.calculateScore();\n\n    const scoreX = 12;\n    const scoreY = 12;\n\n    const scoreSteady = hud.scoreSteady = this.text(scoreX, scoreY, scoreText, {color: 'rgb(255, 255, 255)'});\n    scoreSteady.setScrollFactor(0);\n    scoreSteady.setDepth(1000);\n\n    const scoreUp = hud.scoreUp = this.text(scoreX, scoreY, scoreText, {color: 'rgb(0, 255, 0)'});\n    scoreUp.setScrollFactor(0);\n    scoreUp.setDepth(1000);\n\n    const scoreDown = hud.scoreDown = this.text(scoreX, scoreY, scoreText, {color: 'rgb(255, 0, 0)'});\n    scoreDown.setScrollFactor(0);\n    scoreDown.setDepth(1000);\n\n    return hud;\n  }\n\n  afterburn(plane = this.level.currentPlane, force = false) {\n    const {level, time} = this;\n    const {noAfterburner} = level;\n    const {now} = time;\n\n    if (!plane) {\n      return;\n    }\n\n    if (!force) {\n      if (noAfterburner) {\n        return;\n      }\n\n      if (plane.winning) {\n        return;\n      }\n\n      if (plane.afterburnerCooldown > now) {\n        return;\n      }\n    }\n\n    this.playSound('afterburner');\n\n    plane.afterburnerCooldown = now + prop('afterburner.cooldown');\n    const [x, y] = this.boosterPosition(plane, prop('booster.shockOffset'));\n    this.shockwave(x + plane.booster.width / 2, y + plane.booster.height / 2);\n    plane.booster.anims.play('afterburnerBoosterFire', true);\n    plane.booster.isAfterburner = true;\n  }\n\n  playerShoot() {\n    if (this.level.noShooting) {\n      return;\n    }\n\n    this.shoot(this.level.currentPlane, null, Math.PI / 8, false);\n  }\n\n  blastOff() {\n    const {level} = this;\n    const {currentPlane} = level;\n\n    this.level.blastoff = true;\n    this.afterburn(currentPlane, true);\n    this._cameraFollow = null;\n  }\n\n  createBullet(shooter, type, theta) {\n    const {level} = this;\n    const {x, y} = shooter;\n\n    const bullet = level.bullets.create(x, y, `bullet${type}`);\n    bullet.shooter = shooter;\n    const speed = prop(`gun.${type}.speed`);\n\n    bullet.angle = Theta2Angle(theta) + 90;\n    const vx = speed * Math.cos(theta);\n    const vy = speed * Math.sin(theta);\n\n    bullet.setVelocity(vx, vy);\n\n    bullet.anims.play('bullet0');\n\n    this.timer(() => {\n      bullet.destroy();\n    }, 10000);\n\n    return bullet;\n  }\n\n  shoot(object, theta, variance, isTurret) {\n    const {level, time} = this;\n    const {now} = time;\n\n    if (!object) {\n      return;\n    }\n\n    if (level.changingPlanes) {\n      return;\n    }\n\n    if (object.winning) {\n      return;\n    }\n\n    const {currentGun, gunCooldowns} = object;\n\n    if (gunCooldowns[currentGun] > now) {\n      return;\n    }\n\n    const t = theta === null ? object.theta + Math.PI / 2 : theta;\n    let cooldown = prop(`gun.${currentGun}.cooldown`);\n    if (isTurret) {\n      object.setTint(0xFFFFFF);\n      cooldown *= this.randBetween('turret.cooldown', 1, 3);\n      this.tweenSustain(500, 100, 500, (factor) => {\n        object.setScale(1 - (factor / 5), 1 + (factor / 5));\n      }, () => {\n        this.createBullet(object, object.currentGun, t + this.randBetween('bulletVariance', -variance / 2, variance / 2));\n      }, () => {}, () => {}, 0, 'Cubic.easeIn', 'Cubic.easeOut');\n    } else {\n      const recoil = prop(`gun.${currentGun}.recoil`);\n      object.setVelocityX(object.body.velocity.x + recoil * -Math.cos(t));\n      object.setVelocityY(object.body.velocity.y + recoil * -Math.sin(t));\n      this.playSound('shoot', 3);\n\n      [-1, 0, 1].forEach((dTheta) => {\n        this.createBullet(object, object.currentGun, t + dTheta * variance);\n      });\n    }\n\n    gunCooldowns[currentGun] = now + cooldown;\n  }\n\n  selectedPlane() {\n    const {level} = this;\n    const {planeIndex, availablePlanes} = level;\n\n    this.playSound('thrust');\n    level.selectingPlane = null;\n    level.changingPlanes = false;\n    level.currentPlane = availablePlanes[planeIndex];\n\n    level.currentPlane.anims.play(`${level.currentPlane.texture.key}Current`);\n\n    this.cameraFollow(level.currentPlane);\n  }\n\n  cameraFollow(object) {\n    const {camera} = this;\n\n    let setPosition = false;\n    if (!this._cameraFollow) {\n      setPosition = true;\n    }\n\n    this._cameraFollow = object;\n\n    if (setPosition) {\n      const pos = this.cameraPosition();\n      if (!pos) {\n        return;\n      }\n\n      [camera.scrollX, camera.scrollY] = pos;\n    }\n  }\n\n  cameraPosition() {\n    const {camera, _cameraFollow} = this;\n\n    if (!_cameraFollow) {\n      return null;\n    }\n\n    const originX = camera.width / 2;\n    const originY = camera.height / 2;\n\n    const fx = _cameraFollow.x;\n    const fy = _cameraFollow.y;\n\n    let dx = fx - originX;\n    let dy = fy - originY;\n\n    if (_cameraFollow.theta) {\n      dx += originX / 7 * -Math.sin(_cameraFollow.theta);\n      dy += originY / 7 * Math.cos(_cameraFollow.theta);\n    }\n\n    return [dx, dy];\n  }\n\n  renderUpdate(time, dt) {\n    const {camera} = this;\n    const pos = this.cameraPosition();\n    if (pos === null) {\n      return;\n    }\n\n    const [x, y] = pos;\n    const lerp = prop('scene.camera.lerp');\n    camera.scrollX = camera.scrollX * (1 - lerp) + x * lerp;\n    camera.scrollY = camera.scrollY * (1 - lerp) + y * lerp;\n  }\n\n  createBooster(plane) {\n    const booster = plane.booster = this.physics.add.sprite(plane.x, plane.y, 'booster');\n    booster.alpha = 0;\n    return booster;\n  }\n\n  setupPhysics() {\n    const {level, physics} = this;\n    const {groups, bullets} = level;\n    const {\n      wall, goal, plane, pregoal, turret, mine, wreck,\n    } = groups;\n\n    physics.add.collider(plane.group, wall.group, null, (...args) => this.overlapPlaneWall(...args));\n    physics.add.collider(plane.group, plane.group, null, (...args) => this.overlapPlanePlane(...args));\n    physics.add.collider(plane.group, turret.group, null, (...args) => this.overlapPlaneTurret(...args));\n    physics.add.overlap(plane.group, bullets, null, (...args) => this.overlapPlaneBullet(...args));\n    physics.add.overlap(plane.group, goal.group, null, (...args) => this.overlapPlaneGoal(...args));\n    physics.add.overlap(plane.group, pregoal.group, null, (...args) => this.overlapPlanePregoal(...args));\n    physics.add.overlap(turret.group, bullets, null, (...args) => this.overlapTurretBullet(...args));\n    physics.add.overlap(bullets, goal.group, null, (...args) => this.overlapBulletGoal(...args));\n\n    physics.add.overlap(plane.group, mine.group, null, (...args) => this.overlapPlaneMine(...args));\n    physics.add.overlap(mine.group, bullets, null, (...args) => this.overlapMineBullet(...args));\n\n    physics.add.collider(wreck.group, wreck.group);\n    physics.add.collider(wreck.group, wall.group);\n    physics.add.collider(plane.group, wreck.group, null, (...args) => this.overlapPlaneWreck(...args));\n    physics.add.collider(mine.group, wreck.group, null, (...args) => this.overlapMineWreck(...args));\n    physics.add.collider(wreck.group, turret.group);\n    physics.add.overlap(wreck.group, goal.group, null, (...args) => this.overlapWreckGoal(...args));\n  }\n\n  overlapPlaneMine(plane, mine) {\n    if (!this.damagePlane(plane, prop('plane.health'))) {\n      this.playSound('explode');\n    }\n    this.explode(mine.x, mine.y);\n    mine.destroy();\n  }\n\n  explode(x, y) {\n    this.shockwave(x, y);\n    this.particleSystem(\n      'effects.explode',\n      {\n        x,\n        y,\n        scaleX: {min: 0.01, max: 0.5},\n        scaleY: {min: 0.01, max: 0.5},\n        blendMode: 'SCREEN',\n        alpha: {start: 1, end: 0},\n        speed: {min: 50, max: 200},\n        accelerationY: {min: 100, max: 500},\n        tint: [0xB13333, 0xD97217, 0xD7CB18],\n        quantity: 10,\n        lifespan: 1000,\n        onAdd: (particles, emitter) => {\n          this.timer(() => {\n            emitter.stop();\n          }, 100);\n        },\n      },\n    );\n  }\n\n  overlapMineWreck(mine, wreck) {\n    this.playSound('explode');\n    this.explode(mine.x, mine.y);\n    mine.destroy();\n    this.explode(wreck.x, wreck.y);\n    wreck.destroy();\n  }\n\n  overlapMineBullet(mine, bullet) {\n    this.explode(mine.x, mine.y);\n    mine.destroy();\n    bullet.destroy();\n    this.playSound('explode');\n  }\n\n  overlapPlaneGoal(plane, goal) {\n    if (plane.winning) {\n      return;\n    }\n\n    if (plane.damage === 0) {\n      if (!this.level.hideContract) {\n        this.speak(plane, 'PERFECT!', {color: 'rgb(255, 0, 255)', fontSize: 24});\n      }\n      plane.perfect = true;\n    }\n\n    plane.winning = true;\n\n    if (plane === this.level.currentPlane) {\n      this.playSound('goal', 0, 0.75);\n    }\n\n    this.addWinLabel(plane);\n  }\n\n  overlapWreckGoal(wreck, goal) {\n    if (wreck.winning) {\n      return;\n    }\n\n    wreck.winning = true;\n  }\n\n  addWinLabel(plane) {\n    if (!this.level.hideContract) {\n      const color = plane.perfect ? 'rgb(255, 0, 255)' : 'rgb(0, 255, 0)';\n      plane.winningLabel = this.text(plane.x, plane.y, '$0', {color, fontSize: 14});\n      plane.winningLabel.setDepth(1000);\n    }\n  }\n\n  overlapBulletGoal(bullet, goal) {\n    bullet.destroy();\n  }\n\n  overlapPlanePregoal(plane, pregoal) {\n    if (plane.suction) {\n      return;\n    }\n\n    plane.suction = true;\n  }\n\n  hideTutorialText() {\n    let tutorialText;\n    this.children.list.forEach((child) => {\n      if (child.type === 'Text' && child.text.match(/war is over/)) {\n        tutorialText = child;\n      }\n    });\n\n    if (tutorialText) {\n      tutorialText.alpha = 0;\n      tutorialText.setDepth(0);\n    }\n  }\n\n  finishedChuck() {\n    this.timer(() => {\n      this.skipLevel(1);\n    }, 4000);\n  }\n\n  bringInChuck(debug = false) {\n    const width = 800;\n    const height = 600;\n\n    this.cameraFollow(null);\n\n    const chuck = this.add.image(width / 2, height / 2 - 50, 'title');\n    chuck.alpha = 0;\n    chuck.setScrollFactor(0);\n    chuck.setDepth(100000);\n    this.tween('effects.chuck.titleIn', chuck);\n\n    this.timer(() => {\n      this.hideTutorialText();\n\n      const signature = this.add.image(width / 2, height / 2, 'signature');\n      signature.setCrop(0, 0, 0, height);\n      signature.setScrollFactor(0);\n      signature.setDepth(100004);\n      this.tween('effects.chuck.signatureIn', signature);\n      this.tweenPercent(\n        prop('effects.chuck.signatureIn.duration'),\n        (factor) => {\n          signature.setCrop(0, 0, width * factor, height);\n        },\n      );\n\n      this.timer(() => {\n        const name = this.text(950, 250, 'Jet Janitor', {\n          fontSize: 64, color: '#6f7984',\n        });\n        name.alpha = 0;\n        name.setScrollFactor(0);\n        name.setDepth(100002);\n        this.tween('effects.chuck.nameIn', name);\n\n        this.timer(() => {\n          this.finishedChuck();\n        }, debug ? 10000 : prop('effects.chuck.nameIn.duration'));\n      }, debug ? 1000 : prop('effects.chuck.signatureIn.duration'));\n    }, debug ? 1000 : prop('effects.chuck.titleIn.duration'));\n  }\n\n  destroyPlane(plane) {\n    const {level} = this;\n    const wreckGroup = level.groups.wreck;\n\n    const isCurrent = plane === level.currentPlane;\n\n    level.planes = level.planes.filter((p) => p !== plane);\n\n    if (plane.booster.sound) {\n      try {\n        plane.booster.sound.destroy();\n      } catch (e) {\n      }\n      plane.booster.sound = null;\n    }\n\n    const {x, y, angle} = plane;\n    const wreck = wreckGroup.group.create(x, y, 'wreck');\n    wreck.angle = angle;\n    level.wrecks.push(wreck);\n    this.setupWreck(wreck, false);\n\n    wreck.body.setVelocityX(plane.body.velocity.x * 0.5);\n    wreck.body.setVelocityY(plane.body.velocity.y * 0.5);\n\n    this.explode(x, y);\n    plane.booster.destroy();\n    plane.destroy();\n    this.playSound('explode');\n\n    if (isCurrent) {\n      level.currentPlane = null;\n      this.timer(() => {\n        this.changePlanes();\n      }, 2000);\n    }\n  }\n\n  damageTween(object, duration = 300) {\n    if (object.damageTween) {\n      object.damageTween.stop();\n    }\n    object.damageTween = this.tweenPercent(\n      duration,\n      (factor) => {\n        const tint = Phaser.Display.Color.Interpolate.ColorWithColor(whiteColor, redColor, 1, 1 - factor);\n        const {color} = Phaser.Display.Color.ObjectToColor(tint);\n        object.setTint(color);\n      },\n    );\n  }\n\n  damagePlane(plane, amount) {\n    if (this.level.noDamage) {\n      return false;\n    }\n\n    if (plane.winning) {\n      this.playSound('hitPlane', 3);\n      return false;\n    }\n\n    plane.damage += amount;\n    if (plane === this.level.currentPlane) {\n      this.trauma(plane.damage / prop('plane.health'));\n    }\n\n    this.damageTween(plane);\n\n    if (plane.damage >= prop('plane.health')) {\n      this.destroyPlane(plane);\n      return true;\n    } else {\n      this.playSound('hitPlane', 3);\n      return false;\n    }\n  }\n\n  overlapPlaneBullet(plane, bullet) {\n    if (bullet.shooter === plane) {\n      return;\n    }\n\n    const damage = prop('plane.bulletDamage') * this.randBetween('damage', 1, 2);\n    this.damagePlane(plane, damage);\n    bullet.destroy();\n  }\n\n  overlapTurretBullet(turret, bullet) {\n    if (bullet.shooter === turret) {\n      return;\n    }\n\n    turret.gunCooldowns[turret.currentGun] += 5000;\n    turret.setTint(0xFF0000);\n\n    this.playSound('hitTurret');\n    bullet.destroy();\n  }\n\n  overlapPlaneWall(plane, wall) {\n    const {now} = this.time;\n\n    if (plane.winning) {\n      return;\n    }\n\n    const debounce = 100;\n    const damage = prop('plane.collideDamage') * this.randBetween('damage', 1, 2);\n    if (now > (plane.planeCollideDebounce.wall || 0)) {\n      this.damagePlane(plane, damage);\n      plane.planeCollideDebounce.wall = now + debounce;\n    } else {\n      // debounce\n\n    }\n  }\n\n  overlapPlanePlane(plane1, plane2) {\n    const {now} = this.time;\n\n    const debounce = 200;\n    const damage = prop('plane.collideDamage') * this.randBetween('damage', 1, 2);\n    if (now > (plane1.planeCollideDebounce[plane2] || 0) || now > (plane2.planeCollideDebounce[plane1] || 0)) {\n      this.damagePlane(plane1, damage);\n      this.damagePlane(plane2, damage);\n      plane1.planeCollideDebounce[plane2] = now + debounce;\n      plane2.planeCollideDebounce[plane1] = now + debounce;\n    } else {\n      // debounce\n    }\n\n    const angle = Math.atan2(plane2.y - plane1.y, plane2.x - plane1.x);\n    const amount = 100;\n    if (plane2.body) {\n      plane2.setVelocityX(plane2.body.velocity.x + amount * Math.cos(angle));\n      plane2.setVelocityY(plane2.body.velocity.y + amount * Math.sin(angle));\n    }\n    if (plane1.body) {\n      plane1.setVelocityX(plane1.body.velocity.x + amount * -Math.cos(angle));\n      plane1.setVelocityY(plane1.body.velocity.y + amount * -Math.sin(angle));\n    }\n  }\n\n  overlapPlaneWreck(plane, wreck) {\n    const {now} = this.time;\n\n    const debounce = 200;\n    const damage = prop('plane.collideDamage') * this.randBetween('damage', 1, 2);\n    if (now > (plane.planeCollideDebounce[wreck] || 0) || now > (wreck.planeCollideDebounce[plane] || 0)) {\n      this.damagePlane(plane, damage);\n      plane.planeCollideDebounce[wreck] = now + debounce;\n      wreck.planeCollideDebounce[plane] = now + debounce;\n    } else {\n      // debounce\n    }\n\n    const angle = Math.atan2(wreck.y - plane.y, wreck.x - plane.x);\n    const amount = 100;\n    if (wreck.body) {\n      wreck.setVelocityX(wreck.body.velocity.x + amount * Math.cos(angle));\n      wreck.setVelocityY(wreck.body.velocity.y + amount * Math.sin(angle));\n    }\n    if (plane.body) {\n      plane.setVelocityX(plane.body.velocity.x + amount * -Math.cos(angle));\n      plane.setVelocityY(plane.body.velocity.y + amount * -Math.sin(angle));\n    }\n  }\n\n  overlapPlaneTurret(plane, turret) {\n    const {now} = this.time;\n\n    const debounce = 200;\n    const damage = prop('plane.collideDamage') * this.randBetween('damage', 1, 2);\n    if (now > (plane.planeCollideDebounce[turret] || 0)) {\n      this.damagePlane(plane, damage);\n      plane.planeCollideDebounce[turret] = now + debounce;\n    } else {\n      // debounce\n    }\n\n    const angle = Math.atan2(turret.y - plane.y, turret.x - plane.x);\n    const amount = 100;\n    if (plane.body) {\n      plane.setVelocityX(plane.body.velocity.x + amount * -Math.cos(angle));\n      plane.setVelocityY(plane.body.velocity.y + amount * -Math.sin(angle));\n    }\n  }\n\n  setupAnimations() {\n    this.anims.create({\n      key: 'bullet0',\n      frames: [\n        {\n          key: 'bullet0',\n          frame: 0,\n        },\n        {\n          key: 'bullet0',\n          frame: 1,\n        },\n      ],\n      frameRate: 30,\n    });\n\n\n    this.anims.create({\n      key: 'boosterFire',\n      frames: [\n        {\n          key: 'booster',\n          frame: 0,\n        },\n        {\n          key: 'booster',\n          frame: 1,\n        },\n      ],\n      frameRate: 6,\n      repeat: -1,\n    });\n\n    this.anims.create({\n      key: 'afterburnerBoosterFire',\n      frames: [\n        {\n          key: 'booster',\n          frame: 2,\n        },\n        {\n          key: 'booster',\n          frame: 3,\n        },\n      ],\n      frameRate: 3,\n      repeat: -1,\n    });\n\n    ['player', 'enemyA', 'planeB', 'planeC', 'planeD', 'planeE', 'planeF'].forEach((type) => {\n      this.anims.create({\n        key: `${type}Alt`,\n        frames: [\n          {\n            key: type,\n            frame: 0,\n          },\n        ],\n      });\n      this.anims.create({\n        key: `${type}Current`,\n        frames: [\n          {\n            key: type,\n            frame: 1,\n          },\n        ],\n      });\n    });\n  }\n\n  processInput(plane, dt) {\n    const {command} = this;\n\n    let thrust = 0;\n    let roll = 0;\n    let stickInput = false;\n\n    if (command.up.held) {\n      thrust = 1;\n    }\n\n    if (command.right.held) {\n      roll = 1;\n    } else if (command.left.held) {\n      roll = -1;\n    }\n\n    let dx = 0;\n    let dy = 0;\n    if (command.lstick.held) {\n      [dx, dy] = command.lstick.held;\n      stickInput = true;\n    } else if (command.rstick.held) {\n      [dx, dy] = command.rstick.held;\n      stickInput = true;\n    }\n\n    if (stickInput) {\n      if (Math.abs(dx) > 0.9) {\n        dx = dx < 0 ? -1 : 1;\n        dy = 0;\n      } else if (Math.abs(dy) > 0.9) {\n        dy = dy < 0 ? -1 : 1;\n        dx = 0;\n      }\n\n      if (dy < 0) {\n        thrust = 1;\n      }\n\n      roll = dx;\n    }\n\n    plane.thrust = thrust;\n    plane.roll = roll;\n  }\n\n  selectInput(time, dt) {\n    const {command, level} = this;\n\n    let dIdx = 0;\n    let stickInput;\n\n    if (command.up.held) {\n      this.selectedPlane();\n      return;\n    }\n\n    if (command.right.held) {\n      dIdx = 1;\n    } else if (command.left.held) {\n      dIdx = -1;\n    }\n\n    let dx = 0;\n    let dy = 0;\n    if (command.lstick.held) {\n      [dx, dy] = command.lstick.held;\n      stickInput = true;\n    } else if (command.rstick.held) {\n      [dx, dy] = command.rstick.held;\n      stickInput = true;\n    }\n\n    if (stickInput) {\n      if (Math.abs(dx) > 0.9) {\n        dx = dx < 0 ? -1 : 1;\n        dy = 0;\n      } else if (Math.abs(dy) > 0.9) {\n        dy = dy < 0 ? -1 : 1;\n        dx = 0;\n      }\n\n      if (dx < -0.2) {\n        dIdx = -1;\n      } else if (dx > 0.2) {\n        dIdx = 1;\n      }\n\n      if (dy < -0.2) {\n        this.selectedPlane();\n        return;\n      }\n    }\n\n    if (dIdx && level.debouncePlaneSelect) {\n      return;\n    } else if (!dIdx) {\n      level.debouncePlaneSelect = false;\n      return;\n    }\n\n    const planes = level.availablePlanes;\n    planes.forEach((plane) => {\n      plane.anims.play(`${plane.texture.key}Alt`);\n    });\n\n    if (planes.length > 1) {\n      this.playSound('select');\n    }\n\n    level.planeIndex = (level.planeIndex + planes.length + dIdx) % planes.length;\n    const plane = level.selectingPlane = planes[level.planeIndex];\n    plane.anims.play(`${plane.texture.key}Current`);\n\n    this.cameraFollow(plane);\n    level.debouncePlaneSelect = true;\n  }\n\n  fixedUpdate(time, dt) {\n    const {level} = this;\n    const {\n      complete, changingPlanes, planes, currentPlane, turrets,\n      autopilot, wrecks,\n    } = level;\n\n    this.timeScale = 1;\n    this.camera.zoom = 1;\n\n    if (complete) {\n    } else if (!autopilot && changingPlanes) {\n      this.updateScore();\n      this.selectInput(time, dt);\n    } else {\n      this.updateScore();\n      planes.forEach((plane) => {\n        if (!plane.nan && (isNaN(plane.x) || isNaN(plane.y))) {\n          console.warn('plane is NaN\\'d');\n          plane.nan = true;\n        }\n\n        if (autopilot) {\n          plane.thrust = 1;\n          plane.angle = 90;\n        } else if (plane === currentPlane) {\n          this.processInput(plane, dt);\n        }\n\n        this.winner(plane, dt);\n        this.thrusters(plane, dt);\n        this.tradeoff(plane, dt);\n        this.ailerons(plane, dt);\n\n        if (plane === currentPlane) {\n          this.gravity(plane, dt);\n        } else {\n          plane.body.setAccelerationX(0);\n          plane.body.setAccelerationY(0);\n        }\n\n        this.booster(plane, dt);\n        this.relativity(plane, dt);\n        this.drag(plane, dt);\n        this.suction(plane, dt);\n        this.jelly(plane, dt);\n      });\n\n      wrecks.forEach((wreck) => {\n        this.drag(wreck, dt);\n      });\n\n      turrets.forEach((turret) => {\n        this.shmup(turret, currentPlane, dt);\n      });\n    }\n  }\n\n  shmup(turret, currentPlane, dt) {\n    if (!currentPlane || currentPlane.winning) {\n      return;\n    }\n\n    const dy = currentPlane.y - turret.y;\n    const dx = currentPlane.x - turret.x;\n    if (Math.sqrt(dx ** 2 + dy ** 2) > 400) {\n      return;\n    }\n    const theta = Math.atan2(dy, dx);\n    this.shoot(turret, theta, Math.PI / 8, true);\n  }\n\n  winner(plane, dt) {\n    if (plane.winning) {\n      plane.thrust = 0;\n      plane.roll = 0;\n    }\n  }\n\n  suction(plane, dt) {\n    const depth = plane.y - this.level.goalDepth - this.tileHeight;\n    if ((!plane.winning || depth < 0) && plane.suction) {\n      plane.body.setAccelerationY(plane.body.acceleration.y + 100);\n    }\n  }\n\n  jelly(plane, dt) {\n    const {time, level} = this;\n    const {now} = time;\n    const {currentPlane} = level;\n\n    if (level.selectingPlane && !level.autopilot) {\n      plane.setVelocityX(0);\n      plane.setVelocityY(0);\n    }\n\n    if (!plane.winning || plane.inert) {\n      return;\n    }\n\n    const threshold = 0.1;\n    if (!plane.done && Math.abs(plane.body.velocity.x) < threshold && Math.abs(plane.body.velocity.y) < threshold) {\n      plane.done = now;\n      plane.setVelocityX(0);\n      plane.setVelocityY(0);\n    }\n\n    if (now - plane.done > prop('goal.wait')) {\n      plane.inert = true;\n\n      if (plane === currentPlane) {\n        this.changePlanes();\n      }\n    }\n  }\n\n  changePlanes() {\n    const {level} = this;\n    if (level.changingPlanes) {\n      return;\n    }\n\n    level.availablePlanes = level.planes.filter((p) => !p.winning).sort((a, b) => a.x - b.x);\n\n    if (!level.availablePlanes.length) {\n      this.completeLevel();\n      return;\n    }\n\n    level.availablePlanes.forEach((plane) => {\n      plane.anims.play(`${plane.texture.key}Alt`);\n    });\n\n    level.planeIndex = 0;\n    level.changingPlanes = true;\n    level.selectingPlane = level.availablePlanes[level.planeIndex];\n    level.selectingPlane.anims.play(`${level.selectingPlane.texture.key}Current`);\n    this.cameraFollow(level.selectingPlane);\n  }\n\n  goToLevel(index, increased = false) {\n    const ids = this.levelIds();\n    const count = ids.length;\n    let levelIndex = (index + count) % count;\n    let depth = this.level.depth || 0;\n    if (levelIndex === 0 && increased) {\n      depth += 1;\n    }\n    if (levelIndex === 1 && depth) {\n      while (ids[levelIndex].startsWith('tutorial')) {\n        levelIndex += 1;\n      }\n    }\n\n    const shallowerPlanes = [...this.level.shallowerPlanes];\n    shallowerPlanes[this.level.levelIndex] = [...this.level.planes.filter(({winning}) => winning).map(({\n      x, y, angle, texture, damage, perfect,\n    }) => ({\n      x, y, angle, textureKey: texture.key, damage, perfect,\n    }))];\n\n    const shallowerWrecks = [...this.level.shallowerWrecks];\n    shallowerWrecks[this.level.levelIndex] = [...this.level.wrecks.map(({\n      x, y, angle, texture, winning,\n    }) => ({\n      x, y, angle, textureKey: texture.key, winning,\n    }))];\n\n    this.replaceWithSelf(true, {\n      levelIndex,\n      depth,\n      shallowerPlanes,\n      shallowerWrecks,\n    }, {\n      name: 'effects.winTransition',\n    });\n  }\n\n  skipLevel(d) {\n    this.goToLevel(this.level.levelIndex + d, d > 0);\n  }\n\n  completeLevel() {\n    const {level} = this;\n\n    if (level.complete) {\n      return;\n    }\n\n    level.complete = true;\n    this.skipLevel(1);\n  }\n\n  drag(object, dt) {\n    if (!object.body) {\n      return;\n    }\n\n    if (object.winning) {\n      const drag = Math.min(0.98, prop('physics.goalDrag') + (object.afterburnerThrust || 0) / 10);\n      object.setVelocityX(object.body.velocity.x * drag);\n      object.setVelocityY(object.body.velocity.y * drag);\n      return;\n    }\n\n    if (!('thrust' in object) || Math.abs(object.thrust) < 0.01) {\n      object.setVelocityX(object.body.velocity.x * prop('physics.drag'));\n    }\n\n    if (object !== this.level.currentPlane) {\n      object.setVelocityY(object.body.velocity.y * prop('physics.drag'));\n    }\n  }\n\n  relativity(plane, dt) {\n    const {level} = this;\n    const {afterburnerThrust} = plane;\n\n    const squish = prop('plane.squish');\n    const factor = plane.thrust / squish;\n\n    plane.squishFactor = factor * 0.9 + (plane.squishFactor || 0) * 0.1;\n    plane.setScale(1 - plane.squishFactor, 1 + plane.squishFactor);\n\n    if (plane === level.currentPlane && !level.blastoff) {\n      this.timeScale = 1 + afterburnerThrust * prop('physics.timeThrust');\n      this.camera.zoom = 1 + afterburnerThrust * prop('physics.zoomThrust');\n    }\n  }\n\n  thrusters(plane, dt) {\n    const desiredPercent = Math.max(0, plane.afterburnerCooldown - this.time.now) / prop('afterburner.cooldown');\n    let afterburnerThrust = desiredPercent * 0.1 + (plane.afterburnerThrust || 0) * 0.9;\n    if (afterburnerThrust < 0.01) {\n      afterburnerThrust = 0;\n    }\n    plane.afterburnerThrust = afterburnerThrust;\n\n    plane.thrust += prop('afterburner.thrustBoost') * afterburnerThrust;\n\n    let max = (1 + prop('afterburner.thrustMax') * afterburnerThrust) * prop('plane.maxVelocity');\n    if (this.level.autopilot) {\n      if (this.level.blastoff) {\n        max = 1000;\n      } else {\n        max = 200;\n      }\n    }\n    plane.body.setMaxVelocity(max, max);\n  }\n\n  tradeoff(plane, dt) {\n    if (plane.thrust > 1) {\n      plane.roll *= prop('plane.boostRollThrustFactor');\n    } else if (plane.thrust) {\n      plane.roll *= prop('plane.rollThrustFactor');\n    }\n    if (plane.roll) {\n      plane.thrust *= prop('plane.thrustRollFactor');\n    }\n  }\n\n  ailerons(plane, dt) {\n    const {angle, roll} = plane;\n\n    plane.theta = Angle2Theta(angle + 180);\n    plane.body.setAngularVelocity(prop('plane.droll') * roll);\n  }\n\n  gravity(plane, dt) {\n    let ay = 0;\n    let ax = 0;\n\n    if (plane.thrust > 0) {\n      if (!plane.winning) {\n        ay = prop('plane.thrustGravity');\n      }\n\n      ay -= plane.thrust * prop('plane.power') * -1 * Math.cos(plane.theta);\n      ax = plane.thrust * prop('plane.power') * -1 * Math.sin(plane.theta);\n    } else if (!plane.winning) {\n      ay = prop('plane.gravity');\n    }\n\n    if (this.level.autopilot) {\n      ay = 0;\n    }\n\n    plane.body.setAccelerationX(ax);\n    plane.body.setAccelerationY(ay);\n  }\n\n  boosterPosition(plane, bonus = 0) {\n    const {\n      x, y, width, height, theta,\n    } = plane;\n\n    const bx = x + (width + bonus) * Math.cos(theta - Math.PI / 2);\n    const by = y + (height + bonus) * Math.sin(theta - Math.PI / 2);\n    return [bx, by];\n  }\n\n  booster(plane, dt) {\n    const {booster} = plane;\n\n    if (plane.thrust <= 0.01) {\n      booster.alpha = 0;\n      booster.bonus = 0;\n      booster.heldTime = 0;\n      if (booster.sound) {\n        try {\n          booster.sound.destroy();\n        } catch (e) {\n        }\n\n        booster.sound = null;\n      }\n    } else {\n      booster.alpha = 0.8;\n      booster.heldTime = (booster.heldTime || 0) + dt;\n\n      if (!plane.afterburnerThrust || !plane.afterburnerThrust) {\n        booster.anims.play('boosterFire', true);\n        booster.isAfterburner = false;\n      }\n\n      if (!booster.sound && !this.level.autopilot) {\n        booster.sound = this.playSound('thrust', 0, 0.4, true);\n        this.level.loopedSounds.push(booster.sound);\n      }\n    }\n\n\n    let distFactor = (Math.sin(booster.heldTime / prop('booster.bounce')) + 1) / 2;\n    distFactor += Math.max(1, plane.thrust) - 1;\n    distFactor *= 1 - plane.roll;\n\n    const desiredBonus = distFactor * prop('booster.distance');\n    const currentBonus = booster.bonus || 0;\n\n    booster.bonus = desiredBonus * 0.1 + currentBonus * 0.9;\n\n    [booster.x, booster.y] = this.boosterPosition(plane, booster.bonus);\n\n    booster.angle = plane.angle;\n  }\n\n  textSize(options) {\n    return '24px';\n  }\n\n  textColor(options) {\n    return 'rgb(222, 158, 65)';\n  }\n\n  strokeColor(options) {\n    return 'rgb(0, 0, 0)';\n  }\n\n  strokeWidth(options) {\n    return 6;\n  }\n\n  cameraColor() {\n    return 0x999999;\n  }\n\n  launchTimeSight() {\n    super.launchTimeSight();\n  }\n\n  renderTimeSightFrameInto(scene, phantomDt, time, dt, isLast) {\n    const objects = [];\n    return objects;\n  }\n\n  positionBackground() {\n    const {\n      level, game, camera,\n    } = this;\n    const {background, width: levelWidth, height: levelHeight} = level;\n    const {width: gameWidth, height: gameHeight} = game.config;\n    const {width: backgroundWidth, height: backgroundHeight} = background;\n    const {scrollX, scrollY} = camera;\n\n    const xFactor = levelWidth > 2000 ? 0.1 : levelWidth > 1000 ? 0.2 : 0.4;\n    const yFactor = levelHeight > 2000 ? 0.1 : levelHeight > 1000 ? 0.2 : 0.4;\n    const factor = Math.min(xFactor, yFactor);\n    background.setScrollFactor(0);\n    background.alpha = 0.5;\n    background.x = backgroundWidth / 2 - gameWidth / 2 - scrollX * factor;\n    background.y = backgroundHeight / 2 - gameHeight / 2 - scrollY * factor;\n  }\n\n  positionBackground2() {\n    const {\n      level, game, camera,\n    } = this;\n    const {background2, width: levelWidth, height: levelHeight} = level;\n    const {width: gameWidth, height: gameHeight} = game.config;\n    const {width: backgroundWidth, height: backgroundHeight} = background2;\n    const {scrollX, scrollY} = camera;\n\n    const xFactor = levelWidth > 2000 ? 0.05 : levelWidth > 1000 ? 0.1 : 0.2;\n    const yFactor = levelHeight > 2000 ? 0.05 : levelHeight > 1000 ? 0.1 : 0.2;\n    const factor = Math.min(xFactor, yFactor);\n    background2.setScrollFactor(0);\n    background2.x = backgroundWidth / 2 - gameWidth / 2 - scrollX * factor;\n    background2.y = backgroundHeight / 2 - gameHeight / 2 - scrollY * factor;\n  }\n\n  debugHandlePointerdown(event) {\n    let {x, y} = event;\n\n    x += this.camera.scrollX;\n    y += this.camera.scrollY;\n  }\n\n  willTransitionTo(newScene, transition) {\n    this.level.loopedSounds.forEach((sound) => {\n      try {\n        sound.destroy();\n      } catch (e) {\n      }\n    });\n  }\n\n  _hotReloadCurrentLevel() {\n    super._hotReloadCurrentLevel({\n    }, {\n      animation: 'crossFade',\n      duration: 200,\n      delayNewSceneShader: true,\n      removeOldSceneShader: true,\n    }).then((scene) => {\n    });\n  }\n\n  _hot() {\n  }\n}\n","import SuperGame from './scaffolding/SuperGame';\nimport proxyClass from './scaffolding/lib/proxy';\n\nimport PlayScene from './play-scene';\n\nconst baseConfig = {\n  tileWidth: 32,\n  tileHeight: 32,\n  spriteWidth: 32,\n  spriteHeight: 32,\n};\n\nexport default class Game extends SuperGame {\n  constructor(options) {\n    const config = {\n      ...baseConfig,\n      ...options,\n    };\n    super(\n      config,\n      [PlayScene],\n    );\n  }\n\n  launch() {\n    this.scene.add(`scene-${Date.now()}`, PlayScene, true, {\n      seed: Date.now(),\n      sceneId: String(Math.random()),\n    });\n  }\n}\n\nif (module.hot) {\n  {\n    const proxy = proxyClass(PlayScene);\n    module.hot.accept('./play-scene', () => {\n      const Next = require('./play-scene').default;\n      window.game.scene.scenes.forEach((scene) => {\n        if (scene.constructor.name === Next.name) {\n          proxyClass(Next, scene, proxy);\n        }\n      });\n    });\n  }\n}\n","import React from 'react';\nimport './Engine.css';\nimport Spinner from './Spinner';\nimport Controls from './Controls';\nimport Game from '../game';\nimport cover from '../assets/cover.png';\nimport {saveField, loadField} from './lib/store';\n\nexport default class Engine extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activating: false,\n      activated: false,\n      focused: true,\n      volume: loadField('volume', 0.66),\n      scale: null,\n    };\n    this.controls = React.createRef();\n  }\n\n  componentDidMount() {\n    const {loadedGame, debug} = this.props;\n    const {volume} = this.state;\n\n    window.addEventListener('visibilitychange', this.didVisibilityChange);\n    window.addEventListener('blur', this.didBlur);\n    document.addEventListener('blur', this.didBlur);\n    window.addEventListener('focus', this.didFocus);\n    document.addEventListener('focus', this.didFocus);\n\n    const body = document.querySelector('body');\n    body.classList.add('natural');\n\n    this.game = new Game({debug});\n    this.game.changeVolume(volume);\n\n    if (loadedGame) {\n      loadedGame(this.game, (callback) => this.activateGame(callback));\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('visibilitychange', this.didVisibilityChange);\n    window.removeEventListener('blur', this.didBlur);\n    document.removeEventListener('blur', this.didBlur);\n    window.removeEventListener('focus', this.didFocus);\n    document.removeEventListener('focus', this.didFocus);\n  }\n\n  onMouseMove() {\n    if (this.moveTimeout) {\n      clearTimeout(this.moveTimeout);\n    } else {\n      document.querySelector('body').classList.add('mouseMoved');\n    }\n\n    this.moveTimeout = setTimeout(() => {\n      this.clearMove(false);\n    }, 3000);\n  }\n\n  setVolume(volume) {\n    this.setState({volume});\n\n    this.game.changeVolume(volume);\n\n    saveField('volume', volume);\n  }\n\n  didVisibilityChange = () => {\n    const hidden = document.visibilityState === 'hidden';\n    this.setState({focused: !hidden});\n    this.game.setFocused(!hidden);\n  };\n\n  didBlur = () => {\n    this.setState({focused: false});\n    this.game.setFocused(false);\n  };\n\n  didFocus = () => {\n    this.setState({focused: true});\n    this.game.setFocused(true);\n  };\n\n  activateGame(callback) {\n    const {activated} = this.state;\n\n    if (activated) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n\n    this.setState({activating: true});\n\n    this.game.activateGame(() => {\n      // might happen multiple times\n      this.setState({activated: true});\n      this.clearMove(true);\n      if (callback) {\n        callback();\n      }\n    });\n  }\n\n  clearMove(instant) {\n    if (!this.moveTimeout) {\n      return;\n    }\n\n    clearTimeout(this.moveTimeout);\n    this.moveTimeout = null;\n\n    if (instant) {\n      this.controls.current.style.transition = 'none';\n      setTimeout(() => {\n        this.controls.current.style.transition = '';\n      });\n    }\n\n    document.querySelector('body').classList.remove('mouseMoved');\n  }\n\n  enterFullscreen() {\n    const body = document.querySelector('body');\n    const engine = document.querySelector('#engine');\n\n    if (body && engine) {\n      body.classList.add('scaled');\n      body.classList.remove('natural');\n\n      engine.style.overflow = '';\n\n      this.resizeHandler = () => {\n        const {width, height} = this.game.config;\n        const scale = 0.95 * Math.min(window.innerWidth / width, window.innerHeight / height);\n        this.setState({scale});\n      };\n      this.resizeHandler();\n\n      window.addEventListener('resize', this.resizeHandler);\n\n      if (!this.fullscreenHandler) {\n        this.fullscreenHandler = () => {\n          const isInFullScreen = document.fullscreenElement\n            || document.webkitFullscreenElement\n            || document.mozFullScreenElement\n            || document.msFullscreenElement;\n\n          if (!isInFullScreen) {\n            this.exitFullscreen(true);\n          }\n        };\n\n        document.addEventListener('webkitfullscreenchange', this.fullscreenHandler, false);\n        document.addEventListener('mozfullscreenchange', this.fullscreenHandler, false);\n        document.addEventListener('fullscreenchange', this.fullscreenHandler, false);\n        document.addEventListener('MSFullscreenChange', this.fullscreenHandler, false);\n      }\n\n      if (body.requestFullscreen) {\n        body.requestFullscreen();\n      } else if (body.mozRequestFullScreen) {\n        body.mozRequestFullScreen();\n      } else if (body.webkitRequestFullScreen) {\n        body.webkitRequestFullScreen();\n      } else if (body.msRequestFullscreen) {\n        body.msRequestFullscreen();\n      }\n    }\n  }\n\n  exitFullscreen(skipBrowserFullscreen) {\n    const body = document.querySelector('body');\n    const engine = document.querySelector('#engine');\n    if (body && engine) {\n      body.classList.add('natural');\n      body.classList.remove('scaled');\n\n      engine.style.overflow = 'hidden';\n\n      this.setState({scale: null});\n\n      if (this.moveTimeout) {\n        clearTimeout(this.moveTimeout);\n        this.moveTimeout = null;\n      }\n\n      window.removeEventListener('resize', this.resizeHandler);\n      window.removeEventListener('mousemove', this.moveHandler);\n    }\n\n    if (!skipBrowserFullscreen) {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      }\n    }\n  }\n\n  render() {\n    const {\n      activating, scale, volume, focused,\n    } = this.state;\n    const { disableFullscreen } = this.props;\n\n    const classes = [];\n    classes.push(activating ? 'activated' : 'activate');\n    classes.push(focused ? 'focused' : 'blurred');\n\n    return (\n      <div className={classes.join(' ')} id=\"engine-container\">\n        <div\n          id=\"engine\"\n          onMouseMove={() => this.onMouseMove()}\n          onClick={() => this.activateGame()}\n          style={scale ? {transform: `scale(${scale})`} : {}}\n          ref={(container) => {\n            if (this.gameContainerRef) {\n              return;\n            }\n\n            this.gameContainerRef = container;\n          }}\n        >\n          <div style={{backgroundImage: `url(${cover})`}} id=\"cover\" />\n          <Spinner />\n        </div>\n        <Controls\n          ref={this.controls}\n          onMouseMove={() => this.onMouseMove()}\n          volume={volume}\n          onVolumeChange={(v) => this.setVolume(v)}\n          disableFullscreen={disableFullscreen}\n          isFullscreen={scale}\n          enterFullscreen={() => this.enterFullscreen()}\n          exitFullscreen={() => this.exitFullscreen()}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Manage.css';\nimport {saveField, loadField} from './lib/store';\nimport {\n  initializeManage,\n  updateSearch,\n  serializeChangedProps,\n  resetChangedProps,\n} from './lib/manage-gui';\n\nexport default class Manage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      search: loadField('search', ''),\n    };\n\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    const {search} = this.state;\n\n    const gui = initializeManage();\n    this.ref.current.append(gui.domElement);\n\n    if (search !== '') {\n      updateSearch(search, true);\n    }\n  }\n\n  copyChangedProps() {\n    const tempNode = document.createElement('textarea');\n    tempNode.value = serializeChangedProps();\n    document.body.appendChild(tempNode);\n    tempNode.select();\n    document.execCommand('copy');\n    document.body.removeChild(tempNode);\n  }\n\n  render() {\n    const {search} = this.state;\n    return (\n      <div className=\"Manage\">\n        <input\n          type=\"search\"\n          className=\"search\"\n          placeholder=\"Filter props…\"\n          value={search}\n          onChange={(e) => {\n            // eslint-disable-next-line react/destructuring-assignment\n            const isStarted = this.state.search === '';\n            this.setState({search: e.target.value});\n            updateSearch(e.target.value, isStarted);\n            saveField('search', e.target.value);\n          }}\n        />\n        <input\n          type=\"button\"\n          className=\"copy\"\n          value=\"Copy changes\"\n          onClick={() => this.copyChangedProps()}\n        />\n        <input\n          type=\"button\"\n          className=\"reset\"\n          value=\"Reset to saved\"\n          onClick={() => resetChangedProps()}\n        />\n        <div className={search === '' ? '' : 'searching'} ref={this.ref} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './DoubleEnder.css';\n\nconst semiFloor = (n) => {\n  return Math.floor(2 * n) / 2;\n};\n\nconst semiCeil = (n) => {\n  return Math.ceil(2 * n) / 2;\n};\n\nexport default class DoubleEnder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dragging: null,\n      lastDrag: null,\n    };\n\n    this.trackRef = React.createRef();\n    this.cursorRef = React.createRef();\n  }\n\n  componentDidMount() {\n    // force track ref to have getBoundingClientRect\n    // eslint-disable-next-line react/no-unused-state\n    this.setState({refreshDimensions: true});\n\n    window.addEventListener('resize', this.didResize);\n\n    window.game.updateReplayCursor = (frame, replay) => {\n      this.updateCursor(frame, replay);\n    };\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.didResize);\n    delete window.game.updateReplayCursor;\n  }\n\n  didResize = () => {\n    this.forceUpdate();\n  };\n\n  updateCursor(frame, replay) {\n    const {replayTimestamp} = this.props;\n    if (!this.cursorRef.current || !this.trackRef.current) {\n      return;\n    }\n\n    if (frame && replay && replay.timestamp === replayTimestamp) {\n      const {min, max} = this.props;\n      const trackWidth = this.trackRef.current.getBoundingClientRect().width;\n      const cursorPercent = Math.max(0, Math.min(1, (frame - min) / (max - min)));\n      this.cursorRef.current.style.left = `${semiFloor(cursorPercent * trackWidth)}px`;\n      this.cursorRef.current.style.display = 'block';\n    } else {\n      this.cursorRef.current.style.display = 'none';\n    }\n  }\n\n  render() {\n    const {\n      min, max, value1, value2, onChange1, onChange2,\n      onMouseUp, onMouseEnter, onMouseMove, onMouseLeave,\n      onBeginChange, onEndChange, notches, highlight1, highlight2,\n      cursor,\n    } = this.props;\n    const {dragging, lastDrag} = this.state;\n    const sliderWidth = 16;\n\n    const trackDimensions = this.trackRef.current && this.trackRef.current.getBoundingClientRect();\n    const trackLeft = trackDimensions ? trackDimensions.left : 0;\n    const trackWidth = trackDimensions ? trackDimensions.width : 100;\n    const percent1 = Math.max(0, Math.min(1, (value1 - min) / (max - min)));\n    const percent2 = Math.max(0, Math.min(1, (value2 - min) / (max - min)));\n    const highlightPercent1 = Math.max(0, Math.min(1, (highlight1 - min) / (max - min)));\n    const highlightPercent2 = Math.max(0, Math.min(1, (highlight2 - min) / (max - min)));\n    const cursorPercent = Math.max(0, Math.min(1, (cursor - min) / (max - min)));\n\n    return (\n      <div className=\"DoubleEnder\" onMouseUp={onMouseUp} onMouseEnter={onMouseEnter} onMouseMove={onMouseMove} onMouseLeave={onMouseLeave}>\n        <div className=\"track\" ref={this.trackRef} />\n        <div\n          style={{\n            left: `${semiFloor(percent1 * trackWidth)}px`,\n            right: `${semiCeil(trackWidth - percent2 * trackWidth)}px`,\n          }}\n          className=\"track selected\"\n        />\n        <div\n          style={{\n            left: `${semiFloor(highlightPercent1 * trackWidth)}px`,\n            right: `${semiCeil(trackWidth - highlightPercent2 * trackWidth)}px`,\n          }}\n          className=\"track highlighted\"\n        />\n        <div\n          style={{\n            left: `${semiFloor(cursorPercent * trackWidth)}px`,\n            display: cursor === null ? 'none' : 'block',\n          }}\n          className=\"cursor highlighted\"\n          ref={this.cursorRef}\n        />\n        {notches.map(({value, title}) => {\n          const isSelected = (value >= value1 && value <= value2) || (value >= value2 && value <= value1);\n          const isHighlighted = (value >= highlight1 && value <= highlight2) || (value >= highlight2 && value <= highlight1);\n          const percent = Math.max(0, Math.min(1, (value - min) / (max - min)));\n          const classes = ['notch'];\n          if (isHighlighted) {\n            classes.push('highlighted');\n          } else if (isSelected) {\n            classes.push('selected');\n          }\n\n          return (\n            <div\n              key={value}\n              title={title}\n              className={classes.join(' ')}\n              style={{\n                left: `${semiFloor(percent * trackWidth)}px`,\n              }}\n            >\n              {' '}\n            </div>\n          );\n        })}\n        {[1, 2].map((index) => {\n          let i = index;\n          const value = i === 1 ? value1 : value2;\n          let opposite = i === 1 ? 2 : 1;\n          const oppositeValue = opposite === 1 ? value1 : value2;\n          const percent = Math.max(0, Math.min(1, (value - min) / (max - min)));\n\n          return (\n            <div\n              key={i}\n              style={{\n                left: `${semiFloor(percent * (trackWidth - sliderWidth))}px`,\n                zIndex: i === lastDrag ? 5 : 4,\n              }}\n              className={`slider slider${i} ${dragging === i ? 'dragging' : ''}`}\n              onMouseDown={(e) => {\n                const originalX = e.clientX - e.target.getBoundingClientRect().left;\n\n                if (onBeginChange) {\n                  onBeginChange();\n                }\n                let onChange = i === 1 ? onChange1 : onChange2;\n\n                this._dragListener = ({clientX}) => {\n                  const newPercent = (clientX - trackLeft - originalX) / (trackWidth - sliderWidth);\n                  const rawValue = min + newPercent * (max - min);\n                  const newValue = Math.min(max, Math.max(min, rawValue));\n\n                  if ((i === 1 && newValue > oppositeValue) || (i === 2 && newValue < oppositeValue)) {\n                    if (onChange) {\n                      onChange(oppositeValue);\n                    }\n\n                    i = opposite;\n                    opposite = i === 1 ? 2 : 1;\n                    onChange = i === 1 ? onChange1 : onChange2;\n                    this.setState({dragging: i, lastDrag: i});\n                  } else if (onChange) {\n                    onChange(newValue);\n                  }\n                };\n\n                // eslint-disable-next-line no-shadow\n                this._upListener = (e) => {\n                  this._dragListener(e);\n\n                  window.removeEventListener('mousemove', this._dragListener);\n                  delete this._dragListener;\n\n                  window.removeEventListener('mouseup', this._upListener);\n                  delete this._upListener;\n\n                  this.setState({dragging: null});\n\n                  if (onEndChange) {\n                    onEndChange();\n                  }\n                };\n\n                window.addEventListener('mousemove', this._dragListener);\n                window.addEventListener('mouseup', this._upListener);\n\n                this.setState({dragging: i, lastDrag: i});\n              }}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Replay.css';\nimport {saveField, loadField} from './lib/store';\nimport DoubleEnder from './DoubleEnder';\n\nconst ReplayEditFields = [\n  'metadata', // must be first\n  'commands',\n  'sceneSaveState',\n  'sceneTransitions',\n];\n\nexport default class Replay extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const replays = loadField('replays', []);\n\n    // migrate old replays\n    replays.forEach((replay) => {\n      if (replay.preflight) {\n        replay.commands = [\n          ...replay.preflight,\n          ...(replay.commands || []),\n        ];\n        replay.preflightCutoff = replay.preflight.reduce((cutoff, frame) => cutoff + (frame._repeat || 1), 0);\n        delete replay.preflight;\n      }\n\n      if (!('tickCount' in replay)) {\n        replay.tickCount = replay.commands.reduce((cutoff, frame) => cutoff + (frame._repeat || 1), 0);\n      }\n\n      if (!('originalPreflightCutoff' in replay)) {\n        replay.originalPreflightCutoff = replay.preflightCutoff;\n      }\n\n      if (!('postflightCutoff' in replay)) {\n        replay.postflightCutoff = replay.tickCount;\n      }\n    });\n\n    this.state = {\n      replays,\n      activeRecording: null,\n      activeReplay: loadField('activeReplay', null),\n      tweaking: loadField('tweaking', null),\n      editing: loadField('editing', null),\n      repeat: loadField('repeat', true),\n    };\n  }\n\n  componentDidMount() {\n    this.beginAutoReplay();\n    this.installGameCallbacks();\n  }\n\n  componentDidUpdate(prevProps) {\n    const {activateGame} = this.props;\n    if (activateGame !== prevProps.activateGame) {\n      this.installGameCallbacks();\n      this.beginAutoReplay();\n    }\n  }\n\n  setEditing(editing) {\n    this.setState({editing});\n    saveField('editing', editing);\n  }\n\n  setActiveReplay(activeReplay) {\n    this.setState({activeReplay});\n    saveField('activeReplay', activeReplay);\n  }\n\n  beginReplay(replay, clearOtherEditing) {\n    const {activateGame} = this.props;\n    const {editing} = this.state;\n    activateGame(() => {\n      const {activeReplay} = this.state;\n      let transition;\n\n      if (activeReplay) {\n        if (activeReplay.timestamp === replay.timestamp && !activeReplay.timeSight && replay.timeSight) {\n          transition = window.game.topScene()._replayLatestTransition;\n        }\n\n        window.game.stopReplay();\n      }\n\n      if (clearOtherEditing && editing !== replay.timestamp) {\n        this.setEditing(null);\n      }\n\n      window.game.beginReplay(replay, {\n        startFromTransition: transition,\n      });\n    });\n  }\n\n  stopReplay() {\n    const {activateGame} = this.props;\n    activateGame(() => {\n      window.game.stopReplay();\n    });\n  }\n\n  beginRecording(options) {\n    const {activateGame} = this.props;\n    this.setEditing(null);\n\n    activateGame(() => {\n      window.game.beginRecording(options);\n    });\n  }\n\n  stopRecording() {\n    const {activateGame} = this.props;\n    activateGame(() => {\n      window.game.stopRecording();\n    });\n  }\n\n  trashRecording() {\n    this._trashNextRecording = true;\n    this.stopRecording();\n  }\n\n  toggleTimeSight() {\n    const {activeReplay} = this.state;\n    this.beginReplay({...activeReplay, timeSight: !activeReplay.timeSight}, true);\n  }\n\n  toggleRepeat() {\n    this.setState(({repeat}) => {\n      setTimeout(() => {\n        saveField('repeat', !repeat);\n      });\n\n      return {\n        repeat: !repeat,\n      };\n    });\n  }\n\n  saveReplays() {\n    setTimeout(() => {\n      const {replays, activeReplay, editing} = this.state;\n      saveField('replays', replays);\n      saveField('editing', editing);\n      saveField('activeReplay', activeReplay);\n    });\n  }\n\n  finishEdit(replay, skipFocus) {\n    this.setEditing(null);\n    this.saveReplays();\n  }\n\n  beginAutoReplay() {\n    const {activateGame} = this.props;\n    const {activeReplay} = this.state;\n\n    if (!activateGame) {\n      return;\n    }\n\n    if (!activeReplay) {\n      return;\n    }\n\n    this.beginReplay(activeReplay);\n  }\n\n  installGameCallbacks() {\n    const {game} = window;\n    if (!game || game.onRecordBegin) {\n      return;\n    }\n\n    game.onRecordBegin = (activeRecording) => {\n      this.setState({activeRecording});\n    };\n\n    game.onRecordStop = (replay) => {\n      this.setState({activeRecording: null});\n\n      if (this._trashNextRecording) {\n        delete this._trashNextRecording;\n        return;\n      }\n\n      this.setState(({replays}) => {\n        const newReplays = [replay, ...replays];\n\n        setTimeout(() => {\n          saveField('replays', newReplays);\n\n          if (!replay.snapshot) {\n            this.beginReplay(replay);\n          }\n        });\n\n        return {\n          replays: newReplays,\n        };\n      });\n    };\n\n    game.onReplayBegin = (replay) => {\n      if (!replay.snapshot) {\n        this.setActiveReplay(replay);\n      }\n    };\n\n    game.onReplayEnd = (replay) => {\n      const {repeat} = this.state;\n\n      if (repeat && !replay.snapshot) {\n        setTimeout(() => {\n          // eslint-disable-next-line react/destructuring-assignment\n          this.beginReplay(this.state.activeReplay);\n        });\n      } else {\n        this.setActiveReplay(null);\n      }\n    };\n\n    game.onReplayStop = (replay) => {\n      this.setActiveReplay(null);\n    };\n  }\n\n  updateReplay({timestamp}, changes, beginReplay) {\n    this.setState(({activeReplay, replays}) => {\n      let newReplay;\n      const newState = {\n        replays: replays.map((replay) => {\n          if (replay.timestamp === timestamp) {\n            newReplay = {\n              ...replay,\n              ...changes,\n            };\n            return newReplay;\n          }\n          return replay;\n        }),\n      };\n\n      if (activeReplay && activeReplay.timestamp === timestamp) {\n        newState.activeReplay = {\n          ...activeReplay,\n          ...changes,\n        };\n      }\n\n      if (newReplay && beginReplay) {\n        setTimeout(() => {\n          this.beginReplay({\n            ...newReplay,\n            timeSight: activeReplay && activeReplay.timeSight,\n          });\n        });\n      }\n\n      return newState;\n    });\n  }\n\n  editName(replay, name, beginReplay) {\n    this.updateReplay(replay, {name}, beginReplay);\n  }\n\n  editPreflightCutoff(replay, preflightCutoff, beginReplay) {\n    const snapshot = preflightCutoff > replay.postflightCutoff * 0.99;\n    this.updateReplay(replay, {preflightCutoff, snapshot}, beginReplay);\n  }\n\n  editPostflightCutoff(replay, postflightCutoff, beginReplay) {\n    const snapshot = replay.preflightCutoff > postflightCutoff * 0.99;\n    this.updateReplay(replay, {postflightCutoff, snapshot}, beginReplay);\n  }\n\n  editCutoffs(replay, preflightCutoff, postflightCutoff, beginReplay) {\n    const snapshot = preflightCutoff > postflightCutoff * 0.99;\n    this.updateReplay(replay, {preflightCutoff, postflightCutoff, snapshot}, beginReplay);\n  }\n\n  deleteReplay({timestamp}) {\n    this.setState(({activeReplay, replays}) => {\n      const newReplays = replays.filter((replay) => replay.timestamp !== timestamp);\n\n      setTimeout(() => {\n        saveField('replays', newReplays);\n      });\n\n      if (activeReplay && activeReplay.timestamp === timestamp) {\n        setTimeout(() => this.stopReplay());\n      }\n\n      return {replays: newReplays};\n    });\n  }\n\n  copyReplay(replay) {\n    const newReplay = {\n      ...replay,\n      timestamp: Date.now(),\n      name: `Copy of ${replay.name}`,\n    };\n\n    this.setState(({replays}) => {\n      const newReplays = [newReplay, ...replays];\n\n      setTimeout(() => {\n        saveField('replays', newReplays);\n      });\n\n      return {replays: newReplays};\n    });\n  }\n\n  cutoffTimeSightEnter() {\n    window.game.cutoffTimeSightEnter();\n  }\n\n  cutoffTimeSightChanged(start, end) {\n    window.game.cutoffTimeSightChanged(start, end);\n  }\n\n  cutoffTimeSightLeave() {\n    window.game.cutoffTimeSightLeave();\n  }\n\n  tweakReplay(replay) {\n    const metadata = {...replay};\n    const tweaking = {replay};\n    ReplayEditFields.forEach((field) => {\n      if (field !== 'metadata') {\n        tweaking[field] = JSON.stringify(metadata[field], null, 2);\n        delete metadata[field];\n      }\n    });\n    tweaking.metadata = JSON.stringify(metadata, null, 2);\n\n    ReplayEditFields.forEach((field) => {\n      tweaking[`${field}_original`] = tweaking[field];\n    });\n\n    this.setState({tweaking});\n    saveField('tweaking', tweaking);\n  }\n\n  updateTweak(field, value) {\n    this.setState(({tweaking}) => {\n      const t = {\n        ...tweaking,\n        [field]: value,\n        [`${field}_error`]: null,\n        [`${field}_changed`]: value !== tweaking[`${field}_original`],\n      };\n\n      setTimeout(() => saveField('tweaking', t));\n\n      return {tweaking: t};\n    });\n  }\n\n  revertTweak(field) {\n    // eslint-disable-next-line react/destructuring-assignment\n    this.updateTweak(field, this.state.tweaking[`${field}_original`]);\n  }\n\n  discardTweaks() {\n    setTimeout(() => { saveField('tweaking', null); });\n    this.setState({\n      tweaking: null,\n    });\n  }\n\n  saveTweaks() {\n    this.setState(({tweaking}) => {\n      let replay;\n      let sawError = false;\n      const newState = {...tweaking};\n\n      ReplayEditFields.forEach((field) => {\n        try {\n          const value = JSON.parse(tweaking[field]);\n          if (field === 'metadata') {\n            replay = value;\n          } else if (replay) {\n            replay[field] = value;\n          }\n\n          newState[`${field}_error`] = null;\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n          sawError = true;\n          newState[`${field}_error`] = e.toString();\n        }\n      });\n\n      if (sawError) {\n        setTimeout(() => { saveField('tweaking', newState); });\n        return {tweaking: newState};\n      } else {\n        setTimeout(() => {\n          this.updateReplay(tweaking.replay, replay, false);\n          setTimeout(() => { saveField('tweaking', null); });\n        });\n\n        return {tweaking: null};\n      }\n    });\n  }\n\n  renderEditReplay(replay) {\n    const {activeReplay} = this.state;\n    let highlight1 = null;\n    let highlight2 = null;\n\n    const {game} = window;\n    const scene = game && game.topScene();\n    let cursor = scene && scene.command ? scene.command.replayTicks : null;\n\n    if (activeReplay && activeReplay.timestamp !== replay.timestamp) {\n      cursor = null;\n    }\n\n    if (activeReplay && activeReplay.timestamp === replay.timestamp && activeReplay.timeSight) {\n      cursor = null;\n\n      const {sceneTransitions} = replay;\n      if (!sceneTransitions || sceneTransitions.length === 0) {\n        highlight1 = replay.preflightCutoff;\n        highlight2 = replay.postflightCutoff;\n      } else {\n        const latestTransition = scene && scene._replayLatestTransition;\n        if (!scene) {\n          // if we haven't rendered yet, the default is preflightCutoff until the next scene transition\n          highlight1 = replay.preflightCutoff;\n          for (let i = 0; i < sceneTransitions.length; i += 1) {\n            if (sceneTransitions[i].tickCount > highlight1) {\n              highlight2 = Math.min(replay.postflightCutoff, sceneTransitions[i].tickCount);\n              break;\n            }\n          }\n        } else if (!latestTransition) {\n          // no transition yet, so take the first segment\n          highlight1 = replay.preflightCutoff;\n          highlight2 = Math.min(replay.postflightCutoff, sceneTransitions[0].tickCount);\n        } else {\n          // take the intersection of the scene's ticks and pre/post flight\n          const firstTick = latestTransition ? (latestTransition.tickCount || 0) : 0;\n          let lastTick = replay.postflightCutoff;\n\n          highlight1 = Math.max(firstTick, replay.preflightCutoff);\n\n          for (let i = 0; i < sceneTransitions.length; i += 1) {\n            if (sceneTransitions[i].tickCount >= firstTick) {\n              if (i + 1 < sceneTransitions.length) {\n                lastTick = sceneTransitions[i + 1].tickCount;\n              }\n              break;\n            }\n          }\n\n          highlight2 = Math.min(lastTick, replay.postflightCutoff);\n        }\n      }\n\n      if (highlight1 > highlight2) {\n        highlight1 = highlight2 = null;\n      }\n    }\n\n    return (\n      <form onSubmit={(e) => {\n        e.preventDefault();\n        this.finishEdit(replay);\n      }}\n      >\n        <input\n          type=\"text\"\n          autoFocus\n          value={replay.name}\n          onChange={(e) => this.editName(replay, e.target.value)}\n        />\n        <span\n          className=\"play button\"\n          title=\"Load snapshot (load state)\"\n          onClick={() => this.beginReplay({...replay, snapshot: true, commands: []})}\n        >\n          🎆\n        </span>\n        <span className=\"tweak button\" title=\"Tweak replay\" onClick={() => this.tweakReplay(replay)}>ℹ</span>\n        <span className=\"copy button\" title=\"Copy replay\" onClick={() => this.copyReplay(replay)}>🔃</span>\n        <span className=\"delete button\" title=\"Delete replay\" onClick={() => this.deleteReplay(replay)}>🚮</span>\n        <span className=\"detail\">\n          {replay.preflightCutoff}\n-\n          {replay.postflightCutoff}\n          {replay.postflightCutoff !== replay.tickCount && ` / ${replay.tickCount}`}\n        </span>\n        <br />\n        <DoubleEnder\n          min={0}\n          max={replay.tickCount}\n          value1={replay.preflightCutoff}\n          value2={replay.postflightCutoff}\n          highlight1={highlight1}\n          highlight2={highlight2}\n          cursor={cursor}\n          notches={(replay.sceneTransitions || []).map((t) => ({value: t.tickCount, title: 'Scene transition'}))}\n          replayTimestamp={replay.timestamp}\n          onMouseEnter={(e) => {\n            this._inCutoffs = true;\n            if (activeReplay && activeReplay.timeSight && activeReplay.timestamp === replay.timestamp) {\n              this.cutoffTimeSightEnter();\n            }\n          }}\n          onMouseLeave={(e) => {\n            this._inCutoffs = false;\n            if (activeReplay && activeReplay.timeSight && activeReplay.timestamp === replay.timestamp) {\n              if (!this._changingCutoffs) {\n                this.cutoffTimeSightLeave();\n              }\n              this.saveReplays();\n            }\n          }}\n          onBeginChange={(e) => {\n            this._changingCutoffs = true;\n          }}\n          onEndChange={(e) => {\n            this._changingCutoffs = false;\n\n            if (activeReplay && activeReplay.timeSight && activeReplay.timestamp === replay.timestamp) {\n              if (!this._inCutoffs) {\n                this.cutoffTimeSightLeave();\n              }\n              this.saveReplays();\n            } else {\n              setTimeout(() => {\n                const {replays} = this.state;\n                const newReplay = replays.find((r) => r.timestamp === replay.timestamp);\n                this.beginReplay(newReplay);\n                this.saveReplays();\n              });\n            }\n          }}\n          onChange1={(preflight) => {\n            this.editPreflightCutoff(replay, Math.floor(preflight));\n            if (activeReplay && activeReplay.timeSight && activeReplay.timestamp === replay.timestamp) {\n              setTimeout(() => {\n                // eslint-disable-next-line react/destructuring-assignment\n                this.cutoffTimeSightChanged(Math.floor(preflight), this.state.activeReplay.postflightCutoff);\n              });\n            }\n          }}\n          onChange2={(postflight) => {\n            this.editPostflightCutoff(replay, Math.floor(postflight));\n            if (activeReplay && activeReplay.timeSight && activeReplay.timestamp === replay.timestamp) {\n              setTimeout(() => {\n                // eslint-disable-next-line react/destructuring-assignment\n                this.cutoffTimeSightChanged(this.state.activeReplay.preflightCutoff, Math.floor(postflight));\n              });\n            }\n          }}\n        />\n        {(replay.preflightCutoff !== replay.originalPreflightCutoff || replay.postflightCutoff !== replay.tickCount) && (\n          <input\n            type=\"button\"\n            onClick={(e) => {\n              e.preventDefault();\n              this.editCutoffs(replay, replay.originalPreflightCutoff, replay.tickCount, true);\n            }}\n            value=\"⤺\"\n          />\n        )}\n      </form>\n    );\n  }\n\n  renderTweaking() {\n    const {tweaking} = this.state;\n\n    return (\n      <div className=\"Replay tweaking\">\n        <div className=\"controls tweaking\">\n          <span className=\"button\" title=\"Cancel tweaks\" onClick={() => this.discardTweaks()}>🚮</span>\n          <span className=\"button\" title=\"Save tweaks\" onClick={() => this.saveTweaks()}>🆙</span>\n        </div>\n        <div className=\"fields\">\n          {ReplayEditFields.map((field) => (\n            <div\n              key={field}\n              className={`field ${tweaking[`${field}_error`] ? 'error' : ''} ${tweaking[`${field}_changed`] ? 'changed' : ''}`}\n            >\n              <label>\n                {field}\n                {' '}\n                <span\n                  style={{visibility: tweaking[`${field}_changed`] ? 'visible' : 'hidden'}}\n                  className=\"button\"\n                  title=\"Discard these tweaks\"\n                  onClick={() => this.revertTweak(field)}\n                >\n                  🚮\n                </span>\n              </label>\n              {tweaking[`${field}_error`] && (\n                <span className=\"info\">{tweaking[`${field}_error`]}</span>\n              )}\n              <textarea value={tweaking[field]} onChange={(e) => this.updateTweak(field, e.target.value)} />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      replays, activeRecording, activeReplay, editing, repeat, tweaking,\n    } = this.state;\n\n    if (tweaking) {\n      return this.renderTweaking();\n    }\n\n    return (\n      <div className=\"Replay\">\n        <div className={`controls ${activeReplay ? 'active-replay' : ''} ${activeReplay && activeReplay.timeSight ? 'timeSight' : ''}`}>\n          {activeReplay && (\n            <React.Fragment>\n\n              <span\n                className={`button repeat ${repeat ? 'repeat-on' : 'repeat-off'}`}\n                title={repeat ? 'Disable automatic repeat' : 'Enable automatic repeat'}\n                onClick={() => this.toggleRepeat()}\n              >\n                🔁\n              </span>\n              <span className=\"button\" title=\"Stop replay\" onClick={() => this.stopReplay()}>⏹</span>\n              {activeReplay.timeSight && (\n                <span className=\"button\" title=\"Disable timeSight\" onClick={() => this.toggleTimeSight()}>📺</span>\n              )}\n              {!activeReplay.timeSight && (\n                <span className=\"button\" title=\"Enable timeSight\" onClick={() => this.toggleTimeSight()}>⚛</span>\n              )}\n            </React.Fragment>\n          )}\n          {!activeReplay && (\n            activeRecording ? (\n              <React.Fragment>\n                <span className=\"recording button\" title=\"Stop recording\" onClick={() => this.stopRecording()}>⏺️</span>\n                <span className=\"button\" title=\"Discard recording\" onClick={() => this.trashRecording()}>🚮</span>\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                <span className=\"record button\" title=\"Start recording replay\" onClick={() => this.beginRecording()}>🎦</span>\n                <span className=\"snapshot button\" title=\"Take snapshot (save state)\" onClick={() => this.beginRecording({snapshot: true})}>🎆</span>\n              </React.Fragment>\n            )\n          )}\n        </div>\n        <ul className=\"replays\">\n          {replays.map((replay) => (\n            <li\n              className={`\n                replay\n                ${activeReplay && activeReplay.timestamp === replay.timestamp ? 'active' : ''}\n                ${editing === replay.timestamp ? 'editing' : ''}\n              `}\n              key={replay.timestamp}\n            >\n              <span className=\"drag\">⋮⋮</span>\n              {activeReplay && activeReplay.timeSight && activeReplay.timestamp === replay.timestamp && (\n                <span className=\"play button\" title=\"Restart timeSight\" onClick={() => this.beginReplay({...replay, timeSight: true}, true)}>⚛</span>\n              )}\n              {activeReplay && !activeReplay.timeSight && activeReplay.timestamp === replay.timestamp && (\n                <span className=\"play button\" title=\"Restart replay\" onClick={() => this.beginReplay(replay, true)}>📺</span>\n              )}\n              {(!activeReplay || activeReplay.timestamp !== replay.timestamp) && !replay.snapshot && (\n                <span className=\"play button\" title=\"Start replay\" onClick={() => this.beginReplay(replay, true)}>▶️</span>\n              )}\n              {(!activeReplay || activeReplay.timestamp !== replay.timestamp) && replay.snapshot && (\n                <span className=\"play button\" title=\"Load snapshot (load state)\" onClick={() => this.beginReplay(replay, true)}>🎆</span>\n              )}\n              {editing === replay.timestamp && (\n                this.renderEditReplay(replay)\n              )}\n              <span className=\"name\" onClick={() => this.beginReplay(replay, true)}>{replay.name}</span>\n              <span className=\"edit button\" title=\"Edit replay\" onClick={() => this.setEditing(replay.timestamp)}>ℹ</span>\n            </li>\n          ))}\n        </ul>\n\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Logging.css';\nimport {saveField, loadField} from './lib/store';\n\nexport default class Logging extends React.Component {\n  constructor(props) {\n    super(props);\n    const log = loadField('log', []).map((line) => ({...line, recent: false, old: true}));\n    this.state = {\n      log,\n    };\n    this.logId = 1 + Number(log.map(({id}) => id).reduce((a, b) => (a > b ? a : b), 0));\n    this.timers = [];\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    this.original = {};\n    const component = this;\n    ['trace', 'debug', 'log', 'info', 'warn', 'error'].forEach((level) => {\n      // eslint-disable-next-line no-console\n      const original = this.original[level] = console[level];\n      // eslint-disable-next-line no-console\n      console[level] = function(...args) {\n        const context = component.extractContext(...args);\n        component.prependLog(args.join(' '), level, context);\n        return original(...args);\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const {game} = this.props;\n    if (!prevProps.game && game) {\n      game.onDisableDebugUI(() => {\n        this.removeLogging();\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeLogging();\n  }\n\n  removeLogging() {\n    this.timers.forEach((timer) => {\n      clearTimeout(timer);\n    });\n\n    Object.entries(this.original).forEach(([level, original]) => {\n      // eslint-disable-next-line no-console\n      console[level] = original;\n    });\n  }\n\n  extractContext(msg) {\n    if (msg instanceof Error) {\n      const {stack} = msg;\n      const match = stack.match(/ at (\\w+) \\(http/);\n      if (match) {\n        return match[1];\n      }\n    }\n    return null;\n  }\n\n  prependLog(originalMsg, level, context) {\n    const msg = originalMsg.replace(/^Error: /, '');\n\n    if (msg.match(/https:\\/\\/phaser\\.io/)) {\n      return;\n    }\n\n    const id = (this.logId += 1);\n\n    {\n      const timer = setTimeout(() => {\n        this.setState(({log}) => ({\n          log: log.map((line) => (line.id === id ? {...line, recent: true} : line)),\n        }));\n      }, 500);\n\n      this.timers.push(timer);\n    }\n\n    {\n      const timer = setTimeout(() => {\n        this.setState(({log}) => ({\n          log: log.map((line) => (line.id === id ? {...line, recent: false, old: true} : line)),\n        }));\n      }, 5000);\n\n      this.timers.push(timer);\n    }\n\n    this.ref.current.scrollTop = 0;\n\n    this.setState(({log}) => {\n      const newLog = [\n        {\n          msg, level, id, context,\n        },\n        ...log.filter((_, n) => n < 19),\n      ];\n\n      setTimeout(() => {\n        saveField('log', newLog);\n      });\n\n      return {\n        log: newLog,\n      };\n    });\n  }\n\n  render() {\n    const {log} = this.state;\n    return (\n      <div className=\"Logging\" ref={this.ref}>\n        <ol>\n          {log.map(({\n            msg, level, id, recent, old, context,\n          }) => (\n            <li key={id} className={`${level} ${recent ? 'recent' : ''} ${old ? 'old' : ''}`}>\n              <span className=\"level\">{level}</span>\n              <span className=\"msg\">{msg}</span>\n              {context && (\n                <span className=\"context\">\n                  {context}\n                </span>\n              )}\n            </li>\n          ))}\n        </ol>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Development.css';\nimport Engine from './Engine';\nimport Manage from './Manage';\nimport Replay from './Replay';\nimport Logging from './Logging';\nimport {developmentDisplay} from '../../package.json';\n\nexport default class Development extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      game: null,\n      activateGame: null,\n    };\n  }\n\n  loadedGame = (game, activateGame) => {\n    window.game = game;\n    this.setState({game, activateGame});\n  }\n\n  render() {\n    const {game, activateGame} = this.state;\n\n    return (\n      <div className=\"development\">\n        <Engine\n          debug\n          loadedGame={this.loadedGame}\n        />\n\n        <Logging game={game} />\n\n        <div className=\"sidebar\">\n          <ul className=\"links\">\n            {developmentDisplay.links.map(([href, label]) => (\n              <li key={href}>\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href={href}>{label}</a>\n              </li>\n            ))}\n          </ul>\n\n          <Manage />\n          <Replay activateGame={activateGame} />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Production.css';\nimport Engine from './Engine';\nimport twitchLogo from './twitchLogo.png';\nimport twitterLogo from './twitterLogo.png';\nimport {productionDisplay} from '../../package.json';\n\nexport default class Production extends React.Component {\n  render() {\n    return (\n      <div className=\"production\">\n        <Engine />\n\n        <div className=\"game-metadata\">\n          <h1>{productionDisplay.displayName}</h1>\n          {productionDisplay.authorName && (\n            <h3>\n              by\n              <br />\n              {productionDisplay.authorURL ? (\n                <a href={productionDisplay.authorURL}>{productionDisplay.authorName}</a>\n              ) : (\n                productionDisplay.authorName\n              )}\n              <br />\n              {productionDisplay.authorTwitter && (\n                <a href={`https://twitter.com/${productionDisplay.authorTwitter}`}>\n                  <img src={twitterLogo} alt={`@${productionDisplay.authorTwitter} on Twitter`} />\n                </a>\n              )}\n              {productionDisplay.authorTwitch && (\n                <a href={`https://twitch.tv/${productionDisplay.authorTwitch}`}>\n                  <img src={twitchLogo} alt={`${productionDisplay.authorTwitch} on Twitch`} />\n                </a>\n              )}\n            </h3>\n          )}\n          <p>\n            {productionDisplay.eventDescription && (\n              <React.Fragment>\n                {productionDisplay.eventDescription}\n                <br />\n              </React.Fragment>\n            )}\n            {productionDisplay.eventNamePre}\n            {' '}\n            <strong>{productionDisplay.eventNameBold}</strong>\n            {' '}\n            {productionDisplay.eventNamePost}\n          </p>\n          {productionDisplay.eventURL && (\n            <p>\n              <a href={productionDisplay.eventURL}>\n                {productionDisplay.eventURL}\n              </a>\n            </p>\n          )}\n          <p>\n            {productionDisplay.themeDescription && (\n              <React.Fragment>\n                {productionDisplay.themeDescription}\n                <br />\n              </React.Fragment>\n            )}\n            {productionDisplay.themePre}\n            {' '}\n            <em>{productionDisplay.themeItalic}</em>\n            {' '}\n            {productionDisplay.themePost}\n          </p>\n          {productionDisplay.repoURL && (\n            <p>\n              code at\n              <br />\n              <a className=\"url\" href={productionDisplay.repoURL}>\n                {productionDisplay.repoURL}\n              </a>\n            </p>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './Production.css';\nimport Engine from './Engine';\n\nexport default class Embed extends React.Component {\n  render() {\n    return (\n      <div className=\"production embed\">\n        <Engine disableFullscreen />\n      </div>\n    );\n  }\n}\n","import {hot} from 'react-hot-loader/root';\nimport React from 'react';\nimport Development from './Development';\nimport Production from './Production';\nimport Embed from './Embed';\nimport {productionDisplay} from '../../package.json';\n\nclass App extends React.Component {\n  render() {\n    const {debug} = this.props;\n\n    if (productionDisplay.embed) {\n      return <Embed />;\n    } else if (debug) {\n      return <Development />;\n    } else {\n      return <Production />;\n    }\n  }\n}\n\nexport default hot(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './base.css';\nimport App from './App';\n\nconst debug = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n\nReactDOM.render(<App debug={debug} />, document.getElementById('root'));\n","import Phaser from 'phaser';\nimport deepEqual from 'deep-equal';\nimport prop, {\n  propsWithPrefix, manageableProps, tileDefinitions, propSpecs,\n} from '../props';\nimport {updatePropsFromStep, overrideProps, refreshUI} from './lib/manage-gui';\nimport massageParticleProps, {injectEmitterOpSeededRandom, injectParticleEmitterManagerPreUpdate, particlePropFromProp} from './lib/particles';\nimport massageTransitionProps, {baseTransitionProps, applyPause} from './lib/transitions';\nimport {injectAddSpriteTimeScale} from './lib/sprites';\nimport {injectAnimationUpdate} from './lib/anims';\nimport {injectCameraShake} from './lib/camera';\nimport massageTweenProps, {injectTweenManagerAdd} from './lib/tweens';\nimport {shaderTypeMeta, propNamesForUniform} from './lib/shaders';\nimport {saveField, loadField} from './lib/store';\n\nimport {parseMaps, parseLevelLines} from './lib/level-parser';\nimport mapsFile from '../assets/maps.txt';\nimport * as assets from '../assets/index';\nimport {preloadAssets, reloadAssets} from './lib/assets';\n\nconst baseConfig = {\n};\n\nexport default class SuperScene extends Phaser.Scene {\n  constructor(subconfig) {\n    const config = {\n      ...baseConfig,\n      ...subconfig,\n    };\n    super(config);\n\n    this.rnd = {};\n    this.timeScale = 1;\n    this.sounds = [];\n    this.timers = [];\n    this.performanceFrames = 0;\n    this.performanceAcceptable = true;\n    this.scene_time = 0;\n    this.shockwave_time = 0;\n    this._trauma = 0;\n    this._traumaShake = 0;\n    this._paused = {\n      physics: false,\n      particles: false,\n      timers: false,\n      tweens: false,\n      anims: false,\n    };\n  }\n\n  init(config) {\n    const {\n      tileWidth, tileHeight, width, height,\n    } = this.game.config;\n    this.tileWidth = tileWidth;\n    this.tileHeight = tileHeight;\n    this.halfWidth = tileWidth / 2;\n    this.halfHeight = tileWidth / 2;\n\n    if (!config.seed) {\n      throw new Error(`You must provide a \"seed\" (e.g. Date.now()) to ${this.constructor.name}`);\n    }\n\n    if (!config.sceneId) {\n      throw new Error(`You must provide a \"sceneId\" (e.g. Date.now()) to ${this.constructor.name}`);\n    }\n\n    this.sceneId = config.sceneId;\n\n    this.command = this.game.command;\n    this.command.attachScene(this, config._timeSightTarget);\n\n    this.camera = this.cameras.main;\n    this.camera.setBackgroundColor(this.cameraColor());\n    injectCameraShake(this.camera);\n\n    if (config.save) {\n      this.save = config.save;\n    } else if (!this.save && this.saveStateFieldName()) {\n      this.save = loadField(this.saveStateFieldName(), () => {\n        const save = this.initialSaveState();\n        save.version = this.saveStateVersion();\n        return save;\n      });\n    }\n\n    if (this.save) {\n      this.save = this.migrateSaveState(this.save);\n    }\n\n    if (!this.save) {\n      this.save = {};\n    }\n\n    this._initialSave = JSON.parse(JSON.stringify(this.save));\n\n    if (this.physics && this.physics.world) {\n      injectAddSpriteTimeScale(this);\n      injectTweenManagerAdd(this.tweens);\n\n      if (prop('scene.debugDraw')) {\n        this.physics.world.createDebugGraphic();\n      }\n\n      // there's no event for physics step, so interject one {\n      if (this.fixedUpdate) {\n        // make tweens use a fixed update\n        const {tweens} = this.scene.systems;\n        const eventEmitter = tweens.systems.events;\n        eventEmitter.off('update', tweens.update, tweens);\n\n        const {physics} = this;\n        const {world} = physics;\n        const originalStep = world.step;\n        let time = 0;\n        physics.time = physics.dt = 0;\n        world.step = (originalDelta) => {\n          const delta = originalDelta / world.timeScale;\n\n          const dt = delta * 1000;\n          time += dt;\n          physics.dt = dt;\n          physics.time = time;\n          this.scene_time = time;\n\n          if (this.game._stepExceptions > 100) {\n            return;\n          }\n\n          try {\n            const isTopScene = this.isTopScene();\n\n            if (this.timeSightFrozen) {\n              if (isTopScene) {\n                this.command.processInput(this, time, dt, true);\n              }\n              this.updateTweens(time, dt);\n              this.timeSightMouseDrag();\n              return;\n            }\n\n            if (!this._paused.physics) {\n              originalStep.call(world, delta);\n            }\n\n            if (isTopScene) {\n              this.command.processInput(this, time, dt);\n            }\n\n            if (this.game.updateReplayCursor) {\n              this.game.updateReplayCursor(this.command.replayTicks, this._replay);\n            }\n\n            if (!this._paused.physics) {\n              this.fixedUpdate(time, dt);\n            }\n\n            this.updateTimers(time, dt);\n\n            if (this.performanceProps && this.performanceProps.length) {\n              this.recoverPerformance();\n            }\n\n            this.updateTweens(time, dt);\n\n            this.game._stepExceptions = 0;\n          } catch (e) {\n            // eslint-disable-next-line no-console\n            console.error(e);\n\n            this.game._stepExceptions = (this.game._stepExceptions || 0) + 1;\n            if (this.game._stepExceptions > 100) {\n              // eslint-disable-next-line no-console\n              console.error('Too many errors; pausing update cycle until hot reload');\n            }\n          }\n        };\n      }\n      // }\n    }\n\n    this.sound.pauseOnBlur = false;\n\n    this.particleSystems = [];\n\n    this.sys.events.on('destroy', this.destroy, this);\n\n    ['_recording', '_replay', '_replayOptions'].forEach((key) => {\n      this[key] = config[key];\n      delete config[key];\n    });\n\n    if (this._recording) {\n      this._recording.sceneTransitions.push({\n        tickCount: this._recording.tickCount,\n        timestamp: Date.now(),\n        seed: config.seed,\n        sceneName: this.constructor.name,\n        initData: this.scene.settings.data,\n        sceneSaveState: JSON.parse(JSON.stringify(this._initialSave)),\n        parentSceneId: config.parentSceneId,\n        sceneId: this.sceneId,\n        commandState: this.command.freezeCommandState(),\n      });\n    }\n\n    if (this._replay) {\n      const {sceneTransitions} = this._replay;\n      const {replayTicks} = this.command;\n      for (let i = 0; i < sceneTransitions.length; i += 1) {\n        if (sceneTransitions[i].tickCount <= replayTicks) {\n          this._replayLatestTransition = sceneTransitions[i];\n        } else {\n          break;\n        }\n      }\n    }\n\n    const mapWidth = Math.floor(width / (tileWidth + 2));\n    const mapHeight = Math.floor(height / (tileHeight + 3));\n\n    this.xBorder = (width - (mapWidth * tileWidth)) / 2;\n    this.yBorder = (height - (mapHeight * tileHeight)) / 2;\n\n    this.game.sceneDidInit(this);\n  }\n\n  saveStateFieldName() {\n    return `game_${this.constructor.name}`;\n  }\n\n  saveStateVersion() {\n    return 0;\n  }\n\n  migrateSaveState(originalSave) {\n    const target = this.saveStateVersion();\n    if (originalSave.version === target) {\n      return originalSave;\n    }\n\n    const save = JSON.parse(JSON.stringify(originalSave));\n    if (!save.version) {\n      save.version = 0;\n    }\n\n    while (save.version < target) {\n      const method = `migrateSaveStateVersion${save.version}`;\n      // eslint-disable-next-line no-console\n      console.debug(method);\n      if (!this[method]) {\n        throw new Error(`Missing migration method ${method}`);\n      }\n      this[method](save);\n      save.version += 1;\n    }\n\n    return save;\n  }\n\n  initialSaveState() {\n    return {};\n  }\n\n  saveState() {\n    saveField(this.saveStateFieldName(), this.save);\n  }\n\n  isTopScene() {\n    return this.game.topScene() === this;\n  }\n\n  vendRNG(name) {\n    if (!name) {\n      throw new Error('You must provide a name for each RNG sequence');\n    }\n\n    if (!this.rnd[name]) {\n      const {seed} = this.scene.settings.data;\n      this.rnd[name] = new Phaser.Math.RandomDataGenerator([seed, name]);\n    }\n\n    return this.rnd[name];\n  }\n\n  randFloat(name) {\n    return this.vendRNG(name).frac();\n  }\n\n  randBetween(name, min, max) {\n    return this.randFloat(name) * (max - min) + min;\n  }\n\n  randElement(name, list) {\n    return list[Math.floor(this.randBetween(name, 0, list.length))];\n  }\n\n  create() {\n    this.command.attachInputs(this);\n\n    this.startedAt = new Date();\n\n    if (this.setupAnimations) {\n      this.setupAnimations();\n    }\n\n    const {transition} = this.scene.settings.data;\n    if (!transition || !transition.delayNewSceneShader) {\n      this._setupShader();\n    }\n  }\n\n  setShader(shaderName) {\n    this.shaderName = shaderName;\n    this._setupShader();\n  }\n\n  _setupShader() {\n    if (!('shaderName' in this)) {\n      this.shaderName = 'main';\n    }\n\n    if (this.shaderName) {\n      this.game.initializeShader(this.shaderName);\n      this.shader = this.game.shaderInstance(this.shaderName);\n      if (this.shader) {\n        this._shaderInitialize(true);\n        this._shaderUpdate();\n        this.camera.setRenderToTexture(this.shader);\n      }\n    }\n  }\n\n  preload() {\n    this.load.text('_mapsFile', mapsFile);\n\n    preloadAssets(this, assets);\n  }\n\n  levelIds() {\n    if (!this.game._ldMapFiles) {\n      this.game._ldMapFiles = parseMaps(this.cache.text.get('_mapsFile'));\n    }\n\n    return this.game._ldMapFiles.map(([, config]) => config.id);\n  }\n\n  loadLevel(id) {\n    if (!this.game._ldMapFiles) {\n      this.game._ldMapFiles = parseMaps(this.cache.text.get('_mapsFile'));\n    }\n    const mapFiles = this.game._ldMapFiles;\n\n    let index;\n    let spec = mapFiles[id];\n    if (spec) {\n      index = id;\n    } else {\n      index = mapFiles.findIndex((m) => m[1].id === id);\n      spec = mapFiles[index];\n    }\n\n    if (!spec) {\n      throw new Error(`Cannot find level with id ${id}`);\n    }\n\n    const [lines, config] = spec;\n    const {map, mapText, lookups} = parseLevelLines(lines, this.mapsAreRectangular);\n\n    const {tileWidth, tileHeight} = this;\n    const heightInTiles = map.length;\n    const height = tileHeight * heightInTiles;\n    const widthInTiles = Math.max(...map.map((a) => a.length));\n    const width = tileWidth * widthInTiles;\n\n    const level = {\n      ...config,\n      heightInTiles,\n      widthInTiles,\n      height,\n      width,\n      map,\n      mapText,\n      mapLookups: lookups,\n      index,\n    };\n\n    if (level.background2) {\n      level.background2 = this.add.sprite(0, 0, level.background2);\n      level.background2.setPosition(level.background2.width * 0.5, level.background2.height * 0.5);\n    }\n\n    if (level.background) {\n      level.background = this.add.sprite(0, 0, level.background);\n      level.background.setPosition(level.background.width * 0.5, level.background.height * 0.5);\n    }\n\n    if (level.underground) {\n      this.createUnderground(level.underground);\n    }\n\n    return level;\n  }\n\n  createUnderground(name) {\n    if (this.game.debug) {\n      const template = this.add.image(0, 0, name);\n      const {width, height} = template;\n      template.destroy();\n\n      // eslint-disable-next-line no-bitwise\n      const isPowerOfTwo = (x) => x && !(x & (x - 1));\n      if (!isPowerOfTwo(width) || !isPowerOfTwo(height)) {\n        // eslint-disable-next-line no-console\n        console.error(`Underground ${name} is ${width}x${height}; please use an image having powers-of-two dimensions for best rendering`);\n      }\n    }\n\n    const {\n      width, height, tileWidth, tileHeight,\n    } = this.game.config;\n\n    // Add some fudge because even with late updates to underground position\n    // we still see the background peek through\n    const w = width + 10 * tileWidth;\n    const h = height + 10 * tileHeight;\n    const underground = this.add.tileSprite(w / 2, h / 2, w, h, name);\n    underground.tilePositionX = 0;\n    underground.tilePositionY = 0;\n    this.underground = underground;\n  }\n\n  executeScript(script) {\n    const {execute, delay} = script;\n\n    if (delay) {\n      this.timer(() => {\n        this.executeScript({...script, delay: 0});\n      }, delay);\n      return;\n    }\n\n    if (execute) {\n      if (typeof execute === 'object') {\n        const [method, ...args] = execute;\n        this[method](...args);\n      } else {\n        this[execute]();\n      }\n    }\n  }\n\n  textSize() {\n    return '24px';\n  }\n\n  textColor() {\n    return 'rgb(255, 0, 0)';\n  }\n\n  strokeColor() {\n    return 'rgb(0, 0, 0)';\n  }\n\n  strokeWidth() {\n    return 6;\n  }\n\n  cameraColor() {\n    return 0x000000;\n  }\n\n  text(x, y, text, options = {}) {\n    const label = this.add.text(\n      x,\n      y,\n      text,\n      {\n        fontFamily: '\"Avenir Next\", \"Avenir\", \"Helvetica Neue\", \"Helvetica\", \"Arial\"',\n        fontWeight: 'bold',\n        fontSize: this.textSize(options),\n        color: this.textColor(options),\n        ...options,\n      },\n    );\n\n    if (options.stroke !== null) {\n      if (options.stroke === undefined) {\n        label.setStroke(this.strokeColor(options), this.strokeWidth(options));\n      } else {\n        label.setStroke(...options.stroke);\n      }\n    }\n\n    return label;\n  }\n\n  speak(...args) {\n    let delay = 0;\n\n    let xc = args.shift();\n    let yc;\n\n    if (xc && !Number.isInteger(xc)) {\n      if (typeof xc === 'object') {\n        yc = xc;\n      } else {\n        const lookups = this.level.mapLookups[xc];\n        xc = yc = lookups.map((t) => t.object).find((o) => o);\n        if (xc === undefined) {\n          xc = lookups[0].xCoord;\n          yc = lookups[0].yCoord;\n        }\n      }\n    } else {\n      yc = args.shift();\n    }\n\n    if (xc === null || xc === undefined) {\n      xc = this.game.config.width / 2;\n    }\n    if (yc === null || yc === undefined) {\n      yc = this.game.config.height / 2;\n    }\n\n    let lines = args.shift();\n    if (!Array.isArray(lines)) {\n      lines = [lines];\n    }\n\n    const options = args.shift() || {};\n\n    lines.forEach((line, i) => {\n      const {\n        duration, inTime, outTime, text, extraDelay,\n        dx, dy, ox, oy, noOut, follow, tweenProp,\n      } = {\n        inTime: 200,\n        outTime: 200,\n        duration: null,\n        extraDelay: 200,\n        dy: null,\n        dx: null,\n        ox: 0,\n        oy: 0,\n        tweenProp: null,\n        noOut: false,\n        follow: true,\n        ...options,\n        ...(typeof line === 'object' ? line : {text: line}),\n      };\n\n      const d = duration === null ? text.length * 100 : duration;\n      const dx1 = dx === null ? 0 : dx;\n      const dy1 = dy === null ? -this.game.config.tileHeight : dy;\n\n      this.timer(() => {\n        let xl = xc;\n        let yl = yc;\n\n        let xo = typeof xl === 'object' ? xl : null;\n        let yo = typeof yl === 'object' ? yl : null;\n\n        if (xo) {\n          xl = xo.x;\n          if (!follow) {\n            xo = null;\n          }\n        }\n        if (yo) {\n          yl = yo.y;\n          if (!follow) {\n            yo = null;\n          }\n        }\n\n        xl += ox;\n        yl += oy;\n\n        const label = this.text(xl, yl, text, options);\n        const halfWidth = label.width / 2;\n        const halfHeight = label.height / 2;\n        label.x -= halfWidth;\n        label.y -= halfHeight;\n        label.setDepth(100);\n\n        let lx = label.x;\n        let ly = label.y;\n        label.alpha = 0;\n\n        this.tweenPercent(\n          inTime,\n          (factor) => {\n            label.alpha = factor;\n\n            if (xo) {\n              label.x = (xo.xCoord === undefined ? xo.x : xo.xCoord) - halfWidth + dx1;\n              lx = label.x;\n            }\n\n            if (yo) {\n              label.y = (yo.yCoord === undefined ? yo.y : yo.yCoord) - halfHeight + dy1;\n              ly = label.y;\n            }\n\n            label.x = lx - dx1 * (1.0 - factor) + ox;\n            label.y = ly - dy1 * (1.0 - factor) + oy;\n          },\n          null,\n          0,\n          'Cubic.easeOut',\n        );\n\n        this.timer(() => {\n          this.tweenPercent(\n            d,\n            (factor) => {\n              if (xo) {\n                label.x = (xo.xCoord === undefined ? xo.x : xo.xCoord) - halfWidth + dx1;\n                lx = label.x;\n              }\n              if (yo) {\n                label.y = (yo.yCoord === undefined ? yo.y : yo.yCoord) - halfHeight + dy1;\n                ly = label.y;\n              }\n\n              label.x = lx + ox;\n              label.y = ly + oy;\n            },\n            null,\n            0,\n            'Cubic.easeOut',\n          );\n        }, inTime);\n\n        if (tweenProp) {\n          this.timer(() => {\n            this.tween(tweenProp, label);\n          }, inTime);\n        }\n\n        if (noOut) {\n          return;\n        }\n\n        this.timer(() => {\n          this.tweenPercent(\n            outTime,\n            (factor) => {\n              label.alpha = 1.0 - factor;\n\n              if (xo) {\n                label.x = (xo.xCoord === undefined ? xo.x : xo.xCoord) - halfWidth + dx1;\n                lx = label.x;\n              }\n\n              if (yo) {\n                label.y = (yo.yCoord === undefined ? yo.y : yo.yCoord) - halfHeight + dy1;\n                ly = label.y;\n              }\n\n              label.x = lx - dx1 * factor + ox;\n              label.y = ly - dy1 * factor + oy;\n            },\n            () => {\n              label.destroy();\n            },\n            0,\n            'Cubic.easeOut',\n          );\n        }, inTime + d);\n      }, extraDelay + delay);\n\n      delay += extraDelay + d + inTime + outTime;\n    });\n  }\n\n  createLevel(id) {\n    const level = this.level = this.loadLevel(id);\n    this.addMap();\n    return level;\n  }\n\n  createTileForGroup(groupName, x, y, tile) {\n    const {\n      level, tileWidth, tileHeight, halfWidth, halfHeight,\n    } = this;\n    const group = level.groups[groupName];\n\n    let object;\n\n    if (tile.image) {\n      object = group.group.create(x, y, tile.image);\n    } else if (group.image) {\n      object = group.group.create(x, y, group.image);\n    } else {\n      object = this.add.rectangle(x, y, tileWidth, tileHeight);\n      group.group.add(object);\n    }\n    group.objects.push(object);\n\n    if (group.isCircle) {\n      const radius = (halfHeight + halfWidth) / 2;\n      object.setCircle(radius);\n    }\n\n    return object;\n  }\n\n  addMap() {\n    const {\n      level, tileWidth, tileHeight, halfWidth, halfHeight,\n    } = this;\n\n    const groups = level.groups = {};\n    Object.values(tileDefinitions).forEach((spec) => {\n      if (!spec) {\n        return;\n      }\n\n      if (spec.group) {\n        let group;\n        if (spec.isStatic) {\n          group = this.physics.add.staticGroup();\n        } else {\n          group = this.physics.add.group();\n        }\n\n        groups[spec.group] = {\n          tiles: [],\n          objects: [],\n          ...spec,\n          group,\n        };\n      }\n    });\n\n    const combine = {};\n\n    level.map.forEach((row, y) => {\n      row.forEach((tile, x) => {\n        const {glyph, group} = tile;\n        const [xCoord, yCoord] = this.positionToScreenCoordinate(tile.x, tile.y);\n        tile.xCoord = xCoord;\n        tile.yCoord = yCoord;\n\n        if (group) {\n          if (tile.combine) {\n            const combiner = tile.combine === true ? glyph : tile.combine;\n\n            if (!combine[combiner]) {\n              combine[combiner] = [];\n            }\n\n            combine[combiner].push(tile);\n            return;\n          }\n\n          const object = this.createTileForGroup(group, xCoord + halfWidth, yCoord + halfHeight, tile);\n          object.tiles = [tile];\n          tile.object = object;\n        } else if (tile.image) {\n          const image = this.add.image(xCoord + halfWidth, yCoord + halfHeight, tile.image);\n          image.tile = tile;\n          tile.image = image;\n        }\n\n        if (tile.combine) {\n          // eslint-disable-next-line no-console\n          console.warn(`Cannot combine tile of type ${tile.glyph}; needs a group`);\n        }\n      });\n    });\n\n    Object.values(combine).forEach((tiles) => {\n      const {preferCombineVertical} = tiles[0];\n      const dxPrimary = preferCombineVertical ? 0 : 1;\n      const dyPrimary = preferCombineVertical ? 1 : 0;\n      const dxSecondary = preferCombineVertical ? 1 : 0;\n      const dySecondary = preferCombineVertical ? 0 : 1;\n\n      const group = level.groups[tiles[0].group];\n\n      if (preferCombineVertical) {\n        tiles.sort((a, b) => a.x - b.x || a.y - b.y);\n      } else {\n        tiles.sort((a, b) => a.y - b.y || a.x - b.x);\n      }\n\n      const m = this.level.map[0].map((row) => []);\n      // fake autovivify for last row\n      m.push([]);\n\n      tiles.forEach((tile) => {\n        const {x, y} = tile;\n        m[x][y] = tile;\n      });\n\n      const chains = {};\n\n      // This starts at the top left and greedily scans down/right for\n      // chaining; this could be improved by looking for the \"best\"\n      // at each scanline, e.g. when preferring horizontal this should\n      // create one one-tile chain and one three-tile chain\n      //   *\n      //   ***\n      // but instead it creates two two-tile chains\n\n      tiles.forEach((tile) => {\n        const {x, y, combineWith} = tile;\n\n        const id = `${x}/${y}`;\n\n        // Start a new chain\n        if (!combineWith) {\n          const primary = m[x + dxPrimary][y + dyPrimary];\n          if (primary && !primary.combineWith) {\n            primary.combineWith = id;\n            primary.dxNext = dxPrimary;\n            primary.dyNext = dyPrimary;\n            chains[id] = [tile, primary];\n          } else {\n            const secondary = m[x + dxSecondary][y + dySecondary];\n            if (secondary && !secondary.combineWith) {\n              secondary.combineWith = id;\n              secondary.dxNext = dxSecondary;\n              secondary.dyNext = dySecondary;\n              chains[id] = [tile, secondary];\n            } else {\n              chains[id] = [tile];\n            }\n          }\n        } else {\n          const {dxNext, dyNext} = tile;\n          // Continue existing chain\n          const next = m[x + dxNext][y + dyNext];\n          if (next && !next.combineWith) {\n            next.combineWith = combineWith;\n            next.dxNext = dxNext;\n            next.dyNext = dyNext;\n            chains[combineWith].push(next);\n          }\n        }\n      });\n\n      Object.entries(chains).forEach(([id, chainTiles]) => {\n        const first = chainTiles[0];\n        const last = chainTiles[chainTiles.length - 1];\n        const [x0, y0] = this.positionToScreenCoordinate(first.x, first.y);\n        const [x1, y1] = this.positionToScreenCoordinate(last.x, last.y);\n        const w = x1 - x0 + tileWidth;\n        const h = y1 - y0 + tileHeight;\n        const object = this.add.rectangle(x0 + w * 0.5, y0 + h * 0.5, w, h);\n\n        group.group.add(object);\n        group.objects.push(object);\n        object.tiles = chainTiles;\n\n        chainTiles.forEach((tile) => {\n          const image = this.add.image(tile.xCoord + halfWidth, tile.yCoord + halfHeight, tile.image);\n          image.tile = tile;\n          tile.image = image;\n          tile.object = object;\n        });\n      });\n    });\n\n    return level;\n  }\n\n  setCameraBounds() {\n    const {level} = this;\n\n    if (!prop('scene.camera.hasBounds')) {\n      this.camera.removeBounds();\n      return;\n    }\n\n    if (level && level.width && level.height) {\n      const boundsX = 0;\n      const boundsY = 0;\n      let boundsWidth = level.width;\n      let boundsHeight = level.height;\n\n      if (this.xBorder) {\n        boundsWidth += this.xBorder * 2;\n      }\n\n      if (this.yBorder) {\n        boundsHeight += this.yBorder * 2;\n      }\n\n      this.camera.setBounds(boundsX, boundsY, boundsWidth, boundsHeight);\n    }\n  }\n\n  setCameraDeadzone() {\n    this.camera.setDeadzone(\n      prop('scene.camera.deadzoneX'),\n      prop('scene.camera.deadzoneY'),\n    );\n  }\n\n  setCameraLerp() {\n    this.camera.setLerp(prop('scene.camera.lerp'));\n  }\n\n  firstUpdate(time, dt) {\n    this.setCameraBounds();\n    this.setCameraDeadzone();\n    this.setCameraLerp();\n\n    if (this.level && this.level.scripts) {\n      let delay = 0;\n      this.level.scripts.forEach((script) => {\n        if (script.delay) {\n          delay += script.delay;\n        }\n        this.executeScript({...script, delay});\n      });\n    }\n  }\n\n  update(time, dt) {\n    if (!this._firstUpdated) {\n      this.firstUpdate(time, dt);\n      this._firstUpdated = true;\n    }\n\n    if (this.physics && this.physics.world.isPaused && !this.timeSightFrozen && this.isTopScene()) {\n      this.command.processInput(this, time, dt, true);\n    }\n\n    if (this.renderUpdate) {\n      this.renderUpdate(time, dt);\n    }\n    if (this.shader) {\n      this._shaderUpdate();\n    }\n\n    this.positionBackground();\n    this.positionBackground2();\n    this.positionUnderground();\n  }\n\n  positionBackground() {\n    const {\n      level, game, xBorder, yBorder, camera,\n    } = this;\n    if (!level) {\n      return;\n    }\n\n    const {background, width: levelWidth, height: levelHeight} = level;\n    if (!background) {\n      return;\n    }\n\n    const {width: gameWidth, height: gameHeight} = game.config;\n    const {width: backgroundWidth, height: backgroundHeight} = background;\n    const {scrollX, scrollY} = camera;\n\n    const xDivisor = levelWidth - gameWidth + xBorder * 2;\n    if (xDivisor === 0) {\n      background.x = backgroundWidth * 0.5;\n    } else {\n      const xFactor = scrollX / xDivisor;\n      background.x = xBorder + backgroundWidth * 0.5 + xFactor * (levelWidth - backgroundWidth);\n    }\n\n    const yDivisor = levelHeight - gameHeight + yBorder * 2;\n    if (yDivisor === 0) {\n      background.y = backgroundHeight * 0.5;\n    } else {\n      const yFactor = scrollY / yDivisor;\n      background.y = yBorder + backgroundHeight * 0.5 + yFactor * (levelHeight - backgroundHeight);\n    }\n  }\n\n  positionBackground2() {\n    const {\n      level, game, xBorder, yBorder, camera,\n    } = this;\n    if (!level) {\n      return;\n    }\n\n    const {background2, width: levelWidth, height: levelHeight} = level;\n    if (!background2) {\n      return;\n    }\n\n    const {width: gameWidth, height: gameHeight} = game.config;\n    const {width: backgroundWidth, height: backgroundHeight} = background2;\n    const {scrollX, scrollY} = camera;\n\n    const xDivisor = levelWidth - gameWidth + xBorder * 2;\n    if (xDivisor === 0) {\n      background2.x = backgroundWidth * 0.5;\n    } else {\n      const xFactor = scrollX / xDivisor;\n      background2.x = xBorder + backgroundWidth * 0.5 + xFactor * (levelWidth - backgroundWidth);\n    }\n\n    const yDivisor = levelHeight - gameHeight + yBorder * 2;\n    if (yDivisor === 0) {\n      background2.y = backgroundHeight * 0.5;\n    } else {\n      const yFactor = scrollY / yDivisor;\n      background2.y = yBorder + backgroundHeight * 0.5 + yFactor * (levelHeight - backgroundHeight);\n    }\n  }\n\n  positionUnderground() {\n    const {\n      underground, camera, tileWidth, tileHeight,\n    } = this;\n    if (underground) {\n      underground.x = camera.scrollX + underground.width / 2 - tileWidth * 5;\n      underground.y = camera.scrollY + underground.height / 2 - tileHeight * 5;\n      underground.tilePositionX = camera.scrollX % tileWidth;\n      underground.tilePositionY = camera.scrollY % tileHeight;\n    }\n  }\n\n  _shaderInitialize(initializeListeners) {\n    const {shaderInitialize} = this;\n    this.game.shaderFragments(this.shaderName).forEach(([fragmentName, uniforms]) => {\n      Object.entries(uniforms).forEach(([uniformName, spec]) => {\n        const name = `${fragmentName}_${uniformName}`;\n        const [type, listenerInitial, listenerIfNull] = spec;\n        if (listenerIfNull === null) {\n          if (!(shaderInitialize && shaderInitialize[name] && name in this) && (initializeListeners || !(name in this))) {\n            this[name] = listenerInitial;\n          }\n        } else {\n          const [, , setter] = shaderTypeMeta[type];\n\n          const propNames = propNamesForUniform(fragmentName, uniformName, spec);\n          let initialValue;\n\n          if (propNames.length === 1) {\n            initialValue = prop(propNames[0]);\n          } else {\n            initialValue = [];\n            propNames.forEach((n) => {\n              const v = prop(n);\n              if (Array.isArray(v)) {\n                initialValue.push(...v);\n              } else {\n                initialValue.push(v);\n              }\n            });\n          }\n\n          if (type === 'rgb' || type === 'rgba') {\n            initialValue = initialValue.map((c, i) => (i < 3 ? c / 255.0 : c));\n          }\n\n          this.shader[setter](name, initialValue);\n        }\n      });\n    });\n\n    // generate this._shaderUpdate based on what's being used\n\n    // eslint-disable-next-line no-unused-vars\n    const {shader, camera} = this;\n\n    if (!shader) {\n      this._shaderUpdate = function() {};\n    }\n\n    const shaderUpdate = [\n      '(function () {',\n      `  shader.setFloat2('camera_scroll', camera.scrollX / ${this.game.config.width}, camera.scrollY / ${this.game.config.height});`,\n      '  shader.setFloat1(\\'scene_time\\', this.scene_time);',\n    ];\n\n    this.game.shaderFragments(this.shaderName).forEach(([fragmentName, uniforms]) => {\n      if (!prop(`shader.${fragmentName}.enabled`)) {\n        return;\n      }\n\n      Object.entries(uniforms).forEach(([uniformName, [type, , listenerIfNull]]) => {\n        const name = `${fragmentName}_${uniformName}`;\n        if (listenerIfNull !== null) {\n          return;\n        }\n\n        const [, , setter] = shaderTypeMeta[type];\n\n        if (type === 'bool') {\n          shaderUpdate.push(`  shader.${setter}('${name}', this['${name}'] ? 1.0 : 0.0);`);\n        } else {\n          shaderUpdate.push(`  shader.${setter}('${name}', this['${name}']);`);\n        }\n      });\n    });\n\n    shaderUpdate.push('})');\n\n    // eslint-disable-next-line no-eval\n    this._shaderUpdate = eval(shaderUpdate.join('\\n'));\n  }\n\n  replaceWithSceneNamed(name, reseed, config = {}, originalTransition = null) {\n    const {game} = this;\n\n    if (!this.scene.settings) {\n      // this can happen when HMR happens during timeSight; SuperScene's\n      // builtinHot causes the top scene to get replaced out of the scene\n      // graph, but proxy.js still calls _hot on it\n      return;\n    }\n\n    if (this.scene.settings.data._timeSightTarget) {\n      this.endedReplay();\n      return;\n    }\n\n    let {seed} = this.scene.settings.data;\n    if (reseed === true) {\n      seed = this.randFloat('replaceWithSceneNamed');\n    } else if (reseed) {\n      seed = reseed;\n    }\n\n    let sceneId;\n\n    if (this._replay) {\n      (this._replay.sceneTransitions || []).forEach((t) => {\n        if (t.parentSceneId === this.sceneId) {\n          // eslint-disable-next-line prefer-destructuring\n          sceneId = t.sceneId;\n        }\n      });\n    }\n\n    if (!sceneId) {\n      sceneId = String(this.randFloat('sceneId'));\n    }\n\n    const target = `scene-${this.randFloat('sceneId') * Date.now()}`;\n\n    if (this._isTransitioning) {\n      // eslint-disable-next-line no-console\n      console.error('replaceWithSceneName called again even though this scene is already transitioning. Ignoring.');\n      return;\n    }\n\n    this._isTransitioning = true;\n\n    const oldScene = this;\n    const {_replay, _replayOptions, _recording} = this;\n\n    const transition = this._transitionProps(originalTransition);\n\n    const returnPromise = new Promise((resolve, reject) => {\n      this.game.onSceneInit(target, (newScene) => {\n        this.willTransitionTo(newScene, transition);\n        newScene.willTransitionFrom(oldScene, transition);\n        this._sceneTransition(oldScene, newScene, transition);\n        resolve(newScene, transition);\n      });\n    });\n\n    this.scene.add(\n      target,\n      game._sceneConstructors[name],\n      true,\n      {\n        ...this.scene.settings.data,\n        ...{\n          _replay,\n          _replayOptions,\n          _recording,\n          sceneId,\n          parentSceneId: this.sceneId,\n        },\n        ...config,\n        transition,\n        seed,\n      },\n    );\n\n    return returnPromise;\n  }\n\n  replaceWithSelf(reseed, config = {}, transition = null) {\n    return this.replaceWithSceneNamed(this.constructor.name, reseed, config, transition);\n  }\n\n  _sceneTransition(oldScene, newScene, transition) {\n    const {\n      animation, ease, duration, onUpdate, oldPauseTime, newUnpauseTime,\n    } = transition || {};\n\n    let newUnpauseFn = () => {\n      // eslint-disable-next-line no-console\n      console.error('Transition did not instantiate newUnpauseFn');\n    };\n\n    let swapScenes = true;\n\n    let _hasCutover = false;\n    const cutoverPrimary = (overrideSwapScenes) => {\n      if (_hasCutover) {\n        return;\n      }\n      _hasCutover = true;\n\n      if (overrideSwapScenes !== undefined) {\n        swapScenes = overrideSwapScenes;\n      }\n\n      if (transition && transition.onCutover) {\n        transition.onCutover(oldScene, newScene, transition);\n      }\n\n      if (oldPauseTime === 'cutover') {\n        applyPause(oldScene, transition, transition.oldPause);\n      }\n\n      if (newUnpauseTime === 'cutover') {\n        newUnpauseFn();\n      }\n\n      newScene.playMusicIfSet();\n\n      if (swapScenes) {\n        newScene.game.scene.bringToTop(newScene.scene.key);\n      }\n    };\n\n    let _hasCompleted = false;\n    const completeTransition = () => {\n      if (_hasCompleted) {\n        return;\n      }\n\n      if (!_hasCutover) {\n        // eslint-disable-next-line no-console\n        console.error('completeTransition called, but cutoverPrimary hasn\\'t been yet');\n        cutoverPrimary();\n      }\n\n      if (transition && transition.onComplete) {\n        transition.onComplete(oldScene, newScene, transition);\n      }\n\n      if (oldPauseTime === 'complete') {\n        applyPause(oldScene, transition, transition.oldPause);\n      }\n\n      if (newUnpauseTime === 'complete') {\n        newUnpauseFn();\n      }\n\n      _hasCompleted = true;\n\n      newScene.timer(() => {\n        oldScene.didTransitionTo(newScene, transition);\n        newScene.didTransitionFrom(oldScene, transition);\n        oldScene.scene.remove();\n      }).ignoresScenePause = true;\n\n      if (transition) {\n        const waitTimer = newScene.timer(() => {\n          if (transition && transition.onWaitEnd) {\n            transition.onWaitEnd(oldScene, newScene, transition);\n          }\n\n          if (newUnpauseTime === 'waitEnd') {\n            newUnpauseFn();\n          }\n        }, transition.wait);\n        waitTimer.ignoresScenePause = true;\n      }\n    };\n\n    if (transition) {\n      if (transition.removeOldSceneShader) {\n        oldScene.shader = null;\n        oldScene.camera.clearRenderToTexture();\n      }\n\n      let animate;\n\n      if (typeof animation === 'function') {\n        animate = () => animation(oldScene, newScene, cutoverPrimary, completeTransition, transition);\n      } else if (animation === 'fadeInOut') {\n        swapScenes = true;\n\n        newScene.camera.setBackgroundColor(0);\n        oldScene.camera.setBackgroundColor(0);\n        newScene.camera.alpha = 0;\n        oldScene.camera.alpha = 1;\n\n        animate = () => {\n          const tween = this.tweenInOut(\n            duration / 2,\n            duration / 2,\n            (factor, firstHalf) => {\n              if (firstHalf) {\n                oldScene.camera.alpha = 1 - factor;\n              } else {\n                newScene.camera.alpha = 1 - factor;\n              }\n\n              if (onUpdate) {\n                const percent = firstHalf ? factor / 2 : 1 - factor / 2;\n                onUpdate(percent, oldScene, newScene, transition);\n              }\n            },\n            (followupTween) => {\n              followupTween.ignoresScenePause = true;\n              cutoverPrimary();\n            },\n            () => {\n              newScene.camera.alpha = 1;\n              oldScene.camera.alpha = 0;\n              completeTransition();\n            },\n            0,\n            ease,\n          );\n          tween.ignoresScenePause = true;\n        };\n      } else if (animation === 'crossFade') {\n        // crossfade doesn't really care about scene order, so help the\n        // shader out if we can\n        if (!oldScene.shader && newScene.shader) {\n          oldScene.game.scene.bringToTop(oldScene.scene.key);\n          swapScenes = false;\n        } else if (oldScene.shader && !newScene.shader) {\n          newScene.game.scene.bringToTop(newScene.scene.key);\n          swapScenes = false;\n        } else {\n          swapScenes = true;\n        }\n\n        newScene.camera.alpha = 0;\n        oldScene.camera.alpha = 1;\n\n        animate = () => {\n          const tween = this.tweenPercent(\n            duration,\n            (factor) => {\n              newScene.camera.alpha = factor;\n              oldScene.camera.alpha = 1 - factor;\n              if (factor >= 0.5) {\n                cutoverPrimary();\n              }\n\n              if (onUpdate) {\n                onUpdate(factor, oldScene, newScene, transition);\n              }\n            },\n            () => {\n              newScene.camera.alpha = 1;\n              oldScene.camera.alpha = 0;\n\n              if (!transition.suppressShaderCheck && !transition.delayNewSceneShader && oldScene.shader && newScene.shader) {\n                // eslint-disable-next-line no-console, max-len\n                console.error('crossFade transitions do not render correctly if the both scenes have a shader; provide delayNewSceneShader, removeOldSceneShader, or suppressShaderCheck to the transition, or use fadeInOut animation');\n              }\n\n              completeTransition();\n            },\n            0,\n            ease,\n          );\n          tween.ignoresScenePause = true;\n        };\n      } else if (animation === 'pushRight' || animation === 'pushLeft' || animation === 'pushUp' || animation === 'pushDown') {\n        const {height, width} = this.game.config;\n\n        swapScenes = true;\n\n        oldScene.camera.x = 0;\n        oldScene.camera.y = 0;\n\n        let dx = 0;\n        let dy = 0;\n\n        if (animation === 'pushRight') {\n          newScene.camera.x = -width;\n          dx = 1;\n        } else if (animation === 'pushLeft') {\n          newScene.camera.x = width;\n          dx = -1;\n        } else if (animation === 'pushUp') {\n          newScene.camera.y = -height;\n          dy = -1;\n        } else if (animation === 'pushDown') {\n          newScene.camera.y = height;\n          dy = 1;\n        }\n\n        animate = () => {\n          const tween = this.tweenPercent(\n            duration,\n            (factor) => {\n              newScene.camera.x = dx * (factor - 1) * width;\n              oldScene.camera.x = dx * factor * width;\n              newScene.camera.y = dy * (factor - 1) * height;\n              oldScene.camera.y = dy * factor * height;\n\n              if (factor >= 0.5) {\n                cutoverPrimary();\n              }\n\n              if (onUpdate) {\n                onUpdate(factor, oldScene, newScene, transition);\n              }\n            },\n            () => {\n              newScene.camera.x = 0;\n              newScene.camera.y = 0;\n              completeTransition();\n            },\n            0,\n            ease,\n          );\n          tween.ignoresScenePause = true;\n        };\n      } else if (animation === 'wipeRight' || animation === 'wipeLeft' || animation === 'wipeUp' || animation === 'wipeDown') {\n        const {height, width} = this.game.config;\n\n        swapScenes = false;\n\n        let newCamera;\n        let oldCamera;\n\n        // we cannot wipe with the builtin camera\n        if (animation === 'wipeRight' || animation === 'wipeDown') {\n          newScene.camera.alpha = 0;\n\n          newCamera = newScene.cameras.add(0, 0, width, height);\n          newCamera.setBackgroundColor(newScene.cameraColor());\n          newCamera.scrollX = newScene.camera.scrollX;\n          newCamera.scrollY = newScene.camera.scrollY;\n\n          if (animation === 'wipeRight') {\n            newCamera.width = 1;\n          } else {\n            newCamera.height = 1;\n          }\n        } else {\n          oldScene.game.scene.bringToTop(oldScene.scene.key);\n          oldScene.camera.alpha = 0;\n\n          oldCamera = oldScene.cameras.add(0, 0, width, height);\n          oldCamera.setBackgroundColor(oldScene.cameraColor());\n          oldCamera.scrollX = oldScene.camera.scrollX;\n          oldCamera.scrollY = oldScene.camera.scrollY;\n\n          if (oldScene.shader) {\n            oldCamera.setRenderToTexture(oldScene.shader);\n          }\n        }\n\n        let firstCall = true;\n\n        animate = () => {\n          const tween = this.tweenPercent(\n            duration,\n            (factor) => {\n              if (newCamera && firstCall) {\n                if (newScene.shader) {\n                  newCamera.setRenderToTexture(newScene.shader);\n                }\n                firstCall = false;\n              }\n\n              if (animation === 'wipeRight') {\n                newCamera.setSize(Math.max(1, factor * width), height);\n              } else if (animation === 'wipeLeft') {\n                oldCamera.setSize(Math.max(1, (1 - factor) * width), height);\n              } else if (animation === 'wipeUp') {\n                oldCamera.setSize(width, Math.max(1, (1 - factor) * height));\n              } else if (animation === 'wipeDown') {\n                newCamera.setSize(width, Math.max(1, factor * height));\n              }\n\n              if (factor >= 0.5) {\n                cutoverPrimary();\n              }\n\n              if (onUpdate) {\n                onUpdate(factor, oldScene, newScene, transition);\n              }\n            },\n            () => {\n              if (newCamera) {\n                newScene.cameras.main.alpha = 1;\n                newScene.camera.scrollX = newCamera.scrollX;\n                newScene.camera.scrollY = newCamera.scrollY;\n                newScene.cameras.remove(newCamera);\n              }\n\n              if (!transition.suppressShaderCheck) {\n                if (!transition.delayNewSceneShader && newScene.shader && newCamera) {\n                  // eslint-disable-next-line no-console, max-len\n                  console.error(`${animation} transitions do not render correctly if the new scene has a shader; provide delayNewSceneShader or suppressShaderCheck to the transition, or use a different animation`);\n                }\n                if (oldScene.shader && oldCamera) {\n                  // eslint-disable-next-line no-console, max-len\n                  console.error(`${animation} transitions do not render correctly if the old scene has a shader; provide removeOldSceneShader or suppressShaderCheck to the transition, or use a different animation`);\n                }\n              }\n\n              completeTransition();\n            },\n            0,\n            ease,\n          );\n          tween.ignoresScenePause = true;\n        };\n      } else {\n        // eslint-disable-next-line no-console\n        console.error(`Invalid transition animation '${animation}'`);\n        cutoverPrimary();\n        completeTransition();\n        return;\n      }\n\n      if (swapScenes) {\n        oldScene.game.scene.bringToTop(oldScene.scene.key);\n      }\n\n      if (oldPauseTime === 'begin') {\n        applyPause(oldScene, transition, transition.oldPause);\n      }\n\n      if (newUnpauseTime !== 'begin') {\n        newUnpauseFn = applyPause(newScene, transition, transition.newPause);\n      }\n\n      const oldAnimate = animate;\n      animate = () => {\n        if (transition && transition.onDelayEnd) {\n          transition.onDelayEnd(oldScene, newScene, transition);\n        }\n\n        if (oldPauseTime === 'delayEnd') {\n          applyPause(oldScene, transition, transition.oldPause);\n        }\n\n        if (newUnpauseTime === 'delayEnd') {\n          newUnpauseFn();\n        }\n\n        oldAnimate();\n      };\n\n      if (transition.delay) {\n        const delayTimer = this.timer(animate, transition.delay);\n        delayTimer.ignoresScenePause = true;\n      } else {\n        animate();\n      }\n    } else {\n      cutoverPrimary();\n      completeTransition();\n    }\n  }\n\n  preemitEmitter(emitter) {\n    const maxLifespan = emitter.lifespan.staticValueEmit();\n    const quantity = emitter.quantity.staticValueEmit();\n    const {frequency} = emitter;\n    for (let i = maxLifespan; i > 0; i -= frequency) {\n      for (let j = 0; j < quantity; j += 1) {\n        const particle = emitter.emitParticle(1);\n        particle.update(i, i / 1000, []);\n      }\n    }\n  }\n\n  sleep(duration, ignoreTimeScale = false) {\n    this.pauseEverythingForSleep(duration);\n\n    const timer = this.timer(() => {\n      this.unpauseEverythingForSleep(duration);\n    }, duration);\n\n    timer.ignoresScenePause = true;\n    if (ignoreTimeScale) {\n      timer.ignoresTimeScale = true;\n    }\n  }\n\n  beginReplay(replay, replayOptions) {\n    const {command, game} = this;\n    const {loop} = game;\n\n    this._replay = replay;\n    this._replayOptions = replayOptions;\n    this._replayLatestTransition = replayOptions.startFromTransition;\n    const startTick = replayOptions.startTick || (this._replayLatestTransition ? (this._replayLatestTransition.tickCount || 0) : 0);\n\n    command.beginReplay(replay, {\n      ...replayOptions,\n      startTick,\n      onEnd: () => {\n        this.game.topScene().endedReplay();\n      },\n      onStop: () => {\n        this.game.topScene().stopReplay(true);\n      },\n    });\n\n    let time = window.performance.now();\n    const dt = 1000 / this.physics.world.fps;\n\n    game._replayPreflight += 1;\n\n    const manager = this.command.getManager(this);\n\n    loop.sleep();\n    this.scene.setVisible(false);\n    while (command.hasPreflight()) {\n      if (replay.timeSightFrameCallback) {\n        replay.timeSightFrameCallback(this, time, dt, manager, true, false, false);\n      }\n\n      time += dt;\n      loop.step(time);\n\n      if (game._stepExceptions > 100) {\n        // eslint-disable-next-line no-console\n        console.error('Too many errors in preflight; bailing out…');\n        return;\n      }\n    }\n    loop.resetDelta();\n\n    game._replayPreflight -= 1;\n\n    // now that preflight is done, beware that if it had a scene transition,\n    // then `this` may have been removed from the scene graph and instead\n    // should use topScene\n    const topScene = game.topScene();\n\n    if (replay.timeSight) {\n      topScene.calculateTimeSight();\n    } else if (replay.timeSightFrameCallback) {\n      game._replayPreflight += 1;\n      topScene._timeSightTargetEnded = () => {\n        replay.timeSightFrameCallback(topScene, time, dt, manager, false, true, true);\n      };\n\n      let postflightCutoff;\n      if ('postflightCutoff' in replay) {\n        ({postflightCutoff} = replay.postflightCutoff);\n        delete replay.postflightCutoff;\n      }\n\n      while (!topScene._timeSightTargetDone) {\n        const isPostflight = postflightCutoff !== undefined && this.command.replayTicks >= postflightCutoff;\n        replay.timeSightFrameCallback(topScene, time, dt, manager, false, isPostflight, false);\n        time += dt;\n        loop.step(time);\n\n        if (game._stepExceptions > 100) {\n          // eslint-disable-next-line no-console\n          console.error('Too many errors in timeSight; bailing out…');\n          return;\n        }\n      }\n      topScene.scene.remove();\n      game._replayPreflight -= 1;\n    } else {\n      topScene.scene.setVisible(true);\n      loop.wake();\n    }\n  }\n\n  calculateTimeSight() {\n    // eslint-disable-next-line no-console\n    console.info('Calculating timeSight');\n\n    this._timeSightFrames = [];\n\n    this.scene.setActive(false);\n    this.scene.setVisible(false);\n\n    this.launchTimeSight();\n\n    const target = `scene-${Math.random() * Date.now()}`;\n    const targetScene = this.game.scene.add(target, this.constructor, true, {...this.scene.settings.data, _timeSightTarget: true});\n    this.game.scene.bringToTop(target);\n\n    let objectDt = 0;\n\n    targetScene.beginReplay(\n      {\n        ...this._replay,\n        timeSight: false,\n        startTick: (this._replayLatestTransition ? this._replayLatestTransition.tickCount : 0) || 0,\n        timeSightFrameCallback: (scene, frameTime, frameDt, manager, isPreflight, isPostflight, isLast) => {\n          objectDt += frameDt;\n\n          const frame = this.timeSightTargetStep(scene, objectDt, frameTime, frameDt, manager, isPreflight, isPostflight, isLast);\n          if (frame) {\n            objectDt = 0;\n          }\n        },\n      },\n      {\n        onEnd: () => {\n          targetScene._timeSightTargetDone = true;\n\n          this.scene.setVisible(true);\n          this.scene.setActive(true);\n\n          this.game.loop.wake();\n\n          this.beginTimeSightAlphaAnimation();\n        },\n      },\n    );\n  }\n\n  timeSightTargetStep(scene, objectDt, frameTime, frameDt, manager, isPreflight, isPostflight, isLast) {\n    const objects = scene.renderTimeSightFrameInto(this, objectDt, frameTime, frameDt, isLast);\n    if (!objects || !objects.length) {\n      return;\n    }\n\n    updatePropsFromStep(true);\n\n    const frame = {\n      objects,\n      props: {...manageableProps},\n      commands: [...manager.commands],\n      tickCount: manager.tickCount,\n      isPreflight,\n      isPostflight,\n    };\n\n    objects.forEach((object) => {\n      if (object.scene !== this) {\n        // eslint-disable-next-line no-console\n        console.error(`renderTimeSightFrameInto rendered this object into the wrong scene: ${JSON.stringify(object)}`);\n      }\n\n      object._timeSightAlpha = object.alpha;\n      object._timeSightFrame = frame;\n\n      if (isPreflight || isPostflight) {\n        object.alpha = 0;\n      }\n    });\n\n    this._timeSightFrames.push(frame);\n    return frame;\n  }\n\n  beginTimeSightAlphaAnimation() {\n    const frames = this._timeSightFrames;\n    const activeFrames = frames.filter((frame) => !frame.isPreflight && !frame.isPostflight);\n\n    if (!activeFrames.length) {\n      return;\n    }\n\n    overrideProps(activeFrames[0].props);\n\n    if (this.game.updateReplayCursor) {\n      this.game.updateReplayCursor();\n    }\n\n    let loopAlpha;\n    // eslint-disable-next-line prefer-const\n    loopAlpha = (frame, n) => {\n      const {objects, props} = frame;\n\n      overrideProps(props);\n\n      objects.forEach((object, i) => {\n        object._timeSightAlphaTween = this.tweens.add({\n          targets: object,\n          alpha: 0.7,\n          duration: 200,\n          onComplete: () => {\n            object._timeSightAlphaTween = this.tweens.add({\n              targets: object,\n              alpha: object._timeSightAlpha,\n              duration: 200,\n              onComplete: () => {\n                if (i === 0) {\n                  frame.timer = this.time.addEvent({\n                    delay: 100 * activeFrames.length + 1000,\n                    callback: () => loopAlpha(frame, n),\n                  });\n                }\n              },\n            });\n          },\n        });\n      });\n    };\n\n    activeFrames.forEach((frame, n) => {\n      frame.timer = this.time.addEvent({\n        delay: 100 * n + 1000,\n        callback: () => {\n          loopAlpha(frame, n);\n        },\n      });\n    });\n\n    if (this._timeSightMouseInput) {\n      activeFrames.forEach((frame) => {\n        frame.objects.forEach((object) => {\n          object.alpha = object._timeSightAlpha;\n        });\n      });\n\n      return;\n    }\n\n    this._timeSightMouseInput = true;\n\n    this.input.topOnly = true;\n\n    activeFrames.forEach((frame) => {\n      frame.objects.forEach((object) => {\n        object.setInteractive();\n      });\n    });\n\n    this.input.on('gameobjectover', (pointer, activeObject) => {\n      if (this._timeSightRemoveFocusTimer) {\n        this._timeSightRemoveFocusTimer.destroy();\n      }\n\n      this.game.canvas.style.cursor = 'pointer';\n\n      let matchedFrame;\n      activeFrames.forEach((frame) => {\n        if (frame.timer) {\n          frame.timer.destroy();\n        }\n\n        frame.objects.forEach((object) => {\n          if (object._timeSightAlphaTween) {\n            object._timeSightAlphaTween.stop();\n          }\n\n          object.alpha = object._timeSightAlpha;\n\n          if (object === activeObject) {\n            matchedFrame = frame;\n            object.alpha = 1;\n          }\n        });\n      });\n\n      if (matchedFrame) {\n        overrideProps(matchedFrame.props);\n\n        if (this.game.updateReplayCursor) {\n          this.game.updateReplayCursor(matchedFrame.tickCount, this._replay);\n        }\n      }\n    });\n\n    this.input.on('gameobjectout', (pointer, activeObject) => {\n      if (this._timeSightRemoveFocusTimer) {\n        this._timeSightRemoveFocusTimer.destroy();\n      }\n\n      this._timeSightRemoveFocusTimer = this.time.addEvent({\n        delay: 100,\n        callback: () => {\n          this.game.canvas.style.cursor = '';\n          this.beginTimeSightAlphaAnimation();\n        },\n      });\n    });\n\n    this.input.on('gameobjectdown', (pointer, activeObject) => {\n      if (this._timeSightRemoveFocusTimer) {\n        this._timeSightRemoveFocusTimer.destroy();\n      }\n\n      this.game.canvas.style.cursor = '';\n\n      const replay = this._replay;\n\n      const {commands} = activeObject._timeSightFrame;\n      const preflightCutoff = commands.reduce((cutoff, frame) => cutoff + (frame._repeat || 1), 0);\n\n      this.game.stopReplay();\n      this.game.beginReplay({\n        ...replay,\n        ...(this._replayLatestTransition || {}),\n        timeSight: false,\n        snapshot: true,\n        commands,\n        preflightCutoff,\n      }, {\n        startFromTransition: this._replayLatestTransition,\n        startTick: -1, // TODO\n      });\n    });\n  }\n\n  endedReplay() {\n    if (!this._replay) {\n      return;\n    }\n\n    const {onEnd} = this._replayOptions;\n    const replay = this._replay;\n\n    delete this._replay;\n    delete this._replayOptions;\n\n    if (replay.timeSight) {\n      this.replaceWithSelf(false);\n      return;\n    }\n\n    if (this._timeSightTargetEnded) {\n      this._timeSightTargetEnded();\n    }\n\n    if (onEnd) {\n      onEnd();\n    }\n  }\n\n  stopReplay(skipDownward) {\n    if (!this._replay) {\n      return;\n    }\n\n    const {onStop} = this._replayOptions;\n    const replay = this._replay;\n\n    delete this._replay;\n    delete this._replayOptions;\n\n    if (replay.timeSight) {\n      this.replaceWithSelf(false);\n      return;\n    }\n\n    if (!skipDownward) {\n      this.command.stopReplay();\n    }\n\n    if (onStop) {\n      onStop();\n    }\n  }\n\n  launchTimeSight() {\n    this.timeSightFrozen = true;\n\n    [...this.tweens._active, ...this.tweens._add].forEach((tween) => tween._skipFreezeTimeSight || tween.stop());\n    this.add.displayList.list.filter((node) => node.type === 'Sprite').map((node) => node._skipFreezeTimeSight || node.anims.stop());\n\n    // this intentionally uses the base Phaser timer so existing particles get\n    // paused after only a frame of rendering, but any particles that\n    // renderTimeSightFrameInto creates are unaffected\n    const particles = this.add.displayList.list.filter((node) => node.type === 'ParticleEmitterManager');\n    this.time.addEvent({\n      callback: () => {\n        particles.forEach((node) => {\n          if (!node._skipFreezeTimeSight) {\n            node.pause();\n          }\n        });\n      },\n    });\n  }\n\n  cutoffTimeSightEnter() {\n    const frames = this._timeSightFrames;\n\n    if (!frames) {\n      return;\n    }\n\n    if (this._timeSightRemoveFocusTimer) {\n      this._timeSightRemoveFocusTimer.destroy();\n    }\n\n    frames.forEach((frame) => {\n      if (frame.timer) {\n        frame.timer.destroy();\n      }\n\n      frame.objects.forEach((object) => {\n        if (object._timeSightAlphaTween) {\n          object._timeSightAlphaTween.stop();\n        }\n\n        object.alpha = object._timeSightAlpha;\n      });\n    });\n\n    this.cutoffTimeSightChanged(this._replay.preflightCutoff, this._replay.postflightCutoff);\n  }\n\n  cutoffTimeSightChanged(start, end) {\n    const frames = this._timeSightFrames;\n    if (!frames) {\n      return;\n    }\n\n    // ordinarily to be avoided, but we don't want to start a new replay\n    // to take the update from Replay.jsx\n    this._replay.preflightCutoff = start;\n    this._replay.postflightCutoff = end;\n\n    frames.forEach((frame, f) => {\n      const tick = frame.tickCount + ((this._replayLatestTransition ? this._replayLatestTransition.tickCount : 0) || 0);\n      frame.isPreflight = tick < start;\n      frame.isPostflight = tick > end;\n\n      frame.objects.forEach((object) => {\n        object.alpha = (frame.isPreflight || frame.isPostflight) ? object._timeSightAlpha : 1;\n      });\n    });\n  }\n\n  cutoffTimeSightLeave() {\n    const frames = this._timeSightFrames;\n    if (!frames) {\n      return;\n    }\n\n    frames.forEach((frame) => {\n      frame.objects.forEach((object) => {\n        object.alpha = (frame.isPreflight || frame.isPostflight) ? 0 : object._timeSightAlpha;\n      });\n    });\n\n    this.beginTimeSightAlphaAnimation();\n  }\n\n  propDidChange(key, value) {\n    this.replayParticleSystems(key);\n  }\n\n  propDidFinishChange(key, value) {\n    if (this._replay && this._replay.timeSight) {\n      const replay = this._replay;\n      this.game.stopReplay();\n      this.game.beginReplay(replay, {\n        startFromTransition: this._replayLatestTransition,\n      });\n    }\n  }\n\n  beginRecording(recording) {\n    this._recording = recording;\n    recording.sceneSaveState = JSON.parse(JSON.stringify(this._initialSave));\n    recording.sceneTransitions = [];\n    recording.sceneId = this.sceneId;\n\n    this.command.beginRecording(this, recording);\n  }\n\n  stopRecording() {\n    const recording = this._recording;\n    delete this._recording;\n    this.command.stopRecording();\n    return recording;\n  }\n\n  replayParticleSystems(changedKey) {\n    const {particleSystems} = this;\n    this.particleSystems = [];\n\n    particleSystems.forEach((config) => {\n      const {\n        particles, emitter, name, options,\n      } = config;\n\n      if (!particles.active || particles.moribund) {\n        return;\n      }\n\n      // keep other systems as-is\n      if (changedKey && !changedKey.startsWith(name)) {\n        this.particleSystems.push(config);\n        return;\n      }\n\n      const {seed} = emitter;\n      emitter.killAll();\n      emitter.stop();\n      particles.destroy();\n\n      this.particleSystem(name, options, seed);\n    });\n  }\n\n  _builtinHot() {\n    // eslint-disable-next-line no-console\n    console.info(`Hot-loading ${this.constructor.name}`);\n\n    if (this.game._stepExceptions > 100) {\n      // eslint-disable-next-line no-console\n      console.info('Resetting after recovering from errors');\n      this.game._stepExceptions = 0;\n      return;\n    }\n\n    if (this._replay && this._replay.timeSight) {\n      const replay = this._replay;\n      this.game.stopReplay();\n      this.game.beginReplay(replay, {\n        startFromTransition: this._replayLatestTransition,\n      });\n    } else {\n      this.replayParticleSystems();\n    }\n\n    if (this.setupAnimations) {\n      this.reloadAnimations();\n    } else {\n      this.removeAnimations();\n    }\n\n    this.game.recompileShaders();\n\n    this.playMusic();\n  }\n\n  _hotReloadCurrentLevel(...args) {\n    return this.replaceWithSelf(false, ...args);\n  }\n\n  removeAnimations() {\n    if (this.physics && this.physics.world && this.physics.world.bodies && this.physics.world.bodies.entries) {\n      this.physics.world.bodies.entries.forEach((body) => {\n        if (body.gameObject && body.gameObject.anims) {\n          body.gameObject.anims.pause();\n          body.gameObject.anims.stop();\n          body.gameObject.anims.remove();\n        }\n      });\n    }\n\n    Object.keys(this.anims.anims.entries).forEach((key) => {\n      this.anims.remove(key);\n    });\n  }\n\n  reloadAnimations() {\n    Object.keys(this.anims.anims.entries).forEach((key) => {\n      this.anims.remove(key);\n    });\n\n    this.setupAnimations();\n\n    if (this.physics && this.physics.world && this.physics.world.bodies && this.physics.world.bodies.entries) {\n      this.physics.world.bodies.entries.forEach((body) => {\n        if (body.gameObject && body.gameObject.anims && body.gameObject.anims.currentAnim) {\n          const {key} = body.gameObject.anims.currentAnim;\n          body.gameObject.anims.stop();\n          body.gameObject.anims.currentAnim = null;\n          this.timer(() => body.gameObject.anims.play(key)).ignoresScenePause = true;\n        }\n      });\n    }\n  }\n\n  particleSystem(name, options = {}, reloadSeed) {\n    // throws error if invalid\n    prop(`${name}.image`);\n\n    const props = {\n      ...propsWithPrefix(`${name}.`),\n      ...options,\n    };\n\n    const {onAdd, image} = props;\n\n    const particles = this.add.particles(image);\n\n    const emitterProps = massageParticleProps(props);\n    const emitter = particles.createEmitter(emitterProps);\n\n    particles.timeScale = this.timeScale;\n\n    injectEmitterOpSeededRandom(emitter, reloadSeed || this.randFloat('particles'));\n\n    if (onAdd) {\n      onAdd(particles, emitter);\n    }\n\n    if (props.preemit || (reloadSeed && props.preemitOnReload)) {\n      this.preemitEmitter(emitter);\n    }\n\n    emitter.ignoresScenePause = emitterProps.ignoresScenePause;\n    emitter.updatesOnceOnPause = emitterProps.updatesOnceOnPause;\n\n    this.particleSystems.push({\n      particles, emitter, name, options,\n    });\n  }\n\n  tween(name, target, options = {}) {\n    if (name !== null) {\n      // throws error if invalid\n      prop(`${name}.duration`);\n    }\n\n    const props = name === null ? {...options} : {\n      ...propsWithPrefix(`${name}.`),\n      ...options,\n    };\n\n    const params = massageTweenProps(target, props, options);\n\n    return this.tweens.add(params);\n  }\n\n  _transitionProps(input) {\n    if (!input) {\n      return input;\n    }\n\n    const prefix = typeof input === 'object' ? input.name : input;\n    const options = typeof input === 'object' ? input : {};\n\n    let props;\n\n    if (prefix) {\n      // throws error if invalid\n      prop(`${prefix}.animation`);\n\n      props = {\n        ...propsWithPrefix(`${prefix}.`),\n        ...options,\n      };\n    } else {\n      props = {\n        ...baseTransitionProps,\n        ...options,\n      };\n    }\n\n    return massageTransitionProps(props, options);\n  }\n\n  tweenPercent(duration, update, onComplete, startPoint = 0, ease = 'Linear') {\n    const tween = this.tweens.addCounter({\n      from: startPoint,\n      to: 100,\n      ease,\n      duration,\n      onUpdate: () => {\n        const factor = tween.getValue() / 100.0;\n        update(factor);\n      },\n      onComplete,\n    });\n\n    return tween;\n  }\n\n  tweenPercentExclusive(fieldName, duration, update, onComplete, ease = 'Linear') {\n    let startPoint = 0;\n    if (this[fieldName]) {\n      startPoint = this[fieldName].getValue();\n      this[fieldName].stop();\n    }\n\n    this[fieldName] = this.tweenPercent(\n      duration * (1 - startPoint / 100.0),\n      update,\n      (...args) => {\n        if (onComplete) {\n          onComplete(...args);\n        }\n        delete this[fieldName];\n      },\n      startPoint,\n      ease,\n    );\n\n    return this[fieldName];\n  }\n\n  tweenInOut(inDuration, outDuration, update, onMidpoint, onComplete, startPoint = 0, inEase = 'Linear', outEase = inEase) {\n    let tween;\n\n    tween = this.tweens.addCounter({\n      from: startPoint,\n      to: 100,\n      ease: inEase,\n      duration: inDuration,\n      onUpdate: () => {\n        const factor = tween.getValue() / 100.0;\n        update(factor, true);\n      },\n      onComplete: () => {\n        tween = this.tweens.addCounter({\n          from: 100,\n          to: 0,\n          ease: outEase,\n          duration: outDuration,\n          onUpdate: () => {\n            const factor = tween.getValue() / 100.0;\n            update(factor, false);\n          },\n          onComplete,\n        });\n\n        if (onMidpoint) {\n          onMidpoint(tween);\n        }\n      },\n    });\n\n    return tween;\n  }\n\n  tweenInOutExclusive(fieldName, inDuration, outDuration, update, onMidpoint, onComplete, inEase = 'Linear', outEase = inEase) {\n    let startPoint = 0;\n    if (this[fieldName]) {\n      startPoint = this[fieldName].getValue();\n      this[fieldName].stop();\n    }\n\n    this[fieldName] = this.tweenInOut(\n      inDuration * (1 - startPoint / 100.0),\n      outDuration,\n      update,\n      (tween, ...args) => {\n        if (onMidpoint) {\n          onMidpoint(tween, ...args);\n        }\n\n        this[fieldName] = tween;\n      },\n      (...args) => {\n        if (onComplete) {\n          onComplete(...args);\n        }\n        delete this[fieldName];\n      },\n      startPoint,\n      inEase,\n      outEase,\n    );\n\n    return this[fieldName];\n  }\n\n  tweenSustain(inDuration, sustainDuration, outDuration, update, onSustain, onOut, onComplete, startPoint = 0, inEase = 'Linear', outEase = inEase) {\n    let tween;\n\n    tween = this.tweens.addCounter({\n      from: startPoint,\n      to: 100,\n      ease: inEase,\n      duration: inDuration,\n      onUpdate: () => {\n        const factor = tween.getValue() / 100.0;\n        update(factor, 'in');\n      },\n      onComplete: () => {\n        tween = this.tweens.addCounter({\n          from: 0,\n          to: 100,\n          duration: sustainDuration,\n          onUpdate: () => {\n            const factor = tween.getValue() / 100.0;\n            update(1, 'sustain', factor);\n          },\n          onComplete: () => {\n            tween = this.tweens.addCounter({\n              from: 100,\n              to: 0,\n              ease: outEase,\n              duration: outDuration,\n              onUpdate: () => {\n                const factor = tween.getValue() / 100.0;\n                update(factor, 'out');\n              },\n              onComplete,\n            });\n\n            if (onOut) {\n              onOut(tween);\n            }\n          },\n        });\n\n        if (onSustain) {\n          onSustain(tween);\n        }\n      },\n    });\n\n    return tween;\n  }\n\n  tweenSustainExclusive(\n    fieldName,\n    inDuration,\n    sustainDuration,\n    outDuration,\n    update,\n    onSustain,\n    onOut,\n    onComplete,\n    inEase = 'Linear',\n    outEase = inEase,\n  ) {\n    let startPoint = 0;\n    if (this[fieldName]) {\n      startPoint = this[fieldName].getValue();\n      this[fieldName].stop();\n    }\n\n    this[fieldName] = this.tweenSustain(\n      inDuration * (1 - startPoint / 100.0),\n      sustainDuration,\n      outDuration,\n      update,\n      (tween, ...args) => {\n        if (onSustain) {\n          onSustain(tween, ...args);\n        }\n\n        this[fieldName] = tween;\n      },\n      (tween, ...args) => {\n        if (onOut) {\n          onOut(tween, ...args);\n        }\n\n        this[fieldName] = tween;\n      },\n      (...args) => {\n        if (onComplete) {\n          onComplete(...args);\n        }\n        delete this[fieldName];\n      },\n      startPoint,\n      inEase,\n      outEase,\n    );\n\n    return this[fieldName];\n  }\n\n  trauma(amount) {\n    if (amount && !this._trauma) {\n      this._traumaStart = this.time.now;\n    }\n\n    const newTrauma = Math.min(Math.max(this._trauma + amount, 0), 1);\n    const shake = newTrauma ** prop('scene.trauma.exponent');\n    this._trauma = newTrauma;\n    this._traumaShake = shake;\n\n    if (shake && prop('scene.trauma.legacy') && prop('scene.trauma.enabled')) {\n      const {width, height} = this.game.config;\n      const duration = 100;\n      const intensity = new Phaser.Math.Vector2(\n        shake * prop('scene.trauma.dx') / width,\n        shake * prop('scene.trauma.dy') / height,\n      );\n      this.camera.shake(duration, intensity);\n    }\n  }\n\n  playSound(baseName, variants, volume = 1.0, loop = false) {\n    // preflight etc\n    if (!this.scene.isVisible() || this.game._replayPreflight) {\n      return;\n    }\n\n    let name = baseName;\n    if (variants) {\n      name += 1 + Math.floor(this.randBetween(`sound/${name}`, 0, variants));\n    }\n\n    const sound = this.sound.add(name);\n\n    if (!sound || !sound.key) {\n      // eslint-disable-next-line no-console\n      console.warn(`Could not load sound ${name}`);\n      return;\n    }\n\n    this.sounds.push(sound);\n\n    sound.on('complete', () => {\n      this.sounds = this.sounds.filter((s) => s !== sound);\n    });\n\n    try {\n      sound.requestedVolume = volume;\n      sound.setVolume(volume * this.game.volume * prop('scene.soundVolume'));\n      sound.timeScale = 1;\n      sound.play('', {loop});\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(`Could not play sound ${name}: ${e}`);\n    }\n\n    return sound;\n  }\n\n  changeVolume(newVolume) {\n    const {sounds} = this;\n\n    const multiplier = newVolume * prop('scene.soundVolume');\n\n    sounds.forEach((sound) => sound.setVolume(sound.requestedVolume * multiplier));\n  }\n\n  playMusic(name = this.musicName(), forceRestart = false) {\n    this.game.playMusic(name, forceRestart);\n  }\n\n  playMusicIfSet(name = this.musicName(), forceRestart = false) {\n    if (name) {\n      return this.playMusic(name, forceRestart);\n    }\n  }\n\n  musicName() {\n    return null;\n  }\n\n  timer(callback, time) {\n    const timer = {callback, time};\n    this.timers.push(timer);\n    return timer;\n  }\n\n  updateTimers(time, dt) {\n    const {timers} = this;\n    const newTimers = this.timers = [];\n    const isPaused = this._paused.timers;\n\n    if (!isPaused && this._trauma) {\n      this.trauma(prop('scene.trauma.decay') * dt * -1);\n    }\n\n    timers.forEach((timer) => {\n      if (isPaused && !timer.ignoresScenePause) {\n        newTimers.push(timer);\n        return;\n      }\n\n      if (timer.time) {\n        if (timer.ignoresTimeScale) {\n          timer.time -= dt * this.timeScale;\n        } else {\n          timer.time -= dt;\n        }\n        if (timer.time > 0) {\n          newTimers.push(timer);\n          return;\n        }\n      }\n\n      timer.callback();\n    });\n  }\n\n  updateTweens(time, origDt) {\n    const {tweens} = this.scene.systems;\n    const isPaused = this._paused.tweens;\n\n    // taken from Phaser TweenManager.update\n    const dt = origDt / tweens.timeScale;\n\n    tweens._active.forEach((tween) => {\n      if (isPaused && !tween.ignoresScenePause) {\n        return;\n      }\n\n      if (tween.update(time, dt)) {\n        tweens._destroy.push(tween);\n        tweens._toProcess += 1;\n      }\n    });\n  }\n\n  recoverPerformance() {\n    this.performanceFrames += 1;\n\n    if (!this.performanceAcceptable) {\n      this.performanceAcceptable = this.game.loop.actualFps > 50;\n    }\n\n    if (this.performanceFrames < 300) {\n      return;\n    }\n\n    this.performanceFrames = 0;\n\n    if (this.performanceAcceptable) {\n      this.performanceAcceptable = false;\n      return;\n    }\n\n    if (this.performanceProps.length) {\n      let changes = this.performanceProps.shift();\n      if (!Array.isArray(changes)) {\n        changes = [changes];\n      }\n\n      const applyPropChanges = (props) => {\n        if (props.length) {\n          if (this.game.debug) {\n            refreshUI();\n          }\n\n          props.forEach((propName) => {\n            const particleProp = particlePropFromProp(propName);\n            if (particleProp) {\n              propsWithPrefix(`${particleProp}.`, true);\n\n              this.replayParticleSystems(particleProp);\n            }\n          });\n        }\n      };\n\n      let batch = true;\n      const changedProps = [];\n      const setProp = (key, value) => {\n        changedProps.push(key);\n        const spec = propSpecs[key];\n\n        if (this.game.debug) {\n          manageableProps[key] = value;\n        } else {\n          propSpecs[key][0] = value;\n        }\n\n        if (spec.length > 1 && spec[1] !== null) {\n          if (typeof spec[spec.length - 1] === 'function') {\n            const changeCallback = spec[spec.length - 1];\n            changeCallback(value, this, this.game);\n          }\n        }\n\n        if (!batch) {\n          applyPropChanges([key]);\n        }\n      };\n\n      changes.forEach((change) => {\n        if (typeof change === 'string') {\n          if (change === 'disableShaders') {\n            this.game.disableShaders();\n          } else {\n            setProp(change, !prop(change));\n          }\n        } else if (typeof change === 'function') {\n          change(setProp);\n        }\n      });\n\n      batch = false;\n\n      // eslint-disable-next-line no-console\n      console.log(`Performance seems iffy; applying ${changes.join(', ')}`);\n\n      applyPropChanges(changedProps);\n    }\n  }\n\n  handlePointerEvent(event) {\n    const camelName = event.name.charAt(0).toUpperCase() + event.name.slice(1);\n    const method = `handle${camelName}`;\n    if (this[method]) {\n      this[method](event);\n    } else if (prop('config.debug')) {\n      const debugMethod = `debugHandle${camelName}`;\n      if (this[debugMethod]) {\n        this[debugMethod](event);\n      }\n    }\n  }\n\n  cameraFollow(object, offsetX = 0, offsetY = 0) {\n    if (object) {\n      const lerp = prop('scene.camera.lerp');\n      // true is roundPixels to avoid subpixel rendering\n      this.camera.startFollow(object, true, lerp, lerp, offsetX, offsetY);\n    } else {\n      this.camera.stopFollow();\n    }\n  }\n\n  get timeScale() {\n    return this._timeScale;\n  }\n\n  set timeScale(scale) {\n    this._timeScale = scale;\n\n    if (this.particleSystems) {\n      this.particleSystems.forEach((p) => {\n        p.particles.timeScale = scale;\n      });\n    }\n\n    if (this.physics) {\n      this.physics.world.timeScale = scale;\n      this.physics.world.bodies.entries.forEach((body) => {\n        if (body.gameObject && body.gameObject.anims) {\n          body.gameObject.anims.setTimeScale(scale);\n        }\n      });\n    }\n\n    // None of these are necessary thanks to us rewiring the event loop:\n    /*\n    this.tweens.timeScale = scale;\n    this.time.timeScale = scale;\n    this.anims.globalTimeScale = scale;\n    */\n  }\n\n  shockwave(x, y) {\n    this.shockwave_time = this.scene_time;\n    this.shockwave_center = [x / this.game.config.width, y / this.game.config.height];\n  }\n\n  positionToScreenCoordinate(x, y) {\n    const {\n      xBorder, yBorder, tileWidth, tileHeight,\n    } = this;\n    return [x * tileWidth + xBorder, y * tileHeight + yBorder];\n  }\n\n  positionToScreenCoordinateHalf(x, y) {\n    const {\n      xBorder, yBorder, tileWidth, tileHeight, halfWidth, halfHeight,\n    } = this;\n    return [x * tileWidth + xBorder + halfWidth, y * tileHeight + yBorder + halfHeight];\n  }\n\n  screenCoordinateToPosition(x, y) {\n    const {\n      xBorder, yBorder, tileWidth, tileHeight,\n    } = this;\n    return [(x - xBorder) / tileWidth, (y - yBorder) / tileHeight];\n  }\n\n  screenCoordinateToPositionHalf(x, y) {\n    const {\n      xBorder, yBorder, tileWidth, tileHeight, halfWidth, halfHeight,\n    } = this;\n    return [(x - xBorder - halfWidth) / tileWidth, (y - yBorder - halfHeight) / tileHeight];\n  }\n\n  timeSightMouseDrag() {\n    const {activePointer} = this.game.input;\n    if (activePointer.isDown) {\n      this.cameraFollow();\n\n      if (this._timeSightMouseDragX) {\n        this.camera.scrollX += this._timeSightMouseDragX - activePointer.position.x;\n      }\n\n      if (this._timeSightMouseDragY) {\n        this.camera.scrollY += this._timeSightMouseDragY - activePointer.position.y;\n      }\n\n      this._timeSightMouseDragX = activePointer.position.x;\n      this._timeSightMouseDragY = activePointer.position.y;\n    } else {\n      delete this._timeSightMouseDragX;\n      delete this._timeSightMouseDragY;\n    }\n  }\n\n  willTransitionTo(newScene, transition) {\n  }\n\n  willTransitionFrom(oldScene, transition) {\n  }\n\n  didTransitionTo(newScene, transition) {\n  }\n\n  didTransitionFrom(oldScene, transition) {\n    if (transition && transition.delayNewSceneShader) {\n      this._setupShader();\n    }\n\n    this.playMusic();\n  }\n\n  pauseInputForTransition(transition) {\n    this.command.ignoreAll('_transition', true);\n  }\n\n  unpauseInputForTransition(transition) {\n    this.command.ignoreAll('_transition', false);\n  }\n\n  pauseInputForSleep(duration) {\n    this.command.ignoreAll('_sleep', true);\n  }\n\n  unpauseInputForSleep(duration) {\n    this.command.ignoreAll('_sleep', false);\n  }\n\n  pausePhysicsForTransition(transition) {\n    this.pauseInputForTransition(transition);\n\n    this._paused.physics = true;\n\n    this.pauseAllAnimations();\n  }\n\n  pausePhysicsForSleep(duration) {\n    this.pauseInputForSleep(duration);\n\n    this._paused.physics = true;\n\n    this.pauseAllAnimations();\n  }\n\n  unpausePhysicsForTransition(transition) {\n    this.unpauseInputForTransition(transition);\n\n    this._paused.physics = false;\n\n    this.resumeAllAnimations();\n  }\n\n  unpausePhysicsForSleep(duration) {\n    this.unpauseInputForSleep(duration);\n\n    this._paused.physics = false;\n\n    this.resumeAllAnimations();\n  }\n\n  pauseEverythingForTransition(transition) {\n    this.pausePhysicsForTransition(transition);\n\n    this._paused.timers = true;\n    this.pauseAllParticleSystems();\n    this.pauseAllTweens();\n  }\n\n  unpauseEverythingForTransition(transition) {\n    this.unpausePhysicsForTransition(transition);\n\n    this._paused.timers = false;\n    this.resumeAllParticleSystems();\n    this.resumeAllTweens();\n  }\n\n  pauseEverythingForSleep(duration) {\n    this.pausePhysicsForSleep(duration);\n\n    this._paused.timers = true;\n    this.pauseAllParticleSystems();\n    this.pauseAllTweens();\n  }\n\n  unpauseEverythingForSleep(duration) {\n    this.unpausePhysicsForSleep(duration);\n\n    this._paused.timers = false;\n    this.resumeAllParticleSystems();\n    this.resumeAllTweens();\n  }\n\n  pauseAllParticleSystems() {\n    this._paused.particles = true;\n\n    if (this.particleSystems.length) {\n      injectParticleEmitterManagerPreUpdate(this.particleSystems[0].particles);\n    }\n  }\n\n  pauseAllTweens() {\n    this._paused.tweens = true;\n  }\n\n  pauseAllAnimations() {\n    this._paused.anims = true;\n\n    if (this._injectedAnimsUpdate) {\n      return;\n    }\n\n    if (this.physics && this.physics.world && this.physics.world.bodies && this.physics.world.bodies.entries) {\n      this.physics.world.bodies.entries.forEach((body) => {\n        if (body.gameObject && body.gameObject.anims) {\n          if (injectAnimationUpdate(body.gameObject.anims)) {\n            this._injectedAnimsUpdate = true;\n          }\n        }\n      });\n    }\n  }\n\n  resumeAllParticleSystems() {\n    this._paused.particles = false;\n\n    this.particleSystems.forEach((p) => {\n      p.particles.resume();\n    });\n  }\n\n  resumeAllTweens() {\n    this._paused.tweens = false;\n  }\n\n  resumeAllAnimations() {\n    this._paused.anims = false;\n  }\n\n  destroy() {\n    this.command.detachScene(this);\n  }\n}\n\nif (module.hot) {\n  module.hot.accept('../assets/maps.txt', () => {\n    try {\n      const next = require('../assets/maps.txt');\n\n      fetch(next).then((res) => {\n        res.text().then((text) => {\n          try {\n            const {game} = window;\n\n            const previous = game._ldMapFiles;\n            const nextMaps = parseMaps(text);\n\n            if (!previous || !nextMaps) {\n              return;\n            }\n\n            game._ldMapFiles = nextMaps;\n\n            let reloadCurrent = true;\n\n            const scene = game.topScene();\n            const activeId = scene.level && scene.level.id;\n\n            const prevById = {};\n            previous.forEach((spec) => { prevById[spec[1].id] = spec; });\n            const nextById = {};\n            nextMaps.forEach((spec) => { nextById[spec[1].id] = spec; });\n\n            const changes = [];\n\n            const leftover = {...prevById};\n\n            Object.entries(nextById).forEach(([id, nextSpec]) => {\n              if (!prevById[id]) {\n                if (id !== activeId) {\n                  changes.push(`+${id}`);\n                }\n              } else {\n                const previousSpec = prevById[id];\n                delete leftover[id];\n\n                if (!deepEqual(previousSpec, nextSpec)) {\n                  if (id !== activeId) {\n                    changes.push(`Δ${id}`);\n                  }\n                }\n              }\n            });\n\n            changes.push(...Object.keys(leftover).filter((id) => id !== activeId).map((id) => `-${id}`));\n\n            if (!deepEqual(previous.map((spec) => spec[1].id), nextMaps.map((spec) => spec[1].id))) {\n              changes.push('(order)');\n            }\n\n            if (activeId) {\n              const p = prevById[activeId];\n              const n = nextById[activeId];\n\n              if (deepEqual(p, n)) {\n                reloadCurrent = false;\n              } else {\n                changes.unshift(`active level ${activeId}`);\n              }\n            }\n\n            // eslint-disable-next-line no-console\n            console.info(`Hot-loading levels: ${changes.join(', ')}`);\n\n            if (!reloadCurrent) {\n              return;\n            }\n\n            if (scene._builtinHot) {\n              scene._builtinHot();\n            }\n            if (scene._hot) {\n              scene._hot();\n            }\n\n            scene._hotReloadCurrentLevel();\n          } catch (e) {\n            // eslint-disable-next-line no-console\n            console.error(e);\n          }\n        });\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n  });\n\n  module.hot.accept('../assets/index', () => {\n    try {\n      const next = require('../assets/index');\n      const {game} = window;\n\n      reloadAssets(game.topScene(), next).then(([changedAssets, changesByType]) => {\n        const scene = game.topScene();\n        let sawChanges = false;\n\n        Object.entries(changedAssets).forEach(([type, changed]) => {\n          if (changesByType[type] && changesByType[type].length) {\n            sawChanges = true;\n            // eslint-disable-next-line no-console\n            console.info(`Hot-loading ${type}: ${changesByType[type].join(', ')}`);\n          }\n\n          if (type === 'musicAssets') {\n            const {currentMusicName} = game;\n            if (changed[currentMusicName]) {\n              game.playMusic(currentMusicName, true);\n            }\n          } else if (type === 'imageAssets' || type === 'spriteAssets') {\n            Object.entries(changed).forEach(([key, texture]) => {\n              scene.add.displayList.list.forEach((object) => {\n                if (object.texture && object.texture.key === key) {\n                  if (object.setTexture) {\n                    object.setTexture(key);\n                  } else {\n                    object.texture = texture;\n                  }\n                }\n              });\n            });\n          }\n        });\n\n        if (!sawChanges) {\n          return;\n        }\n\n        if (scene._builtinHot) {\n          scene._builtinHot();\n        }\n        if (scene._hot) {\n          scene._hot();\n        }\n      });\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n  });\n}\n","import deepEqual from 'deep-equal';\nimport {tileDefinitions} from '../../props';\n\nlet tileSpecs;\nexport function updateTileDefinitions(newDefinitions) {\n  const previousTileSpecs = tileSpecs;\n  tileSpecs = preprocessTileDefinitions(newDefinitions);\n\n  if (!previousTileSpecs) {\n    return null;\n  }\n\n  const changes = [];\n\n  const leftoverKeys = {};\n  Object.keys(previousTileSpecs).forEach((key) => {\n    leftoverKeys[key] = true;\n  });\n\n  Object.keys(tileSpecs).forEach((key) => {\n    const oldValue = previousTileSpecs[key];\n    const newValue = tileSpecs[key];\n\n    if (key in previousTileSpecs) {\n      delete leftoverKeys[key];\n    }\n\n    if (!deepEqual(oldValue, newValue)) {\n      changes.push(key);\n    }\n  });\n\n  changes.push(...Object.keys(leftoverKeys));\n  return changes;\n}\n\nupdateTileDefinitions(tileDefinitions);\n\nexport function tileSpec(glyph) {\n  return tileSpecs[glyph];\n}\n\nfunction flattenInheritance(specs) {\n  Object.entries(specs).forEach(([key, config]) => {\n    if (!config || !config._inherit) {\n      return;\n    }\n\n    const seen = {[key]: true};\n    const nodes = [{...config}];\n\n    let parent = config._inherit;\n    if (!(parent in specs)) {\n      throw new Error(`Inherited from nonexistent parent: ${key} → ${parent}`);\n    }\n\n    while (specs[parent]) {\n      if (seen[parent]) {\n        throw new Error(`Loop detected in tileDefinitions _inherit: ${[...Object.keys(seen), key].join(' → ')}`);\n      }\n\n      seen[parent] = true;\n      nodes.unshift(specs[parent]);\n      parent = specs[parent]._inherit;\n    }\n\n    Object.assign(config, ...nodes);\n  });\n\n  return specs;\n}\n\nexport function preprocessTileDefinitions(specs) {\n  return flattenInheritance(specs);\n}\n\nexport function parseMaps(content) {\n  const maps = [];\n\n  const allLines = content.split('\\n');\n  if (allLines.length === 0) {\n    return maps;\n  }\n\n  // simplify end checking\n  allLines.push('');\n\n  let mapLines = [];\n  let configLines = [];\n  let prevLineIsEmpty = true;\n  let parsingConfig = false;\n\n  allLines.forEach((line, i) => {\n    if (line === '') {\n      if (prevLineIsEmpty) {\n        return;\n      }\n      prevLineIsEmpty = true;\n\n      if (mapLines.length && configLines.length) {\n        const config = JSON.parse(configLines.join('\\n'));\n        if (!config.id) {\n          // eslint-disable-next-line no-console\n          console.warn(`Config line ${i}: level is missing an 'id'`);\n        }\n        maps.push([[...mapLines], config]);\n        mapLines = [];\n        configLines = [];\n        parsingConfig = false;\n      } else if (mapLines.length) {\n        parsingConfig = true;\n      }\n    } else {\n      prevLineIsEmpty = false;\n\n      if (parsingConfig) {\n        configLines.push(line);\n      } else {\n        mapLines.push(line);\n      }\n    }\n  });\n\n  return maps;\n}\n\nexport function parseLevelLines(lines, isRectangular) {\n  const lookups = {};\n  const map = [];\n  lines.forEach((line, y) => {\n    const row = [];\n    line.split('').forEach((glyph, x) => {\n      if (!(glyph in tileSpecs)) {\n        throw new Error(`Unknown glyph at (${x}, ${y}): ${glyph}`);\n      }\n\n      const tile = {\n        x,\n        y,\n        glyph,\n        ...tileSpecs[glyph],\n      };\n\n      row.push(tile);\n\n      if (!lookups[glyph]) {\n        lookups[glyph] = [];\n      }\n      lookups[glyph].push(tile);\n    });\n\n    map.push(row);\n  });\n\n  if (isRectangular) {\n    map.forEach((row, y) => {\n      if (y === map.length - 1) {\n        return;\n      }\n\n      if (row.length !== map[y + 1].length) {\n        throw new Error(`Inconsistent row width at ${y + 1}. Expected ${row.length}, got ${map[y + 1].length}`);\n      }\n    });\n  }\n\n  const mapText = lines.join('\\n');\n\n  return {map, mapText, lookups};\n}\n\nexport default function parseLevel(content, isRectangular) {\n  const allLines = content.split('\\n');\n\n  // trailing empty lines\n  while (allLines[allLines.length - 1].length === 0) {\n    allLines.pop();\n  }\n\n  // find last empty line\n  let i;\n  for (i = allLines.length - 1; i >= 0; i -= 1) {\n    if (allLines[i].length === 0) {\n      break;\n    }\n  }\n\n  if (i < 0) {\n    throw new Error('No empty line for parseLevel');\n  }\n\n  const {lookups, map} = parseLevelLines(allLines.slice(0, i), isRectangular);\n  const config = JSON.parse(allLines.slice(i).join('\\n'));\n\n  return {map, config, lookups};\n}\n\nif (module.hot) {\n  module.hot.accept('../../props', () => {\n    try {\n      const next = require('../../props');\n\n      const changes = updateTileDefinitions(next.tileDefinitions);\n      if (changes.length === 0) {\n        return;\n      }\n\n      // eslint-disable-next-line no-console\n      console.info(`Hot-loading tile definitions: ${changes}`);\n\n      const {game} = window;\n      const scene = game.topScene();\n      if (scene._builtinHot) {\n        scene._builtinHot();\n      }\n      if (scene._hot) {\n        scene._hot();\n      }\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n  });\n}\n","import {\n  builtinPropSpecs, ManageableProps, PropLoader, makePropsWithPrefix,\n  preprocessPropSpecs,\n} from './scaffolding/lib/props';\n\nconst particleImages = [\n  'effectImageCircle',\n];\n\nexport const commands = {\n  shoot: {\n    input: ['keyboard.Z', 'gamepad.A'],\n    execute: 'playerShoot',\n  },\n\n  afterburner: {\n    input: ['keyboard.X', 'gamepad.X'],\n    execute: 'afterburn',\n  },\n\n  up: {\n    input: ['keyboard.UP', 'gamepad.UP'],\n  },\n  down: {\n    input: ['keyboard.DOWN', 'gamepad.DOWN'],\n  },\n  left: {\n    input: ['keyboard.LEFT', 'gamepad.LEFT'],\n  },\n  right: {\n    input: ['keyboard.RIGHT', 'gamepad.RIGHT'],\n  },\n  lstick: {\n    input: ['gamepad.LSTICK.RAW'],\n    joystick: true,\n  },\n  rstick: {\n    input: ['gamepad.RSTICK.RAW'],\n    joystick: true,\n  },\n\n  next: {\n    input: ['keyboard.N'],\n    execute: (scene) => scene.skipLevel(1),\n    debug: true,\n    unignorable: true,\n    unreplayable: true,\n  },\n  prev: {\n    input: ['keyboard.P'],\n    execute: (scene) => scene.skipLevel(-1),\n    debug: true,\n    unignorable: true,\n    unreplayable: true,\n  },\n  restart: {\n    input: ['keyboard.R'],\n    execute: (scene) => scene.replaceWithSelf(),\n    debug: true,\n    unignorable: true,\n    unreplayable: true,\n  },\n  quit: {\n    input: ['keyboard.Q'],\n    execute: 'forceQuit',\n    debug: true,\n    unignorable: true,\n    unreplayable: true,\n  },\n  recordCycle: {\n    input: ['gamepad.Y'],\n    unreplayable: true,\n    debug: true,\n    unignorable: true,\n    execute: (scene, game) => {\n      const {_replay, _recording} = game;\n      if (_replay && _replay.timeSight) {\n        game.stopReplay();\n      } else if (_replay) {\n        setTimeout(() => {\n          game.stopReplay();\n          game.beginReplay({..._replay, timeSight: true});\n        });\n      } else if (_recording) {\n        game.stopRecording();\n      } else {\n        game.beginRecording();\n      }\n    },\n  },\n};\n\nexport const shaderCoordFragments = [\n  'shockwave',\n];\nexport const shaderColorFragments = [\n  'blur',\n];\nexport const shaderPipelines = {\n};\n\nexport const propSpecs = {\n  ...builtinPropSpecs(commands, shaderCoordFragments, shaderColorFragments),\n\n\n  'physics.goalDrag': [0.95, 0, 1],\n  'physics.drag': [0.98, 0, 1],\n  'physics.timeThrust': [5, 0, 10],\n  'physics.zoomThrust': [0.15, 0, 1],\n\n  'level.goalDepth': [0, null],\n\n  'plane.boostRollThrustFactor': [0.3, 0, 1],\n  'plane.rollThrustFactor': [0.8, 0, 1],\n  'plane.thrustRollFactor': [1.0, 0, 1],\n  'plane.droll': [300, 0, 10000],\n  'plane.gravity': [300, 0, 10000],\n  'plane.thrustGravity': [100, 0, 10000],\n  'plane.power': [500, 0, 10000],\n  'plane.maxVelocity': [500, 0, 10000],\n  'plane.squish': [30, 1, 100],\n  'plane.wallBounce': [10000, 0, 100000],\n  'plane.planeBounce': [10000, 0, 100000],\n  'plane.bounceTime': [100, 0, 10000],\n  'plane.health': [100, 0, 10000],\n  'plane.healthMultiplier': [2.0, 0, 10],\n  'plane.bulletDamage': [5, 0, 1000],\n  'plane.collideDamage': [2, 0, 1000],\n\n  'currentPlane.x': [0, null, 'level.currentPlane.x'],\n  'currentPlane.y': [0, null, 'level.currentPlane.y'],\n  'currentPlane.vx': [0.1, null, 'level.currentPlane.body.velocity.x'],\n  'currentPlane.vy': [0.1, null, 'level.currentPlane.body.velocity.y'],\n  'currentPlane.thrust': [0.1, null, 'level.currentPlane.thrust'],\n  'currentPlane.roll': [0.1, null, 'level.currentPlane.roll'],\n  'currentPlane.angle': [0.1, null, 'level.currentPlane.angle'],\n  'currentPlane.theta': [0.1, null, 'level.currentPlane.theta'],\n  'currentPlane.accelerationX': [0.1, null, 'level.currentPlane.body.acceleration.x'],\n  'currentPlane.accelerationY': [0.1, null, 'level.currentPlane.body.acceleration.y'],\n  'currentPlane.afterburnerThrust': [0.1, null, 'level.currentPlane.afterburnerThrust'],\n  'currentPlane.destroy': [(scene) => scene.destroyPlane(scene.level.currentPlane)],\n\n  'booster.x': [0, null, 'level.currentPlane.booster.x'],\n  'booster.y': [0, null, 'level.currentPlane.booster.y'],\n  'booster.angle': [0, null, 'level.currentPlane.booster.angle'],\n  'booster.bounce': [300, 0, 500],\n  'booster.distance': [10, 0, 1000],\n  'booster.bonus': [0.1, null, 'level.currentPlane.booster.bonus'],\n  'booster.shockOffset': [32, 0, 100],\n\n  'afterburner.currentCooldown': [0, null, 'level.currentPlane.afterburnerCooldown'],\n  'afterburner.cooldown': [2000, 0, 10000],\n  'afterburner.thrustBoost': [3, 0, 10],\n  'afterburner.thrustMax': [1.0, 0, 10],\n\n  'gun.current': [0, null, 'level.currentPlane.currentGun'],\n  'gun.next': [(scene) => scene.nextGun()],\n  'gun.prev': [(scene) => scene.prevGun()],\n\n  'gun.0.speed': [500, 0, 10000],\n  'gun.0.cooldown': [500, 0, 10000],\n  'gun.0.recoil': [300, 0, 10000],\n\n  'goal.wait': [1000, 0, 10000],\n  'goal.planeIndex': [0, null, 'level.planeIndex'],\n  'goal.planeDebounce': [false, null, 'level.debouncePlaneSelect'],\n  'goal.depthExponent': [1.3, 0, 10],\n  'goal.depthMultiplier': [10, 0, 100],\n\n  'effects.hint.attract.tween': [{\n    duration: 2000,\n    dy: 8,\n    ease: 'Quad.easeInOut',\n    yoyo: true,\n    loop: -1,\n  }],\n\n  'effects.winTransition.transition': [{\n    animation: 'fadeInOut',\n    duration: 1000,\n  }],\n\n  'effects.chuck.titleIn.tween': [{\n    alpha: 1,\n    dy: 50,\n    ease: 'Cubic.easeOut',\n    duration: 500,\n  }],\n\n  'effects.chuck.signatureIn.tween': [{\n    duration: 2000,\n  }],\n\n  'effects.chuck.nameIn.tween': [{\n    alpha: 1,\n    dx: -500,\n    ease: 'Cubic.easeOut',\n    duration: 1000,\n  }],\n\n  'effects.explode.particles': [{\n    image: 'effectImageCircle',\n    quantity: 50,\n  }],\n\n  'effects.pregoal.particles': [{\n    image: 'effectImageCircle',\n    preemit: true,\n    scaleX: 0.05,\n    scaleY: 0.05,\n    quantity: 1,\n    frequency: 1,\n    lifespan: 1000,\n  }],\n};\n\npropSpecs['scene.camera.lerp'][0] = 0.1;\npropSpecs['scene.camera.hasBounds'][0] = false;\n\nexport const tileDefinitions = {\n  '.': null, // background\n  // used when vault is narrower to ensure vault is fully combined\n  '<': {\n    image: 'vault',\n    group: 'wall',\n    isStatic: true,\n    combine: '<',\n    preferCombineVertical: true,\n  },\n  '>': {\n    image: 'vaultR',\n    group: 'wall',\n    isStatic: true,\n    combine: '<',\n    preferCombineVertical: true,\n  },\n  '^': {\n    image: 'vaultB',\n    group: 'wall',\n    isStatic: true,\n    combine: '<',\n    preferCombineVertical: true,\n  },\n\n  // used when vault is same size to get a smooth wall\n  '[': {\n    image: 'vault',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: true,\n  },\n  ']': {\n    image: 'vaultR',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: true,\n  },\n  _: {\n    image: 'vaultB',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: true,\n  },\n\n  '-': {\n    image: 'wall',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: false,\n  },\n  '|': {\n    image: 'wallVertical',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: true,\n  },\n  t: {\n    image: 'wallTop',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: true,\n  },\n  b: {\n    image: 'wallBottom',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n    preferCombineVertical: true,\n  },\n  l: {\n    image: 'wallTL',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n  },\n  r: {\n    image: 'wallTR',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n  },\n  c: {\n    image: 'wallBL',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n  },\n  d: {\n    image: 'wallBR',\n    group: 'wall',\n    isStatic: true,\n    combine: '#',\n  },\n  $: {\n    group: 'pregoal',\n    isStatic: true,\n    combine: true,\n  },\n  1: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  2: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  3: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  4: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  5: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  6: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  7: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  8: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  9: {\n    image: 'goalTile',\n    group: 'goal',\n    isStatic: true,\n    combine: true,\n  },\n  '&': {\n    image: 'wreck',\n    group: 'wreck',\n  },\n  '@': {\n    image: 'player',\n    group: 'plane',\n  },\n  A: {\n    image: 'enemyA',\n    group: 'plane',\n  },\n  B: {\n    image: 'planeB',\n    group: 'plane',\n  },\n  C: {\n    image: 'planeC',\n    group: 'plane',\n  },\n  D: {\n    image: 'planeD',\n    group: 'plane',\n  },\n  E: {\n    image: 'planeE',\n    group: 'plane',\n  },\n  F: {\n    image: 'planeF',\n    group: 'plane',\n  },\n  T: {\n    image: 'turret',\n    group: 'turret',\n    isStatic: true,\n  },\n  V: {\n    image: 'turretV',\n    group: 'turret',\n    isStatic: true,\n  },\n  L: {\n    image: 'turretV',\n    group: 'turret',\n    rotateLeft: true,\n    isStatic: true,\n  },\n  R: {\n    image: 'turretV',\n    group: 'turret',\n    rotateRight: true,\n    isStatic: true,\n  },\n  M: {\n    image: 'mine',\n    group: 'mine',\n    isStatic: true,\n  },\n};\n\npreprocessPropSpecs(propSpecs, particleImages);\n\nexport const manageableProps = new ManageableProps(propSpecs);\nexport const propsWithPrefix = makePropsWithPrefix(propSpecs, manageableProps);\nexport default PropLoader(propSpecs, manageableProps);\n","import _ from 'lodash';\nimport * as dat from 'dat.gui';\nimport prop, {manageableProps, propSpecs} from '../../props';\nimport {saveField} from './store';\nimport {savedChangedProps} from './props';\n\nlet gui;\n\nconst folders = {};\nconst controllers = {};\nconst parentOfFolder = new Map();\nconst changedProps = {};\n\nconst originalProp = prop;\nlet proxiedManageableProps = manageableProps;\nconst manageablePropsProxy = new Proxy({}, {\n  get(target, key) {\n    return proxiedManageableProps[key];\n  },\n\n  set(target, key, value) {\n    proxiedManageableProps[key] = value;\n    return true;\n  },\n});\n\nexport function initializeManage() {\n  if (!gui) {\n    gui = new dat.GUI({autoPlace: false});\n\n    Object.keys(propSpecs).forEach((key) => addNestedFolder(key));\n    Object.keys(propSpecs).forEach((key) => addController(\n      key,\n      propSpecs[key],\n      false,\n      key in savedChangedProps || `${key}_enabled` in savedChangedProps,\n    ));\n  }\n\n  return gui;\n}\n\nfunction upcase(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\nfunction sentenceCase(name) {\n  const words = name.split(/[-_ ]/);\n  return words.map(upcase).join(' ');\n}\n\nfunction addNestedFolder(key) {\n  const sections = key.split('.');\n  let folderKey = '';\n  let folder = gui;\n\n  while (sections.length > 1) {\n    const section = sections.shift();\n    folderKey += `.${section}`;\n\n    if (!folders[folderKey]) {\n      folders[folderKey] = folder.addFolder(sentenceCase(section));\n      parentOfFolder.set(folders[folderKey], folder);\n\n      const title = folders[folderKey].domElement.querySelector('li.title');\n      title.addEventListener('click', () => {\n        regenerateListenPropsCache();\n      });\n    }\n\n    folder = folders[folderKey];\n  }\n\n  return folder;\n}\n\nfunction removeEmptyFolders() {\n  let deletedFolder = false;\n\n  Object.entries(folders).forEach(([name, folder]) => {\n    if (folder.__controllers.length || Object.keys(folder.__folders).length) {\n      return;\n    }\n\n    const parent = parentOfFolder.get(folder);\n    parent.removeFolder(folder);\n\n    parentOfFolder.delete(folder);\n    delete folders[name];\n\n    deletedFolder = true;\n  });\n\n  // recurse now that the parent of the deleted folder could now be empty\n  if (deletedFolder) {\n    removeEmptyFolders();\n  }\n}\n\nlet batchSaveChangedProps = 0;\nfunction saveChangedProps() {\n  if (batchSaveChangedProps) {\n    return;\n  }\n\n  saveField('changedProps', changedProps);\n}\n\nfunction setChangedProp(key) {\n  changedProps[key] = [manageableProps[key], propSpecs[key][0]];\n  document.body.classList.add('changed-props');\n}\n\nfunction setUnchangedProp(key) {\n  delete changedProps[key];\n  if (!Object.keys(changedProps).length) {\n    document.body.classList.remove('changed-props');\n  }\n}\n\nfunction addController(key, spec, open, saved) {\n  const [originalValue, ...options] = propSpecs[key];\n  const folder = addNestedFolder(key);\n\n  if (manageablePropsProxy[key] === null) {\n    throw new Error(`Prop ${key} must not be initialized to null`);\n  }\n\n  if (key.endsWith('_enabled')) {\n    const prefix = key.substr(0, key.length - '_enabled'.length);\n    if (!(prefix in propSpecs)) {\n      throw new Error(`Prop ${key} does not have corresponding ${prefix}`);\n    }\n    return;\n  }\n\n  const enabledKey = `${key}_enabled`;\n\n  let controller;\n  if (options.length >= 1 && options[0] === null) {\n    if (key.match(/color$/i)) {\n      controller = folder.addColor(manageablePropsProxy, key).listen();\n    } else {\n      controller = folder.add(manageablePropsProxy, key).listen();\n    }\n    controller.domElement.closest('.cr').classList.add('listen');\n    controller.domElement.querySelectorAll('input, select').forEach((node) => {\n      node.tabIndex = -1;\n      node.onclick = (e) => {\n        e.preventDefault();\n      };\n    });\n\n    if (options.length > 1 && typeof options[options.length - 1] === 'function') {\n      controller.__ldListenCallback = options[options.length - 1];\n    }\n  } else {\n    let callback;\n    if (options.length >= 1 && typeof options[options.length - 1] === 'function') {\n      callback = options.pop();\n    }\n\n    if (key.match(/color$/i)) {\n      controller = folder.addColor(manageablePropsProxy, key, ...options);\n    } else {\n      controller = folder.add(manageablePropsProxy, key, ...options);\n    }\n\n    if (callback) {\n      controller.__ldChangeCallback = callback;\n    }\n\n    if (typeof originalValue === 'function') {\n      controller.__ldActionCallback = originalValue;\n    }\n\n    const crNode = controller.domElement.closest('.cr');\n\n    let enabledCheckbox;\n    let enabledValue;\n    const originalEnabled = enabledKey in propSpecs ? propSpecs[enabledKey][0] : null;\n\n    if (enabledKey in manageableProps) {\n      enabledValue = manageableProps[enabledKey];\n\n      const container = document.createElement('div');\n      container.classList.add('toggle');\n\n      enabledCheckbox = document.createElement('input');\n      enabledCheckbox.setAttribute('type', 'checkbox');\n      if (enabledValue) {\n        enabledCheckbox.setAttribute('checked', 'checked');\n        enabledCheckbox.checked = true;\n      }\n\n      container.appendChild(enabledCheckbox);\n\n      crNode.classList.add('disableable');\n\n      const {parentNode} = controller.domElement;\n      parentNode.appendChild(container);\n\n      controller.__ldEnabledSpec = propSpecs[enabledKey];\n\n      enabledCheckbox.onchange = (e) => {\n        e.preventDefault();\n        const {checked} = e.target;\n        manageableProps[enabledKey] = checked;\n\n        enabledCheckbox.__suppressChange = true;\n        try {\n          controller.__onChange(manageableProps[key]);\n          controller.__onFinishChange(manageableProps[key]);\n        } catch (err) {\n          enabledCheckbox.__suppressChange = false;\n          throw err;\n        }\n\n        enabledCheckbox.__suppressChange = false;\n      };\n    }\n\n    if (typeof originalValue !== 'function') {\n      const container = document.createElement('div');\n      container.classList.add('reset');\n\n      const resetButton = document.createElement('input');\n      resetButton.setAttribute('type', 'button');\n      resetButton.value = '⤺';\n\n      container.appendChild(resetButton);\n\n      const {parentNode} = controller.domElement;\n      parentNode.appendChild(container);\n\n      resetButton.onclick = (e) => {\n        if (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n        manageableProps[key] = originalValue;\n\n        if (enabledCheckbox) {\n          enabledCheckbox.__suppressChange = true;\n          manageableProps[enabledKey] = originalEnabled;\n          if (originalEnabled) {\n            enabledCheckbox.setAttribute('checked', 'checked');\n            enabledCheckbox.checked = true;\n          } else {\n            enabledCheckbox.removeAttribute('checked');\n            enabledCheckbox.checked = false;\n          }\n        }\n\n        controller.updateDisplay();\n\n        try {\n          controller.__onChange(manageableProps[key]);\n          controller.__onFinishChange(manageableProps[key]);\n        } catch (err) {\n          if (enabledCheckbox) {\n            enabledCheckbox.__suppressChange = false;\n          }\n\n          throw err;\n        }\n\n        if (enabledCheckbox) {\n          enabledCheckbox.__suppressChange = false;\n        }\n      };\n    }\n\n    if (typeof originalValue !== 'function') {\n      controller.onFinishChange((value) => {\n        let ret;\n        try {\n          const {game} = window;\n          const scene = game.topScene();\n          scene.propDidFinishChange(key, value);\n          saveChangedProps();\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n        }\n\n        return ret;\n      });\n\n      controller.onChange((value) => {\n        let ret;\n        try {\n          if (enabledCheckbox && !enabledCheckbox.__suppressChange) {\n            manageableProps[enabledKey] = true;\n            enabledCheckbox.setAttribute('checked', 'checked');\n            enabledCheckbox.checked = true;\n          }\n\n          const {game} = window;\n          const scene = game.topScene();\n          scene.propDidChange(key, value);\n\n          let isChanged = false;\n          if (enabledCheckbox) {\n            if (manageableProps[enabledKey] !== originalEnabled) {\n              isChanged = true;\n              setChangedProp(enabledKey);\n            } else {\n              setUnchangedProp(enabledKey);\n            }\n          }\n\n          if (value !== originalValue) {\n            isChanged = true;\n            setChangedProp(key);\n          } else {\n            setUnchangedProp(key);\n          }\n\n          saveChangedProps();\n\n          if (isChanged) {\n            crNode.classList.add('changed');\n          } else {\n            crNode.classList.remove('changed');\n          }\n\n          if (controller.__ldChangeCallback) {\n            ret = controller.__ldChangeCallback(value, scene, game);\n          }\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n        }\n\n        return ret;\n      });\n\n      if (saved) {\n        setChangedProp(key);\n        crNode.classList.add('changed');\n      }\n    }\n  }\n\n  const container = controller.domElement.closest('.cr');\n  container.title = key;\n  container.dataset.prop = key;\n\n  controllers[key] = controller;\n  controller.__ldSpec = spec;\n\n  if (open) {\n    let f = folder;\n    while (f) {\n      f.open();\n      f = parentOfFolder.get(f);\n    }\n  }\n\n  return controller;\n}\n\nfunction removeProp(key) {\n  const controller = controllers[key];\n  const folder = addNestedFolder(key);\n  folder.remove(controller);\n  delete controllers[key];\n}\n\nexport function refreshUI() {\n  gui.updateDisplay();\n  Object.values(folders).forEach((folder) => folder.updateDisplay());\n}\n\nconst listenPropsCache = [];\nfunction regenerateListenPropsCache() {\n  listenPropsCache.length = 0;\n  document.querySelectorAll('.Manage ul:not(.closed) > li.listen:not(.filtered)').forEach((node) => {\n    const key = node.dataset.prop;\n    const spec = propSpecs[key];\n    listenPropsCache.push([key, spec]);\n  });\n}\n\nexport function updatePropsFromStep(skipCache) {\n  const {game} = window;\n  const scene = game.topScene();\n\n  const updateProp = ([key, spec]) => {\n    if (spec[1] === null) {\n      if (!spec[2]) {\n        manageableProps[key] = _.get(game, key) || _.get(scene, key);\n      } else if (typeof spec[2] === 'string') {\n        manageableProps[key] = _.get(game, spec[2]) || _.get(scene, spec[2]);\n      } else if (typeof spec[2] === 'function') {\n        try {\n          manageableProps[key] = spec[2](game.topScene(), game);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n        }\n      }\n    }\n  };\n\n  if (skipCache) {\n    Object.entries(propSpecs).forEach(updateProp);\n  } else {\n    listenPropsCache.forEach(updateProp);\n  }\n}\n\nexport function overrideProps(newProps) {\n  Object.entries(propSpecs).forEach(([key, spec]) => {\n    if (spec[1] === null) {\n      manageableProps[key] = newProps[key];\n    }\n  });\n}\n\nfunction specDiffers(old, next) {\n  let differsInFunction;\n\n  if ((!next && old) || (!old && next)) {\n    return true;\n  }\n\n  if (old.length !== next.length) {\n    return true;\n  }\n\n  for (let i = next.length - 1; i >= 0; i -= 1) {\n    if (i === next.length - 1 && typeof next[i] === 'function' && typeof old[i] === 'function') {\n      differsInFunction = true;\n    } else if ((i === 0 || i === 1) && Array.isArray(next[i]) && Array.isArray(old[i])) {\n      // compare enum values\n      const nextArray = next[i];\n      const oldArray = old[i];\n\n      if (nextArray.length !== oldArray.length) {\n        return true;\n      }\n\n      for (let j = nextArray.length - 1; j >= 0; j -= 1) {\n        if (nextArray[j] !== oldArray[j]) {\n          return true;\n        }\n      }\n    } else if (next[i] !== old[i]) {\n      return true;\n    }\n  }\n\n  if (differsInFunction) {\n    return 'function';\n  }\n\n  return false;\n}\n\nfunction requiresControllerRecreation(key, next) {\n  const spec = next[key];\n  const controller = controllers[key];\n  const oldSpec = controller.__ldSpec;\n\n  // listeners don't need to regenerate unless the type changes\n  if (oldSpec[1] === null && spec[1] === null) {\n    if (typeof oldSpec[0] !== typeof spec[0]) {\n      return true;\n    }\n\n    return false;\n  }\n\n  const nextEnabledSpec = next[`${key}_enabled`];\n  if ('__ldEnabledSpec' in controller) {\n    if (specDiffers(controller.__ldEnabledSpec, nextEnabledSpec)) {\n      return true;\n    }\n  } else if (nextEnabledSpec) {\n    return true;\n  }\n\n  return specDiffers(oldSpec, spec);\n}\n\nfunction updatePropsFromReload(oldValues, nextSpecs) {\n  const changes = [];\n\n  const leftoverKeys = {};\n  Object.keys(controllers).forEach((key) => {\n    leftoverKeys[key] = true;\n  });\n\n  Object.keys(nextSpecs).forEach((key) => addNestedFolder(key, true));\n\n  Object.entries(nextSpecs).forEach(([key, spec]) => {\n    if (!(key in controllers)) {\n      addController(key, spec, true);\n\n      if (!key.endsWith('_enabled')) {\n        changes.push(key);\n      }\n    } else {\n      delete leftoverKeys[key];\n      const controller = controllers[key];\n\n      const requiresRecreation = requiresControllerRecreation(key, nextSpecs);\n      if (!requiresRecreation || requiresRecreation === 'function') {\n        if (!requiresRecreation && spec.length > 1 && spec[1] === null && typeof spec[spec.length - 1] === 'function') {\n          if (String(spec[spec.length - 1]) !== String(controller.__ldListenCallback)) {\n            changes.push(key);\n          }\n          controller.__ldListenCallback = spec[spec.length - 1];\n        } else if (requiresRecreation === 'function') {\n          if (controller.__ldChangeCallback) {\n            if (String(spec[spec.length - 1]) !== String(controller.__ldChangeCallback)) {\n              changes.push(key);\n            }\n            controller.__ldChangeCallback = spec[spec.length - 1];\n          } else {\n            if (String(spec[spec.length - 1]) !== String(controller.__ldActionCallback)) {\n              changes.push(key);\n            }\n            controller.__ldActionCallback = spec[spec.length - 1];\n          }\n        } else if (spec[1] !== null && manageableProps[key] !== oldValues[key]) {\n          manageableProps[key] = oldValues[key];\n          setChangedProp(key);\n          changes.push(key);\n        }\n\n        return;\n      }\n\n      changes.push(key);\n\n      setUnchangedProp(`${key}_enabled`);\n      setUnchangedProp(key);\n\n      // regenerate this controller with the new config\n      const container = controller.domElement.closest('.cr');\n      const parent = container.parentNode;\n      const {children} = parent;\n      const index = Array.prototype.indexOf.call(children, container);\n      const nextContainer = index > -1 ? children[index + 1] : null;\n\n      controller.remove();\n\n      const newController = addController(key, spec, true);\n\n      if (nextContainer) {\n        const newContainer = newController.domElement.closest('.cr');\n        parent.removeChild(newContainer);\n        parent.insertBefore(newContainer, nextContainer);\n      }\n    }\n  });\n\n  changes.forEach((key) => {\n    let f = addNestedFolder(key);\n    while (f) {\n      f.open();\n      f = parentOfFolder.get(f);\n    }\n  });\n\n  if (leftoverKeys.length) {\n    changes.push(...leftoverKeys);\n  }\n\n  Object.keys(leftoverKeys).forEach(removeProp);\n  removeEmptyFolders();\n\n  // refresh UI with new values\n  refreshUI();\n\n  return changes;\n}\n\nfunction queryize(query) {\n  const characters = query.split('');\n  let hasUppercase = false;\n\n  const escapedCharacters = characters.map((character) => {\n    if (character !== character.toLowerCase()) {\n      hasUppercase = true;\n    }\n\n    if ('.*+?^${}()|[]\\\\'.includes(character)) {\n      return `\\\\${character}`;\n    } else {\n      return character;\n    }\n  });\n\n  const subsequence = escapedCharacters.join('.*');\n\n  if (query.startsWith('/')) {\n    try {\n      return new RegExp(query.substring(1), hasUppercase ? '' : 'i');\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n    return new RegExp('(?!)');\n  }\n\n  return new RegExp(subsequence, hasUppercase ? '' : 'i');\n}\n\nlet previousQuery = '';\nexport function updateSearch(query, isStarted) {\n  previousQuery = query;\n\n  const queryRegex = queryize(query);\n\n  const container = document.querySelector('.Manage .dg.main');\n  if (query === '') {\n    Object.values(folders).forEach((folder) => folder.close());\n    container.querySelectorAll('.filtered').forEach((node) => {\n      node.classList.remove('filtered');\n    });\n  } else {\n    Object.values(folders).forEach((folder) => {\n      if (isStarted) {\n        folder.open();\n      }\n\n      folder.domElement.classList.add('filtered');\n    });\n\n    container.querySelectorAll('li[data-prop]').forEach((node) => {\n      let isFiltered = true;\n\n      if (query.toLowerCase() === 'change') {\n        if (node.classList.contains('changed')) {\n          isFiltered = false;\n        }\n      } else if (node.dataset.prop.match(queryRegex)) {\n        isFiltered = false;\n      }\n\n      if (isFiltered) {\n        node.classList.add('filtered');\n      } else {\n        let folder = node;\n        while (folder) {\n          folder.classList.remove('filtered');\n          folder = folder.parentNode.closest('.filtered');\n        }\n      }\n    });\n  }\n  regenerateListenPropsCache();\n}\n\nexport function serializeChangedProps() {\n  return Object.entries(changedProps).map(([key, [current]]) => (\n    `propSpecs['${key}'][0] = ${JSON.stringify(current)};`\n  )).join('\\n');\n}\n\nexport function resetChangedProps() {\n  batchSaveChangedProps += 1;\n  document.querySelectorAll('.Manage .cr.changed .reset input').forEach((button) => {\n    button.onclick();\n  });\n  batchSaveChangedProps -= 1;\n  saveChangedProps();\n}\n\nif (module.hot) {\n  module.hot.accept('../../props', () => {\n    try {\n      const next = require('../../props');\n\n      const oldProps = proxiedManageableProps;\n      proxiedManageableProps = next.manageableProps;\n      const changes = updatePropsFromReload(oldProps, next.propSpecs);\n\n      originalProp(null, next.manageableProps);\n\n      if (changes.length) {\n        // eslint-disable-next-line no-console\n        console.info(`Hot-loading props: ${changes.join(', ')}`);\n      }\n\n      const {game} = window;\n      game.command.updateCommandsFromReload(next.commands);\n\n      game.updateShaderFragments(next.shaderCoordFragments, next.shaderColorFragments, next.shaderPipelines);\n\n      regenerateListenPropsCache();\n\n      updateSearch(previousQuery, true);\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n  });\n}\n","import Phaser from 'phaser';\nimport {expandParticleProps} from './particles';\nimport {expandTweenProps} from './tweens';\nimport {expandTransitionProps} from './transitions';\nimport {freezeStorage, removeAllFields, loadField} from './store';\nimport {shaderProps} from './shaders.js';\n\nconst savedChangedProps = loadField('changedProps', {});\nexport {savedChangedProps};\n\nconst rendererName = {\n  [Phaser.AUTO]: 'auto',\n  [Phaser.CANVAS]: 'canvas',\n  [Phaser.WEBGL]: 'webgl',\n};\n\nconst debug = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n\nexport function builtinPropSpecs(commands, shaderCoordFragments, shaderColorFragments) {\n  if (!debug) {\n    Object.keys(commands).forEach((key) => {\n      if (commands[key].debug) {\n        delete commands[key];\n      }\n    });\n  }\n\n  return {\n    'engine.time': [0.01, null, 'loop.time'],\n    'engine.frameTime': [0.01, null, 'loop.delta'],\n    'engine.actualFps': [0.01, null, 'loop.actualFps'],\n    'engine.targetFps': [0.01, null, 'loop.targetFps'],\n    'engine.renderer': [rendererName[Phaser.AUTO], null, (scene, game) => rendererName[game.renderer.type]],\n    'engine.focused': [false, null, 'scene.game.focused'],\n    'engine.throttle': [false],\n    'engine.stepping': [false, (value, scene, game) => (value ? game.loop.sleep() : game.loop.wake())],\n    'engine.step': [(scene, game) => game.prop('engine.stepping') && game.loop.tick()],\n    'engine.clearLocalStorage': [() => { removeAllFields(); freezeStorage(); window.location = window.location; }],\n    'engine.clearGameState': [() => { removeAllFields('game_'); freezeStorage(); window.location = window.location; }],\n    'engine.disableDebugUI': [(scene, game) => game.disableDebugUI()],\n\n    'config.debug': [debug, null, () => debug],\n    'config.width': [0, null, (scene, game) => game.config.width],\n    'config.height': [0, null, (scene, game) => game.config.height],\n    'config.tileWidth': [0, null, (scene, game) => game.config.tileWidth],\n    'config.tileHeight': [0, null, (scene, game) => game.config.tileHeight],\n    'config.xBorder': [0, null, (scene, game) => scene.xBorder],\n    'config.yBorder': [0, null, (scene, game) => scene.xBorder],\n\n    'scene.count': ['', null, 'scene.scenes.length'],\n    'scene.commandScenes': ['', null, (scene) => scene.command._scenes.size],\n    'scene.class': ['', null, (scene) => scene.constructor.name],\n    'scene.sceneId': ['', null, 'sceneId'],\n    'scene.parentSceneId': ['', null, 'scene.settings.data.parentSceneId'],\n    'scene.key': ['', null, 'scene.key'],\n    'scene.seed': ['', null, 'scene.settings.data.seed'],\n    'scene.scene_time': [0.01, null, 'scene_time'],\n    'scene.music': ['', null, 'currentMusicName'],\n    'scene.timeScale': [0.01, null, 'timeScale'],\n    'scene.shaderName': ['', null, 'shaderName'],\n    'scene.physicsFps': [0.01, null, 'physics.world.fps'],\n    'scene.images': [0, null, (scene) => scene.add.displayList.list.filter((node) => node.type === 'Image').length],\n    'scene.sprites': [0, null, (scene) => scene.add.displayList.list.filter((node) => node.type === 'Sprite').length],\n    'scene.particles': [0, null, (scene) => scene.add.displayList.list.filter((node) => node.type === 'ParticleEmitterManager').length],\n    'scene.text': [0, null, (scene) => scene.add.displayList.list.filter((node) => node.type === 'Text').length],\n    'scene.sounds': [0, null, 'sounds.length'],\n    'scene.timers': [0, null, 'timers.length'],\n    'scene.physicsColliders': [0, null, 'physics.world.colliders._active.length'],\n    'scene.musicVolume': [1, 0, 1, (value, scene, game) => {\n      game.changeVolume(game.volume);\n    }],\n    'scene.soundVolume': [1, 0, 1, (value, scene, game) => {\n      game.changeVolume(game.volume);\n    }],\n    'scene.debugDraw': [false, (value, scene) => {\n      if (value) {\n        scene.physics.world.createDebugGraphic();\n      } else {\n        scene.physics.world.debugGraphic.destroy();\n      }\n    }],\n    'scene.replaceWithSelf': [(scene) => scene.replaceWithSelf(false)],\n\n    'scene.camera.width': [0, null, 'camera.width'],\n    'scene.camera.height': [0, null, 'camera.height'],\n    'scene.camera.alpha': [0.1, null, 'camera.alpha'],\n    'scene.camera.zoom': [0.1, null, 'camera.zoom'],\n    'scene.camera.rotation': [0.1, null, 'camera.rotation'],\n    'scene.camera.x': [0, null, 'camera.x'],\n    'scene.camera.y': [0, null, 'camera.y'],\n    'scene.camera.scrollX': [0, null, 'camera.scrollX'],\n    'scene.camera.scrollY': [0, null, 'camera.scrollY'],\n    'scene.camera.centerX': [0, null, 'camera.centerX'],\n    'scene.camera.centerY': [0, null, 'camera.centerY'],\n    'scene.camera.boundsX': [0, null, 'camera._bounds.x'],\n    'scene.camera.boundsY': [0, null, 'camera._bounds.y'],\n    'scene.camera.boundsWidth': [0, null, 'camera._bounds.width'],\n    'scene.camera.boundsHeight': [0, null, 'camera._bounds.height'],\n    'scene.camera.useBounds': [true, null, 'camera.useBounds'],\n\n    'scene.camera.follow': ['', null, objectIdentifier(\n      (scene) => scene.level,\n      (scene) => scene.camera._follow,\n    )],\n    'scene.camera.followOffsetX': [0, null, 'camera.followOffset.x'],\n    'scene.camera.followOffsetY': [0, null, 'camera.followOffset.y'],\n\n    'scene.camera.lerp': [1, 0, 1, (value, scene) => {\n      scene.setCameraLerp();\n    }],\n    'scene.camera.deadzoneX': [0, 0, 1000, (value, scene) => {\n      scene.setCameraDeadzone();\n    }],\n    'scene.camera.deadzoneY': [0, 0, 1000, (value, scene) => {\n      scene.setCameraDeadzone();\n    }],\n    'scene.camera.hasBounds': [true, (value, scene) => {\n      scene.setCameraBounds();\n    }],\n\n    'scene.trauma.amount': [0.01, null, '_trauma'],\n    'scene.trauma.shakeAmount': [0.01, null, '_traumaShake'],\n    'scene.trauma.decay': [0.001, 0, 1],\n    'scene.trauma.exponent': [2.0, 0, 4],\n    'scene.trauma.dx': [30.0, 0, 100],\n    'scene.trauma.dy': [30.0, 0, 100],\n    'scene.trauma.dt': [0.17, 0, 1],\n    'scene.trauma.speed': [0.2, 0, 1],\n    'scene.trauma.easeIn': [100, 0, 1000],\n    'scene.trauma.legacy': [false],\n    'scene.trauma.mild': [(scene) => scene.trauma(0.2)],\n    'scene.trauma.minor': [(scene) => scene.trauma(0.5)],\n    'scene.trauma.major': [(scene) => scene.trauma(0.8)],\n    'scene.trauma.max': [(scene) => scene.trauma(100)],\n    'scene.trauma.enabled': [true],\n\n    ...commandKeyProps(commands),\n\n    'command.gamepad.total': [0, null],\n    'command.gamepad.A': [false, null],\n    'command.gamepad.B': [false, null],\n    'command.gamepad.X': [false, null],\n    'command.gamepad.Y': [false, null],\n    'command.gamepad.L1': [false, null],\n    'command.gamepad.L2': [false, null],\n    'command.gamepad.R1': [false, null],\n    'command.gamepad.R2': [false, null],\n    'command.gamepad.UP': [false, null],\n    'command.gamepad.DOWN': [false, null],\n    'command.gamepad.LEFT': [false, null],\n    'command.gamepad.RIGHT': [false, null],\n    'command.gamepad.LSTICKX': [0.01, null],\n    'command.gamepad.LSTICKY': [0.01, null],\n    'command.gamepad.RSTICKX': [0.01, null],\n    'command.gamepad.RSTICKY': [0.01, null],\n\n    'command.ignore_all.any': [false, null, (scene) => scene.command.ignoreAll()],\n    'command.ignore_all._transition': [false, null, (scene) => scene.command.ignoreAll('_transition')],\n    'command.ignore_all._sleep': [false, null, (scene) => scene.command.ignoreAll('_sleep')],\n\n    ...commandProps(commands),\n    ...shaderProps(shaderCoordFragments, shaderColorFragments),\n  };\n}\n\nfunction commandProps(commands) {\n  const props = {};\n\n  Object.entries(commands).forEach(([name, config]) => {\n    props[`command.${name}.held`] = [false, null];\n    props[`command.${name}.started`] = [false, null];\n    props[`command.${name}.continued`] = [false, null];\n    props[`command.${name}.released`] = [false, null];\n\n    props[`command.${name}.heldFrames`] = [0, null];\n    props[`command.${name}.releasedFrames`] = [0, null];\n    props[`command.${name}.heldDuration`] = [0, null];\n    props[`command.${name}.releasedDuration`] = [0, null];\n\n    if (config.cooldown) {\n      props[`command.${name}.cooldown`] = [config.cooldown, 0, 100000];\n      props[`command.${name}.coolingDown`] = [false, null, (scene) => scene.command[name].coolingDown];\n      props[`command.${name}.coolingDownTime`] = [0.01, null, (scene) => scene.command[name].coolingDownTime];\n    }\n\n    if (config.joystick) {\n      props[`command.${name}.x`] = [0.01, null, (scene) => scene.command[name].held[0]];\n      props[`command.${name}.y`] = [0.01, null, (scene) => scene.command[name].held[1]];\n    }\n\n    props[`command.${name}.enabled`] = [true];\n\n    if (config.execute) {\n      const execute = typeof config.execute === 'function'\n        ? (scene, game) => config.execute(scene, game)\n        : (scene, game) => scene[config.execute](scene, game);\n      props[`command.${name}.execute`] = [execute];\n    }\n  });\n\n  return props;\n}\n\nconst knownInputs = [\n  'gamepad.A',\n  'gamepad.B',\n  'gamepad.X',\n  'gamepad.Y',\n  'gamepad.L1',\n  'gamepad.L2',\n  'gamepad.R1',\n  'gamepad.R2',\n  'gamepad.UP',\n  'gamepad.DOWN',\n  'gamepad.LEFT',\n  'gamepad.RIGHT',\n  'gamepad.LSTICK.UP',\n  'gamepad.LSTICK.DOWN',\n  'gamepad.LSTICK.LEFT',\n  'gamepad.LSTICK.RIGHT',\n  'gamepad.RSTICK.UP',\n  'gamepad.RSTICK.DOWN',\n  'gamepad.RSTICK.LEFT',\n  'gamepad.RSTICK.RIGHT',\n  'gamepad.LSTICK.RAW',\n  'gamepad.RSTICK.RAW',\n\n  ...(Object.keys(Phaser.Input.Keyboard.KeyCodes).map((x) => `keyboard.${x}`)),\n].reduce((a, b) => {\n  a[b] = true;\n  return a;\n}, {});\n\nexport function keysWithPrefix(commands, prefix, skipWarning) {\n  const keys = [];\n\n  Object.entries(commands).forEach(([command, config]) => {\n    if (!config.input) {\n      return;\n    }\n\n    config.input.forEach((inputPath) => {\n      if (!knownInputs[inputPath]) {\n        if (!skipWarning) {\n          // eslint-disable-next-line no-console\n          console.error(`Unknown input path ${inputPath} for command ${command}`);\n        }\n        return;\n      }\n\n      if (inputPath.startsWith(prefix)) {\n        keys.push(inputPath.substr(prefix.length));\n      }\n    });\n  });\n\n  return keys;\n}\n\nexport function commandKeys(commands, skipWarning) {\n  return keysWithPrefix(commands, 'keyboard.', skipWarning);\n}\n\nexport function gamepadKeys(commands, skipWarning) {\n  return keysWithPrefix(commands, 'gamepad.', skipWarning);\n}\n\nexport function commandKeyProps(commands) {\n  const props = {};\n\n  commandKeys(commands).sort().forEach((key) => {\n    props[`command.keyboard.${key}`] = [false, null];\n  });\n\n  return props;\n}\n\nexport function preprocessPropSpecs(propSpecs, particleImages) {\n  expandParticleProps(propSpecs, particleImages);\n  expandTweenProps(propSpecs, particleImages);\n  expandTransitionProps(propSpecs, particleImages);\n}\n\nexport function ManageableProps(propSpecs) {\n  Object.entries(propSpecs).forEach(([key, spec]) => {\n    if (!Array.isArray(spec)) {\n      throw new Error(`Invalid spec for prop ${key}; expected array, got ${spec}`);\n    }\n\n    let [value] = spec;\n    // interject the scene and game, and wrap in a try\n    if (typeof value === 'function') {\n      const original = value;\n      value = () => {\n        try {\n          const {game} = window;\n          const scene = game.topScene();\n          scene.command.recordPropExecution(key);\n          original(scene, game);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n        }\n      };\n    }\n\n    if (key in savedChangedProps) {\n      const [current, original] = savedChangedProps[key];\n      if (JSON.stringify(value) === JSON.stringify(original)) {\n        value = current;\n      } else {\n        delete savedChangedProps[key];\n      }\n    }\n\n    this[key] = value;\n  });\n}\n\nexport function makePropsWithPrefix(propSpecs, manageableProps) {\n  if (debug) {\n    return (prefix) => {\n      const props = {};\n      Object.entries(manageableProps).forEach(([key, value]) => {\n        if (key.startsWith(prefix)) {\n          const name = key.substr(prefix.length);\n          props[name] = value;\n        }\n      });\n      return props;\n    };\n  }\n\n  const cache = {};\n  return (prefix, clearCache) => {\n    if (clearCache) {\n      if (prefix) {\n        delete cache[prefix];\n      } else {\n        Object.keys(cache).forEach((key) => delete cache[key]);\n      }\n    }\n\n    if (!cache[prefix]) {\n      const props = {};\n      Object.entries(propSpecs).forEach(([key, spec]) => {\n        if (key.startsWith(prefix)) {\n          const [value] = spec;\n          const name = key.substr(prefix.length);\n          props[name] = value;\n        }\n      });\n      cache[prefix] = props;\n    }\n    return cache[prefix];\n  };\n}\n\nexport function PropLoader(propSpecs, manageableProps) {\n  if (debug) {\n    let p = manageableProps;\n    return (name, update) => {\n      if (update) {\n        p = update;\n        return;\n      }\n\n      if (!(name in p)) {\n        throw new Error(`Invalid prop named ${name}`);\n      }\n\n      return p[name];\n    };\n  }\n\n  return (name) => propSpecs[name][0];\n}\n\nexport function objectIdentifier(getContainer, getObject) {\n  let cacheInput;\n  let cacheOutput;\n  return (...args) => {\n    const object = getObject(...args);\n    if (object === cacheInput) {\n      return cacheOutput;\n    }\n\n    cacheInput = object;\n\n    if (!object) {\n      cacheOutput = object;\n      return cacheOutput;\n    }\n\n    if (typeof object === 'object' && object.name) {\n      cacheOutput = object.name;\n      return cacheOutput;\n    }\n\n    const container = getContainer(...args);\n    if (container && typeof container === 'object') {\n      // eslint-disable-next-line guard-for-in, no-restricted-syntax\n      for (const key in container) {\n        const value = container[key];\n\n        if (value === object) {\n          cacheOutput = key;\n          return cacheOutput;\n        }\n      }\n    }\n\n    if (typeof object === 'object' && object.texture && object.texture.key) {\n      cacheOutput = object.texture.key;\n      return cacheOutput;\n    }\n\n    cacheOutput = undefined;\n    return cacheOutput;\n  };\n}\n","let injected = false;\nexport function injectAddSpriteTimeScale(scene) {\n  if (injected) {\n    return;\n  }\n\n  // eslint-disable-next-line no-proto\n  const proto = scene.physics.add.__proto__;\n\n  const origAdd = proto.sprite;\n\n  proto.sprite = function(...args) {\n    const sprite = origAdd.call(this, ...args);\n    if (sprite && sprite.anims) {\n      sprite.anims.setTimeScale(sprite.scene.timeScale);\n      sprite.anims.ignoresScenePause = false;\n    }\n    return sprite;\n  };\n\n  injected = true;\n}\n","let injected = false;\nexport function injectAnimationUpdate(animation) {\n  if (injected || !animation) {\n    return injected;\n  }\n\n  // eslint-disable-next-line no-proto\n  const proto = animation.__proto__;\n\n  const origUpdate = proto.update;\n\n  proto.update = function(...args) {\n    if (this.parent.scene._paused.anims && !this.ignoresScenePause && (!this.currentAnim || !this.currentAnim.ignoresScenePause)) {\n      return;\n    }\n\n    return origUpdate.call(this, ...args);\n  };\n\n  injected = true;\n\n  return injected;\n}\n","import SimplexNoise from 'simplex-noise';\nimport prop from '../../props';\n\nconst noiseX = new SimplexNoise('X');\nconst noiseY = new SimplexNoise('Y');\nconst noiseT = new SimplexNoise('T');\n\nlet injected = false;\nexport function injectCameraShake(camera) {\n  if (injected || !camera) {\n    return injected;\n  }\n\n  // eslint-disable-next-line no-proto\n  const proto = camera.__proto__;\n\n  const origPreRender = proto.preRender;\n\n  proto.preRender = function(...args) {\n    origPreRender.call(this, ...args);\n\n    if (prop('scene.trauma.legacy') || !prop('scene.trauma.enabled')) {\n      return;\n    }\n\n    const {width, height, scene} = this;\n    const {\n      _traumaShake, time, timeScale, _traumaStart,\n    } = scene;\n    const {now} = time;\n\n    if (!_traumaShake) {\n      return;\n    }\n\n    const delta = now - _traumaStart;\n    const t = delta * prop('scene.trauma.speed') / timeScale ** 2;\n    const easeIn = Math.min(1, delta / (prop('scene.trauma.easeIn') * timeScale));\n\n    const dx = easeIn * _traumaShake * prop('scene.trauma.dx') * noiseX.noise2D(_traumaStart, t);\n    const dy = easeIn * _traumaShake * prop('scene.trauma.dy') * noiseY.noise2D(_traumaStart, t);\n    const dt = easeIn * _traumaShake * prop('scene.trauma.dt') * noiseT.noise2D(_traumaStart, t);\n\n    const halfWidth = width / 2;\n    const halfHeight = height / 2;\n\n    // rotate about the center\n    this.matrix.translate(halfWidth, halfHeight);\n    this.matrix.rotate(dt);\n    this.matrix.translate(-halfWidth, -halfHeight);\n\n    this.matrix.translate(dx, dy);\n  };\n\n  injected = true;\n\n  return injected;\n}\n","module.exports = __webpack_public_path__ + \"static/media/maps.55ca81fc.txt\";","// This file is automatically generated by asset scripts in scripts/\n\nimport afterburner from './audio/afterburner.wav';\nimport booster from './sprites/booster.png';\nimport bullet0 from './sprites/bullet0.png';\nimport clink from './audio/clink.wav';\nimport cloud from './sprites/cloud.png';\nimport cloud2 from './sprites/cloud2.png';\nimport effectImageCircle from './images/effectImageCircle.png';\nimport enemyA from './sprites/enemyA.png';\nimport explode from './audio/explode.wav';\nimport finale from './audio/finale.mp3';\nimport goal from './audio/goal.wav';\nimport goalTile from './sprites/goal.png';\nimport hitPlane1 from './audio/hitPlane1.wav';\nimport hitPlane2 from './audio/hitPlane2.wav';\nimport hitPlane3 from './audio/hitPlane3.wav';\nimport hitTurret from './audio/hitTurret.wav';\nimport intro from './audio/intro.mp3';\nimport main from './audio/main.mp3';\nimport mine from './sprites/mine.png';\nimport planeB from './sprites/planeB.png';\nimport planeC from './sprites/planeC.png';\nimport planeD from './sprites/planeD.png';\nimport planeE from './sprites/planeE.png';\nimport planeF from './sprites/planeF.png';\nimport player from './sprites/player.png';\nimport score from './audio/score.wav';\nimport select from './audio/select.wav';\nimport shoot1 from './audio/shoot1.wav';\nimport shoot2 from './audio/shoot2.wav';\nimport shoot3 from './audio/shoot3.wav';\nimport signature from './sprites/signature.png';\nimport thrust from './audio/thrust.wav';\nimport title from './sprites/title.png';\nimport turret from './sprites/turret.png';\nimport turretV from './sprites/turretV.png';\nimport vault from './sprites/vault.png';\nimport vaultB from './sprites/vaultB.png';\nimport vaultR from './sprites/vaultR.png';\nimport victory from './audio/victory.mp3';\nimport wall from './images/wall.png';\nimport wallBL from './images/wallBL.png';\nimport wallBR from './images/wallBR.png';\nimport wallBottom from './images/wallBottom.png';\nimport wallTL from './images/wallTL.png';\nimport wallTR from './images/wallTR.png';\nimport wallTop from './images/wallTop.png';\nimport wallVertical from './images/wallVertical.png';\nimport wreck from './sprites/wreck.png';\n\nexport const imageAssets = {\n  cloud,\n  cloud2,\n  effectImageCircle,\n  goalTile,\n  signature,\n  title,\n  vault,\n  wall,\n  wallBL,\n  wallBR,\n  wallBottom,\n  wallTL,\n  wallTR,\n  wallTop,\n  wallVertical,\n};\n\nexport const spriteAssets = {\n  booster,\n  bullet0,\n  enemyA,\n  mine,\n  planeB,\n  planeC,\n  planeD,\n  planeE,\n  planeF,\n  player,\n  turret,\n  turretV,\n  vaultB,\n  vaultR,\n  wreck,\n};\n\nexport const musicAssets = {\n  finale,\n  intro,\n  main,\n  victory,\n};\n\nexport const soundAssets = {\n  afterburner,\n  clink,\n  explode,\n  goal,\n  hitPlane1,\n  hitPlane2,\n  hitPlane3,\n  hitTurret,\n  score,\n  select,\n  shoot1,\n  shoot2,\n  shoot3,\n  thrust,\n};\n","module.exports = __webpack_public_path__ + \"static/media/afterburner.d098618c.wav\";","module.exports = __webpack_public_path__ + \"static/media/booster.fb494c4a.png\";","module.exports = __webpack_public_path__ + \"static/media/bullet0.b808b9bd.png\";","module.exports = __webpack_public_path__ + \"static/media/clink.409af90d.wav\";","module.exports = __webpack_public_path__ + \"static/media/cloud.489a5616.png\";","module.exports = __webpack_public_path__ + \"static/media/cloud2.1fef8abe.png\";","module.exports = __webpack_public_path__ + \"static/media/effectImageCircle.4d4fb1c0.png\";","module.exports = __webpack_public_path__ + \"static/media/enemyA.8ef30635.png\";","module.exports = __webpack_public_path__ + \"static/media/explode.31fb26e2.wav\";","module.exports = __webpack_public_path__ + \"static/media/finale.ecce0d32.mp3\";","module.exports = __webpack_public_path__ + \"static/media/goal.ff849215.wav\";","module.exports = __webpack_public_path__ + \"static/media/goal.b2def50f.png\";","module.exports = __webpack_public_path__ + \"static/media/hitPlane1.90718a38.wav\";","import {tweenEases} from './tweens';\n\nexport const transitionAnimations = [\n  'fadeInOut',\n  'crossFade',\n\n  'pushLeft',\n  'pushRight',\n  'pushUp',\n  'pushDown',\n\n  'wipeLeft',\n  'wipeRight',\n  'wipeUp',\n  'wipeDown',\n];\n\nexport const transitionPauses = [\n  'nothing',\n  'input',\n  'physics',\n  'everything',\n];\n\nexport const transitionPauseTimes = [\n  'begin',\n  'delayEnd',\n  'cutover',\n  'complete',\n  'waitEnd',\n];\n\nexport const defaultTransitionProps = {\n  animation: ['fadeInOut', transitionAnimations],\n\n  delay_enabled: [true],\n  delay: [0, 0, 10000],\n  duration: [1000, 0, 10000],\n  ease: ['Linear', tweenEases],\n  wait_enabled: [true],\n  wait: [0, 0, 10000],\n\n  oldPause: ['input', transitionPauses],\n  oldPauseTime: ['begin', transitionPauseTimes.filter((t) => t !== 'waitEnd')],\n  newPause: ['input', transitionPauses],\n  newUnpauseTime: ['waitEnd', transitionPauseTimes],\n\n  delayNewSceneShader: [false],\n  removeOldSceneShader: [false],\n  suppressShaderCheck: [false],\n\n  animated: [true],\n};\n\nexport const baseTransitionProps = {};\nObject.entries(defaultTransitionProps).forEach(([key, [value]]) => {\n  baseTransitionProps[key] = value;\n});\n\nexport function expandTransitionProps(props) {\n  Object.entries(props).forEach(([name, spec]) => {\n    if (!name.endsWith('.transition')) {\n      return;\n    }\n\n    const prefix = name.substr(0, name.length - '.transition'.length);\n\n    if (!Array.isArray(spec) || spec.length !== 1 || typeof spec[0] !== 'object') {\n      throw new Error(`Expected ${name} prop to have the shape [{…}]; did you mean to end it in .transition?`);\n    }\n\n    delete props[name];\n\n    const [config] = spec;\n\n    const seen = {...config};\n\n    Object.entries(defaultTransitionProps).forEach(([key, value]) => {\n      if (key in config) {\n        props[`${prefix}.${key}`] = [config[key], ...value.slice(1)];\n        delete seen[key];\n      } else if (key.endsWith('_enabled')) {\n        const targetKey = key.substr(0, key.length - '_enabled'.length);\n        props[`${prefix}.${key}`] = [targetKey in config];\n      } else {\n        props[`${prefix}.${key}`] = value;\n      }\n    });\n\n    props[`${prefix}.execute`] = [(scene, game) => {\n      scene.replaceWithSelf(false, null, prefix);\n    }];\n\n    if (Object.keys(seen).length) {\n      throw new Error(`Got unexpected transition config settings: ${Object.keys(seen).join(', ')}`);\n    }\n  });\n}\n\nexport default function massageTransitionProps(props, options) {\n  const {massageProps} = props;\n\n  delete props.massageProps;\n\n  Object.entries(props).forEach(([key, config]) => {\n    if (key.endsWith('_enabled')) {\n      const main = key.substr(0, key.length - '_enabled'.length);\n      if (!config && !options[main]) {\n        delete props[main];\n      }\n      delete props[key];\n    }\n  });\n\n  if (massageProps) {\n    massageProps(props);\n  }\n\n  if ('animated' in props && !props.animated) {\n    props.duration = 0;\n  }\n  delete props.animated;\n\n  return props;\n}\n\nexport function applyPause(scene, transition, type) {\n  if (type === 'nothing') {\n    return () => {};\n  } else if (type === 'input') {\n    scene.pauseInputForTransition(transition);\n    return () => {\n      scene.unpauseInputForTransition(transition);\n    };\n  } else if (type === 'physics') {\n    scene.pausePhysicsForTransition(transition);\n    return () => {\n      scene.unpausePhysicsForTransition(transition);\n    };\n  } else if (type === 'everything') {\n    scene.pauseEverythingForTransition(transition);\n    return () => {\n      scene.unpauseEverythingForTransition(transition);\n    };\n  } else {\n    // eslint-disable-next-line no-console\n    console.error(`Invalid transition pause '${type}'`);\n    return () => {};\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/hitPlane2.e7dc2d31.wav\";","module.exports = __webpack_public_path__ + \"static/media/hitPlane3.4cceea32.wav\";","module.exports = __webpack_public_path__ + \"static/media/hitTurret.41631c5e.wav\";","module.exports = __webpack_public_path__ + \"static/media/intro.51ade202.mp3\";","module.exports = __webpack_public_path__ + \"static/media/main.d1d92544.mp3\";","module.exports = __webpack_public_path__ + \"static/media/mine.2ba7a2af.png\";","module.exports = __webpack_public_path__ + \"static/media/planeB.81409355.png\";","module.exports = __webpack_public_path__ + \"static/media/planeC.5c29b788.png\";","module.exports = __webpack_public_path__ + \"static/media/planeD.edd44135.png\";","module.exports = __webpack_public_path__ + \"static/media/planeE.52d21119.png\";","module.exports = __webpack_public_path__ + \"static/media/planeF.7fdc2221.png\";","module.exports = __webpack_public_path__ + \"static/media/player.22c49d75.png\";","module.exports = __webpack_public_path__ + \"static/media/score.360a9e9f.wav\";","module.exports = __webpack_public_path__ + \"static/media/select.5a06feb2.wav\";","module.exports = __webpack_public_path__ + \"static/media/shoot1.0689f9f6.wav\";","module.exports = __webpack_public_path__ + \"static/media/shoot2.0ad98876.wav\";","module.exports = __webpack_public_path__ + \"static/media/shoot3.eb4d8bbd.wav\";","module.exports = __webpack_public_path__ + \"static/media/signature.b6bab9a7.png\";","module.exports = __webpack_public_path__ + \"static/media/thrust.53365ac4.wav\";","module.exports = __webpack_public_path__ + \"static/media/title.2a5e6ea1.png\";","module.exports = __webpack_public_path__ + \"static/media/turret.92e4d8c7.png\";","module.exports = __webpack_public_path__ + \"static/media/turretV.3bdc13f4.png\";","module.exports = __webpack_public_path__ + \"static/media/vault.d65d45f0.png\";","module.exports = __webpack_public_path__ + \"static/media/vaultB.a5ff4d70.png\";","module.exports = __webpack_public_path__ + \"static/media/vaultR.960b09de.png\";","module.exports = __webpack_public_path__ + \"static/media/victory.cc24eb5a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/wall.4e118afb.png\";","module.exports = __webpack_public_path__ + \"static/media/wallBL.078d30b9.png\";","module.exports = __webpack_public_path__ + \"static/media/wallBR.43819439.png\";","module.exports = __webpack_public_path__ + \"static/media/wallBottom.0aef936d.png\";","module.exports = __webpack_public_path__ + \"static/media/wallTL.078d30b9.png\";","module.exports = __webpack_public_path__ + \"static/media/wallTR.43819439.png\";","module.exports = __webpack_public_path__ + \"static/media/wallTop.91904dcf.png\";","module.exports = __webpack_public_path__ + \"static/media/wallVertical.1eebb899.png\";","module.exports = __webpack_public_path__ + \"static/media/wreck.8e2323a5.png\";","const loaderMethod = {\n  imageAssets: 'image',\n  spriteAssets: 'spritesheet',\n  musicAssets: 'audio',\n  soundAssets: 'audio',\n};\n\nconst unloadFunction = {\n  imageAssets: (scene, key) => {\n    scene.load.textureManager.remove(key);\n  },\n  musicAssets: (scene, key) => {\n    scene.cache.audio.remove(key);\n  },\n};\n\nunloadFunction.spriteAssets = unloadFunction.imageAssets;\nunloadFunction.soundAssets = unloadFunction.musicAssets;\n\nfunction massageInput(type, game, input) {\n  if (type === 'spriteAssets') {\n    if (typeof input === 'string') {\n      const {spriteWidth, spriteHeight} = game.config;\n      if (spriteWidth && spriteHeight) {\n        return [input, {frameWidth: spriteWidth, frameHeight: spriteHeight}];\n      }\n\n      const {tileWidth, tileHeight} = game.config;\n      return [input, {frameWidth: tileWidth, frameHeight: tileHeight}];\n    } else {\n      const {file} = input;\n      return [file, input];\n    }\n  }\n\n  return [input];\n}\n\nexport function loadAsset(scene, type, key, input) {\n  const {game} = scene;\n  const method = loaderMethod[type];\n\n  const params = massageInput(type, game, input);\n\n  scene.load[method](key, ...params);\n\n  game.assets[type][key] = input;\n}\n\nexport function preloadAssets(scene, assets) {\n  const {game} = scene;\n\n  Object.entries(assets).forEach(([type, entries]) => {\n    if (!loaderMethod[type]) {\n      // eslint-disable-next-line no-console\n      console.error(`No loader for assets of type ${type}`);\n      return;\n    }\n\n    if (!game.assets[type]) {\n      game.assets[type] = {};\n    }\n\n    Object.entries(entries).forEach(([key, input]) => {\n      loadAsset(scene, type, key, input);\n    });\n  });\n}\n\nlet isLoading = false;\nexport function assetReloader(scene) {\n  const {game} = scene;\n\n  if (isLoading) {\n    throw new Error('assetReloader does not yet support concurrency');\n  }\n  isLoading = true;\n\n  const assets = {\n  };\n\n  const typeForKey = {\n  };\n\n  // eslint-disable-next-line no-proto\n  const proto = scene.load.__proto__;\n\n  const origKeyExists = proto.keyExists;\n  proto.keyExists = () => false;\n\n  const origFileProcessComplete = proto.fileProcessComplete;\n  proto.fileProcessComplete = (file) => {\n    const type = typeForKey[file.key];\n    unloadFunction[type](scene, file.key);\n    return origFileProcessComplete.call(scene.load, file);\n  };\n\n  const reload = (type, key, value, isNew) => {\n    if (!assets[type]) {\n      assets[type] = {};\n    }\n\n    typeForKey[key] = type;\n    assets[type][key] = undefined;\n    loadAsset(scene, type, key, value);\n  };\n\n  const remove = (type, key) => {\n    if (!assets[type]) {\n      assets[type] = {};\n    }\n\n    typeForKey[key] = type;\n    assets[type][key] = null;\n    unloadFunction[type](scene, key);\n    delete game.assets[type][key];\n  };\n\n  const done = (...args) => {\n    scene.load.on('filecomplete', (key, _, object) => {\n      const type = typeForKey[key];\n\n      if (!assets[type]) {\n        assets[type] = {};\n      }\n\n      assets[type][key] = object;\n    });\n\n    let completeResolve;\n    scene.load.on('complete', () => {\n      if (completeResolve) {\n        completeResolve();\n      }\n    });\n\n    const promise = new Promise((resolve, reject) => {\n      completeResolve = () => {\n        completeResolve = null;\n\n        proto.keyExists = origKeyExists;\n        proto.fileProcessComplete = origFileProcessComplete;\n\n        isLoading = false;\n\n        resolve([assets, ...args]);\n      };\n    });\n\n    scene.load.start();\n\n    // we didn't load anything\n    if (scene.load.isReady()) {\n      if (completeResolve) {\n        completeResolve();\n      }\n    }\n\n    return promise;\n  };\n\n  return [reload, remove, done];\n}\n\nexport function reloadAssets(scene, assets) {\n  const {game} = scene;\n  const [reloadAsset, removeAsset, startReload] = assetReloader(scene);\n  const changesByType = {};\n\n  ['imageAssets', 'spriteAssets', 'musicAssets', 'soundAssets'].forEach((type) => {\n    const gameAssets = game.assets[type];\n    const leftover = {...gameAssets};\n    const changes = changesByType[type] = [];\n\n    Object.entries(assets[type]).forEach(([key, value]) => {\n      if (!gameAssets[key]) {\n        changes.push(`+${key}`);\n        reloadAsset(type, key, value, true);\n      } else {\n        delete leftover[key];\n\n        if (JSON.stringify(gameAssets[key]) === JSON.stringify(value)) {\n          return;\n        }\n\n        changes.push(`Δ${key}`);\n        reloadAsset(type, key, value, false);\n      }\n    });\n\n    Object.entries(leftover).forEach(([key, value]) => {\n      changes.push(`-${key}`);\n      removeAsset(type, key);\n    });\n  });\n\n  return startReload(changesByType);\n}\n","module.exports = __webpack_public_path__ + \"static/media/cover.e398f940.png\";","module.exports = __webpack_public_path__ + \"static/media/twitchLogo.754c9f3b.png\";","module.exports = __webpack_public_path__ + \"static/media/twitterLogo.5ee804a1.png\";","export const builtinCoordFragments = [\n  ['shockwave', {\n    time: ['float', 0, null],\n    center: ['vec2', [0.5, 0.5], null],\n    scale: ['float', 10.0, 0, 500],\n    range: ['float', 0.8, 0, 10],\n    thickness: ['float', 0.1, 0, 10],\n    speed: ['float', 3.0, 0, 50],\n    inner: ['float', 0.09, 0, 1],\n    dropoff: ['float', 40.0, 0, 500],\n  }, `\n      float shockwave_dt = (scene_time - shockwave_time) / 3333.0;\n      if (shockwave_time > 0.0 && shockwave_dt < 10.0) {\n        float dist = distance(uv, shockwave_center - camera_scroll);\n        float t = shockwave_dt * shockwave_speed;\n        if (dist <= t + shockwave_thickness && dist >= t - shockwave_thickness && dist >= shockwave_inner) {\n          float diff = dist - t;\n          float scaleDiff = 1.0 - pow(abs(diff * shockwave_scale), shockwave_range);\n          float diffTime = diff * scaleDiff;\n          vec2 diffTexCoord = normalize(uv - (shockwave_center - camera_scroll));\n          uv += (diffTexCoord * diffTime) / (t * dist * shockwave_dropoff);\n        }\n      }\n  `],\n];\n\nexport const builtinColorFragments = [\n  ['blur', {\n    amount: ['float', 0, null],\n  }, `\n      if (blur_amount > 0.0) {\n        float b = blur_amount / resolution.x;\n        c *= 0.2270270270;\n        c += texture2D(uMainSampler, vec2(uv.x - 4.0*b, uv.y - 4.0*b)) * 0.0162162162;\n        c += texture2D(uMainSampler, vec2(uv.x - 3.0*b, uv.y - 3.0*b)) * 0.0540540541;\n        c += texture2D(uMainSampler, vec2(uv.x - 2.0*b, uv.y - 2.0*b)) * 0.1216216216;\n        c += texture2D(uMainSampler, vec2(uv.x - 1.0*b, uv.y - 1.0*b)) * 0.1945945946;\n        c += texture2D(uMainSampler, vec2(uv.x + 1.0*b, uv.y + 1.0*b)) * 0.1945945946;\n        c += texture2D(uMainSampler, vec2(uv.x + 2.0*b, uv.y + 2.0*b)) * 0.1216216216;\n        c += texture2D(uMainSampler, vec2(uv.x + 3.0*b, uv.y + 3.0*b)) * 0.0540540541;\n        c += texture2D(uMainSampler, vec2(uv.x + 4.0*b, uv.y + 4.0*b)) * 0.0162162162;\n      }\n  `],\n\n  ['aberration', {\n    red: ['vec2', [0, 0], null],\n    green: ['vec2', [0, 0], null],\n    blue: ['vec2', [0, 0], null],\n  }, `\n    c.r += texture2D(uMainSampler, vec2(uv.x - aberration_red.x, uv.y - aberration_red.y)).r;\n    c.r -= texture2D(uMainSampler, vec2(uv.x + aberration_red.x, uv.y + aberration_red.y)).r;\n\n    c.g += texture2D(uMainSampler, vec2(uv.x - aberration_green.x, uv.y - aberration_green.y)).g;\n    c.g -= texture2D(uMainSampler, vec2(uv.x + aberration_green.x, uv.y + aberration_green.y)).g;\n\n    c.b += texture2D(uMainSampler, vec2(uv.x - aberration_blue.x, uv.y - aberration_blue.y)).b;\n    c.b -= texture2D(uMainSampler, vec2(uv.x + aberration_blue.x, uv.y + aberration_blue.y)).b;\n  `],\n\n  ['tint', {\n    color: ['rgba', [1, 1, 1, 1]],\n  }, `\n      c.r *= tint_color.r * tint_color.a;\n      c.g *= tint_color.g * tint_color.a;\n      c.b *= tint_color.b * tint_color.a;\n  `],\n];\n\nexport const shaderTypeMeta = {\n  float: [1, 'float', 'setFloat1'],\n  bool: [1, 'float', 'setFloat1'],\n  vec2: [2, 'vec2', 'setFloat2v', 'x', 'y'],\n  vec3: [3, 'vec3', 'setFloat3v', 'x', 'y', 'z'],\n  vec4: [4, 'vec4', 'setFloat4v', 'x', 'y', 'z', 'w'],\n  rgb: [3, 'vec3', 'setFloat3v', 'r', 'g', 'b'],\n  rgba: [4, 'vec4', 'setFloat4v', 'r', 'g', 'b', 'a'],\n};\n\nexport function propNamesForUniform(fragmentName, uniformName, spec) {\n  let [type] = spec;\n\n  if (!type) {\n    type = 'float';\n  }\n\n  const [count, , , ...subvariables] = shaderTypeMeta[type];\n\n  if (type === 'rgb') {\n    let sub = '';\n    if (!uniformName.match(/color$/i)) {\n      sub = '_color';\n    }\n\n    return [`shader.${fragmentName}.${uniformName}${sub}`];\n  } else if (type === 'rgba') {\n    return [\n      `shader.${fragmentName}.${uniformName}_color`,\n      `shader.${fragmentName}.${uniformName}_alpha`,\n    ];\n  } else if (count === 1) {\n    return [`shader.${fragmentName}.${uniformName}`];\n  } else {\n    return subvariables.map((sub, i) => {\n      return `shader.${fragmentName}.${uniformName}_${sub}`;\n    });\n  }\n}\n\nfunction injectBuiltinFragment(fragments, isCoord) {\n  let primary = builtinColorFragments;\n  let secondary = builtinCoordFragments;\n  let primaryName = 'shaderColorFragments';\n  let secondaryName = 'shaderCoordFragments';\n\n  if (!fragments) {\n    return [];\n  }\n\n  if (isCoord) {\n    [primary, secondary] = [secondary, primary];\n    [primaryName, secondaryName] = [secondaryName, primaryName];\n  }\n\n  if (fragments.length === 0) {\n    fragments.push(...primary);\n    return;\n  }\n\n  for (let i = 0; i < fragments.length; i += 1) {\n    if (typeof fragments[i] === 'string') {\n      const name = fragments[i];\n      const replacement = primary.find(([p]) => name === p);\n      if (replacement) {\n        fragments[i] = replacement;\n      } else {\n        // eslint-disable-next-line no-console\n        console.error(`Unable to find builtin ${primaryName} '${name}'; available are: ${primary.map(([p]) => p).join(', ')}`);\n\n        const suggestion = secondary.find(([p]) => name === p);\n        if (suggestion) {\n          // eslint-disable-next-line no-console\n          console.error(`Perhaps you meant the builtin ${secondaryName} '${name}'?`);\n        }\n\n        fragments.splice(i, 1);\n        i -= 1;\n      }\n    }\n  }\n}\n\nexport function shaderProps(coordFragments, colorFragments) {\n  const props = {};\n\n  injectBuiltinFragment(coordFragments, true);\n  injectBuiltinFragment(colorFragments, false);\n\n  [...(coordFragments || []), ...(colorFragments || [])].forEach(([fragmentName, uniforms]) => {\n    props[`shader.${fragmentName}.enabled`] = [true, (value, scene, game) => game.recompileShaders()];\n\n    Object.entries(uniforms).forEach(([uniformName, spec]) => {\n      // eslint-disable-next-line prefer-const\n      let [type, ...config] = spec;\n\n      const name = `${fragmentName}_${uniformName}`;\n\n      if (!type) {\n        type = 'float';\n      }\n\n      if (!shaderTypeMeta[type]) {\n        throw new Error(`Unknown type ${type} for shader ${name}`);\n      }\n\n      const [count, , setter, ...subvariables] = shaderTypeMeta[type];\n\n      if (uniformName.match(/color$/i) && type !== 'rgb' && type !== 'rgba') {\n        throw new Error(`Shader uniform ${name} ends with /color$/i but it isn't using type rgb or rgba`);\n      }\n\n      if (type === 'rgb') {\n        if (config.length > 2\n            || config.length === 0\n            || !Array.isArray(config[0])\n            || config[0].length !== 3\n            || (config.length === 2 && config[1] !== null)) {\n          throw new Error(`Expected rgb shader uniform ${name} to have shape ['rgb', [0.95, 0.25, 0.5]] or ['rgb', [0.95, 0.25, 0.5], null]`);\n        }\n\n        let sub = '';\n        if (!uniformName.match(/color$/i)) {\n          sub = '_color';\n        }\n\n        if (config[1] === null) {\n          config.push((scene) => (scene[name] ? scene[name].map((c) => c * 255.0) : undefined));\n        } else {\n          config.push((_, scene, game) => {\n            if (!scene.shader) {\n              return;\n            }\n            const value = game.prop(`shader.${fragmentName}.${uniformName}${sub}`).map((c) => c / 255.0);\n            scene.shader[setter](name, value);\n          });\n        }\n\n        config[0] = config[0].map((c) => c * 255.0);\n        props[`shader.${fragmentName}.${uniformName}${sub}`] = config;\n      } else if (type === 'rgba') {\n        if (config.length > 2\n            || config.length === 0\n            || !Array.isArray(config[0])\n            || config[0].length !== 4\n            || (config.length === 2 && config[1] !== null)) {\n          throw new Error(`Expected rgbs shader uniform ${name} to have shape ['rgba', [0.95, 0.25, 0.5, 1]] or ['rgb', [0.95, 0.25, 0.5, 1], null]`);\n        }\n\n        const colorConfig = [config[0].filter((_, i) => i < 3)];\n        const alphaConfig = [config[0][3]];\n\n        if (config[1] === null) {\n          colorConfig.push(null);\n          alphaConfig.push(null);\n\n          colorConfig.push((scene) => (scene[name] ? scene[name].filter((_, i) => i < 3).map((c) => c * 255.0) : undefined));\n          alphaConfig.push((scene) => (scene[name] ? scene[name][3] : undefined));\n        } else {\n          alphaConfig.push(0, 1); // min and max\n\n          const cb = (value, scene, game) => {\n            if (!scene.shader) {\n              return;\n            }\n\n            scene.shader[setter](name, [\n              ...game.prop(`shader.${fragmentName}.${uniformName}_color`).map((c) => c / 255.0),\n              game.prop(`shader.${fragmentName}.${uniformName}_alpha`),\n            ]);\n          };\n          colorConfig.push(cb);\n          alphaConfig.push(cb);\n        }\n\n        colorConfig[0] = colorConfig[0].map((c) => c * 255.0);\n        props[`shader.${fragmentName}.${uniformName}_color`] = colorConfig;\n        props[`shader.${fragmentName}.${uniformName}_alpha`] = alphaConfig;\n      } else if (type === 'bool') {\n        if (config[1] === null) {\n          config.push((scene) => scene[name]);\n        } else if (typeof config[config.length - 1] !== 'function') {\n          config.push((value, scene) => scene.shader && scene.shader[setter](name, value ? 1.0 : 0.0));\n        }\n\n        props[`shader.${fragmentName}.${uniformName}`] = config;\n      } else if (count === 1) {\n        if (config[1] === null) {\n          config.push((scene) => scene[name]);\n        } else if (typeof config[config.length - 1] !== 'function') {\n          config.push((value, scene) => scene.shader && scene.shader[setter](name, value));\n        }\n\n        if (config[0] === 0 && config[1] === null) {\n          config[0] = 0.1;\n        }\n\n        props[`shader.${fragmentName}.${uniformName}`] = config;\n      } else {\n        subvariables.forEach((sub, i) => {\n          const c = [...config];\n          c[0] = c[0][i];\n\n          if (c[1] === null) {\n            c.push((scene) => (scene[name] ? scene[name][i] : undefined));\n          } else if (typeof c[c.length - 1] !== 'function') {\n            c.push((_, scene, game) => {\n              if (!scene.shader) {\n                return;\n              }\n\n              const value = subvariables.map((s) => game.prop(`shader.${fragmentName}.${uniformName}_${s}`));\n              scene.shader[setter](name, value);\n            });\n          }\n\n          if (c[0] === 0 && c[1] === null) {\n            c[0] = 0.1;\n          }\n\n          props[`shader.${fragmentName}.${uniformName}_${sub}`] = c;\n        });\n      }\n    });\n  });\n\n  return props;\n}\n"],"sourceRoot":""}